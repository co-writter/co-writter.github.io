const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/firebase-DZ3l171S.js","assets/index.esm-CtTi9zbD.js"])))=>i.map(i=>d[i]);
var fU=Object.defineProperty;var nR=i=>{throw TypeError(i)};var pU=(i,e,t)=>e in i?fU(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var ye=(i,e,t)=>pU(i,typeof e!="symbol"?e+"":e,t),RE=(i,e,t)=>e.has(i)||nR("Cannot "+t);var f=(i,e,t)=>(RE(i,e,"read from private field"),t?t.call(i):e.get(i)),P=(i,e,t)=>e.has(i)?nR("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),N=(i,e,t,n)=>(RE(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),j=(i,e,t)=>(RE(i,e,"access private method"),t);var Kn=(i,e,t,n)=>({set _(s){N(i,e,s,t)},get _(){return f(i,e,n)}});function mU(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in i)){const a=Object.getOwnPropertyDescriptor(n,s);a&&Object.defineProperty(i,s,a.get?a:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();function Ob(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var ME={exports:{}},Bm={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iR;function gU(){if(iR)return Bm;iR=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(n,s,a){var o=null;if(a!==void 0&&(o=""+a),s.key!==void 0&&(o=""+s.key),"key"in s){a={};for(var c in s)c!=="key"&&(a[c]=s[c])}else a=s;return s=a.ref,{$$typeof:i,type:n,key:o,ref:s!==void 0?s:null,props:a}}return Bm.Fragment=e,Bm.jsx=t,Bm.jsxs=t,Bm}var sR;function yU(){return sR||(sR=1,ME.exports=gU()),ME.exports}var m=yU(),kE={exports:{}},Xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rR;function vU(){if(rR)return Xe;rR=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),y=Symbol.for("react.activity"),v=Symbol.iterator;function w(q){return q===null||typeof q!="object"?null:(q=v&&q[v]||q["@@iterator"],typeof q=="function"?q:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,T={};function _(q,Z,ue){this.props=q,this.context=Z,this.refs=T,this.updater=ue||A}_.prototype.isReactComponent={},_.prototype.setState=function(q,Z){if(typeof q!="object"&&typeof q!="function"&&q!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,q,Z,"setState")},_.prototype.forceUpdate=function(q){this.updater.enqueueForceUpdate(this,q,"forceUpdate")};function D(){}D.prototype=_.prototype;function R(q,Z,ue){this.props=q,this.context=Z,this.refs=T,this.updater=ue||A}var L=R.prototype=new D;L.constructor=R,C(L,_.prototype),L.isPureReactComponent=!0;var F=Array.isArray;function U(){}var M={H:null,A:null,T:null,S:null},O=Object.prototype.hasOwnProperty;function z(q,Z,ue){var me=ue.ref;return{$$typeof:i,type:q,key:Z,ref:me!==void 0?me:null,props:ue}}function J(q,Z){return z(q.type,Z,q.props)}function G(q){return typeof q=="object"&&q!==null&&q.$$typeof===i}function X(q){var Z={"=":"=0",":":"=2"};return"$"+q.replace(/[=:]/g,function(ue){return Z[ue]})}var ie=/\/+/g;function $(q,Z){return typeof q=="object"&&q!==null&&q.key!=null?X(""+q.key):Z.toString(36)}function ee(q){switch(q.status){case"fulfilled":return q.value;case"rejected":throw q.reason;default:switch(typeof q.status=="string"?q.then(U,U):(q.status="pending",q.then(function(Z){q.status==="pending"&&(q.status="fulfilled",q.value=Z)},function(Z){q.status==="pending"&&(q.status="rejected",q.reason=Z)})),q.status){case"fulfilled":return q.value;case"rejected":throw q.reason}}throw q}function H(q,Z,ue,me,be){var _e=typeof q;(_e==="undefined"||_e==="boolean")&&(q=null);var Te=!1;if(q===null)Te=!0;else switch(_e){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(q.$$typeof){case i:case e:Te=!0;break;case p:return Te=q._init,H(Te(q._payload),Z,ue,me,be)}}if(Te)return be=be(q),Te=me===""?"."+$(q,0):me,F(be)?(ue="",Te!=null&&(ue=Te.replace(ie,"$&/")+"/"),H(be,Z,ue,"",function(lt){return lt})):be!=null&&(G(be)&&(be=J(be,ue+(be.key==null||q&&q.key===be.key?"":(""+be.key).replace(ie,"$&/")+"/")+Te)),Z.push(be)),1;Te=0;var mt=me===""?".":me+":";if(F(q))for(var rt=0;rt<q.length;rt++)me=q[rt],_e=mt+$(me,rt),Te+=H(me,Z,ue,_e,be);else if(rt=w(q),typeof rt=="function")for(q=rt.call(q),rt=0;!(me=q.next()).done;)me=me.value,_e=mt+$(me,rt++),Te+=H(me,Z,ue,_e,be);else if(_e==="object"){if(typeof q.then=="function")return H(ee(q),Z,ue,me,be);throw Z=String(q),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(q).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.")}return Te}function V(q,Z,ue){if(q==null)return q;var me=[],be=0;return H(q,me,"","",function(_e){return Z.call(ue,_e,be++)}),me}function Q(q){if(q._status===-1){var Z=q._result;Z=Z(),Z.then(function(ue){(q._status===0||q._status===-1)&&(q._status=1,q._result=ue)},function(ue){(q._status===0||q._status===-1)&&(q._status=2,q._result=ue)}),q._status===-1&&(q._status=0,q._result=Z)}if(q._status===1)return q._result.default;throw q._result}var ce=typeof reportError=="function"?reportError:function(q){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Z=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof q=="object"&&q!==null&&typeof q.message=="string"?String(q.message):String(q),error:q});if(!window.dispatchEvent(Z))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",q);return}console.error(q)},ve={map:V,forEach:function(q,Z,ue){V(q,function(){Z.apply(this,arguments)},ue)},count:function(q){var Z=0;return V(q,function(){Z++}),Z},toArray:function(q){return V(q,function(Z){return Z})||[]},only:function(q){if(!G(q))throw Error("React.Children.only expected to receive a single React element child.");return q}};return Xe.Activity=y,Xe.Children=ve,Xe.Component=_,Xe.Fragment=t,Xe.Profiler=s,Xe.PureComponent=R,Xe.StrictMode=n,Xe.Suspense=u,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Xe.__COMPILER_RUNTIME={__proto__:null,c:function(q){return M.H.useMemoCache(q)}},Xe.cache=function(q){return function(){return q.apply(null,arguments)}},Xe.cacheSignal=function(){return null},Xe.cloneElement=function(q,Z,ue){if(q==null)throw Error("The argument must be a React element, but you passed "+q+".");var me=C({},q.props),be=q.key;if(Z!=null)for(_e in Z.key!==void 0&&(be=""+Z.key),Z)!O.call(Z,_e)||_e==="key"||_e==="__self"||_e==="__source"||_e==="ref"&&Z.ref===void 0||(me[_e]=Z[_e]);var _e=arguments.length-2;if(_e===1)me.children=ue;else if(1<_e){for(var Te=Array(_e),mt=0;mt<_e;mt++)Te[mt]=arguments[mt+2];me.children=Te}return z(q.type,be,me)},Xe.createContext=function(q){return q={$$typeof:o,_currentValue:q,_currentValue2:q,_threadCount:0,Provider:null,Consumer:null},q.Provider=q,q.Consumer={$$typeof:a,_context:q},q},Xe.createElement=function(q,Z,ue){var me,be={},_e=null;if(Z!=null)for(me in Z.key!==void 0&&(_e=""+Z.key),Z)O.call(Z,me)&&me!=="key"&&me!=="__self"&&me!=="__source"&&(be[me]=Z[me]);var Te=arguments.length-2;if(Te===1)be.children=ue;else if(1<Te){for(var mt=Array(Te),rt=0;rt<Te;rt++)mt[rt]=arguments[rt+2];be.children=mt}if(q&&q.defaultProps)for(me in Te=q.defaultProps,Te)be[me]===void 0&&(be[me]=Te[me]);return z(q,_e,be)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(q){return{$$typeof:c,render:q}},Xe.isValidElement=G,Xe.lazy=function(q){return{$$typeof:p,_payload:{_status:-1,_result:q},_init:Q}},Xe.memo=function(q,Z){return{$$typeof:d,type:q,compare:Z===void 0?null:Z}},Xe.startTransition=function(q){var Z=M.T,ue={};M.T=ue;try{var me=q(),be=M.S;be!==null&&be(ue,me),typeof me=="object"&&me!==null&&typeof me.then=="function"&&me.then(U,ce)}catch(_e){ce(_e)}finally{Z!==null&&ue.types!==null&&(Z.types=ue.types),M.T=Z}},Xe.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Xe.use=function(q){return M.H.use(q)},Xe.useActionState=function(q,Z,ue){return M.H.useActionState(q,Z,ue)},Xe.useCallback=function(q,Z){return M.H.useCallback(q,Z)},Xe.useContext=function(q){return M.H.useContext(q)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(q,Z){return M.H.useDeferredValue(q,Z)},Xe.useEffect=function(q,Z){return M.H.useEffect(q,Z)},Xe.useEffectEvent=function(q){return M.H.useEffectEvent(q)},Xe.useId=function(){return M.H.useId()},Xe.useImperativeHandle=function(q,Z,ue){return M.H.useImperativeHandle(q,Z,ue)},Xe.useInsertionEffect=function(q,Z){return M.H.useInsertionEffect(q,Z)},Xe.useLayoutEffect=function(q,Z){return M.H.useLayoutEffect(q,Z)},Xe.useMemo=function(q,Z){return M.H.useMemo(q,Z)},Xe.useOptimistic=function(q,Z){return M.H.useOptimistic(q,Z)},Xe.useReducer=function(q,Z,ue){return M.H.useReducer(q,Z,ue)},Xe.useRef=function(q){return M.H.useRef(q)},Xe.useState=function(q){return M.H.useState(q)},Xe.useSyncExternalStore=function(q,Z,ue){return M.H.useSyncExternalStore(q,Z,ue)},Xe.useTransition=function(){return M.H.useTransition()},Xe.version="19.2.1",Xe}var aR;function cC(){return aR||(aR=1,kE.exports=vU()),kE.exports}var k=cC();const wn=Ob(k),CD=mU({__proto__:null,default:wn},[k]);var DE={exports:{}},Om={},IE={exports:{}},PE={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oR;function xU(){return oR||(oR=1,(function(i){function e(H,V){var Q=H.length;H.push(V);e:for(;0<Q;){var ce=Q-1>>>1,ve=H[ce];if(0<s(ve,V))H[ce]=V,H[Q]=ve,Q=ce;else break e}}function t(H){return H.length===0?null:H[0]}function n(H){if(H.length===0)return null;var V=H[0],Q=H.pop();if(Q!==V){H[0]=Q;e:for(var ce=0,ve=H.length,q=ve>>>1;ce<q;){var Z=2*(ce+1)-1,ue=H[Z],me=Z+1,be=H[me];if(0>s(ue,Q))me<ve&&0>s(be,ue)?(H[ce]=be,H[me]=Q,ce=me):(H[ce]=ue,H[Z]=Q,ce=Z);else if(me<ve&&0>s(be,Q))H[ce]=be,H[me]=Q,ce=me;else break e}}return V}function s(H,V){var Q=H.sortIndex-V.sortIndex;return Q!==0?Q:H.id-V.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;i.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();i.unstable_now=function(){return o.now()-c}}var u=[],d=[],p=1,y=null,v=3,w=!1,A=!1,C=!1,T=!1,_=typeof setTimeout=="function"?setTimeout:null,D=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;function L(H){for(var V=t(d);V!==null;){if(V.callback===null)n(d);else if(V.startTime<=H)n(d),V.sortIndex=V.expirationTime,e(u,V);else break;V=t(d)}}function F(H){if(C=!1,L(H),!A)if(t(u)!==null)A=!0,U||(U=!0,X());else{var V=t(d);V!==null&&ee(F,V.startTime-H)}}var U=!1,M=-1,O=5,z=-1;function J(){return T?!0:!(i.unstable_now()-z<O)}function G(){if(T=!1,U){var H=i.unstable_now();z=H;var V=!0;try{e:{A=!1,C&&(C=!1,D(M),M=-1),w=!0;var Q=v;try{t:{for(L(H),y=t(u);y!==null&&!(y.expirationTime>H&&J());){var ce=y.callback;if(typeof ce=="function"){y.callback=null,v=y.priorityLevel;var ve=ce(y.expirationTime<=H);if(H=i.unstable_now(),typeof ve=="function"){y.callback=ve,L(H),V=!0;break t}y===t(u)&&n(u),L(H)}else n(u);y=t(u)}if(y!==null)V=!0;else{var q=t(d);q!==null&&ee(F,q.startTime-H),V=!1}}break e}finally{y=null,v=Q,w=!1}V=void 0}}finally{V?X():U=!1}}}var X;if(typeof R=="function")X=function(){R(G)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,$=ie.port2;ie.port1.onmessage=G,X=function(){$.postMessage(null)}}else X=function(){_(G,0)};function ee(H,V){M=_(function(){H(i.unstable_now())},V)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(H){H.callback=null},i.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<H?Math.floor(1e3/H):5},i.unstable_getCurrentPriorityLevel=function(){return v},i.unstable_next=function(H){switch(v){case 1:case 2:case 3:var V=3;break;default:V=v}var Q=v;v=V;try{return H()}finally{v=Q}},i.unstable_requestPaint=function(){T=!0},i.unstable_runWithPriority=function(H,V){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var Q=v;v=H;try{return V()}finally{v=Q}},i.unstable_scheduleCallback=function(H,V,Q){var ce=i.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ce+Q:ce):Q=ce,H){case 1:var ve=-1;break;case 2:ve=250;break;case 5:ve=1073741823;break;case 4:ve=1e4;break;default:ve=5e3}return ve=Q+ve,H={id:p++,callback:V,priorityLevel:H,startTime:Q,expirationTime:ve,sortIndex:-1},Q>ce?(H.sortIndex=Q,e(d,H),t(u)===null&&H===t(d)&&(C?(D(M),M=-1):C=!0,ee(F,Q-ce))):(H.sortIndex=ve,e(u,H),A||w||(A=!0,U||(U=!0,X()))),H},i.unstable_shouldYield=J,i.unstable_wrapCallback=function(H){var V=v;return function(){var Q=v;v=V;try{return H.apply(this,arguments)}finally{v=Q}}}})(PE)),PE}var lR;function bU(){return lR||(lR=1,IE.exports=xU()),IE.exports}var LE={exports:{}},Pi={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cR;function wU(){if(cR)return Pi;cR=1;var i=cC();function e(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)d+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var n={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function a(u,d,p){var y=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:y==null?null:""+y,children:u,containerInfo:d,implementation:p}}var o=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Pi.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Pi.createPortal=function(u,d){var p=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return a(u,d,null,p)},Pi.flushSync=function(u){var d=o.T,p=n.p;try{if(o.T=null,n.p=2,u)return u()}finally{o.T=d,n.p=p,n.d.f()}},Pi.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,n.d.C(u,d))},Pi.prefetchDNS=function(u){typeof u=="string"&&n.d.D(u)},Pi.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var p=d.as,y=c(p,d.crossOrigin),v=typeof d.integrity=="string"?d.integrity:void 0,w=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;p==="style"?n.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:y,integrity:v,fetchPriority:w}):p==="script"&&n.d.X(u,{crossOrigin:y,integrity:v,fetchPriority:w,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Pi.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var p=c(d.as,d.crossOrigin);n.d.M(u,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&n.d.M(u)},Pi.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var p=d.as,y=c(p,d.crossOrigin);n.d.L(u,p,{crossOrigin:y,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Pi.preloadModule=function(u,d){if(typeof u=="string")if(d){var p=c(d.as,d.crossOrigin);n.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else n.d.m(u)},Pi.requestFormReset=function(u){n.d.r(u)},Pi.unstable_batchedUpdates=function(u,d){return u(d)},Pi.useFormState=function(u,d,p){return o.H.useFormState(u,d,p)},Pi.useFormStatus=function(){return o.H.useHostTransitionStatus()},Pi.version="19.2.1",Pi}var uR;function TD(){if(uR)return LE.exports;uR=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),LE.exports=wU(),LE.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dR;function SU(){if(dR)return Om;dR=1;var i=bU(),e=cC(),t=TD();function n(r){var l="https://react.dev/errors/"+r;if(1<arguments.length){l+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)l+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+r+"; visit "+l+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function a(r){var l=r,h=r;if(r.alternate)for(;l.return;)l=l.return;else{r=l;do l=r,(l.flags&4098)!==0&&(h=l.return),r=l.return;while(r)}return l.tag===3?h:null}function o(r){if(r.tag===13){var l=r.memoizedState;if(l===null&&(r=r.alternate,r!==null&&(l=r.memoizedState)),l!==null)return l.dehydrated}return null}function c(r){if(r.tag===31){var l=r.memoizedState;if(l===null&&(r=r.alternate,r!==null&&(l=r.memoizedState)),l!==null)return l.dehydrated}return null}function u(r){if(a(r)!==r)throw Error(n(188))}function d(r){var l=r.alternate;if(!l){if(l=a(r),l===null)throw Error(n(188));return l!==r?null:r}for(var h=r,g=l;;){var S=h.return;if(S===null)break;var E=S.alternate;if(E===null){if(g=S.return,g!==null){h=g;continue}break}if(S.child===E.child){for(E=S.child;E;){if(E===h)return u(S),r;if(E===g)return u(S),l;E=E.sibling}throw Error(n(188))}if(h.return!==g.return)h=S,g=E;else{for(var I=!1,B=S.child;B;){if(B===h){I=!0,h=S,g=E;break}if(B===g){I=!0,g=S,h=E;break}B=B.sibling}if(!I){for(B=E.child;B;){if(B===h){I=!0,h=E,g=S;break}if(B===g){I=!0,g=E,h=S;break}B=B.sibling}if(!I)throw Error(n(189))}}if(h.alternate!==g)throw Error(n(190))}if(h.tag!==3)throw Error(n(188));return h.stateNode.current===h?r:l}function p(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r;for(r=r.child;r!==null;){if(l=p(r),l!==null)return l;r=r.sibling}return null}var y=Object.assign,v=Symbol.for("react.element"),w=Symbol.for("react.transitional.element"),A=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),R=Symbol.for("react.context"),L=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),U=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),z=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),G=Symbol.iterator;function X(r){return r===null||typeof r!="object"?null:(r=G&&r[G]||r["@@iterator"],typeof r=="function"?r:null)}var ie=Symbol.for("react.client.reference");function $(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===ie?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case C:return"Fragment";case _:return"Profiler";case T:return"StrictMode";case F:return"Suspense";case U:return"SuspenseList";case z:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case A:return"Portal";case R:return r.displayName||"Context";case D:return(r._context.displayName||"Context")+".Consumer";case L:var l=r.render;return r=r.displayName,r||(r=l.displayName||l.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case M:return l=r.displayName||null,l!==null?l:$(r.type)||"Memo";case O:l=r._payload,r=r._init;try{return $(r(l))}catch{}}return null}var ee=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Q={pending:!1,data:null,method:null,action:null},ce=[],ve=-1;function q(r){return{current:r}}function Z(r){0>ve||(r.current=ce[ve],ce[ve]=null,ve--)}function ue(r,l){ve++,ce[ve]=r.current,r.current=l}var me=q(null),be=q(null),_e=q(null),Te=q(null);function mt(r,l){switch(ue(_e,l),ue(be,r),ue(me,null),l.nodeType){case 9:case 11:r=(r=l.documentElement)&&(r=r.namespaceURI)?C2(r):0;break;default:if(r=l.tagName,l=l.namespaceURI)l=C2(l),r=T2(l,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}Z(me),ue(me,r)}function rt(){Z(me),Z(be),Z(_e)}function lt(r){r.memoizedState!==null&&ue(Te,r);var l=me.current,h=T2(l,r.type);l!==h&&(ue(be,r),ue(me,h))}function En(r){be.current===r&&(Z(me),Z(be)),Te.current===r&&(Z(Te),Lm._currentValue=Q)}var wt,Ye;function at(r){if(wt===void 0)try{throw Error()}catch(h){var l=h.stack.trim().match(/\n( *(at )?)/);wt=l&&l[1]||"",Ye=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+wt+r+Ye}var pe=!1;function Se(r,l){if(!r||pe)return"";pe=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(l){var fe=function(){throw Error()};if(Object.defineProperty(fe.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(fe,[])}catch(le){var ae=le}Reflect.construct(r,[],fe)}else{try{fe.call()}catch(le){ae=le}r.call(fe.prototype)}}else{try{throw Error()}catch(le){ae=le}(fe=r())&&typeof fe.catch=="function"&&fe.catch(function(){})}}catch(le){if(le&&ae&&typeof le.stack=="string")return[le.stack,ae.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var S=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");S&&S.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=g.DetermineComponentFrameRoot(),I=E[0],B=E[1];if(I&&B){var Y=I.split(`
`),re=B.split(`
`);for(S=g=0;g<Y.length&&!Y[g].includes("DetermineComponentFrameRoot");)g++;for(;S<re.length&&!re[S].includes("DetermineComponentFrameRoot");)S++;if(g===Y.length||S===re.length)for(g=Y.length-1,S=re.length-1;1<=g&&0<=S&&Y[g]!==re[S];)S--;for(;1<=g&&0<=S;g--,S--)if(Y[g]!==re[S]){if(g!==1||S!==1)do if(g--,S--,0>S||Y[g]!==re[S]){var de=`
`+Y[g].replace(" at new "," at ");return r.displayName&&de.includes("<anonymous>")&&(de=de.replace("<anonymous>",r.displayName)),de}while(1<=g&&0<=S);break}}}finally{pe=!1,Error.prepareStackTrace=h}return(h=r?r.displayName||r.name:"")?at(h):""}function ze(r,l){switch(r.tag){case 26:case 27:case 5:return at(r.type);case 16:return at("Lazy");case 13:return r.child!==l&&l!==null?at("Suspense Fallback"):at("Suspense");case 19:return at("SuspenseList");case 0:case 15:return Se(r.type,!1);case 11:return Se(r.type.render,!1);case 1:return Se(r.type,!0);case 31:return at("Activity");default:return""}}function $e(r){try{var l="",h=null;do l+=ze(r,h),h=r,r=r.return;while(r);return l}catch(g){return`
Error generating stack: `+g.message+`
`+g.stack}}var gt=Object.prototype.hasOwnProperty,Xn=i.unstable_scheduleCallback,rn=i.unstable_cancelCallback,On=i.unstable_shouldYield,Ja=i.unstable_requestPaint,St=i.unstable_now,ar=i.unstable_getCurrentPriorityLevel,jr=i.unstable_ImmediatePriority,Bt=i.unstable_UserBlockingPriority,Et=i.unstable_NormalPriority,an=i.unstable_LowPriority,In=i.unstable_IdlePriority,rs=i.log,tu=i.unstable_setDisableYieldValue,Br=null,gn=null;function Or(r){if(typeof rs=="function"&&tu(r),gn&&typeof gn.setStrictMode=="function")try{gn.setStrictMode(Br,r)}catch{}}var Ii=Math.clz32?Math.clz32:U0,F0=Math.log,xw=Math.LN2;function U0(r){return r>>>=0,r===0?32:31-(F0(r)/xw|0)|0}var Ka=256,nu=262144,xl=4194304;function Qa(r){var l=r&42;if(l!==0)return l;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function iu(r,l,h){var g=r.pendingLanes;if(g===0)return 0;var S=0,E=r.suspendedLanes,I=r.pingedLanes;r=r.warmLanes;var B=g&134217727;return B!==0?(g=B&~E,g!==0?S=Qa(g):(I&=B,I!==0?S=Qa(I):h||(h=B&~r,h!==0&&(S=Qa(h))))):(B=g&~E,B!==0?S=Qa(B):I!==0?S=Qa(I):h||(h=g&~r,h!==0&&(S=Qa(h)))),S===0?0:l!==0&&l!==S&&(l&E)===0&&(E=S&-S,h=l&-l,E>=h||E===32&&(h&4194048)!==0)?l:S}function su(r,l){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&l)===0}function j0(r,l){switch(r){case 1:case 2:case 4:case 8:case 64:return l+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return l+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ru(){var r=xl;return xl<<=1,(xl&62914560)===0&&(xl=4194304),r}function bl(r){for(var l=[],h=0;31>h;h++)l.push(r);return l}function wl(r,l){r.pendingLanes|=l,l!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function bw(r,l,h,g,S,E){var I=r.pendingLanes;r.pendingLanes=h,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=h,r.entangledLanes&=h,r.errorRecoveryDisabledLanes&=h,r.shellSuspendCounter=0;var B=r.entanglements,Y=r.expirationTimes,re=r.hiddenUpdates;for(h=I&~h;0<h;){var de=31-Ii(h),fe=1<<de;B[de]=0,Y[de]=-1;var ae=re[de];if(ae!==null)for(re[de]=null,de=0;de<ae.length;de++){var le=ae[de];le!==null&&(le.lane&=-536870913)}h&=~fe}g!==0&&B0(r,g,0),E!==0&&S===0&&r.tag!==0&&(r.suspendedLanes|=E&~(I&~l))}function B0(r,l,h){r.pendingLanes|=l,r.suspendedLanes&=~l;var g=31-Ii(l);r.entangledLanes|=l,r.entanglements[g]=r.entanglements[g]|1073741824|h&261930}function W(r,l){var h=r.entangledLanes|=l;for(r=r.entanglements;h;){var g=31-Ii(h),S=1<<g;S&l|r[g]&l&&(r[g]|=l),h&=~S}}function te(r,l){var h=l&-l;return h=(h&42)!==0?1:oe(h),(h&(r.suspendedLanes|l))!==0?0:h}function oe(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function ge(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function xe(){var r=V.p;return r!==0?r:(r=window.event,r===void 0?32:X2(r.type))}function je(r,l){var h=V.p;try{return V.p=r,l()}finally{V.p=h}}var ke=Math.random().toString(36).slice(2),Ee="__reactFiber$"+ke,Ce="__reactProps$"+ke,Fe="__reactContainer$"+ke,Ge="__reactEvents$"+ke,Oe="__reactListeners$"+ke,We="__reactHandles$"+ke,Mt="__reactResources$"+ke,on="__reactMarker$"+ke;function An(r){delete r[Ee],delete r[Ce],delete r[Ge],delete r[Oe],delete r[We]}function At(r){var l=r[Ee];if(l)return l;for(var h=r.parentNode;h;){if(l=h[Fe]||h[Ee]){if(h=l.alternate,l.child!==null||h!==null&&h.child!==null)for(r=I2(r);r!==null;){if(h=r[Ee])return h;r=I2(r)}return l}r=h,h=r.parentNode}return null}function Ct(r){if(r=r[Ee]||r[Fe]){var l=r.tag;if(l===5||l===6||l===13||l===31||l===26||l===27||l===3)return r}return null}function Ts(r){var l=r.tag;if(l===5||l===26||l===27||l===6)return r.stateNode;throw Error(n(33))}function or(r){var l=r[Mt];return l||(l=r[Mt]={hoistableStyles:new Map,hoistableScripts:new Map}),l}function Xt(r){r[on]=!0}var _s=new Set,Zd={};function Ns(r,l){as(r,l),as(r+"Capture",l)}function as(r,l){for(Zd[r]=l,r=0;r<l.length;r++)_s.add(l[r])}var eh=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),au={},dt={};function si(r){return gt.call(dt,r)?!0:gt.call(au,r)?!1:eh.test(r)?dt[r]=!0:(au[r]=!0,!1)}function Hr(r,l,h){if(si(l))if(h===null)r.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":r.removeAttribute(l);return;case"boolean":var g=l.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){r.removeAttribute(l);return}}r.setAttribute(l,""+h)}}function lr(r,l,h){if(h===null)r.removeAttribute(l);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(l);return}r.setAttribute(l,""+h)}}function Tt(r,l,h,g){if(g===null)r.removeAttribute(h);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(h);return}r.setAttributeNS(l,h,""+g)}}function yi(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Kp(r){var l=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(l==="checkbox"||l==="radio")}function ww(r,l,h){var g=Object.getOwnPropertyDescriptor(r.constructor.prototype,l);if(!r.hasOwnProperty(l)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var S=g.get,E=g.set;return Object.defineProperty(r,l,{configurable:!0,get:function(){return S.call(this)},set:function(I){h=""+I,E.call(this,I)}}),Object.defineProperty(r,l,{enumerable:g.enumerable}),{getValue:function(){return h},setValue:function(I){h=""+I},stopTracking:function(){r._valueTracker=null,delete r[l]}}}}function Sw(r){if(!r._valueTracker){var l=Kp(r)?"checked":"value";r._valueTracker=ww(r,l,""+r[l])}}function vT(r){if(!r)return!1;var l=r._valueTracker;if(!l)return!0;var h=l.getValue(),g="";return r&&(g=Kp(r)?r.checked?"true":"false":r.value),r=g,r!==h?(l.setValue(r),!0):!1}function O0(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var o3=/[\n"\\]/g;function cr(r){return r.replace(o3,function(l){return"\\"+l.charCodeAt(0).toString(16)+" "})}function Ew(r,l,h,g,S,E,I,B){r.name="",I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"?r.type=I:r.removeAttribute("type"),l!=null?I==="number"?(l===0&&r.value===""||r.value!=l)&&(r.value=""+yi(l)):r.value!==""+yi(l)&&(r.value=""+yi(l)):I!=="submit"&&I!=="reset"||r.removeAttribute("value"),l!=null?Aw(r,I,yi(l)):h!=null?Aw(r,I,yi(h)):g!=null&&r.removeAttribute("value"),S==null&&E!=null&&(r.defaultChecked=!!E),S!=null&&(r.checked=S&&typeof S!="function"&&typeof S!="symbol"),B!=null&&typeof B!="function"&&typeof B!="symbol"&&typeof B!="boolean"?r.name=""+yi(B):r.removeAttribute("name")}function xT(r,l,h,g,S,E,I,B){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(r.type=E),l!=null||h!=null){if(!(E!=="submit"&&E!=="reset"||l!=null)){Sw(r);return}h=h!=null?""+yi(h):"",l=l!=null?""+yi(l):h,B||l===r.value||(r.value=l),r.defaultValue=l}g=g??S,g=typeof g!="function"&&typeof g!="symbol"&&!!g,r.checked=B?r.checked:!!g,r.defaultChecked=!!g,I!=null&&typeof I!="function"&&typeof I!="symbol"&&typeof I!="boolean"&&(r.name=I),Sw(r)}function Aw(r,l,h){l==="number"&&O0(r.ownerDocument)===r||r.defaultValue===""+h||(r.defaultValue=""+h)}function th(r,l,h,g){if(r=r.options,l){l={};for(var S=0;S<h.length;S++)l["$"+h[S]]=!0;for(h=0;h<r.length;h++)S=l.hasOwnProperty("$"+r[h].value),r[h].selected!==S&&(r[h].selected=S),S&&g&&(r[h].defaultSelected=!0)}else{for(h=""+yi(h),l=null,S=0;S<r.length;S++){if(r[S].value===h){r[S].selected=!0,g&&(r[S].defaultSelected=!0);return}l!==null||r[S].disabled||(l=r[S])}l!==null&&(l.selected=!0)}}function bT(r,l,h){if(l!=null&&(l=""+yi(l),l!==r.value&&(r.value=l),h==null)){r.defaultValue!==l&&(r.defaultValue=l);return}r.defaultValue=h!=null?""+yi(h):""}function wT(r,l,h,g){if(l==null){if(g!=null){if(h!=null)throw Error(n(92));if(ee(g)){if(1<g.length)throw Error(n(93));g=g[0]}h=g}h==null&&(h=""),l=h}h=yi(l),r.defaultValue=h,g=r.textContent,g===h&&g!==""&&g!==null&&(r.value=g),Sw(r)}function nh(r,l){if(l){var h=r.firstChild;if(h&&h===r.lastChild&&h.nodeType===3){h.nodeValue=l;return}}r.textContent=l}var l3=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ST(r,l,h){var g=l.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?g?r.setProperty(l,""):l==="float"?r.cssFloat="":r[l]="":g?r.setProperty(l,h):typeof h!="number"||h===0||l3.has(l)?l==="float"?r.cssFloat=h:r[l]=(""+h).trim():r[l]=h+"px"}function ET(r,l,h){if(l!=null&&typeof l!="object")throw Error(n(62));if(r=r.style,h!=null){for(var g in h)!h.hasOwnProperty(g)||l!=null&&l.hasOwnProperty(g)||(g.indexOf("--")===0?r.setProperty(g,""):g==="float"?r.cssFloat="":r[g]="");for(var S in l)g=l[S],l.hasOwnProperty(S)&&h[S]!==g&&ST(r,S,g)}else for(var E in l)l.hasOwnProperty(E)&&ST(r,E,l[E])}function Cw(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var c3=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),u3=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function H0(r){return u3.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function Za(){}var Tw=null;function _w(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ih=null,sh=null;function AT(r){var l=Ct(r);if(l&&(r=l.stateNode)){var h=r[Ce]||null;e:switch(r=l.stateNode,l.type){case"input":if(Ew(r,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),l=h.name,h.type==="radio"&&l!=null){for(h=r;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+cr(""+l)+'"][type="radio"]'),l=0;l<h.length;l++){var g=h[l];if(g!==r&&g.form===r.form){var S=g[Ce]||null;if(!S)throw Error(n(90));Ew(g,S.value,S.defaultValue,S.defaultValue,S.checked,S.defaultChecked,S.type,S.name)}}for(l=0;l<h.length;l++)g=h[l],g.form===r.form&&vT(g)}break e;case"textarea":bT(r,h.value,h.defaultValue);break e;case"select":l=h.value,l!=null&&th(r,!!h.multiple,l,!1)}}}var Nw=!1;function CT(r,l,h){if(Nw)return r(l,h);Nw=!0;try{var g=r(l);return g}finally{if(Nw=!1,(ih!==null||sh!==null)&&(Nv(),ih&&(l=ih,r=sh,sh=ih=null,AT(l),r)))for(l=0;l<r.length;l++)AT(r[l])}}function Qp(r,l){var h=r.stateNode;if(h===null)return null;var g=h[Ce]||null;if(g===null)return null;h=g[l];e:switch(l){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(r=r.type,g=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!g;break e;default:r=!1}if(r)return null;if(h&&typeof h!="function")throw Error(n(231,l,typeof h));return h}var eo=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rw=!1;if(eo)try{var Zp={};Object.defineProperty(Zp,"passive",{get:function(){Rw=!0}}),window.addEventListener("test",Zp,Zp),window.removeEventListener("test",Zp,Zp)}catch{Rw=!1}var Sl=null,Mw=null,z0=null;function TT(){if(z0)return z0;var r,l=Mw,h=l.length,g,S="value"in Sl?Sl.value:Sl.textContent,E=S.length;for(r=0;r<h&&l[r]===S[r];r++);var I=h-r;for(g=1;g<=I&&l[h-g]===S[E-g];g++);return z0=S.slice(r,1<g?1-g:void 0)}function G0(r){var l=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&l===13&&(r=13)):r=l,r===10&&(r=13),32<=r||r===13?r:0}function V0(){return!0}function _T(){return!1}function os(r){function l(h,g,S,E,I){this._reactName=h,this._targetInst=S,this.type=g,this.nativeEvent=E,this.target=I,this.currentTarget=null;for(var B in r)r.hasOwnProperty(B)&&(h=r[B],this[B]=h?h(E):E[B]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?V0:_T,this.isPropagationStopped=_T,this}return y(l.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=V0)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=V0)},persist:function(){},isPersistent:V0}),l}var ou={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},q0=os(ou),em=y({},ou,{view:0,detail:0}),d3=os(em),kw,Dw,tm,$0=y({},em,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Pw,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==tm&&(tm&&r.type==="mousemove"?(kw=r.screenX-tm.screenX,Dw=r.screenY-tm.screenY):Dw=kw=0,tm=r),kw)},movementY:function(r){return"movementY"in r?r.movementY:Dw}}),NT=os($0),h3=y({},$0,{dataTransfer:0}),f3=os(h3),p3=y({},em,{relatedTarget:0}),Iw=os(p3),m3=y({},ou,{animationName:0,elapsedTime:0,pseudoElement:0}),g3=os(m3),y3=y({},ou,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),v3=os(y3),x3=y({},ou,{data:0}),RT=os(x3),b3={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},w3={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},S3={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function E3(r){var l=this.nativeEvent;return l.getModifierState?l.getModifierState(r):(r=S3[r])?!!l[r]:!1}function Pw(){return E3}var A3=y({},em,{key:function(r){if(r.key){var l=b3[r.key]||r.key;if(l!=="Unidentified")return l}return r.type==="keypress"?(r=G0(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?w3[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Pw,charCode:function(r){return r.type==="keypress"?G0(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?G0(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),C3=os(A3),T3=y({},$0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),MT=os(T3),_3=y({},em,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Pw}),N3=os(_3),R3=y({},ou,{propertyName:0,elapsedTime:0,pseudoElement:0}),M3=os(R3),k3=y({},$0,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),D3=os(k3),I3=y({},ou,{newState:0,oldState:0}),P3=os(I3),L3=[9,13,27,32],Lw=eo&&"CompositionEvent"in window,nm=null;eo&&"documentMode"in document&&(nm=document.documentMode);var F3=eo&&"TextEvent"in window&&!nm,kT=eo&&(!Lw||nm&&8<nm&&11>=nm),DT=" ",IT=!1;function PT(r,l){switch(r){case"keyup":return L3.indexOf(l.keyCode)!==-1;case"keydown":return l.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function LT(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var rh=!1;function U3(r,l){switch(r){case"compositionend":return LT(l);case"keypress":return l.which!==32?null:(IT=!0,DT);case"textInput":return r=l.data,r===DT&&IT?null:r;default:return null}}function j3(r,l){if(rh)return r==="compositionend"||!Lw&&PT(r,l)?(r=TT(),z0=Mw=Sl=null,rh=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(l.ctrlKey||l.altKey||l.metaKey)||l.ctrlKey&&l.altKey){if(l.char&&1<l.char.length)return l.char;if(l.which)return String.fromCharCode(l.which)}return null;case"compositionend":return kT&&l.locale!=="ko"?null:l.data;default:return null}}var B3={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function FT(r){var l=r&&r.nodeName&&r.nodeName.toLowerCase();return l==="input"?!!B3[r.type]:l==="textarea"}function UT(r,l,h,g){ih?sh?sh.push(g):sh=[g]:ih=g,l=Lv(l,"onChange"),0<l.length&&(h=new q0("onChange","change",null,h,g),r.push({event:h,listeners:l}))}var im=null,sm=null;function O3(r){x2(r,0)}function Y0(r){var l=Ts(r);if(vT(l))return r}function jT(r,l){if(r==="change")return l}var BT=!1;if(eo){var Fw;if(eo){var Uw="oninput"in document;if(!Uw){var OT=document.createElement("div");OT.setAttribute("oninput","return;"),Uw=typeof OT.oninput=="function"}Fw=Uw}else Fw=!1;BT=Fw&&(!document.documentMode||9<document.documentMode)}function HT(){im&&(im.detachEvent("onpropertychange",zT),sm=im=null)}function zT(r){if(r.propertyName==="value"&&Y0(sm)){var l=[];UT(l,sm,r,_w(r)),CT(O3,l)}}function H3(r,l,h){r==="focusin"?(HT(),im=l,sm=h,im.attachEvent("onpropertychange",zT)):r==="focusout"&&HT()}function z3(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Y0(sm)}function G3(r,l){if(r==="click")return Y0(l)}function V3(r,l){if(r==="input"||r==="change")return Y0(l)}function q3(r,l){return r===l&&(r!==0||1/r===1/l)||r!==r&&l!==l}var Rs=typeof Object.is=="function"?Object.is:q3;function rm(r,l){if(Rs(r,l))return!0;if(typeof r!="object"||r===null||typeof l!="object"||l===null)return!1;var h=Object.keys(r),g=Object.keys(l);if(h.length!==g.length)return!1;for(g=0;g<h.length;g++){var S=h[g];if(!gt.call(l,S)||!Rs(r[S],l[S]))return!1}return!0}function GT(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function VT(r,l){var h=GT(r);r=0;for(var g;h;){if(h.nodeType===3){if(g=r+h.textContent.length,r<=l&&g>=l)return{node:h,offset:l-r};r=g}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=GT(h)}}function qT(r,l){return r&&l?r===l?!0:r&&r.nodeType===3?!1:l&&l.nodeType===3?qT(r,l.parentNode):"contains"in r?r.contains(l):r.compareDocumentPosition?!!(r.compareDocumentPosition(l)&16):!1:!1}function $T(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var l=O0(r.document);l instanceof r.HTMLIFrameElement;){try{var h=typeof l.contentWindow.location.href=="string"}catch{h=!1}if(h)r=l.contentWindow;else break;l=O0(r.document)}return l}function jw(r){var l=r&&r.nodeName&&r.nodeName.toLowerCase();return l&&(l==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||l==="textarea"||r.contentEditable==="true")}var $3=eo&&"documentMode"in document&&11>=document.documentMode,ah=null,Bw=null,am=null,Ow=!1;function YT(r,l,h){var g=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Ow||ah==null||ah!==O0(g)||(g=ah,"selectionStart"in g&&jw(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),am&&rm(am,g)||(am=g,g=Lv(Bw,"onSelect"),0<g.length&&(l=new q0("onSelect","select",null,l,h),r.push({event:l,listeners:g}),l.target=ah)))}function lu(r,l){var h={};return h[r.toLowerCase()]=l.toLowerCase(),h["Webkit"+r]="webkit"+l,h["Moz"+r]="moz"+l,h}var oh={animationend:lu("Animation","AnimationEnd"),animationiteration:lu("Animation","AnimationIteration"),animationstart:lu("Animation","AnimationStart"),transitionrun:lu("Transition","TransitionRun"),transitionstart:lu("Transition","TransitionStart"),transitioncancel:lu("Transition","TransitionCancel"),transitionend:lu("Transition","TransitionEnd")},Hw={},WT={};eo&&(WT=document.createElement("div").style,"AnimationEvent"in window||(delete oh.animationend.animation,delete oh.animationiteration.animation,delete oh.animationstart.animation),"TransitionEvent"in window||delete oh.transitionend.transition);function cu(r){if(Hw[r])return Hw[r];if(!oh[r])return r;var l=oh[r],h;for(h in l)if(l.hasOwnProperty(h)&&h in WT)return Hw[r]=l[h];return r}var XT=cu("animationend"),JT=cu("animationiteration"),KT=cu("animationstart"),Y3=cu("transitionrun"),W3=cu("transitionstart"),X3=cu("transitioncancel"),QT=cu("transitionend"),ZT=new Map,zw="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");zw.push("scrollEnd");function zr(r,l){ZT.set(r,l),Ns(l,[r])}var W0=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var l=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(l))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},ur=[],lh=0,Gw=0;function X0(){for(var r=lh,l=Gw=lh=0;l<r;){var h=ur[l];ur[l++]=null;var g=ur[l];ur[l++]=null;var S=ur[l];ur[l++]=null;var E=ur[l];if(ur[l++]=null,g!==null&&S!==null){var I=g.pending;I===null?S.next=S:(S.next=I.next,I.next=S),g.pending=S}E!==0&&e_(h,S,E)}}function J0(r,l,h,g){ur[lh++]=r,ur[lh++]=l,ur[lh++]=h,ur[lh++]=g,Gw|=g,r.lanes|=g,r=r.alternate,r!==null&&(r.lanes|=g)}function Vw(r,l,h,g){return J0(r,l,h,g),K0(r)}function uu(r,l){return J0(r,null,null,l),K0(r)}function e_(r,l,h){r.lanes|=h;var g=r.alternate;g!==null&&(g.lanes|=h);for(var S=!1,E=r.return;E!==null;)E.childLanes|=h,g=E.alternate,g!==null&&(g.childLanes|=h),E.tag===22&&(r=E.stateNode,r===null||r._visibility&1||(S=!0)),r=E,E=E.return;return r.tag===3?(E=r.stateNode,S&&l!==null&&(S=31-Ii(h),r=E.hiddenUpdates,g=r[S],g===null?r[S]=[l]:g.push(l),l.lane=h|536870912),E):null}function K0(r){if(50<Nm)throw Nm=0,ZS=null,Error(n(185));for(var l=r.return;l!==null;)r=l,l=r.return;return r.tag===3?r.stateNode:null}var ch={};function J3(r,l,h,g){this.tag=r,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=l,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ms(r,l,h,g){return new J3(r,l,h,g)}function qw(r){return r=r.prototype,!(!r||!r.isReactComponent)}function to(r,l){var h=r.alternate;return h===null?(h=Ms(r.tag,l,r.key,r.mode),h.elementType=r.elementType,h.type=r.type,h.stateNode=r.stateNode,h.alternate=r,r.alternate=h):(h.pendingProps=l,h.type=r.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=r.flags&65011712,h.childLanes=r.childLanes,h.lanes=r.lanes,h.child=r.child,h.memoizedProps=r.memoizedProps,h.memoizedState=r.memoizedState,h.updateQueue=r.updateQueue,l=r.dependencies,h.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext},h.sibling=r.sibling,h.index=r.index,h.ref=r.ref,h.refCleanup=r.refCleanup,h}function t_(r,l){r.flags&=65011714;var h=r.alternate;return h===null?(r.childLanes=0,r.lanes=l,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=h.childLanes,r.lanes=h.lanes,r.child=h.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=h.memoizedProps,r.memoizedState=h.memoizedState,r.updateQueue=h.updateQueue,r.type=h.type,l=h.dependencies,r.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),r}function Q0(r,l,h,g,S,E){var I=0;if(g=r,typeof r=="function")qw(r)&&(I=1);else if(typeof r=="string")I=tU(r,h,me.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case z:return r=Ms(31,h,l,S),r.elementType=z,r.lanes=E,r;case C:return du(h.children,S,E,l);case T:I=8,S|=24;break;case _:return r=Ms(12,h,l,S|2),r.elementType=_,r.lanes=E,r;case F:return r=Ms(13,h,l,S),r.elementType=F,r.lanes=E,r;case U:return r=Ms(19,h,l,S),r.elementType=U,r.lanes=E,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case R:I=10;break e;case D:I=9;break e;case L:I=11;break e;case M:I=14;break e;case O:I=16,g=null;break e}I=29,h=Error(n(130,r===null?"null":typeof r,"")),g=null}return l=Ms(I,h,l,S),l.elementType=r,l.type=g,l.lanes=E,l}function du(r,l,h,g){return r=Ms(7,r,g,l),r.lanes=h,r}function $w(r,l,h){return r=Ms(6,r,null,l),r.lanes=h,r}function n_(r){var l=Ms(18,null,null,0);return l.stateNode=r,l}function Yw(r,l,h){return l=Ms(4,r.children!==null?r.children:[],r.key,l),l.lanes=h,l.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},l}var i_=new WeakMap;function dr(r,l){if(typeof r=="object"&&r!==null){var h=i_.get(r);return h!==void 0?h:(l={value:r,source:l,stack:$e(l)},i_.set(r,l),l)}return{value:r,source:l,stack:$e(l)}}var uh=[],dh=0,Z0=null,om=0,hr=[],fr=0,El=null,da=1,ha="";function no(r,l){uh[dh++]=om,uh[dh++]=Z0,Z0=r,om=l}function s_(r,l,h){hr[fr++]=da,hr[fr++]=ha,hr[fr++]=El,El=r;var g=da;r=ha;var S=32-Ii(g)-1;g&=~(1<<S),h+=1;var E=32-Ii(l)+S;if(30<E){var I=S-S%5;E=(g&(1<<I)-1).toString(32),g>>=I,S-=I,da=1<<32-Ii(l)+S|h<<S|g,ha=E+r}else da=1<<E|h<<S|g,ha=r}function Ww(r){r.return!==null&&(no(r,1),s_(r,1,0))}function Xw(r){for(;r===Z0;)Z0=uh[--dh],uh[dh]=null,om=uh[--dh],uh[dh]=null;for(;r===El;)El=hr[--fr],hr[fr]=null,ha=hr[--fr],hr[fr]=null,da=hr[--fr],hr[fr]=null}function r_(r,l){hr[fr++]=da,hr[fr++]=ha,hr[fr++]=El,da=l.id,ha=l.overflow,El=r}var vi=null,ln=null,yt=!1,Al=null,pr=!1,Jw=Error(n(519));function Cl(r){var l=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw lm(dr(l,r)),Jw}function a_(r){var l=r.stateNode,h=r.type,g=r.memoizedProps;switch(l[Ee]=r,l[Ce]=g,h){case"dialog":ut("cancel",l),ut("close",l);break;case"iframe":case"object":case"embed":ut("load",l);break;case"video":case"audio":for(h=0;h<Mm.length;h++)ut(Mm[h],l);break;case"source":ut("error",l);break;case"img":case"image":case"link":ut("error",l),ut("load",l);break;case"details":ut("toggle",l);break;case"input":ut("invalid",l),xT(l,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0);break;case"select":ut("invalid",l);break;case"textarea":ut("invalid",l),wT(l,g.value,g.defaultValue,g.children)}h=g.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||l.textContent===""+h||g.suppressHydrationWarning===!0||E2(l.textContent,h)?(g.popover!=null&&(ut("beforetoggle",l),ut("toggle",l)),g.onScroll!=null&&ut("scroll",l),g.onScrollEnd!=null&&ut("scrollend",l),g.onClick!=null&&(l.onclick=Za),l=!0):l=!1,l||Cl(r,!0)}function o_(r){for(vi=r.return;vi;)switch(vi.tag){case 5:case 31:case 13:pr=!1;return;case 27:case 3:pr=!0;return;default:vi=vi.return}}function hh(r){if(r!==vi)return!1;if(!yt)return o_(r),yt=!0,!1;var l=r.tag,h;if((h=l!==3&&l!==27)&&((h=l===5)&&(h=r.type,h=!(h!=="form"&&h!=="button")||pE(r.type,r.memoizedProps)),h=!h),h&&ln&&Cl(r),o_(r),l===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));ln=D2(r)}else if(l===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(317));ln=D2(r)}else l===27?(l=ln,Bl(r.type)?(r=xE,xE=null,ln=r):ln=l):ln=vi?gr(r.stateNode.nextSibling):null;return!0}function hu(){ln=vi=null,yt=!1}function Kw(){var r=Al;return r!==null&&(ds===null?ds=r:ds.push.apply(ds,r),Al=null),r}function lm(r){Al===null?Al=[r]:Al.push(r)}var Qw=q(null),fu=null,io=null;function Tl(r,l,h){ue(Qw,l._currentValue),l._currentValue=h}function so(r){r._currentValue=Qw.current,Z(Qw)}function Zw(r,l,h){for(;r!==null;){var g=r.alternate;if((r.childLanes&l)!==l?(r.childLanes|=l,g!==null&&(g.childLanes|=l)):g!==null&&(g.childLanes&l)!==l&&(g.childLanes|=l),r===h)break;r=r.return}}function eS(r,l,h,g){var S=r.child;for(S!==null&&(S.return=r);S!==null;){var E=S.dependencies;if(E!==null){var I=S.child;E=E.firstContext;e:for(;E!==null;){var B=E;E=S;for(var Y=0;Y<l.length;Y++)if(B.context===l[Y]){E.lanes|=h,B=E.alternate,B!==null&&(B.lanes|=h),Zw(E.return,h,r),g||(I=null);break e}E=B.next}}else if(S.tag===18){if(I=S.return,I===null)throw Error(n(341));I.lanes|=h,E=I.alternate,E!==null&&(E.lanes|=h),Zw(I,h,r),I=null}else I=S.child;if(I!==null)I.return=S;else for(I=S;I!==null;){if(I===r){I=null;break}if(S=I.sibling,S!==null){S.return=I.return,I=S;break}I=I.return}S=I}}function fh(r,l,h,g){r=null;for(var S=l,E=!1;S!==null;){if(!E){if((S.flags&524288)!==0)E=!0;else if((S.flags&262144)!==0)break}if(S.tag===10){var I=S.alternate;if(I===null)throw Error(n(387));if(I=I.memoizedProps,I!==null){var B=S.type;Rs(S.pendingProps.value,I.value)||(r!==null?r.push(B):r=[B])}}else if(S===Te.current){if(I=S.alternate,I===null)throw Error(n(387));I.memoizedState.memoizedState!==S.memoizedState.memoizedState&&(r!==null?r.push(Lm):r=[Lm])}S=S.return}r!==null&&eS(l,r,h,g),l.flags|=262144}function ev(r){for(r=r.firstContext;r!==null;){if(!Rs(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function pu(r){fu=r,io=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function xi(r){return l_(fu,r)}function tv(r,l){return fu===null&&pu(r),l_(r,l)}function l_(r,l){var h=l._currentValue;if(l={context:l,memoizedValue:h,next:null},io===null){if(r===null)throw Error(n(308));io=l,r.dependencies={lanes:0,firstContext:l},r.flags|=524288}else io=io.next=l;return h}var K3=typeof AbortController<"u"?AbortController:function(){var r=[],l=this.signal={aborted:!1,addEventListener:function(h,g){r.push(g)}};this.abort=function(){l.aborted=!0,r.forEach(function(h){return h()})}},Q3=i.unstable_scheduleCallback,Z3=i.unstable_NormalPriority,Hn={$$typeof:R,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function tS(){return{controller:new K3,data:new Map,refCount:0}}function cm(r){r.refCount--,r.refCount===0&&Q3(Z3,function(){r.controller.abort()})}var um=null,nS=0,ph=0,mh=null;function eF(r,l){if(um===null){var h=um=[];nS=0,ph=rE(),mh={status:"pending",value:void 0,then:function(g){h.push(g)}}}return nS++,l.then(c_,c_),l}function c_(){if(--nS===0&&um!==null){mh!==null&&(mh.status="fulfilled");var r=um;um=null,ph=0,mh=null;for(var l=0;l<r.length;l++)(0,r[l])()}}function tF(r,l){var h=[],g={status:"pending",value:null,reason:null,then:function(S){h.push(S)}};return r.then(function(){g.status="fulfilled",g.value=l;for(var S=0;S<h.length;S++)(0,h[S])(l)},function(S){for(g.status="rejected",g.reason=S,S=0;S<h.length;S++)(0,h[S])(void 0)}),g}var u_=H.S;H.S=function(r,l){YN=St(),typeof l=="object"&&l!==null&&typeof l.then=="function"&&eF(r,l),u_!==null&&u_(r,l)};var mu=q(null);function iS(){var r=mu.current;return r!==null?r:Jt.pooledCache}function nv(r,l){l===null?ue(mu,mu.current):ue(mu,l.pool)}function d_(){var r=iS();return r===null?null:{parent:Hn._currentValue,pool:r}}var gh=Error(n(460)),sS=Error(n(474)),iv=Error(n(542)),sv={then:function(){}};function h_(r){return r=r.status,r==="fulfilled"||r==="rejected"}function f_(r,l,h){switch(h=r[h],h===void 0?r.push(l):h!==l&&(l.then(Za,Za),l=h),l.status){case"fulfilled":return l.value;case"rejected":throw r=l.reason,m_(r),r;default:if(typeof l.status=="string")l.then(Za,Za);else{if(r=Jt,r!==null&&100<r.shellSuspendCounter)throw Error(n(482));r=l,r.status="pending",r.then(function(g){if(l.status==="pending"){var S=l;S.status="fulfilled",S.value=g}},function(g){if(l.status==="pending"){var S=l;S.status="rejected",S.reason=g}})}switch(l.status){case"fulfilled":return l.value;case"rejected":throw r=l.reason,m_(r),r}throw yu=l,gh}}function gu(r){try{var l=r._init;return l(r._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(yu=h,gh):h}}var yu=null;function p_(){if(yu===null)throw Error(n(459));var r=yu;return yu=null,r}function m_(r){if(r===gh||r===iv)throw Error(n(483))}var yh=null,dm=0;function rv(r){var l=dm;return dm+=1,yh===null&&(yh=[]),f_(yh,r,l)}function hm(r,l){l=l.props.ref,r.ref=l!==void 0?l:null}function av(r,l){throw l.$$typeof===v?Error(n(525)):(r=Object.prototype.toString.call(l),Error(n(31,r==="[object Object]"?"object with keys {"+Object.keys(l).join(", ")+"}":r)))}function g_(r){function l(ne,K){if(r){var se=ne.deletions;se===null?(ne.deletions=[K],ne.flags|=16):se.push(K)}}function h(ne,K){if(!r)return null;for(;K!==null;)l(ne,K),K=K.sibling;return null}function g(ne){for(var K=new Map;ne!==null;)ne.key!==null?K.set(ne.key,ne):K.set(ne.index,ne),ne=ne.sibling;return K}function S(ne,K){return ne=to(ne,K),ne.index=0,ne.sibling=null,ne}function E(ne,K,se){return ne.index=se,r?(se=ne.alternate,se!==null?(se=se.index,se<K?(ne.flags|=67108866,K):se):(ne.flags|=67108866,K)):(ne.flags|=1048576,K)}function I(ne){return r&&ne.alternate===null&&(ne.flags|=67108866),ne}function B(ne,K,se,he){return K===null||K.tag!==6?(K=$w(se,ne.mode,he),K.return=ne,K):(K=S(K,se),K.return=ne,K)}function Y(ne,K,se,he){var He=se.type;return He===C?de(ne,K,se.props.children,he,se.key):K!==null&&(K.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===O&&gu(He)===K.type)?(K=S(K,se.props),hm(K,se),K.return=ne,K):(K=Q0(se.type,se.key,se.props,null,ne.mode,he),hm(K,se),K.return=ne,K)}function re(ne,K,se,he){return K===null||K.tag!==4||K.stateNode.containerInfo!==se.containerInfo||K.stateNode.implementation!==se.implementation?(K=Yw(se,ne.mode,he),K.return=ne,K):(K=S(K,se.children||[]),K.return=ne,K)}function de(ne,K,se,he,He){return K===null||K.tag!==7?(K=du(se,ne.mode,he,He),K.return=ne,K):(K=S(K,se),K.return=ne,K)}function fe(ne,K,se){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=$w(""+K,ne.mode,se),K.return=ne,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case w:return se=Q0(K.type,K.key,K.props,null,ne.mode,se),hm(se,K),se.return=ne,se;case A:return K=Yw(K,ne.mode,se),K.return=ne,K;case O:return K=gu(K),fe(ne,K,se)}if(ee(K)||X(K))return K=du(K,ne.mode,se,null),K.return=ne,K;if(typeof K.then=="function")return fe(ne,rv(K),se);if(K.$$typeof===R)return fe(ne,tv(ne,K),se);av(ne,K)}return null}function ae(ne,K,se,he){var He=K!==null?K.key:null;if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return He!==null?null:B(ne,K,""+se,he);if(typeof se=="object"&&se!==null){switch(se.$$typeof){case w:return se.key===He?Y(ne,K,se,he):null;case A:return se.key===He?re(ne,K,se,he):null;case O:return se=gu(se),ae(ne,K,se,he)}if(ee(se)||X(se))return He!==null?null:de(ne,K,se,he,null);if(typeof se.then=="function")return ae(ne,K,rv(se),he);if(se.$$typeof===R)return ae(ne,K,tv(ne,se),he);av(ne,se)}return null}function le(ne,K,se,he,He){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return ne=ne.get(se)||null,B(K,ne,""+he,He);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case w:return ne=ne.get(he.key===null?se:he.key)||null,Y(K,ne,he,He);case A:return ne=ne.get(he.key===null?se:he.key)||null,re(K,ne,he,He);case O:return he=gu(he),le(ne,K,se,he,He)}if(ee(he)||X(he))return ne=ne.get(se)||null,de(K,ne,he,He,null);if(typeof he.then=="function")return le(ne,K,se,rv(he),He);if(he.$$typeof===R)return le(ne,K,se,tv(K,he),He);av(K,he)}return null}function De(ne,K,se,he){for(var He=null,_t=null,Pe=K,tt=K=0,ft=null;Pe!==null&&tt<se.length;tt++){Pe.index>tt?(ft=Pe,Pe=null):ft=Pe.sibling;var Nt=ae(ne,Pe,se[tt],he);if(Nt===null){Pe===null&&(Pe=ft);break}r&&Pe&&Nt.alternate===null&&l(ne,Pe),K=E(Nt,K,tt),_t===null?He=Nt:_t.sibling=Nt,_t=Nt,Pe=ft}if(tt===se.length)return h(ne,Pe),yt&&no(ne,tt),He;if(Pe===null){for(;tt<se.length;tt++)Pe=fe(ne,se[tt],he),Pe!==null&&(K=E(Pe,K,tt),_t===null?He=Pe:_t.sibling=Pe,_t=Pe);return yt&&no(ne,tt),He}for(Pe=g(Pe);tt<se.length;tt++)ft=le(Pe,ne,tt,se[tt],he),ft!==null&&(r&&ft.alternate!==null&&Pe.delete(ft.key===null?tt:ft.key),K=E(ft,K,tt),_t===null?He=ft:_t.sibling=ft,_t=ft);return r&&Pe.forEach(function(Vl){return l(ne,Vl)}),yt&&no(ne,tt),He}function Ve(ne,K,se,he){if(se==null)throw Error(n(151));for(var He=null,_t=null,Pe=K,tt=K=0,ft=null,Nt=se.next();Pe!==null&&!Nt.done;tt++,Nt=se.next()){Pe.index>tt?(ft=Pe,Pe=null):ft=Pe.sibling;var Vl=ae(ne,Pe,Nt.value,he);if(Vl===null){Pe===null&&(Pe=ft);break}r&&Pe&&Vl.alternate===null&&l(ne,Pe),K=E(Vl,K,tt),_t===null?He=Vl:_t.sibling=Vl,_t=Vl,Pe=ft}if(Nt.done)return h(ne,Pe),yt&&no(ne,tt),He;if(Pe===null){for(;!Nt.done;tt++,Nt=se.next())Nt=fe(ne,Nt.value,he),Nt!==null&&(K=E(Nt,K,tt),_t===null?He=Nt:_t.sibling=Nt,_t=Nt);return yt&&no(ne,tt),He}for(Pe=g(Pe);!Nt.done;tt++,Nt=se.next())Nt=le(Pe,ne,tt,Nt.value,he),Nt!==null&&(r&&Nt.alternate!==null&&Pe.delete(Nt.key===null?tt:Nt.key),K=E(Nt,K,tt),_t===null?He=Nt:_t.sibling=Nt,_t=Nt);return r&&Pe.forEach(function(hU){return l(ne,hU)}),yt&&no(ne,tt),He}function zt(ne,K,se,he){if(typeof se=="object"&&se!==null&&se.type===C&&se.key===null&&(se=se.props.children),typeof se=="object"&&se!==null){switch(se.$$typeof){case w:e:{for(var He=se.key;K!==null;){if(K.key===He){if(He=se.type,He===C){if(K.tag===7){h(ne,K.sibling),he=S(K,se.props.children),he.return=ne,ne=he;break e}}else if(K.elementType===He||typeof He=="object"&&He!==null&&He.$$typeof===O&&gu(He)===K.type){h(ne,K.sibling),he=S(K,se.props),hm(he,se),he.return=ne,ne=he;break e}h(ne,K);break}else l(ne,K);K=K.sibling}se.type===C?(he=du(se.props.children,ne.mode,he,se.key),he.return=ne,ne=he):(he=Q0(se.type,se.key,se.props,null,ne.mode,he),hm(he,se),he.return=ne,ne=he)}return I(ne);case A:e:{for(He=se.key;K!==null;){if(K.key===He)if(K.tag===4&&K.stateNode.containerInfo===se.containerInfo&&K.stateNode.implementation===se.implementation){h(ne,K.sibling),he=S(K,se.children||[]),he.return=ne,ne=he;break e}else{h(ne,K);break}else l(ne,K);K=K.sibling}he=Yw(se,ne.mode,he),he.return=ne,ne=he}return I(ne);case O:return se=gu(se),zt(ne,K,se,he)}if(ee(se))return De(ne,K,se,he);if(X(se)){if(He=X(se),typeof He!="function")throw Error(n(150));return se=He.call(se),Ve(ne,K,se,he)}if(typeof se.then=="function")return zt(ne,K,rv(se),he);if(se.$$typeof===R)return zt(ne,K,tv(ne,se),he);av(ne,se)}return typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint"?(se=""+se,K!==null&&K.tag===6?(h(ne,K.sibling),he=S(K,se),he.return=ne,ne=he):(h(ne,K),he=$w(se,ne.mode,he),he.return=ne,ne=he),I(ne)):h(ne,K)}return function(ne,K,se,he){try{dm=0;var He=zt(ne,K,se,he);return yh=null,He}catch(Pe){if(Pe===gh||Pe===iv)throw Pe;var _t=Ms(29,Pe,null,ne.mode);return _t.lanes=he,_t.return=ne,_t}finally{}}}var vu=g_(!0),y_=g_(!1),_l=!1;function rS(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function aS(r,l){r=r.updateQueue,l.updateQueue===r&&(l.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function Nl(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Rl(r,l,h){var g=r.updateQueue;if(g===null)return null;if(g=g.shared,(kt&2)!==0){var S=g.pending;return S===null?l.next=l:(l.next=S.next,S.next=l),g.pending=l,l=K0(r),e_(r,null,h),l}return J0(r,g,l,h),K0(r)}function fm(r,l,h){if(l=l.updateQueue,l!==null&&(l=l.shared,(h&4194048)!==0)){var g=l.lanes;g&=r.pendingLanes,h|=g,l.lanes=h,W(r,h)}}function oS(r,l){var h=r.updateQueue,g=r.alternate;if(g!==null&&(g=g.updateQueue,h===g)){var S=null,E=null;if(h=h.firstBaseUpdate,h!==null){do{var I={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};E===null?S=E=I:E=E.next=I,h=h.next}while(h!==null);E===null?S=E=l:E=E.next=l}else S=E=l;h={baseState:g.baseState,firstBaseUpdate:S,lastBaseUpdate:E,shared:g.shared,callbacks:g.callbacks},r.updateQueue=h;return}r=h.lastBaseUpdate,r===null?h.firstBaseUpdate=l:r.next=l,h.lastBaseUpdate=l}var lS=!1;function pm(){if(lS){var r=mh;if(r!==null)throw r}}function mm(r,l,h,g){lS=!1;var S=r.updateQueue;_l=!1;var E=S.firstBaseUpdate,I=S.lastBaseUpdate,B=S.shared.pending;if(B!==null){S.shared.pending=null;var Y=B,re=Y.next;Y.next=null,I===null?E=re:I.next=re,I=Y;var de=r.alternate;de!==null&&(de=de.updateQueue,B=de.lastBaseUpdate,B!==I&&(B===null?de.firstBaseUpdate=re:B.next=re,de.lastBaseUpdate=Y))}if(E!==null){var fe=S.baseState;I=0,de=re=Y=null,B=E;do{var ae=B.lane&-536870913,le=ae!==B.lane;if(le?(ht&ae)===ae:(g&ae)===ae){ae!==0&&ae===ph&&(lS=!0),de!==null&&(de=de.next={lane:0,tag:B.tag,payload:B.payload,callback:null,next:null});e:{var De=r,Ve=B;ae=l;var zt=h;switch(Ve.tag){case 1:if(De=Ve.payload,typeof De=="function"){fe=De.call(zt,fe,ae);break e}fe=De;break e;case 3:De.flags=De.flags&-65537|128;case 0:if(De=Ve.payload,ae=typeof De=="function"?De.call(zt,fe,ae):De,ae==null)break e;fe=y({},fe,ae);break e;case 2:_l=!0}}ae=B.callback,ae!==null&&(r.flags|=64,le&&(r.flags|=8192),le=S.callbacks,le===null?S.callbacks=[ae]:le.push(ae))}else le={lane:ae,tag:B.tag,payload:B.payload,callback:B.callback,next:null},de===null?(re=de=le,Y=fe):de=de.next=le,I|=ae;if(B=B.next,B===null){if(B=S.shared.pending,B===null)break;le=B,B=le.next,le.next=null,S.lastBaseUpdate=le,S.shared.pending=null}}while(!0);de===null&&(Y=fe),S.baseState=Y,S.firstBaseUpdate=re,S.lastBaseUpdate=de,E===null&&(S.shared.lanes=0),Pl|=I,r.lanes=I,r.memoizedState=fe}}function v_(r,l){if(typeof r!="function")throw Error(n(191,r));r.call(l)}function x_(r,l){var h=r.callbacks;if(h!==null)for(r.callbacks=null,r=0;r<h.length;r++)v_(h[r],l)}var vh=q(null),ov=q(0);function b_(r,l){r=po,ue(ov,r),ue(vh,l),po=r|l.baseLanes}function cS(){ue(ov,po),ue(vh,vh.current)}function uS(){po=ov.current,Z(vh),Z(ov)}var ks=q(null),mr=null;function Ml(r){var l=r.alternate;ue(Pn,Pn.current&1),ue(ks,r),mr===null&&(l===null||vh.current!==null||l.memoizedState!==null)&&(mr=r)}function dS(r){ue(Pn,Pn.current),ue(ks,r),mr===null&&(mr=r)}function w_(r){r.tag===22?(ue(Pn,Pn.current),ue(ks,r),mr===null&&(mr=r)):kl()}function kl(){ue(Pn,Pn.current),ue(ks,ks.current)}function Ds(r){Z(ks),mr===r&&(mr=null),Z(Pn)}var Pn=q(0);function lv(r){for(var l=r;l!==null;){if(l.tag===13){var h=l.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||yE(h)||vE(h)))return l}else if(l.tag===19&&(l.memoizedProps.revealOrder==="forwards"||l.memoizedProps.revealOrder==="backwards"||l.memoizedProps.revealOrder==="unstable_legacy-backwards"||l.memoizedProps.revealOrder==="together")){if((l.flags&128)!==0)return l}else if(l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return null;l=l.return}l.sibling.return=l.return,l=l.sibling}return null}var ro=0,Ze=null,Ot=null,zn=null,cv=!1,xh=!1,xu=!1,uv=0,gm=0,bh=null,nF=0;function Cn(){throw Error(n(321))}function hS(r,l){if(l===null)return!1;for(var h=0;h<l.length&&h<r.length;h++)if(!Rs(r[h],l[h]))return!1;return!0}function fS(r,l,h,g,S,E){return ro=E,Ze=l,l.memoizedState=null,l.updateQueue=null,l.lanes=0,H.H=r===null||r.memoizedState===null?sN:NS,xu=!1,E=h(g,S),xu=!1,xh&&(E=E_(l,h,g,S)),S_(r),E}function S_(r){H.H=xm;var l=Ot!==null&&Ot.next!==null;if(ro=0,zn=Ot=Ze=null,cv=!1,gm=0,bh=null,l)throw Error(n(300));r===null||Gn||(r=r.dependencies,r!==null&&ev(r)&&(Gn=!0))}function E_(r,l,h,g){Ze=r;var S=0;do{if(xh&&(bh=null),gm=0,xh=!1,25<=S)throw Error(n(301));if(S+=1,zn=Ot=null,r.updateQueue!=null){var E=r.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}H.H=rN,E=l(h,g)}while(xh);return E}function iF(){var r=H.H,l=r.useState()[0];return l=typeof l.then=="function"?ym(l):l,r=r.useState()[0],(Ot!==null?Ot.memoizedState:null)!==r&&(Ze.flags|=1024),l}function pS(){var r=uv!==0;return uv=0,r}function mS(r,l,h){l.updateQueue=r.updateQueue,l.flags&=-2053,r.lanes&=~h}function gS(r){if(cv){for(r=r.memoizedState;r!==null;){var l=r.queue;l!==null&&(l.pending=null),r=r.next}cv=!1}ro=0,zn=Ot=Ze=null,xh=!1,gm=uv=0,bh=null}function Wi(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zn===null?Ze.memoizedState=zn=r:zn=zn.next=r,zn}function Ln(){if(Ot===null){var r=Ze.alternate;r=r!==null?r.memoizedState:null}else r=Ot.next;var l=zn===null?Ze.memoizedState:zn.next;if(l!==null)zn=l,Ot=r;else{if(r===null)throw Ze.alternate===null?Error(n(467)):Error(n(310));Ot=r,r={memoizedState:Ot.memoizedState,baseState:Ot.baseState,baseQueue:Ot.baseQueue,queue:Ot.queue,next:null},zn===null?Ze.memoizedState=zn=r:zn=zn.next=r}return zn}function dv(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ym(r){var l=gm;return gm+=1,bh===null&&(bh=[]),r=f_(bh,r,l),l=Ze,(zn===null?l.memoizedState:zn.next)===null&&(l=l.alternate,H.H=l===null||l.memoizedState===null?sN:NS),r}function hv(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ym(r);if(r.$$typeof===R)return xi(r)}throw Error(n(438,String(r)))}function yS(r){var l=null,h=Ze.updateQueue;if(h!==null&&(l=h.memoCache),l==null){var g=Ze.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(l={data:g.data.map(function(S){return S.slice()}),index:0})))}if(l==null&&(l={data:[],index:0}),h===null&&(h=dv(),Ze.updateQueue=h),h.memoCache=l,h=l.data[l.index],h===void 0)for(h=l.data[l.index]=Array(r),g=0;g<r;g++)h[g]=J;return l.index++,h}function ao(r,l){return typeof l=="function"?l(r):l}function fv(r){var l=Ln();return vS(l,Ot,r)}function vS(r,l,h){var g=r.queue;if(g===null)throw Error(n(311));g.lastRenderedReducer=h;var S=r.baseQueue,E=g.pending;if(E!==null){if(S!==null){var I=S.next;S.next=E.next,E.next=I}l.baseQueue=S=E,g.pending=null}if(E=r.baseState,S===null)r.memoizedState=E;else{l=S.next;var B=I=null,Y=null,re=l,de=!1;do{var fe=re.lane&-536870913;if(fe!==re.lane?(ht&fe)===fe:(ro&fe)===fe){var ae=re.revertLane;if(ae===0)Y!==null&&(Y=Y.next={lane:0,revertLane:0,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),fe===ph&&(de=!0);else if((ro&ae)===ae){re=re.next,ae===ph&&(de=!0);continue}else fe={lane:0,revertLane:re.revertLane,gesture:null,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},Y===null?(B=Y=fe,I=E):Y=Y.next=fe,Ze.lanes|=ae,Pl|=ae;fe=re.action,xu&&h(E,fe),E=re.hasEagerState?re.eagerState:h(E,fe)}else ae={lane:fe,revertLane:re.revertLane,gesture:re.gesture,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},Y===null?(B=Y=ae,I=E):Y=Y.next=ae,Ze.lanes|=fe,Pl|=fe;re=re.next}while(re!==null&&re!==l);if(Y===null?I=E:Y.next=B,!Rs(E,r.memoizedState)&&(Gn=!0,de&&(h=mh,h!==null)))throw h;r.memoizedState=E,r.baseState=I,r.baseQueue=Y,g.lastRenderedState=E}return S===null&&(g.lanes=0),[r.memoizedState,g.dispatch]}function xS(r){var l=Ln(),h=l.queue;if(h===null)throw Error(n(311));h.lastRenderedReducer=r;var g=h.dispatch,S=h.pending,E=l.memoizedState;if(S!==null){h.pending=null;var I=S=S.next;do E=r(E,I.action),I=I.next;while(I!==S);Rs(E,l.memoizedState)||(Gn=!0),l.memoizedState=E,l.baseQueue===null&&(l.baseState=E),h.lastRenderedState=E}return[E,g]}function A_(r,l,h){var g=Ze,S=Ln(),E=yt;if(E){if(h===void 0)throw Error(n(407));h=h()}else h=l();var I=!Rs((Ot||S).memoizedState,h);if(I&&(S.memoizedState=h,Gn=!0),S=S.queue,SS(__.bind(null,g,S,r),[r]),S.getSnapshot!==l||I||zn!==null&&zn.memoizedState.tag&1){if(g.flags|=2048,wh(9,{destroy:void 0},T_.bind(null,g,S,h,l),null),Jt===null)throw Error(n(349));E||(ro&127)!==0||C_(g,l,h)}return h}function C_(r,l,h){r.flags|=16384,r={getSnapshot:l,value:h},l=Ze.updateQueue,l===null?(l=dv(),Ze.updateQueue=l,l.stores=[r]):(h=l.stores,h===null?l.stores=[r]:h.push(r))}function T_(r,l,h,g){l.value=h,l.getSnapshot=g,N_(l)&&R_(r)}function __(r,l,h){return h(function(){N_(l)&&R_(r)})}function N_(r){var l=r.getSnapshot;r=r.value;try{var h=l();return!Rs(r,h)}catch{return!0}}function R_(r){var l=uu(r,2);l!==null&&hs(l,r,2)}function bS(r){var l=Wi();if(typeof r=="function"){var h=r;if(r=h(),xu){Or(!0);try{h()}finally{Or(!1)}}}return l.memoizedState=l.baseState=r,l.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:r},l}function M_(r,l,h,g){return r.baseState=h,vS(r,Ot,typeof g=="function"?g:ao)}function sF(r,l,h,g,S){if(gv(r))throw Error(n(485));if(r=l.action,r!==null){var E={payload:S,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(I){E.listeners.push(I)}};H.T!==null?h(!0):E.isTransition=!1,g(E),h=l.pending,h===null?(E.next=l.pending=E,k_(l,E)):(E.next=h.next,l.pending=h.next=E)}}function k_(r,l){var h=l.action,g=l.payload,S=r.state;if(l.isTransition){var E=H.T,I={};H.T=I;try{var B=h(S,g),Y=H.S;Y!==null&&Y(I,B),D_(r,l,B)}catch(re){wS(r,l,re)}finally{E!==null&&I.types!==null&&(E.types=I.types),H.T=E}}else try{E=h(S,g),D_(r,l,E)}catch(re){wS(r,l,re)}}function D_(r,l,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(g){I_(r,l,g)},function(g){return wS(r,l,g)}):I_(r,l,h)}function I_(r,l,h){l.status="fulfilled",l.value=h,P_(l),r.state=h,l=r.pending,l!==null&&(h=l.next,h===l?r.pending=null:(h=h.next,l.next=h,k_(r,h)))}function wS(r,l,h){var g=r.pending;if(r.pending=null,g!==null){g=g.next;do l.status="rejected",l.reason=h,P_(l),l=l.next;while(l!==g)}r.action=null}function P_(r){r=r.listeners;for(var l=0;l<r.length;l++)(0,r[l])()}function L_(r,l){return l}function F_(r,l){if(yt){var h=Jt.formState;if(h!==null){e:{var g=Ze;if(yt){if(ln){t:{for(var S=ln,E=pr;S.nodeType!==8;){if(!E){S=null;break t}if(S=gr(S.nextSibling),S===null){S=null;break t}}E=S.data,S=E==="F!"||E==="F"?S:null}if(S){ln=gr(S.nextSibling),g=S.data==="F!";break e}}Cl(g)}g=!1}g&&(l=h[0])}}return h=Wi(),h.memoizedState=h.baseState=l,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:L_,lastRenderedState:l},h.queue=g,h=tN.bind(null,Ze,g),g.dispatch=h,g=bS(!1),E=_S.bind(null,Ze,!1,g.queue),g=Wi(),S={state:l,dispatch:null,action:r,pending:null},g.queue=S,h=sF.bind(null,Ze,S,E,h),S.dispatch=h,g.memoizedState=r,[l,h,!1]}function U_(r){var l=Ln();return j_(l,Ot,r)}function j_(r,l,h){if(l=vS(r,l,L_)[0],r=fv(ao)[0],typeof l=="object"&&l!==null&&typeof l.then=="function")try{var g=ym(l)}catch(I){throw I===gh?iv:I}else g=l;l=Ln();var S=l.queue,E=S.dispatch;return h!==l.memoizedState&&(Ze.flags|=2048,wh(9,{destroy:void 0},rF.bind(null,S,h),null)),[g,E,r]}function rF(r,l){r.action=l}function B_(r){var l=Ln(),h=Ot;if(h!==null)return j_(l,h,r);Ln(),l=l.memoizedState,h=Ln();var g=h.queue.dispatch;return h.memoizedState=r,[l,g,!1]}function wh(r,l,h,g){return r={tag:r,create:h,deps:g,inst:l,next:null},l=Ze.updateQueue,l===null&&(l=dv(),Ze.updateQueue=l),h=l.lastEffect,h===null?l.lastEffect=r.next=r:(g=h.next,h.next=r,r.next=g,l.lastEffect=r),r}function O_(){return Ln().memoizedState}function pv(r,l,h,g){var S=Wi();Ze.flags|=r,S.memoizedState=wh(1|l,{destroy:void 0},h,g===void 0?null:g)}function mv(r,l,h,g){var S=Ln();g=g===void 0?null:g;var E=S.memoizedState.inst;Ot!==null&&g!==null&&hS(g,Ot.memoizedState.deps)?S.memoizedState=wh(l,E,h,g):(Ze.flags|=r,S.memoizedState=wh(1|l,E,h,g))}function H_(r,l){pv(8390656,8,r,l)}function SS(r,l){mv(2048,8,r,l)}function aF(r){Ze.flags|=4;var l=Ze.updateQueue;if(l===null)l=dv(),Ze.updateQueue=l,l.events=[r];else{var h=l.events;h===null?l.events=[r]:h.push(r)}}function z_(r){var l=Ln().memoizedState;return aF({ref:l,nextImpl:r}),function(){if((kt&2)!==0)throw Error(n(440));return l.impl.apply(void 0,arguments)}}function G_(r,l){return mv(4,2,r,l)}function V_(r,l){return mv(4,4,r,l)}function q_(r,l){if(typeof l=="function"){r=r();var h=l(r);return function(){typeof h=="function"?h():l(null)}}if(l!=null)return r=r(),l.current=r,function(){l.current=null}}function $_(r,l,h){h=h!=null?h.concat([r]):null,mv(4,4,q_.bind(null,l,r),h)}function ES(){}function Y_(r,l){var h=Ln();l=l===void 0?null:l;var g=h.memoizedState;return l!==null&&hS(l,g[1])?g[0]:(h.memoizedState=[r,l],r)}function W_(r,l){var h=Ln();l=l===void 0?null:l;var g=h.memoizedState;if(l!==null&&hS(l,g[1]))return g[0];if(g=r(),xu){Or(!0);try{r()}finally{Or(!1)}}return h.memoizedState=[g,l],g}function AS(r,l,h){return h===void 0||(ro&1073741824)!==0&&(ht&261930)===0?r.memoizedState=l:(r.memoizedState=h,r=XN(),Ze.lanes|=r,Pl|=r,h)}function X_(r,l,h,g){return Rs(h,l)?h:vh.current!==null?(r=AS(r,h,g),Rs(r,l)||(Gn=!0),r):(ro&42)===0||(ro&1073741824)!==0&&(ht&261930)===0?(Gn=!0,r.memoizedState=h):(r=XN(),Ze.lanes|=r,Pl|=r,l)}function J_(r,l,h,g,S){var E=V.p;V.p=E!==0&&8>E?E:8;var I=H.T,B={};H.T=B,_S(r,!1,l,h);try{var Y=S(),re=H.S;if(re!==null&&re(B,Y),Y!==null&&typeof Y=="object"&&typeof Y.then=="function"){var de=tF(Y,g);vm(r,l,de,Ls(r))}else vm(r,l,g,Ls(r))}catch(fe){vm(r,l,{then:function(){},status:"rejected",reason:fe},Ls())}finally{V.p=E,I!==null&&B.types!==null&&(I.types=B.types),H.T=I}}function oF(){}function CS(r,l,h,g){if(r.tag!==5)throw Error(n(476));var S=K_(r).queue;J_(r,S,l,Q,h===null?oF:function(){return Q_(r),h(g)})}function K_(r){var l=r.memoizedState;if(l!==null)return l;l={memoizedState:Q,baseState:Q,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:Q},next:null};var h={};return l.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:h},next:null},r.memoizedState=l,r=r.alternate,r!==null&&(r.memoizedState=l),l}function Q_(r){var l=K_(r);l.next===null&&(l=r.alternate.memoizedState),vm(r,l.next.queue,{},Ls())}function TS(){return xi(Lm)}function Z_(){return Ln().memoizedState}function eN(){return Ln().memoizedState}function lF(r){for(var l=r.return;l!==null;){switch(l.tag){case 24:case 3:var h=Ls();r=Nl(h);var g=Rl(l,r,h);g!==null&&(hs(g,l,h),fm(g,l,h)),l={cache:tS()},r.payload=l;return}l=l.return}}function cF(r,l,h){var g=Ls();h={lane:g,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},gv(r)?nN(l,h):(h=Vw(r,l,h,g),h!==null&&(hs(h,r,g),iN(h,l,g)))}function tN(r,l,h){var g=Ls();vm(r,l,h,g)}function vm(r,l,h,g){var S={lane:g,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(gv(r))nN(l,S);else{var E=r.alternate;if(r.lanes===0&&(E===null||E.lanes===0)&&(E=l.lastRenderedReducer,E!==null))try{var I=l.lastRenderedState,B=E(I,h);if(S.hasEagerState=!0,S.eagerState=B,Rs(B,I))return J0(r,l,S,0),Jt===null&&X0(),!1}catch{}finally{}if(h=Vw(r,l,S,g),h!==null)return hs(h,r,g),iN(h,l,g),!0}return!1}function _S(r,l,h,g){if(g={lane:2,revertLane:rE(),gesture:null,action:g,hasEagerState:!1,eagerState:null,next:null},gv(r)){if(l)throw Error(n(479))}else l=Vw(r,h,g,2),l!==null&&hs(l,r,2)}function gv(r){var l=r.alternate;return r===Ze||l!==null&&l===Ze}function nN(r,l){xh=cv=!0;var h=r.pending;h===null?l.next=l:(l.next=h.next,h.next=l),r.pending=l}function iN(r,l,h){if((h&4194048)!==0){var g=l.lanes;g&=r.pendingLanes,h|=g,l.lanes=h,W(r,h)}}var xm={readContext:xi,use:hv,useCallback:Cn,useContext:Cn,useEffect:Cn,useImperativeHandle:Cn,useLayoutEffect:Cn,useInsertionEffect:Cn,useMemo:Cn,useReducer:Cn,useRef:Cn,useState:Cn,useDebugValue:Cn,useDeferredValue:Cn,useTransition:Cn,useSyncExternalStore:Cn,useId:Cn,useHostTransitionStatus:Cn,useFormState:Cn,useActionState:Cn,useOptimistic:Cn,useMemoCache:Cn,useCacheRefresh:Cn};xm.useEffectEvent=Cn;var sN={readContext:xi,use:hv,useCallback:function(r,l){return Wi().memoizedState=[r,l===void 0?null:l],r},useContext:xi,useEffect:H_,useImperativeHandle:function(r,l,h){h=h!=null?h.concat([r]):null,pv(4194308,4,q_.bind(null,l,r),h)},useLayoutEffect:function(r,l){return pv(4194308,4,r,l)},useInsertionEffect:function(r,l){pv(4,2,r,l)},useMemo:function(r,l){var h=Wi();l=l===void 0?null:l;var g=r();if(xu){Or(!0);try{r()}finally{Or(!1)}}return h.memoizedState=[g,l],g},useReducer:function(r,l,h){var g=Wi();if(h!==void 0){var S=h(l);if(xu){Or(!0);try{h(l)}finally{Or(!1)}}}else S=l;return g.memoizedState=g.baseState=S,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:S},g.queue=r,r=r.dispatch=cF.bind(null,Ze,r),[g.memoizedState,r]},useRef:function(r){var l=Wi();return r={current:r},l.memoizedState=r},useState:function(r){r=bS(r);var l=r.queue,h=tN.bind(null,Ze,l);return l.dispatch=h,[r.memoizedState,h]},useDebugValue:ES,useDeferredValue:function(r,l){var h=Wi();return AS(h,r,l)},useTransition:function(){var r=bS(!1);return r=J_.bind(null,Ze,r.queue,!0,!1),Wi().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,l,h){var g=Ze,S=Wi();if(yt){if(h===void 0)throw Error(n(407));h=h()}else{if(h=l(),Jt===null)throw Error(n(349));(ht&127)!==0||C_(g,l,h)}S.memoizedState=h;var E={value:h,getSnapshot:l};return S.queue=E,H_(__.bind(null,g,E,r),[r]),g.flags|=2048,wh(9,{destroy:void 0},T_.bind(null,g,E,h,l),null),h},useId:function(){var r=Wi(),l=Jt.identifierPrefix;if(yt){var h=ha,g=da;h=(g&~(1<<32-Ii(g)-1)).toString(32)+h,l="_"+l+"R_"+h,h=uv++,0<h&&(l+="H"+h.toString(32)),l+="_"}else h=nF++,l="_"+l+"r_"+h.toString(32)+"_";return r.memoizedState=l},useHostTransitionStatus:TS,useFormState:F_,useActionState:F_,useOptimistic:function(r){var l=Wi();l.memoizedState=l.baseState=r;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return l.queue=h,l=_S.bind(null,Ze,!0,h),h.dispatch=l,[r,l]},useMemoCache:yS,useCacheRefresh:function(){return Wi().memoizedState=lF.bind(null,Ze)},useEffectEvent:function(r){var l=Wi(),h={impl:r};return l.memoizedState=h,function(){if((kt&2)!==0)throw Error(n(440));return h.impl.apply(void 0,arguments)}}},NS={readContext:xi,use:hv,useCallback:Y_,useContext:xi,useEffect:SS,useImperativeHandle:$_,useInsertionEffect:G_,useLayoutEffect:V_,useMemo:W_,useReducer:fv,useRef:O_,useState:function(){return fv(ao)},useDebugValue:ES,useDeferredValue:function(r,l){var h=Ln();return X_(h,Ot.memoizedState,r,l)},useTransition:function(){var r=fv(ao)[0],l=Ln().memoizedState;return[typeof r=="boolean"?r:ym(r),l]},useSyncExternalStore:A_,useId:Z_,useHostTransitionStatus:TS,useFormState:U_,useActionState:U_,useOptimistic:function(r,l){var h=Ln();return M_(h,Ot,r,l)},useMemoCache:yS,useCacheRefresh:eN};NS.useEffectEvent=z_;var rN={readContext:xi,use:hv,useCallback:Y_,useContext:xi,useEffect:SS,useImperativeHandle:$_,useInsertionEffect:G_,useLayoutEffect:V_,useMemo:W_,useReducer:xS,useRef:O_,useState:function(){return xS(ao)},useDebugValue:ES,useDeferredValue:function(r,l){var h=Ln();return Ot===null?AS(h,r,l):X_(h,Ot.memoizedState,r,l)},useTransition:function(){var r=xS(ao)[0],l=Ln().memoizedState;return[typeof r=="boolean"?r:ym(r),l]},useSyncExternalStore:A_,useId:Z_,useHostTransitionStatus:TS,useFormState:B_,useActionState:B_,useOptimistic:function(r,l){var h=Ln();return Ot!==null?M_(h,Ot,r,l):(h.baseState=r,[r,h.queue.dispatch])},useMemoCache:yS,useCacheRefresh:eN};rN.useEffectEvent=z_;function RS(r,l,h,g){l=r.memoizedState,h=h(g,l),h=h==null?l:y({},l,h),r.memoizedState=h,r.lanes===0&&(r.updateQueue.baseState=h)}var MS={enqueueSetState:function(r,l,h){r=r._reactInternals;var g=Ls(),S=Nl(g);S.payload=l,h!=null&&(S.callback=h),l=Rl(r,S,g),l!==null&&(hs(l,r,g),fm(l,r,g))},enqueueReplaceState:function(r,l,h){r=r._reactInternals;var g=Ls(),S=Nl(g);S.tag=1,S.payload=l,h!=null&&(S.callback=h),l=Rl(r,S,g),l!==null&&(hs(l,r,g),fm(l,r,g))},enqueueForceUpdate:function(r,l){r=r._reactInternals;var h=Ls(),g=Nl(h);g.tag=2,l!=null&&(g.callback=l),l=Rl(r,g,h),l!==null&&(hs(l,r,h),fm(l,r,h))}};function aN(r,l,h,g,S,E,I){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(g,E,I):l.prototype&&l.prototype.isPureReactComponent?!rm(h,g)||!rm(S,E):!0}function oN(r,l,h,g){r=l.state,typeof l.componentWillReceiveProps=="function"&&l.componentWillReceiveProps(h,g),typeof l.UNSAFE_componentWillReceiveProps=="function"&&l.UNSAFE_componentWillReceiveProps(h,g),l.state!==r&&MS.enqueueReplaceState(l,l.state,null)}function bu(r,l){var h=l;if("ref"in l){h={};for(var g in l)g!=="ref"&&(h[g]=l[g])}if(r=r.defaultProps){h===l&&(h=y({},h));for(var S in r)h[S]===void 0&&(h[S]=r[S])}return h}function lN(r){W0(r)}function cN(r){console.error(r)}function uN(r){W0(r)}function yv(r,l){try{var h=r.onUncaughtError;h(l.value,{componentStack:l.stack})}catch(g){setTimeout(function(){throw g})}}function dN(r,l,h){try{var g=r.onCaughtError;g(h.value,{componentStack:h.stack,errorBoundary:l.tag===1?l.stateNode:null})}catch(S){setTimeout(function(){throw S})}}function kS(r,l,h){return h=Nl(h),h.tag=3,h.payload={element:null},h.callback=function(){yv(r,l)},h}function hN(r){return r=Nl(r),r.tag=3,r}function fN(r,l,h,g){var S=h.type.getDerivedStateFromError;if(typeof S=="function"){var E=g.value;r.payload=function(){return S(E)},r.callback=function(){dN(l,h,g)}}var I=h.stateNode;I!==null&&typeof I.componentDidCatch=="function"&&(r.callback=function(){dN(l,h,g),typeof S!="function"&&(Ll===null?Ll=new Set([this]):Ll.add(this));var B=g.stack;this.componentDidCatch(g.value,{componentStack:B!==null?B:""})})}function uF(r,l,h,g,S){if(h.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(l=h.alternate,l!==null&&fh(l,h,S,!0),h=ks.current,h!==null){switch(h.tag){case 31:case 13:return mr===null?Rv():h.alternate===null&&Tn===0&&(Tn=3),h.flags&=-257,h.flags|=65536,h.lanes=S,g===sv?h.flags|=16384:(l=h.updateQueue,l===null?h.updateQueue=new Set([g]):l.add(g),nE(r,g,S)),!1;case 22:return h.flags|=65536,g===sv?h.flags|=16384:(l=h.updateQueue,l===null?(l={transitions:null,markerInstances:null,retryQueue:new Set([g])},h.updateQueue=l):(h=l.retryQueue,h===null?l.retryQueue=new Set([g]):h.add(g)),nE(r,g,S)),!1}throw Error(n(435,h.tag))}return nE(r,g,S),Rv(),!1}if(yt)return l=ks.current,l!==null?((l.flags&65536)===0&&(l.flags|=256),l.flags|=65536,l.lanes=S,g!==Jw&&(r=Error(n(422),{cause:g}),lm(dr(r,h)))):(g!==Jw&&(l=Error(n(423),{cause:g}),lm(dr(l,h))),r=r.current.alternate,r.flags|=65536,S&=-S,r.lanes|=S,g=dr(g,h),S=kS(r.stateNode,g,S),oS(r,S),Tn!==4&&(Tn=2)),!1;var E=Error(n(520),{cause:g});if(E=dr(E,h),_m===null?_m=[E]:_m.push(E),Tn!==4&&(Tn=2),l===null)return!0;g=dr(g,h),h=l;do{switch(h.tag){case 3:return h.flags|=65536,r=S&-S,h.lanes|=r,r=kS(h.stateNode,g,r),oS(h,r),!1;case 1:if(l=h.type,E=h.stateNode,(h.flags&128)===0&&(typeof l.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ll===null||!Ll.has(E))))return h.flags|=65536,S&=-S,h.lanes|=S,S=hN(S),fN(S,r,h,g),oS(h,S),!1}h=h.return}while(h!==null);return!1}var DS=Error(n(461)),Gn=!1;function bi(r,l,h,g){l.child=r===null?y_(l,null,h,g):vu(l,r.child,h,g)}function pN(r,l,h,g,S){h=h.render;var E=l.ref;if("ref"in g){var I={};for(var B in g)B!=="ref"&&(I[B]=g[B])}else I=g;return pu(l),g=fS(r,l,h,I,E,S),B=pS(),r!==null&&!Gn?(mS(r,l,S),oo(r,l,S)):(yt&&B&&Ww(l),l.flags|=1,bi(r,l,g,S),l.child)}function mN(r,l,h,g,S){if(r===null){var E=h.type;return typeof E=="function"&&!qw(E)&&E.defaultProps===void 0&&h.compare===null?(l.tag=15,l.type=E,gN(r,l,E,g,S)):(r=Q0(h.type,null,g,l,l.mode,S),r.ref=l.ref,r.return=l,l.child=r)}if(E=r.child,!OS(r,S)){var I=E.memoizedProps;if(h=h.compare,h=h!==null?h:rm,h(I,g)&&r.ref===l.ref)return oo(r,l,S)}return l.flags|=1,r=to(E,g),r.ref=l.ref,r.return=l,l.child=r}function gN(r,l,h,g,S){if(r!==null){var E=r.memoizedProps;if(rm(E,g)&&r.ref===l.ref)if(Gn=!1,l.pendingProps=g=E,OS(r,S))(r.flags&131072)!==0&&(Gn=!0);else return l.lanes=r.lanes,oo(r,l,S)}return IS(r,l,h,g,S)}function yN(r,l,h,g){var S=g.children,E=r!==null?r.memoizedState:null;if(r===null&&l.stateNode===null&&(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),g.mode==="hidden"){if((l.flags&128)!==0){if(E=E!==null?E.baseLanes|h:h,r!==null){for(g=l.child=r.child,S=0;g!==null;)S=S|g.lanes|g.childLanes,g=g.sibling;g=S&~E}else g=0,l.child=null;return vN(r,l,E,h,g)}if((h&536870912)!==0)l.memoizedState={baseLanes:0,cachePool:null},r!==null&&nv(l,E!==null?E.cachePool:null),E!==null?b_(l,E):cS(),w_(l);else return g=l.lanes=536870912,vN(r,l,E!==null?E.baseLanes|h:h,h,g)}else E!==null?(nv(l,E.cachePool),b_(l,E),kl(),l.memoizedState=null):(r!==null&&nv(l,null),cS(),kl());return bi(r,l,S,h),l.child}function bm(r,l){return r!==null&&r.tag===22||l.stateNode!==null||(l.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.sibling}function vN(r,l,h,g,S){var E=iS();return E=E===null?null:{parent:Hn._currentValue,pool:E},l.memoizedState={baseLanes:h,cachePool:E},r!==null&&nv(l,null),cS(),w_(l),r!==null&&fh(r,l,g,!0),l.childLanes=S,null}function vv(r,l){return l=bv({mode:l.mode,children:l.children},r.mode),l.ref=r.ref,r.child=l,l.return=r,l}function xN(r,l,h){return vu(l,r.child,null,h),r=vv(l,l.pendingProps),r.flags|=2,Ds(l),l.memoizedState=null,r}function dF(r,l,h){var g=l.pendingProps,S=(l.flags&128)!==0;if(l.flags&=-129,r===null){if(yt){if(g.mode==="hidden")return r=vv(l,g),l.lanes=536870912,bm(null,r);if(dS(l),(r=ln)?(r=k2(r,pr),r=r!==null&&r.data==="&"?r:null,r!==null&&(l.memoizedState={dehydrated:r,treeContext:El!==null?{id:da,overflow:ha}:null,retryLane:536870912,hydrationErrors:null},h=n_(r),h.return=l,l.child=h,vi=l,ln=null)):r=null,r===null)throw Cl(l);return l.lanes=536870912,null}return vv(l,g)}var E=r.memoizedState;if(E!==null){var I=E.dehydrated;if(dS(l),S)if(l.flags&256)l.flags&=-257,l=xN(r,l,h);else if(l.memoizedState!==null)l.child=r.child,l.flags|=128,l=null;else throw Error(n(558));else if(Gn||fh(r,l,h,!1),S=(h&r.childLanes)!==0,Gn||S){if(g=Jt,g!==null&&(I=te(g,h),I!==0&&I!==E.retryLane))throw E.retryLane=I,uu(r,I),hs(g,r,I),DS;Rv(),l=xN(r,l,h)}else r=E.treeContext,ln=gr(I.nextSibling),vi=l,yt=!0,Al=null,pr=!1,r!==null&&r_(l,r),l=vv(l,g),l.flags|=4096;return l}return r=to(r.child,{mode:g.mode,children:g.children}),r.ref=l.ref,l.child=r,r.return=l,r}function xv(r,l){var h=l.ref;if(h===null)r!==null&&r.ref!==null&&(l.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(n(284));(r===null||r.ref!==h)&&(l.flags|=4194816)}}function IS(r,l,h,g,S){return pu(l),h=fS(r,l,h,g,void 0,S),g=pS(),r!==null&&!Gn?(mS(r,l,S),oo(r,l,S)):(yt&&g&&Ww(l),l.flags|=1,bi(r,l,h,S),l.child)}function bN(r,l,h,g,S,E){return pu(l),l.updateQueue=null,h=E_(l,g,h,S),S_(r),g=pS(),r!==null&&!Gn?(mS(r,l,E),oo(r,l,E)):(yt&&g&&Ww(l),l.flags|=1,bi(r,l,h,E),l.child)}function wN(r,l,h,g,S){if(pu(l),l.stateNode===null){var E=ch,I=h.contextType;typeof I=="object"&&I!==null&&(E=xi(I)),E=new h(g,E),l.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=MS,l.stateNode=E,E._reactInternals=l,E=l.stateNode,E.props=g,E.state=l.memoizedState,E.refs={},rS(l),I=h.contextType,E.context=typeof I=="object"&&I!==null?xi(I):ch,E.state=l.memoizedState,I=h.getDerivedStateFromProps,typeof I=="function"&&(RS(l,h,I,g),E.state=l.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(I=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),I!==E.state&&MS.enqueueReplaceState(E,E.state,null),mm(l,g,E,S),pm(),E.state=l.memoizedState),typeof E.componentDidMount=="function"&&(l.flags|=4194308),g=!0}else if(r===null){E=l.stateNode;var B=l.memoizedProps,Y=bu(h,B);E.props=Y;var re=E.context,de=h.contextType;I=ch,typeof de=="object"&&de!==null&&(I=xi(de));var fe=h.getDerivedStateFromProps;de=typeof fe=="function"||typeof E.getSnapshotBeforeUpdate=="function",B=l.pendingProps!==B,de||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(B||re!==I)&&oN(l,E,g,I),_l=!1;var ae=l.memoizedState;E.state=ae,mm(l,g,E,S),pm(),re=l.memoizedState,B||ae!==re||_l?(typeof fe=="function"&&(RS(l,h,fe,g),re=l.memoizedState),(Y=_l||aN(l,h,Y,g,ae,re,I))?(de||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(l.flags|=4194308)):(typeof E.componentDidMount=="function"&&(l.flags|=4194308),l.memoizedProps=g,l.memoizedState=re),E.props=g,E.state=re,E.context=I,g=Y):(typeof E.componentDidMount=="function"&&(l.flags|=4194308),g=!1)}else{E=l.stateNode,aS(r,l),I=l.memoizedProps,de=bu(h,I),E.props=de,fe=l.pendingProps,ae=E.context,re=h.contextType,Y=ch,typeof re=="object"&&re!==null&&(Y=xi(re)),B=h.getDerivedStateFromProps,(re=typeof B=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(I!==fe||ae!==Y)&&oN(l,E,g,Y),_l=!1,ae=l.memoizedState,E.state=ae,mm(l,g,E,S),pm();var le=l.memoizedState;I!==fe||ae!==le||_l||r!==null&&r.dependencies!==null&&ev(r.dependencies)?(typeof B=="function"&&(RS(l,h,B,g),le=l.memoizedState),(de=_l||aN(l,h,de,g,ae,le,Y)||r!==null&&r.dependencies!==null&&ev(r.dependencies))?(re||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(g,le,Y),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(g,le,Y)),typeof E.componentDidUpdate=="function"&&(l.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(l.flags|=1024)):(typeof E.componentDidUpdate!="function"||I===r.memoizedProps&&ae===r.memoizedState||(l.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||I===r.memoizedProps&&ae===r.memoizedState||(l.flags|=1024),l.memoizedProps=g,l.memoizedState=le),E.props=g,E.state=le,E.context=Y,g=de):(typeof E.componentDidUpdate!="function"||I===r.memoizedProps&&ae===r.memoizedState||(l.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||I===r.memoizedProps&&ae===r.memoizedState||(l.flags|=1024),g=!1)}return E=g,xv(r,l),g=(l.flags&128)!==0,E||g?(E=l.stateNode,h=g&&typeof h.getDerivedStateFromError!="function"?null:E.render(),l.flags|=1,r!==null&&g?(l.child=vu(l,r.child,null,S),l.child=vu(l,null,h,S)):bi(r,l,h,S),l.memoizedState=E.state,r=l.child):r=oo(r,l,S),r}function SN(r,l,h,g){return hu(),l.flags|=256,bi(r,l,h,g),l.child}var PS={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function LS(r){return{baseLanes:r,cachePool:d_()}}function FS(r,l,h){return r=r!==null?r.childLanes&~h:0,l&&(r|=Ps),r}function EN(r,l,h){var g=l.pendingProps,S=!1,E=(l.flags&128)!==0,I;if((I=E)||(I=r!==null&&r.memoizedState===null?!1:(Pn.current&2)!==0),I&&(S=!0,l.flags&=-129),I=(l.flags&32)!==0,l.flags&=-33,r===null){if(yt){if(S?Ml(l):kl(),(r=ln)?(r=k2(r,pr),r=r!==null&&r.data!=="&"?r:null,r!==null&&(l.memoizedState={dehydrated:r,treeContext:El!==null?{id:da,overflow:ha}:null,retryLane:536870912,hydrationErrors:null},h=n_(r),h.return=l,l.child=h,vi=l,ln=null)):r=null,r===null)throw Cl(l);return vE(r)?l.lanes=32:l.lanes=536870912,null}var B=g.children;return g=g.fallback,S?(kl(),S=l.mode,B=bv({mode:"hidden",children:B},S),g=du(g,S,h,null),B.return=l,g.return=l,B.sibling=g,l.child=B,g=l.child,g.memoizedState=LS(h),g.childLanes=FS(r,I,h),l.memoizedState=PS,bm(null,g)):(Ml(l),US(l,B))}var Y=r.memoizedState;if(Y!==null&&(B=Y.dehydrated,B!==null)){if(E)l.flags&256?(Ml(l),l.flags&=-257,l=jS(r,l,h)):l.memoizedState!==null?(kl(),l.child=r.child,l.flags|=128,l=null):(kl(),B=g.fallback,S=l.mode,g=bv({mode:"visible",children:g.children},S),B=du(B,S,h,null),B.flags|=2,g.return=l,B.return=l,g.sibling=B,l.child=g,vu(l,r.child,null,h),g=l.child,g.memoizedState=LS(h),g.childLanes=FS(r,I,h),l.memoizedState=PS,l=bm(null,g));else if(Ml(l),vE(B)){if(I=B.nextSibling&&B.nextSibling.dataset,I)var re=I.dgst;I=re,g=Error(n(419)),g.stack="",g.digest=I,lm({value:g,source:null,stack:null}),l=jS(r,l,h)}else if(Gn||fh(r,l,h,!1),I=(h&r.childLanes)!==0,Gn||I){if(I=Jt,I!==null&&(g=te(I,h),g!==0&&g!==Y.retryLane))throw Y.retryLane=g,uu(r,g),hs(I,r,g),DS;yE(B)||Rv(),l=jS(r,l,h)}else yE(B)?(l.flags|=192,l.child=r.child,l=null):(r=Y.treeContext,ln=gr(B.nextSibling),vi=l,yt=!0,Al=null,pr=!1,r!==null&&r_(l,r),l=US(l,g.children),l.flags|=4096);return l}return S?(kl(),B=g.fallback,S=l.mode,Y=r.child,re=Y.sibling,g=to(Y,{mode:"hidden",children:g.children}),g.subtreeFlags=Y.subtreeFlags&65011712,re!==null?B=to(re,B):(B=du(B,S,h,null),B.flags|=2),B.return=l,g.return=l,g.sibling=B,l.child=g,bm(null,g),g=l.child,B=r.child.memoizedState,B===null?B=LS(h):(S=B.cachePool,S!==null?(Y=Hn._currentValue,S=S.parent!==Y?{parent:Y,pool:Y}:S):S=d_(),B={baseLanes:B.baseLanes|h,cachePool:S}),g.memoizedState=B,g.childLanes=FS(r,I,h),l.memoizedState=PS,bm(r.child,g)):(Ml(l),h=r.child,r=h.sibling,h=to(h,{mode:"visible",children:g.children}),h.return=l,h.sibling=null,r!==null&&(I=l.deletions,I===null?(l.deletions=[r],l.flags|=16):I.push(r)),l.child=h,l.memoizedState=null,h)}function US(r,l){return l=bv({mode:"visible",children:l},r.mode),l.return=r,r.child=l}function bv(r,l){return r=Ms(22,r,null,l),r.lanes=0,r}function jS(r,l,h){return vu(l,r.child,null,h),r=US(l,l.pendingProps.children),r.flags|=2,l.memoizedState=null,r}function AN(r,l,h){r.lanes|=l;var g=r.alternate;g!==null&&(g.lanes|=l),Zw(r.return,l,h)}function BS(r,l,h,g,S,E){var I=r.memoizedState;I===null?r.memoizedState={isBackwards:l,rendering:null,renderingStartTime:0,last:g,tail:h,tailMode:S,treeForkCount:E}:(I.isBackwards=l,I.rendering=null,I.renderingStartTime=0,I.last=g,I.tail=h,I.tailMode=S,I.treeForkCount=E)}function CN(r,l,h){var g=l.pendingProps,S=g.revealOrder,E=g.tail;g=g.children;var I=Pn.current,B=(I&2)!==0;if(B?(I=I&1|2,l.flags|=128):I&=1,ue(Pn,I),bi(r,l,g,h),g=yt?om:0,!B&&r!==null&&(r.flags&128)!==0)e:for(r=l.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&AN(r,h,l);else if(r.tag===19)AN(r,h,l);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===l)break e;for(;r.sibling===null;){if(r.return===null||r.return===l)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(S){case"forwards":for(h=l.child,S=null;h!==null;)r=h.alternate,r!==null&&lv(r)===null&&(S=h),h=h.sibling;h=S,h===null?(S=l.child,l.child=null):(S=h.sibling,h.sibling=null),BS(l,!1,S,h,E,g);break;case"backwards":case"unstable_legacy-backwards":for(h=null,S=l.child,l.child=null;S!==null;){if(r=S.alternate,r!==null&&lv(r)===null){l.child=S;break}r=S.sibling,S.sibling=h,h=S,S=r}BS(l,!0,h,null,E,g);break;case"together":BS(l,!1,null,null,void 0,g);break;default:l.memoizedState=null}return l.child}function oo(r,l,h){if(r!==null&&(l.dependencies=r.dependencies),Pl|=l.lanes,(h&l.childLanes)===0)if(r!==null){if(fh(r,l,h,!1),(h&l.childLanes)===0)return null}else return null;if(r!==null&&l.child!==r.child)throw Error(n(153));if(l.child!==null){for(r=l.child,h=to(r,r.pendingProps),l.child=h,h.return=l;r.sibling!==null;)r=r.sibling,h=h.sibling=to(r,r.pendingProps),h.return=l;h.sibling=null}return l.child}function OS(r,l){return(r.lanes&l)!==0?!0:(r=r.dependencies,!!(r!==null&&ev(r)))}function hF(r,l,h){switch(l.tag){case 3:mt(l,l.stateNode.containerInfo),Tl(l,Hn,r.memoizedState.cache),hu();break;case 27:case 5:lt(l);break;case 4:mt(l,l.stateNode.containerInfo);break;case 10:Tl(l,l.type,l.memoizedProps.value);break;case 31:if(l.memoizedState!==null)return l.flags|=128,dS(l),null;break;case 13:var g=l.memoizedState;if(g!==null)return g.dehydrated!==null?(Ml(l),l.flags|=128,null):(h&l.child.childLanes)!==0?EN(r,l,h):(Ml(l),r=oo(r,l,h),r!==null?r.sibling:null);Ml(l);break;case 19:var S=(r.flags&128)!==0;if(g=(h&l.childLanes)!==0,g||(fh(r,l,h,!1),g=(h&l.childLanes)!==0),S){if(g)return CN(r,l,h);l.flags|=128}if(S=l.memoizedState,S!==null&&(S.rendering=null,S.tail=null,S.lastEffect=null),ue(Pn,Pn.current),g)break;return null;case 22:return l.lanes=0,yN(r,l,h,l.pendingProps);case 24:Tl(l,Hn,r.memoizedState.cache)}return oo(r,l,h)}function TN(r,l,h){if(r!==null)if(r.memoizedProps!==l.pendingProps)Gn=!0;else{if(!OS(r,h)&&(l.flags&128)===0)return Gn=!1,hF(r,l,h);Gn=(r.flags&131072)!==0}else Gn=!1,yt&&(l.flags&1048576)!==0&&s_(l,om,l.index);switch(l.lanes=0,l.tag){case 16:e:{var g=l.pendingProps;if(r=gu(l.elementType),l.type=r,typeof r=="function")qw(r)?(g=bu(r,g),l.tag=1,l=wN(null,l,r,g,h)):(l.tag=0,l=IS(null,l,r,g,h));else{if(r!=null){var S=r.$$typeof;if(S===L){l.tag=11,l=pN(null,l,r,g,h);break e}else if(S===M){l.tag=14,l=mN(null,l,r,g,h);break e}}throw l=$(r)||r,Error(n(306,l,""))}}return l;case 0:return IS(r,l,l.type,l.pendingProps,h);case 1:return g=l.type,S=bu(g,l.pendingProps),wN(r,l,g,S,h);case 3:e:{if(mt(l,l.stateNode.containerInfo),r===null)throw Error(n(387));g=l.pendingProps;var E=l.memoizedState;S=E.element,aS(r,l),mm(l,g,null,h);var I=l.memoizedState;if(g=I.cache,Tl(l,Hn,g),g!==E.cache&&eS(l,[Hn],h,!0),pm(),g=I.element,E.isDehydrated)if(E={element:g,isDehydrated:!1,cache:I.cache},l.updateQueue.baseState=E,l.memoizedState=E,l.flags&256){l=SN(r,l,g,h);break e}else if(g!==S){S=dr(Error(n(424)),l),lm(S),l=SN(r,l,g,h);break e}else{switch(r=l.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(ln=gr(r.firstChild),vi=l,yt=!0,Al=null,pr=!0,h=y_(l,null,g,h),l.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling}else{if(hu(),g===S){l=oo(r,l,h);break e}bi(r,l,g,h)}l=l.child}return l;case 26:return xv(r,l),r===null?(h=U2(l.type,null,l.pendingProps,null))?l.memoizedState=h:yt||(h=l.type,r=l.pendingProps,g=Fv(_e.current).createElement(h),g[Ee]=l,g[Ce]=r,wi(g,h,r),Xt(g),l.stateNode=g):l.memoizedState=U2(l.type,r.memoizedProps,l.pendingProps,r.memoizedState),null;case 27:return lt(l),r===null&&yt&&(g=l.stateNode=P2(l.type,l.pendingProps,_e.current),vi=l,pr=!0,S=ln,Bl(l.type)?(xE=S,ln=gr(g.firstChild)):ln=S),bi(r,l,l.pendingProps.children,h),xv(r,l),r===null&&(l.flags|=4194304),l.child;case 5:return r===null&&yt&&((S=g=ln)&&(g=zF(g,l.type,l.pendingProps,pr),g!==null?(l.stateNode=g,vi=l,ln=gr(g.firstChild),pr=!1,S=!0):S=!1),S||Cl(l)),lt(l),S=l.type,E=l.pendingProps,I=r!==null?r.memoizedProps:null,g=E.children,pE(S,E)?g=null:I!==null&&pE(S,I)&&(l.flags|=32),l.memoizedState!==null&&(S=fS(r,l,iF,null,null,h),Lm._currentValue=S),xv(r,l),bi(r,l,g,h),l.child;case 6:return r===null&&yt&&((r=h=ln)&&(h=GF(h,l.pendingProps,pr),h!==null?(l.stateNode=h,vi=l,ln=null,r=!0):r=!1),r||Cl(l)),null;case 13:return EN(r,l,h);case 4:return mt(l,l.stateNode.containerInfo),g=l.pendingProps,r===null?l.child=vu(l,null,g,h):bi(r,l,g,h),l.child;case 11:return pN(r,l,l.type,l.pendingProps,h);case 7:return bi(r,l,l.pendingProps,h),l.child;case 8:return bi(r,l,l.pendingProps.children,h),l.child;case 12:return bi(r,l,l.pendingProps.children,h),l.child;case 10:return g=l.pendingProps,Tl(l,l.type,g.value),bi(r,l,g.children,h),l.child;case 9:return S=l.type._context,g=l.pendingProps.children,pu(l),S=xi(S),g=g(S),l.flags|=1,bi(r,l,g,h),l.child;case 14:return mN(r,l,l.type,l.pendingProps,h);case 15:return gN(r,l,l.type,l.pendingProps,h);case 19:return CN(r,l,h);case 31:return dF(r,l,h);case 22:return yN(r,l,h,l.pendingProps);case 24:return pu(l),g=xi(Hn),r===null?(S=iS(),S===null&&(S=Jt,E=tS(),S.pooledCache=E,E.refCount++,E!==null&&(S.pooledCacheLanes|=h),S=E),l.memoizedState={parent:g,cache:S},rS(l),Tl(l,Hn,S)):((r.lanes&h)!==0&&(aS(r,l),mm(l,null,null,h),pm()),S=r.memoizedState,E=l.memoizedState,S.parent!==g?(S={parent:g,cache:g},l.memoizedState=S,l.lanes===0&&(l.memoizedState=l.updateQueue.baseState=S),Tl(l,Hn,g)):(g=E.cache,Tl(l,Hn,g),g!==S.cache&&eS(l,[Hn],h,!0))),bi(r,l,l.pendingProps.children,h),l.child;case 29:throw l.pendingProps}throw Error(n(156,l.tag))}function lo(r){r.flags|=4}function HS(r,l,h,g,S){if((l=(r.mode&32)!==0)&&(l=!1),l){if(r.flags|=16777216,(S&335544128)===S)if(r.stateNode.complete)r.flags|=8192;else if(ZN())r.flags|=8192;else throw yu=sv,sS}else r.flags&=-16777217}function _N(r,l){if(l.type!=="stylesheet"||(l.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!z2(l))if(ZN())r.flags|=8192;else throw yu=sv,sS}function wv(r,l){l!==null&&(r.flags|=4),r.flags&16384&&(l=r.tag!==22?ru():536870912,r.lanes|=l,Ch|=l)}function wm(r,l){if(!yt)switch(r.tailMode){case"hidden":l=r.tail;for(var h=null;l!==null;)l.alternate!==null&&(h=l),l=l.sibling;h===null?r.tail=null:h.sibling=null;break;case"collapsed":h=r.tail;for(var g=null;h!==null;)h.alternate!==null&&(g=h),h=h.sibling;g===null?l||r.tail===null?r.tail=null:r.tail.sibling=null:g.sibling=null}}function cn(r){var l=r.alternate!==null&&r.alternate.child===r.child,h=0,g=0;if(l)for(var S=r.child;S!==null;)h|=S.lanes|S.childLanes,g|=S.subtreeFlags&65011712,g|=S.flags&65011712,S.return=r,S=S.sibling;else for(S=r.child;S!==null;)h|=S.lanes|S.childLanes,g|=S.subtreeFlags,g|=S.flags,S.return=r,S=S.sibling;return r.subtreeFlags|=g,r.childLanes=h,l}function fF(r,l,h){var g=l.pendingProps;switch(Xw(l),l.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return cn(l),null;case 1:return cn(l),null;case 3:return h=l.stateNode,g=null,r!==null&&(g=r.memoizedState.cache),l.memoizedState.cache!==g&&(l.flags|=2048),so(Hn),rt(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(r===null||r.child===null)&&(hh(l)?lo(l):r===null||r.memoizedState.isDehydrated&&(l.flags&256)===0||(l.flags|=1024,Kw())),cn(l),null;case 26:var S=l.type,E=l.memoizedState;return r===null?(lo(l),E!==null?(cn(l),_N(l,E)):(cn(l),HS(l,S,null,g,h))):E?E!==r.memoizedState?(lo(l),cn(l),_N(l,E)):(cn(l),l.flags&=-16777217):(r=r.memoizedProps,r!==g&&lo(l),cn(l),HS(l,S,r,g,h)),null;case 27:if(En(l),h=_e.current,S=l.type,r!==null&&l.stateNode!=null)r.memoizedProps!==g&&lo(l);else{if(!g){if(l.stateNode===null)throw Error(n(166));return cn(l),null}r=me.current,hh(l)?a_(l):(r=P2(S,g,h),l.stateNode=r,lo(l))}return cn(l),null;case 5:if(En(l),S=l.type,r!==null&&l.stateNode!=null)r.memoizedProps!==g&&lo(l);else{if(!g){if(l.stateNode===null)throw Error(n(166));return cn(l),null}if(E=me.current,hh(l))a_(l);else{var I=Fv(_e.current);switch(E){case 1:E=I.createElementNS("http://www.w3.org/2000/svg",S);break;case 2:E=I.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;default:switch(S){case"svg":E=I.createElementNS("http://www.w3.org/2000/svg",S);break;case"math":E=I.createElementNS("http://www.w3.org/1998/Math/MathML",S);break;case"script":E=I.createElement("div"),E.innerHTML="<script><\/script>",E=E.removeChild(E.firstChild);break;case"select":E=typeof g.is=="string"?I.createElement("select",{is:g.is}):I.createElement("select"),g.multiple?E.multiple=!0:g.size&&(E.size=g.size);break;default:E=typeof g.is=="string"?I.createElement(S,{is:g.is}):I.createElement(S)}}E[Ee]=l,E[Ce]=g;e:for(I=l.child;I!==null;){if(I.tag===5||I.tag===6)E.appendChild(I.stateNode);else if(I.tag!==4&&I.tag!==27&&I.child!==null){I.child.return=I,I=I.child;continue}if(I===l)break e;for(;I.sibling===null;){if(I.return===null||I.return===l)break e;I=I.return}I.sibling.return=I.return,I=I.sibling}l.stateNode=E;e:switch(wi(E,S,g),S){case"button":case"input":case"select":case"textarea":g=!!g.autoFocus;break e;case"img":g=!0;break e;default:g=!1}g&&lo(l)}}return cn(l),HS(l,l.type,r===null?null:r.memoizedProps,l.pendingProps,h),null;case 6:if(r&&l.stateNode!=null)r.memoizedProps!==g&&lo(l);else{if(typeof g!="string"&&l.stateNode===null)throw Error(n(166));if(r=_e.current,hh(l)){if(r=l.stateNode,h=l.memoizedProps,g=null,S=vi,S!==null)switch(S.tag){case 27:case 5:g=S.memoizedProps}r[Ee]=l,r=!!(r.nodeValue===h||g!==null&&g.suppressHydrationWarning===!0||E2(r.nodeValue,h)),r||Cl(l,!0)}else r=Fv(r).createTextNode(g),r[Ee]=l,l.stateNode=r}return cn(l),null;case 31:if(h=l.memoizedState,r===null||r.memoizedState!==null){if(g=hh(l),h!==null){if(r===null){if(!g)throw Error(n(318));if(r=l.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(n(557));r[Ee]=l}else hu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;cn(l),r=!1}else h=Kw(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=h),r=!0;if(!r)return l.flags&256?(Ds(l),l):(Ds(l),null);if((l.flags&128)!==0)throw Error(n(558))}return cn(l),null;case 13:if(g=l.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(S=hh(l),g!==null&&g.dehydrated!==null){if(r===null){if(!S)throw Error(n(318));if(S=l.memoizedState,S=S!==null?S.dehydrated:null,!S)throw Error(n(317));S[Ee]=l}else hu(),(l.flags&128)===0&&(l.memoizedState=null),l.flags|=4;cn(l),S=!1}else S=Kw(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=S),S=!0;if(!S)return l.flags&256?(Ds(l),l):(Ds(l),null)}return Ds(l),(l.flags&128)!==0?(l.lanes=h,l):(h=g!==null,r=r!==null&&r.memoizedState!==null,h&&(g=l.child,S=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(S=g.alternate.memoizedState.cachePool.pool),E=null,g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(E=g.memoizedState.cachePool.pool),E!==S&&(g.flags|=2048)),h!==r&&h&&(l.child.flags|=8192),wv(l,l.updateQueue),cn(l),null);case 4:return rt(),r===null&&cE(l.stateNode.containerInfo),cn(l),null;case 10:return so(l.type),cn(l),null;case 19:if(Z(Pn),g=l.memoizedState,g===null)return cn(l),null;if(S=(l.flags&128)!==0,E=g.rendering,E===null)if(S)wm(g,!1);else{if(Tn!==0||r!==null&&(r.flags&128)!==0)for(r=l.child;r!==null;){if(E=lv(r),E!==null){for(l.flags|=128,wm(g,!1),r=E.updateQueue,l.updateQueue=r,wv(l,r),l.subtreeFlags=0,r=h,h=l.child;h!==null;)t_(h,r),h=h.sibling;return ue(Pn,Pn.current&1|2),yt&&no(l,g.treeForkCount),l.child}r=r.sibling}g.tail!==null&&St()>Tv&&(l.flags|=128,S=!0,wm(g,!1),l.lanes=4194304)}else{if(!S)if(r=lv(E),r!==null){if(l.flags|=128,S=!0,r=r.updateQueue,l.updateQueue=r,wv(l,r),wm(g,!0),g.tail===null&&g.tailMode==="hidden"&&!E.alternate&&!yt)return cn(l),null}else 2*St()-g.renderingStartTime>Tv&&h!==536870912&&(l.flags|=128,S=!0,wm(g,!1),l.lanes=4194304);g.isBackwards?(E.sibling=l.child,l.child=E):(r=g.last,r!==null?r.sibling=E:l.child=E,g.last=E)}return g.tail!==null?(r=g.tail,g.rendering=r,g.tail=r.sibling,g.renderingStartTime=St(),r.sibling=null,h=Pn.current,ue(Pn,S?h&1|2:h&1),yt&&no(l,g.treeForkCount),r):(cn(l),null);case 22:case 23:return Ds(l),uS(),g=l.memoizedState!==null,r!==null?r.memoizedState!==null!==g&&(l.flags|=8192):g&&(l.flags|=8192),g?(h&536870912)!==0&&(l.flags&128)===0&&(cn(l),l.subtreeFlags&6&&(l.flags|=8192)):cn(l),h=l.updateQueue,h!==null&&wv(l,h.retryQueue),h=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),g=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(g=l.memoizedState.cachePool.pool),g!==h&&(l.flags|=2048),r!==null&&Z(mu),null;case 24:return h=null,r!==null&&(h=r.memoizedState.cache),l.memoizedState.cache!==h&&(l.flags|=2048),so(Hn),cn(l),null;case 25:return null;case 30:return null}throw Error(n(156,l.tag))}function pF(r,l){switch(Xw(l),l.tag){case 1:return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 3:return so(Hn),rt(),r=l.flags,(r&65536)!==0&&(r&128)===0?(l.flags=r&-65537|128,l):null;case 26:case 27:case 5:return En(l),null;case 31:if(l.memoizedState!==null){if(Ds(l),l.alternate===null)throw Error(n(340));hu()}return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 13:if(Ds(l),r=l.memoizedState,r!==null&&r.dehydrated!==null){if(l.alternate===null)throw Error(n(340));hu()}return r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 19:return Z(Pn),null;case 4:return rt(),null;case 10:return so(l.type),null;case 22:case 23:return Ds(l),uS(),r!==null&&Z(mu),r=l.flags,r&65536?(l.flags=r&-65537|128,l):null;case 24:return so(Hn),null;case 25:return null;default:return null}}function NN(r,l){switch(Xw(l),l.tag){case 3:so(Hn),rt();break;case 26:case 27:case 5:En(l);break;case 4:rt();break;case 31:l.memoizedState!==null&&Ds(l);break;case 13:Ds(l);break;case 19:Z(Pn);break;case 10:so(l.type);break;case 22:case 23:Ds(l),uS(),r!==null&&Z(mu);break;case 24:so(Hn)}}function Sm(r,l){try{var h=l.updateQueue,g=h!==null?h.lastEffect:null;if(g!==null){var S=g.next;h=S;do{if((h.tag&r)===r){g=void 0;var E=h.create,I=h.inst;g=E(),I.destroy=g}h=h.next}while(h!==S)}}catch(B){Ft(l,l.return,B)}}function Dl(r,l,h){try{var g=l.updateQueue,S=g!==null?g.lastEffect:null;if(S!==null){var E=S.next;g=E;do{if((g.tag&r)===r){var I=g.inst,B=I.destroy;if(B!==void 0){I.destroy=void 0,S=l;var Y=h,re=B;try{re()}catch(de){Ft(S,Y,de)}}}g=g.next}while(g!==E)}}catch(de){Ft(l,l.return,de)}}function RN(r){var l=r.updateQueue;if(l!==null){var h=r.stateNode;try{x_(l,h)}catch(g){Ft(r,r.return,g)}}}function MN(r,l,h){h.props=bu(r.type,r.memoizedProps),h.state=r.memoizedState;try{h.componentWillUnmount()}catch(g){Ft(r,l,g)}}function Em(r,l){try{var h=r.ref;if(h!==null){switch(r.tag){case 26:case 27:case 5:var g=r.stateNode;break;case 30:g=r.stateNode;break;default:g=r.stateNode}typeof h=="function"?r.refCleanup=h(g):h.current=g}}catch(S){Ft(r,l,S)}}function fa(r,l){var h=r.ref,g=r.refCleanup;if(h!==null)if(typeof g=="function")try{g()}catch(S){Ft(r,l,S)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(S){Ft(r,l,S)}else h.current=null}function kN(r){var l=r.type,h=r.memoizedProps,g=r.stateNode;try{e:switch(l){case"button":case"input":case"select":case"textarea":h.autoFocus&&g.focus();break e;case"img":h.src?g.src=h.src:h.srcSet&&(g.srcset=h.srcSet)}}catch(S){Ft(r,r.return,S)}}function zS(r,l,h){try{var g=r.stateNode;FF(g,r.type,h,l),g[Ce]=l}catch(S){Ft(r,r.return,S)}}function DN(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&Bl(r.type)||r.tag===4}function GS(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||DN(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&Bl(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function VS(r,l,h){var g=r.tag;if(g===5||g===6)r=r.stateNode,l?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(r,l):(l=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,l.appendChild(r),h=h._reactRootContainer,h!=null||l.onclick!==null||(l.onclick=Za));else if(g!==4&&(g===27&&Bl(r.type)&&(h=r.stateNode,l=null),r=r.child,r!==null))for(VS(r,l,h),r=r.sibling;r!==null;)VS(r,l,h),r=r.sibling}function Sv(r,l,h){var g=r.tag;if(g===5||g===6)r=r.stateNode,l?h.insertBefore(r,l):h.appendChild(r);else if(g!==4&&(g===27&&Bl(r.type)&&(h=r.stateNode),r=r.child,r!==null))for(Sv(r,l,h),r=r.sibling;r!==null;)Sv(r,l,h),r=r.sibling}function IN(r){var l=r.stateNode,h=r.memoizedProps;try{for(var g=r.type,S=l.attributes;S.length;)l.removeAttributeNode(S[0]);wi(l,g,h),l[Ee]=r,l[Ce]=h}catch(E){Ft(r,r.return,E)}}var co=!1,Vn=!1,qS=!1,PN=typeof WeakSet=="function"?WeakSet:Set,ri=null;function mF(r,l){if(r=r.containerInfo,hE=Gv,r=$T(r),jw(r)){if("selectionStart"in r)var h={start:r.selectionStart,end:r.selectionEnd};else e:{h=(h=r.ownerDocument)&&h.defaultView||window;var g=h.getSelection&&h.getSelection();if(g&&g.rangeCount!==0){h=g.anchorNode;var S=g.anchorOffset,E=g.focusNode;g=g.focusOffset;try{h.nodeType,E.nodeType}catch{h=null;break e}var I=0,B=-1,Y=-1,re=0,de=0,fe=r,ae=null;t:for(;;){for(var le;fe!==h||S!==0&&fe.nodeType!==3||(B=I+S),fe!==E||g!==0&&fe.nodeType!==3||(Y=I+g),fe.nodeType===3&&(I+=fe.nodeValue.length),(le=fe.firstChild)!==null;)ae=fe,fe=le;for(;;){if(fe===r)break t;if(ae===h&&++re===S&&(B=I),ae===E&&++de===g&&(Y=I),(le=fe.nextSibling)!==null)break;fe=ae,ae=fe.parentNode}fe=le}h=B===-1||Y===-1?null:{start:B,end:Y}}else h=null}h=h||{start:0,end:0}}else h=null;for(fE={focusedElem:r,selectionRange:h},Gv=!1,ri=l;ri!==null;)if(l=ri,r=l.child,(l.subtreeFlags&1028)!==0&&r!==null)r.return=l,ri=r;else for(;ri!==null;){switch(l=ri,E=l.alternate,r=l.flags,l.tag){case 0:if((r&4)!==0&&(r=l.updateQueue,r=r!==null?r.events:null,r!==null))for(h=0;h<r.length;h++)S=r[h],S.ref.impl=S.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&E!==null){r=void 0,h=l,S=E.memoizedProps,E=E.memoizedState,g=h.stateNode;try{var De=bu(h.type,S);r=g.getSnapshotBeforeUpdate(De,E),g.__reactInternalSnapshotBeforeUpdate=r}catch(Ve){Ft(h,h.return,Ve)}}break;case 3:if((r&1024)!==0){if(r=l.stateNode.containerInfo,h=r.nodeType,h===9)gE(r);else if(h===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":gE(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(n(163))}if(r=l.sibling,r!==null){r.return=l.return,ri=r;break}ri=l.return}}function LN(r,l,h){var g=h.flags;switch(h.tag){case 0:case 11:case 15:ho(r,h),g&4&&Sm(5,h);break;case 1:if(ho(r,h),g&4)if(r=h.stateNode,l===null)try{r.componentDidMount()}catch(I){Ft(h,h.return,I)}else{var S=bu(h.type,l.memoizedProps);l=l.memoizedState;try{r.componentDidUpdate(S,l,r.__reactInternalSnapshotBeforeUpdate)}catch(I){Ft(h,h.return,I)}}g&64&&RN(h),g&512&&Em(h,h.return);break;case 3:if(ho(r,h),g&64&&(r=h.updateQueue,r!==null)){if(l=null,h.child!==null)switch(h.child.tag){case 27:case 5:l=h.child.stateNode;break;case 1:l=h.child.stateNode}try{x_(r,l)}catch(I){Ft(h,h.return,I)}}break;case 27:l===null&&g&4&&IN(h);case 26:case 5:ho(r,h),l===null&&g&4&&kN(h),g&512&&Em(h,h.return);break;case 12:ho(r,h);break;case 31:ho(r,h),g&4&&jN(r,h);break;case 13:ho(r,h),g&4&&BN(r,h),g&64&&(r=h.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(h=AF.bind(null,h),VF(r,h))));break;case 22:if(g=h.memoizedState!==null||co,!g){l=l!==null&&l.memoizedState!==null||Vn,S=co;var E=Vn;co=g,(Vn=l)&&!E?fo(r,h,(h.subtreeFlags&8772)!==0):ho(r,h),co=S,Vn=E}break;case 30:break;default:ho(r,h)}}function FN(r){var l=r.alternate;l!==null&&(r.alternate=null,FN(l)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(l=r.stateNode,l!==null&&An(l)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var hn=null,ls=!1;function uo(r,l,h){for(h=h.child;h!==null;)UN(r,l,h),h=h.sibling}function UN(r,l,h){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(Br,h)}catch{}switch(h.tag){case 26:Vn||fa(h,l),uo(r,l,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Vn||fa(h,l);var g=hn,S=ls;Bl(h.type)&&(hn=h.stateNode,ls=!1),uo(r,l,h),Dm(h.stateNode),hn=g,ls=S;break;case 5:Vn||fa(h,l);case 6:if(g=hn,S=ls,hn=null,uo(r,l,h),hn=g,ls=S,hn!==null)if(ls)try{(hn.nodeType===9?hn.body:hn.nodeName==="HTML"?hn.ownerDocument.body:hn).removeChild(h.stateNode)}catch(E){Ft(h,l,E)}else try{hn.removeChild(h.stateNode)}catch(E){Ft(h,l,E)}break;case 18:hn!==null&&(ls?(r=hn,R2(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,h.stateNode),Ih(r)):R2(hn,h.stateNode));break;case 4:g=hn,S=ls,hn=h.stateNode.containerInfo,ls=!0,uo(r,l,h),hn=g,ls=S;break;case 0:case 11:case 14:case 15:Dl(2,h,l),Vn||Dl(4,h,l),uo(r,l,h);break;case 1:Vn||(fa(h,l),g=h.stateNode,typeof g.componentWillUnmount=="function"&&MN(h,l,g)),uo(r,l,h);break;case 21:uo(r,l,h);break;case 22:Vn=(g=Vn)||h.memoizedState!==null,uo(r,l,h),Vn=g;break;default:uo(r,l,h)}}function jN(r,l){if(l.memoizedState===null&&(r=l.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{Ih(r)}catch(h){Ft(l,l.return,h)}}}function BN(r,l){if(l.memoizedState===null&&(r=l.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{Ih(r)}catch(h){Ft(l,l.return,h)}}function gF(r){switch(r.tag){case 31:case 13:case 19:var l=r.stateNode;return l===null&&(l=r.stateNode=new PN),l;case 22:return r=r.stateNode,l=r._retryCache,l===null&&(l=r._retryCache=new PN),l;default:throw Error(n(435,r.tag))}}function Ev(r,l){var h=gF(r);l.forEach(function(g){if(!h.has(g)){h.add(g);var S=CF.bind(null,r,g);g.then(S,S)}})}function cs(r,l){var h=l.deletions;if(h!==null)for(var g=0;g<h.length;g++){var S=h[g],E=r,I=l,B=I;e:for(;B!==null;){switch(B.tag){case 27:if(Bl(B.type)){hn=B.stateNode,ls=!1;break e}break;case 5:hn=B.stateNode,ls=!1;break e;case 3:case 4:hn=B.stateNode.containerInfo,ls=!0;break e}B=B.return}if(hn===null)throw Error(n(160));UN(E,I,S),hn=null,ls=!1,E=S.alternate,E!==null&&(E.return=null),S.return=null}if(l.subtreeFlags&13886)for(l=l.child;l!==null;)ON(l,r),l=l.sibling}var Gr=null;function ON(r,l){var h=r.alternate,g=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:cs(l,r),us(r),g&4&&(Dl(3,r,r.return),Sm(3,r),Dl(5,r,r.return));break;case 1:cs(l,r),us(r),g&512&&(Vn||h===null||fa(h,h.return)),g&64&&co&&(r=r.updateQueue,r!==null&&(g=r.callbacks,g!==null&&(h=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=h===null?g:h.concat(g))));break;case 26:var S=Gr;if(cs(l,r),us(r),g&512&&(Vn||h===null||fa(h,h.return)),g&4){var E=h!==null?h.memoizedState:null;if(g=r.memoizedState,h===null)if(g===null)if(r.stateNode===null){e:{g=r.type,h=r.memoizedProps,S=S.ownerDocument||S;t:switch(g){case"title":E=S.getElementsByTagName("title")[0],(!E||E[on]||E[Ee]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=S.createElement(g),S.head.insertBefore(E,S.querySelector("head > title"))),wi(E,g,h),E[Ee]=r,Xt(E),g=E;break e;case"link":var I=O2("link","href",S).get(g+(h.href||""));if(I){for(var B=0;B<I.length;B++)if(E=I[B],E.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&E.getAttribute("rel")===(h.rel==null?null:h.rel)&&E.getAttribute("title")===(h.title==null?null:h.title)&&E.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){I.splice(B,1);break t}}E=S.createElement(g),wi(E,g,h),S.head.appendChild(E);break;case"meta":if(I=O2("meta","content",S).get(g+(h.content||""))){for(B=0;B<I.length;B++)if(E=I[B],E.getAttribute("content")===(h.content==null?null:""+h.content)&&E.getAttribute("name")===(h.name==null?null:h.name)&&E.getAttribute("property")===(h.property==null?null:h.property)&&E.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&E.getAttribute("charset")===(h.charSet==null?null:h.charSet)){I.splice(B,1);break t}}E=S.createElement(g),wi(E,g,h),S.head.appendChild(E);break;default:throw Error(n(468,g))}E[Ee]=r,Xt(E),g=E}r.stateNode=g}else H2(S,r.type,r.stateNode);else r.stateNode=B2(S,g,r.memoizedProps);else E!==g?(E===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):E.count--,g===null?H2(S,r.type,r.stateNode):B2(S,g,r.memoizedProps)):g===null&&r.stateNode!==null&&zS(r,r.memoizedProps,h.memoizedProps)}break;case 27:cs(l,r),us(r),g&512&&(Vn||h===null||fa(h,h.return)),h!==null&&g&4&&zS(r,r.memoizedProps,h.memoizedProps);break;case 5:if(cs(l,r),us(r),g&512&&(Vn||h===null||fa(h,h.return)),r.flags&32){S=r.stateNode;try{nh(S,"")}catch(De){Ft(r,r.return,De)}}g&4&&r.stateNode!=null&&(S=r.memoizedProps,zS(r,S,h!==null?h.memoizedProps:S)),g&1024&&(qS=!0);break;case 6:if(cs(l,r),us(r),g&4){if(r.stateNode===null)throw Error(n(162));g=r.memoizedProps,h=r.stateNode;try{h.nodeValue=g}catch(De){Ft(r,r.return,De)}}break;case 3:if(Bv=null,S=Gr,Gr=Uv(l.containerInfo),cs(l,r),Gr=S,us(r),g&4&&h!==null&&h.memoizedState.isDehydrated)try{Ih(l.containerInfo)}catch(De){Ft(r,r.return,De)}qS&&(qS=!1,HN(r));break;case 4:g=Gr,Gr=Uv(r.stateNode.containerInfo),cs(l,r),us(r),Gr=g;break;case 12:cs(l,r),us(r);break;case 31:cs(l,r),us(r),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,Ev(r,g)));break;case 13:cs(l,r),us(r),r.child.flags&8192&&r.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(Cv=St()),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,Ev(r,g)));break;case 22:S=r.memoizedState!==null;var Y=h!==null&&h.memoizedState!==null,re=co,de=Vn;if(co=re||S,Vn=de||Y,cs(l,r),Vn=de,co=re,us(r),g&8192)e:for(l=r.stateNode,l._visibility=S?l._visibility&-2:l._visibility|1,S&&(h===null||Y||co||Vn||wu(r)),h=null,l=r;;){if(l.tag===5||l.tag===26){if(h===null){Y=h=l;try{if(E=Y.stateNode,S)I=E.style,typeof I.setProperty=="function"?I.setProperty("display","none","important"):I.display="none";else{B=Y.stateNode;var fe=Y.memoizedProps.style,ae=fe!=null&&fe.hasOwnProperty("display")?fe.display:null;B.style.display=ae==null||typeof ae=="boolean"?"":(""+ae).trim()}}catch(De){Ft(Y,Y.return,De)}}}else if(l.tag===6){if(h===null){Y=l;try{Y.stateNode.nodeValue=S?"":Y.memoizedProps}catch(De){Ft(Y,Y.return,De)}}}else if(l.tag===18){if(h===null){Y=l;try{var le=Y.stateNode;S?M2(le,!0):M2(Y.stateNode,!1)}catch(De){Ft(Y,Y.return,De)}}}else if((l.tag!==22&&l.tag!==23||l.memoizedState===null||l===r)&&l.child!==null){l.child.return=l,l=l.child;continue}if(l===r)break e;for(;l.sibling===null;){if(l.return===null||l.return===r)break e;h===l&&(h=null),l=l.return}h===l&&(h=null),l.sibling.return=l.return,l=l.sibling}g&4&&(g=r.updateQueue,g!==null&&(h=g.retryQueue,h!==null&&(g.retryQueue=null,Ev(r,h))));break;case 19:cs(l,r),us(r),g&4&&(g=r.updateQueue,g!==null&&(r.updateQueue=null,Ev(r,g)));break;case 30:break;case 21:break;default:cs(l,r),us(r)}}function us(r){var l=r.flags;if(l&2){try{for(var h,g=r.return;g!==null;){if(DN(g)){h=g;break}g=g.return}if(h==null)throw Error(n(160));switch(h.tag){case 27:var S=h.stateNode,E=GS(r);Sv(r,E,S);break;case 5:var I=h.stateNode;h.flags&32&&(nh(I,""),h.flags&=-33);var B=GS(r);Sv(r,B,I);break;case 3:case 4:var Y=h.stateNode.containerInfo,re=GS(r);VS(r,re,Y);break;default:throw Error(n(161))}}catch(de){Ft(r,r.return,de)}r.flags&=-3}l&4096&&(r.flags&=-4097)}function HN(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var l=r;HN(l),l.tag===5&&l.flags&1024&&l.stateNode.reset(),r=r.sibling}}function ho(r,l){if(l.subtreeFlags&8772)for(l=l.child;l!==null;)LN(r,l.alternate,l),l=l.sibling}function wu(r){for(r=r.child;r!==null;){var l=r;switch(l.tag){case 0:case 11:case 14:case 15:Dl(4,l,l.return),wu(l);break;case 1:fa(l,l.return);var h=l.stateNode;typeof h.componentWillUnmount=="function"&&MN(l,l.return,h),wu(l);break;case 27:Dm(l.stateNode);case 26:case 5:fa(l,l.return),wu(l);break;case 22:l.memoizedState===null&&wu(l);break;case 30:wu(l);break;default:wu(l)}r=r.sibling}}function fo(r,l,h){for(h=h&&(l.subtreeFlags&8772)!==0,l=l.child;l!==null;){var g=l.alternate,S=r,E=l,I=E.flags;switch(E.tag){case 0:case 11:case 15:fo(S,E,h),Sm(4,E);break;case 1:if(fo(S,E,h),g=E,S=g.stateNode,typeof S.componentDidMount=="function")try{S.componentDidMount()}catch(re){Ft(g,g.return,re)}if(g=E,S=g.updateQueue,S!==null){var B=g.stateNode;try{var Y=S.shared.hiddenCallbacks;if(Y!==null)for(S.shared.hiddenCallbacks=null,S=0;S<Y.length;S++)v_(Y[S],B)}catch(re){Ft(g,g.return,re)}}h&&I&64&&RN(E),Em(E,E.return);break;case 27:IN(E);case 26:case 5:fo(S,E,h),h&&g===null&&I&4&&kN(E),Em(E,E.return);break;case 12:fo(S,E,h);break;case 31:fo(S,E,h),h&&I&4&&jN(S,E);break;case 13:fo(S,E,h),h&&I&4&&BN(S,E);break;case 22:E.memoizedState===null&&fo(S,E,h),Em(E,E.return);break;case 30:break;default:fo(S,E,h)}l=l.sibling}}function $S(r,l){var h=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(h=r.memoizedState.cachePool.pool),r=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(r=l.memoizedState.cachePool.pool),r!==h&&(r!=null&&r.refCount++,h!=null&&cm(h))}function YS(r,l){r=null,l.alternate!==null&&(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&&(l.refCount++,r!=null&&cm(r))}function Vr(r,l,h,g){if(l.subtreeFlags&10256)for(l=l.child;l!==null;)zN(r,l,h,g),l=l.sibling}function zN(r,l,h,g){var S=l.flags;switch(l.tag){case 0:case 11:case 15:Vr(r,l,h,g),S&2048&&Sm(9,l);break;case 1:Vr(r,l,h,g);break;case 3:Vr(r,l,h,g),S&2048&&(r=null,l.alternate!==null&&(r=l.alternate.memoizedState.cache),l=l.memoizedState.cache,l!==r&&(l.refCount++,r!=null&&cm(r)));break;case 12:if(S&2048){Vr(r,l,h,g),r=l.stateNode;try{var E=l.memoizedProps,I=E.id,B=E.onPostCommit;typeof B=="function"&&B(I,l.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(Y){Ft(l,l.return,Y)}}else Vr(r,l,h,g);break;case 31:Vr(r,l,h,g);break;case 13:Vr(r,l,h,g);break;case 23:break;case 22:E=l.stateNode,I=l.alternate,l.memoizedState!==null?E._visibility&2?Vr(r,l,h,g):Am(r,l):E._visibility&2?Vr(r,l,h,g):(E._visibility|=2,Sh(r,l,h,g,(l.subtreeFlags&10256)!==0||!1)),S&2048&&$S(I,l);break;case 24:Vr(r,l,h,g),S&2048&&YS(l.alternate,l);break;default:Vr(r,l,h,g)}}function Sh(r,l,h,g,S){for(S=S&&((l.subtreeFlags&10256)!==0||!1),l=l.child;l!==null;){var E=r,I=l,B=h,Y=g,re=I.flags;switch(I.tag){case 0:case 11:case 15:Sh(E,I,B,Y,S),Sm(8,I);break;case 23:break;case 22:var de=I.stateNode;I.memoizedState!==null?de._visibility&2?Sh(E,I,B,Y,S):Am(E,I):(de._visibility|=2,Sh(E,I,B,Y,S)),S&&re&2048&&$S(I.alternate,I);break;case 24:Sh(E,I,B,Y,S),S&&re&2048&&YS(I.alternate,I);break;default:Sh(E,I,B,Y,S)}l=l.sibling}}function Am(r,l){if(l.subtreeFlags&10256)for(l=l.child;l!==null;){var h=r,g=l,S=g.flags;switch(g.tag){case 22:Am(h,g),S&2048&&$S(g.alternate,g);break;case 24:Am(h,g),S&2048&&YS(g.alternate,g);break;default:Am(h,g)}l=l.sibling}}var Cm=8192;function Eh(r,l,h){if(r.subtreeFlags&Cm)for(r=r.child;r!==null;)GN(r,l,h),r=r.sibling}function GN(r,l,h){switch(r.tag){case 26:Eh(r,l,h),r.flags&Cm&&r.memoizedState!==null&&nU(h,Gr,r.memoizedState,r.memoizedProps);break;case 5:Eh(r,l,h);break;case 3:case 4:var g=Gr;Gr=Uv(r.stateNode.containerInfo),Eh(r,l,h),Gr=g;break;case 22:r.memoizedState===null&&(g=r.alternate,g!==null&&g.memoizedState!==null?(g=Cm,Cm=16777216,Eh(r,l,h),Cm=g):Eh(r,l,h));break;default:Eh(r,l,h)}}function VN(r){var l=r.alternate;if(l!==null&&(r=l.child,r!==null)){l.child=null;do l=r.sibling,r.sibling=null,r=l;while(r!==null)}}function Tm(r){var l=r.deletions;if((r.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var g=l[h];ri=g,$N(g,r)}VN(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)qN(r),r=r.sibling}function qN(r){switch(r.tag){case 0:case 11:case 15:Tm(r),r.flags&2048&&Dl(9,r,r.return);break;case 3:Tm(r);break;case 12:Tm(r);break;case 22:var l=r.stateNode;r.memoizedState!==null&&l._visibility&2&&(r.return===null||r.return.tag!==13)?(l._visibility&=-3,Av(r)):Tm(r);break;default:Tm(r)}}function Av(r){var l=r.deletions;if((r.flags&16)!==0){if(l!==null)for(var h=0;h<l.length;h++){var g=l[h];ri=g,$N(g,r)}VN(r)}for(r=r.child;r!==null;){switch(l=r,l.tag){case 0:case 11:case 15:Dl(8,l,l.return),Av(l);break;case 22:h=l.stateNode,h._visibility&2&&(h._visibility&=-3,Av(l));break;default:Av(l)}r=r.sibling}}function $N(r,l){for(;ri!==null;){var h=ri;switch(h.tag){case 0:case 11:case 15:Dl(8,h,l);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var g=h.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:cm(h.memoizedState.cache)}if(g=h.child,g!==null)g.return=h,ri=g;else e:for(h=r;ri!==null;){g=ri;var S=g.sibling,E=g.return;if(FN(g),g===h){ri=null;break e}if(S!==null){S.return=E,ri=S;break e}ri=E}}}var yF={getCacheForType:function(r){var l=xi(Hn),h=l.data.get(r);return h===void 0&&(h=r(),l.data.set(r,h)),h},cacheSignal:function(){return xi(Hn).controller.signal}},vF=typeof WeakMap=="function"?WeakMap:Map,kt=0,Jt=null,ct=null,ht=0,Lt=0,Is=null,Il=!1,Ah=!1,WS=!1,po=0,Tn=0,Pl=0,Su=0,XS=0,Ps=0,Ch=0,_m=null,ds=null,JS=!1,Cv=0,YN=0,Tv=1/0,_v=null,Ll=null,Jn=0,Fl=null,Th=null,mo=0,KS=0,QS=null,WN=null,Nm=0,ZS=null;function Ls(){return(kt&2)!==0&&ht!==0?ht&-ht:H.T!==null?rE():xe()}function XN(){if(Ps===0)if((ht&536870912)===0||yt){var r=nu;nu<<=1,(nu&3932160)===0&&(nu=262144),Ps=r}else Ps=536870912;return r=ks.current,r!==null&&(r.flags|=32),Ps}function hs(r,l,h){(r===Jt&&(Lt===2||Lt===9)||r.cancelPendingCommit!==null)&&(_h(r,0),Ul(r,ht,Ps,!1)),wl(r,h),((kt&2)===0||r!==Jt)&&(r===Jt&&((kt&2)===0&&(Su|=h),Tn===4&&Ul(r,ht,Ps,!1)),pa(r))}function JN(r,l,h){if((kt&6)!==0)throw Error(n(327));var g=!h&&(l&127)===0&&(l&r.expiredLanes)===0||su(r,l),S=g?wF(r,l):tE(r,l,!0),E=g;do{if(S===0){Ah&&!g&&Ul(r,l,0,!1);break}else{if(h=r.current.alternate,E&&!xF(h)){S=tE(r,l,!1),E=!1;continue}if(S===2){if(E=l,r.errorRecoveryDisabledLanes&E)var I=0;else I=r.pendingLanes&-536870913,I=I!==0?I:I&536870912?536870912:0;if(I!==0){l=I;e:{var B=r;S=_m;var Y=B.current.memoizedState.isDehydrated;if(Y&&(_h(B,I).flags|=256),I=tE(B,I,!1),I!==2){if(WS&&!Y){B.errorRecoveryDisabledLanes|=E,Su|=E,S=4;break e}E=ds,ds=S,E!==null&&(ds===null?ds=E:ds.push.apply(ds,E))}S=I}if(E=!1,S!==2)continue}}if(S===1){_h(r,0),Ul(r,l,0,!0);break}e:{switch(g=r,E=S,E){case 0:case 1:throw Error(n(345));case 4:if((l&4194048)!==l)break;case 6:Ul(g,l,Ps,!Il);break e;case 2:ds=null;break;case 3:case 5:break;default:throw Error(n(329))}if((l&62914560)===l&&(S=Cv+300-St(),10<S)){if(Ul(g,l,Ps,!Il),iu(g,0,!0)!==0)break e;mo=l,g.timeoutHandle=_2(KN.bind(null,g,h,ds,_v,JS,l,Ps,Su,Ch,Il,E,"Throttled",-0,0),S);break e}KN(g,h,ds,_v,JS,l,Ps,Su,Ch,Il,E,null,-0,0)}}break}while(!0);pa(r)}function KN(r,l,h,g,S,E,I,B,Y,re,de,fe,ae,le){if(r.timeoutHandle=-1,fe=l.subtreeFlags,fe&8192||(fe&16785408)===16785408){fe={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Za},GN(l,E,fe);var De=(E&62914560)===E?Cv-St():(E&4194048)===E?YN-St():0;if(De=iU(fe,De),De!==null){mo=E,r.cancelPendingCommit=De(r2.bind(null,r,l,E,h,g,S,I,B,Y,de,fe,null,ae,le)),Ul(r,E,I,!re);return}}r2(r,l,E,h,g,S,I,B,Y)}function xF(r){for(var l=r;;){var h=l.tag;if((h===0||h===11||h===15)&&l.flags&16384&&(h=l.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var g=0;g<h.length;g++){var S=h[g],E=S.getSnapshot;S=S.value;try{if(!Rs(E(),S))return!1}catch{return!1}}if(h=l.child,l.subtreeFlags&16384&&h!==null)h.return=l,l=h;else{if(l===r)break;for(;l.sibling===null;){if(l.return===null||l.return===r)return!0;l=l.return}l.sibling.return=l.return,l=l.sibling}}return!0}function Ul(r,l,h,g){l&=~XS,l&=~Su,r.suspendedLanes|=l,r.pingedLanes&=~l,g&&(r.warmLanes|=l),g=r.expirationTimes;for(var S=l;0<S;){var E=31-Ii(S),I=1<<E;g[E]=-1,S&=~I}h!==0&&B0(r,h,l)}function Nv(){return(kt&6)===0?(Rm(0),!1):!0}function eE(){if(ct!==null){if(Lt===0)var r=ct.return;else r=ct,io=fu=null,gS(r),yh=null,dm=0,r=ct;for(;r!==null;)NN(r.alternate,r),r=r.return;ct=null}}function _h(r,l){var h=r.timeoutHandle;h!==-1&&(r.timeoutHandle=-1,BF(h)),h=r.cancelPendingCommit,h!==null&&(r.cancelPendingCommit=null,h()),mo=0,eE(),Jt=r,ct=h=to(r.current,null),ht=l,Lt=0,Is=null,Il=!1,Ah=su(r,l),WS=!1,Ch=Ps=XS=Su=Pl=Tn=0,ds=_m=null,JS=!1,(l&8)!==0&&(l|=l&32);var g=r.entangledLanes;if(g!==0)for(r=r.entanglements,g&=l;0<g;){var S=31-Ii(g),E=1<<S;l|=r[S],g&=~E}return po=l,X0(),h}function QN(r,l){Ze=null,H.H=xm,l===gh||l===iv?(l=p_(),Lt=3):l===sS?(l=p_(),Lt=4):Lt=l===DS?8:l!==null&&typeof l=="object"&&typeof l.then=="function"?6:1,Is=l,ct===null&&(Tn=1,yv(r,dr(l,r.current)))}function ZN(){var r=ks.current;return r===null?!0:(ht&4194048)===ht?mr===null:(ht&62914560)===ht||(ht&536870912)!==0?r===mr:!1}function e2(){var r=H.H;return H.H=xm,r===null?xm:r}function t2(){var r=H.A;return H.A=yF,r}function Rv(){Tn=4,Il||(ht&4194048)!==ht&&ks.current!==null||(Ah=!0),(Pl&134217727)===0&&(Su&134217727)===0||Jt===null||Ul(Jt,ht,Ps,!1)}function tE(r,l,h){var g=kt;kt|=2;var S=e2(),E=t2();(Jt!==r||ht!==l)&&(_v=null,_h(r,l)),l=!1;var I=Tn;e:do try{if(Lt!==0&&ct!==null){var B=ct,Y=Is;switch(Lt){case 8:eE(),I=6;break e;case 3:case 2:case 9:case 6:ks.current===null&&(l=!0);var re=Lt;if(Lt=0,Is=null,Nh(r,B,Y,re),h&&Ah){I=0;break e}break;default:re=Lt,Lt=0,Is=null,Nh(r,B,Y,re)}}bF(),I=Tn;break}catch(de){QN(r,de)}while(!0);return l&&r.shellSuspendCounter++,io=fu=null,kt=g,H.H=S,H.A=E,ct===null&&(Jt=null,ht=0,X0()),I}function bF(){for(;ct!==null;)n2(ct)}function wF(r,l){var h=kt;kt|=2;var g=e2(),S=t2();Jt!==r||ht!==l?(_v=null,Tv=St()+500,_h(r,l)):Ah=su(r,l);e:do try{if(Lt!==0&&ct!==null){l=ct;var E=Is;t:switch(Lt){case 1:Lt=0,Is=null,Nh(r,l,E,1);break;case 2:case 9:if(h_(E)){Lt=0,Is=null,i2(l);break}l=function(){Lt!==2&&Lt!==9||Jt!==r||(Lt=7),pa(r)},E.then(l,l);break e;case 3:Lt=7;break e;case 4:Lt=5;break e;case 7:h_(E)?(Lt=0,Is=null,i2(l)):(Lt=0,Is=null,Nh(r,l,E,7));break;case 5:var I=null;switch(ct.tag){case 26:I=ct.memoizedState;case 5:case 27:var B=ct;if(I?z2(I):B.stateNode.complete){Lt=0,Is=null;var Y=B.sibling;if(Y!==null)ct=Y;else{var re=B.return;re!==null?(ct=re,Mv(re)):ct=null}break t}}Lt=0,Is=null,Nh(r,l,E,5);break;case 6:Lt=0,Is=null,Nh(r,l,E,6);break;case 8:eE(),Tn=6;break e;default:throw Error(n(462))}}SF();break}catch(de){QN(r,de)}while(!0);return io=fu=null,H.H=g,H.A=S,kt=h,ct!==null?0:(Jt=null,ht=0,X0(),Tn)}function SF(){for(;ct!==null&&!On();)n2(ct)}function n2(r){var l=TN(r.alternate,r,po);r.memoizedProps=r.pendingProps,l===null?Mv(r):ct=l}function i2(r){var l=r,h=l.alternate;switch(l.tag){case 15:case 0:l=bN(h,l,l.pendingProps,l.type,void 0,ht);break;case 11:l=bN(h,l,l.pendingProps,l.type.render,l.ref,ht);break;case 5:gS(l);default:NN(h,l),l=ct=t_(l,po),l=TN(h,l,po)}r.memoizedProps=r.pendingProps,l===null?Mv(r):ct=l}function Nh(r,l,h,g){io=fu=null,gS(l),yh=null,dm=0;var S=l.return;try{if(uF(r,S,l,h,ht)){Tn=1,yv(r,dr(h,r.current)),ct=null;return}}catch(E){if(S!==null)throw ct=S,E;Tn=1,yv(r,dr(h,r.current)),ct=null;return}l.flags&32768?(yt||g===1?r=!0:Ah||(ht&536870912)!==0?r=!1:(Il=r=!0,(g===2||g===9||g===3||g===6)&&(g=ks.current,g!==null&&g.tag===13&&(g.flags|=16384))),s2(l,r)):Mv(l)}function Mv(r){var l=r;do{if((l.flags&32768)!==0){s2(l,Il);return}r=l.return;var h=fF(l.alternate,l,po);if(h!==null){ct=h;return}if(l=l.sibling,l!==null){ct=l;return}ct=l=r}while(l!==null);Tn===0&&(Tn=5)}function s2(r,l){do{var h=pF(r.alternate,r);if(h!==null){h.flags&=32767,ct=h;return}if(h=r.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!l&&(r=r.sibling,r!==null)){ct=r;return}ct=r=h}while(r!==null);Tn=6,ct=null}function r2(r,l,h,g,S,E,I,B,Y){r.cancelPendingCommit=null;do kv();while(Jn!==0);if((kt&6)!==0)throw Error(n(327));if(l!==null){if(l===r.current)throw Error(n(177));if(E=l.lanes|l.childLanes,E|=Gw,bw(r,h,E,I,B,Y),r===Jt&&(ct=Jt=null,ht=0),Th=l,Fl=r,mo=h,KS=E,QS=S,WN=g,(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,TF(Et,function(){return u2(),null})):(r.callbackNode=null,r.callbackPriority=0),g=(l.flags&13878)!==0,(l.subtreeFlags&13878)!==0||g){g=H.T,H.T=null,S=V.p,V.p=2,I=kt,kt|=4;try{mF(r,l,h)}finally{kt=I,V.p=S,H.T=g}}Jn=1,a2(),o2(),l2()}}function a2(){if(Jn===1){Jn=0;var r=Fl,l=Th,h=(l.flags&13878)!==0;if((l.subtreeFlags&13878)!==0||h){h=H.T,H.T=null;var g=V.p;V.p=2;var S=kt;kt|=4;try{ON(l,r);var E=fE,I=$T(r.containerInfo),B=E.focusedElem,Y=E.selectionRange;if(I!==B&&B&&B.ownerDocument&&qT(B.ownerDocument.documentElement,B)){if(Y!==null&&jw(B)){var re=Y.start,de=Y.end;if(de===void 0&&(de=re),"selectionStart"in B)B.selectionStart=re,B.selectionEnd=Math.min(de,B.value.length);else{var fe=B.ownerDocument||document,ae=fe&&fe.defaultView||window;if(ae.getSelection){var le=ae.getSelection(),De=B.textContent.length,Ve=Math.min(Y.start,De),zt=Y.end===void 0?Ve:Math.min(Y.end,De);!le.extend&&Ve>zt&&(I=zt,zt=Ve,Ve=I);var ne=VT(B,Ve),K=VT(B,zt);if(ne&&K&&(le.rangeCount!==1||le.anchorNode!==ne.node||le.anchorOffset!==ne.offset||le.focusNode!==K.node||le.focusOffset!==K.offset)){var se=fe.createRange();se.setStart(ne.node,ne.offset),le.removeAllRanges(),Ve>zt?(le.addRange(se),le.extend(K.node,K.offset)):(se.setEnd(K.node,K.offset),le.addRange(se))}}}}for(fe=[],le=B;le=le.parentNode;)le.nodeType===1&&fe.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof B.focus=="function"&&B.focus(),B=0;B<fe.length;B++){var he=fe[B];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}Gv=!!hE,fE=hE=null}finally{kt=S,V.p=g,H.T=h}}r.current=l,Jn=2}}function o2(){if(Jn===2){Jn=0;var r=Fl,l=Th,h=(l.flags&8772)!==0;if((l.subtreeFlags&8772)!==0||h){h=H.T,H.T=null;var g=V.p;V.p=2;var S=kt;kt|=4;try{LN(r,l.alternate,l)}finally{kt=S,V.p=g,H.T=h}}Jn=3}}function l2(){if(Jn===4||Jn===3){Jn=0,Ja();var r=Fl,l=Th,h=mo,g=WN;(l.subtreeFlags&10256)!==0||(l.flags&10256)!==0?Jn=5:(Jn=0,Th=Fl=null,c2(r,r.pendingLanes));var S=r.pendingLanes;if(S===0&&(Ll=null),ge(h),l=l.stateNode,gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(Br,l,void 0,(l.current.flags&128)===128)}catch{}if(g!==null){l=H.T,S=V.p,V.p=2,H.T=null;try{for(var E=r.onRecoverableError,I=0;I<g.length;I++){var B=g[I];E(B.value,{componentStack:B.stack})}}finally{H.T=l,V.p=S}}(mo&3)!==0&&kv(),pa(r),S=r.pendingLanes,(h&261930)!==0&&(S&42)!==0?r===ZS?Nm++:(Nm=0,ZS=r):Nm=0,Rm(0)}}function c2(r,l){(r.pooledCacheLanes&=l)===0&&(l=r.pooledCache,l!=null&&(r.pooledCache=null,cm(l)))}function kv(){return a2(),o2(),l2(),u2()}function u2(){if(Jn!==5)return!1;var r=Fl,l=KS;KS=0;var h=ge(mo),g=H.T,S=V.p;try{V.p=32>h?32:h,H.T=null,h=QS,QS=null;var E=Fl,I=mo;if(Jn=0,Th=Fl=null,mo=0,(kt&6)!==0)throw Error(n(331));var B=kt;if(kt|=4,qN(E.current),zN(E,E.current,I,h),kt=B,Rm(0,!1),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(Br,E)}catch{}return!0}finally{V.p=S,H.T=g,c2(r,l)}}function d2(r,l,h){l=dr(h,l),l=kS(r.stateNode,l,2),r=Rl(r,l,2),r!==null&&(wl(r,2),pa(r))}function Ft(r,l,h){if(r.tag===3)d2(r,r,h);else for(;l!==null;){if(l.tag===3){d2(l,r,h);break}else if(l.tag===1){var g=l.stateNode;if(typeof l.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(Ll===null||!Ll.has(g))){r=dr(h,r),h=hN(2),g=Rl(l,h,2),g!==null&&(fN(h,g,l,r),wl(g,2),pa(g));break}}l=l.return}}function nE(r,l,h){var g=r.pingCache;if(g===null){g=r.pingCache=new vF;var S=new Set;g.set(l,S)}else S=g.get(l),S===void 0&&(S=new Set,g.set(l,S));S.has(h)||(WS=!0,S.add(h),r=EF.bind(null,r,l,h),l.then(r,r))}function EF(r,l,h){var g=r.pingCache;g!==null&&g.delete(l),r.pingedLanes|=r.suspendedLanes&h,r.warmLanes&=~h,Jt===r&&(ht&h)===h&&(Tn===4||Tn===3&&(ht&62914560)===ht&&300>St()-Cv?(kt&2)===0&&_h(r,0):XS|=h,Ch===ht&&(Ch=0)),pa(r)}function h2(r,l){l===0&&(l=ru()),r=uu(r,l),r!==null&&(wl(r,l),pa(r))}function AF(r){var l=r.memoizedState,h=0;l!==null&&(h=l.retryLane),h2(r,h)}function CF(r,l){var h=0;switch(r.tag){case 31:case 13:var g=r.stateNode,S=r.memoizedState;S!==null&&(h=S.retryLane);break;case 19:g=r.stateNode;break;case 22:g=r.stateNode._retryCache;break;default:throw Error(n(314))}g!==null&&g.delete(l),h2(r,h)}function TF(r,l){return Xn(r,l)}var Dv=null,Rh=null,iE=!1,Iv=!1,sE=!1,jl=0;function pa(r){r!==Rh&&r.next===null&&(Rh===null?Dv=Rh=r:Rh=Rh.next=r),Iv=!0,iE||(iE=!0,NF())}function Rm(r,l){if(!sE&&Iv){sE=!0;do for(var h=!1,g=Dv;g!==null;){if(r!==0){var S=g.pendingLanes;if(S===0)var E=0;else{var I=g.suspendedLanes,B=g.pingedLanes;E=(1<<31-Ii(42|r)+1)-1,E&=S&~(I&~B),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(h=!0,g2(g,E))}else E=ht,E=iu(g,g===Jt?E:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(E&3)===0||su(g,E)||(h=!0,g2(g,E));g=g.next}while(h);sE=!1}}function _F(){f2()}function f2(){Iv=iE=!1;var r=0;jl!==0&&jF()&&(r=jl);for(var l=St(),h=null,g=Dv;g!==null;){var S=g.next,E=p2(g,l);E===0?(g.next=null,h===null?Dv=S:h.next=S,S===null&&(Rh=h)):(h=g,(r!==0||(E&3)!==0)&&(Iv=!0)),g=S}Jn!==0&&Jn!==5||Rm(r),jl!==0&&(jl=0)}function p2(r,l){for(var h=r.suspendedLanes,g=r.pingedLanes,S=r.expirationTimes,E=r.pendingLanes&-62914561;0<E;){var I=31-Ii(E),B=1<<I,Y=S[I];Y===-1?((B&h)===0||(B&g)!==0)&&(S[I]=j0(B,l)):Y<=l&&(r.expiredLanes|=B),E&=~B}if(l=Jt,h=ht,h=iu(r,r===l?h:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),g=r.callbackNode,h===0||r===l&&(Lt===2||Lt===9)||r.cancelPendingCommit!==null)return g!==null&&g!==null&&rn(g),r.callbackNode=null,r.callbackPriority=0;if((h&3)===0||su(r,h)){if(l=h&-h,l===r.callbackPriority)return l;switch(g!==null&&rn(g),ge(h)){case 2:case 8:h=Bt;break;case 32:h=Et;break;case 268435456:h=In;break;default:h=Et}return g=m2.bind(null,r),h=Xn(h,g),r.callbackPriority=l,r.callbackNode=h,l}return g!==null&&g!==null&&rn(g),r.callbackPriority=2,r.callbackNode=null,2}function m2(r,l){if(Jn!==0&&Jn!==5)return r.callbackNode=null,r.callbackPriority=0,null;var h=r.callbackNode;if(kv()&&r.callbackNode!==h)return null;var g=ht;return g=iu(r,r===Jt?g:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),g===0?null:(JN(r,g,l),p2(r,St()),r.callbackNode!=null&&r.callbackNode===h?m2.bind(null,r):null)}function g2(r,l){if(kv())return null;JN(r,l,!0)}function NF(){OF(function(){(kt&6)!==0?Xn(jr,_F):f2()})}function rE(){if(jl===0){var r=ph;r===0&&(r=Ka,Ka<<=1,(Ka&261888)===0&&(Ka=256)),jl=r}return jl}function y2(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:H0(""+r)}function v2(r,l){var h=l.ownerDocument.createElement("input");return h.name=l.name,h.value=l.value,r.id&&h.setAttribute("form",r.id),l.parentNode.insertBefore(h,l),r=new FormData(r),h.parentNode.removeChild(h),r}function RF(r,l,h,g,S){if(l==="submit"&&h&&h.stateNode===S){var E=y2((S[Ce]||null).action),I=g.submitter;I&&(l=(l=I[Ce]||null)?y2(l.formAction):I.getAttribute("formAction"),l!==null&&(E=l,I=null));var B=new q0("action","action",null,g,S);r.push({event:B,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(jl!==0){var Y=I?v2(S,I):new FormData(S);CS(h,{pending:!0,data:Y,method:S.method,action:E},null,Y)}}else typeof E=="function"&&(B.preventDefault(),Y=I?v2(S,I):new FormData(S),CS(h,{pending:!0,data:Y,method:S.method,action:E},E,Y))},currentTarget:S}]})}}for(var aE=0;aE<zw.length;aE++){var oE=zw[aE],MF=oE.toLowerCase(),kF=oE[0].toUpperCase()+oE.slice(1);zr(MF,"on"+kF)}zr(XT,"onAnimationEnd"),zr(JT,"onAnimationIteration"),zr(KT,"onAnimationStart"),zr("dblclick","onDoubleClick"),zr("focusin","onFocus"),zr("focusout","onBlur"),zr(Y3,"onTransitionRun"),zr(W3,"onTransitionStart"),zr(X3,"onTransitionCancel"),zr(QT,"onTransitionEnd"),as("onMouseEnter",["mouseout","mouseover"]),as("onMouseLeave",["mouseout","mouseover"]),as("onPointerEnter",["pointerout","pointerover"]),as("onPointerLeave",["pointerout","pointerover"]),Ns("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ns("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ns("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ns("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ns("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ns("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Mm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DF=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Mm));function x2(r,l){l=(l&4)!==0;for(var h=0;h<r.length;h++){var g=r[h],S=g.event;g=g.listeners;e:{var E=void 0;if(l)for(var I=g.length-1;0<=I;I--){var B=g[I],Y=B.instance,re=B.currentTarget;if(B=B.listener,Y!==E&&S.isPropagationStopped())break e;E=B,S.currentTarget=re;try{E(S)}catch(de){W0(de)}S.currentTarget=null,E=Y}else for(I=0;I<g.length;I++){if(B=g[I],Y=B.instance,re=B.currentTarget,B=B.listener,Y!==E&&S.isPropagationStopped())break e;E=B,S.currentTarget=re;try{E(S)}catch(de){W0(de)}S.currentTarget=null,E=Y}}}}function ut(r,l){var h=l[Ge];h===void 0&&(h=l[Ge]=new Set);var g=r+"__bubble";h.has(g)||(b2(l,r,2,!1),h.add(g))}function lE(r,l,h){var g=0;l&&(g|=4),b2(h,r,g,l)}var Pv="_reactListening"+Math.random().toString(36).slice(2);function cE(r){if(!r[Pv]){r[Pv]=!0,_s.forEach(function(h){h!=="selectionchange"&&(DF.has(h)||lE(h,!1,r),lE(h,!0,r))});var l=r.nodeType===9?r:r.ownerDocument;l===null||l[Pv]||(l[Pv]=!0,lE("selectionchange",!1,l))}}function b2(r,l,h,g){switch(X2(l)){case 2:var S=aU;break;case 8:S=oU;break;default:S=AE}h=S.bind(null,l,h,r),S=void 0,!Rw||l!=="touchstart"&&l!=="touchmove"&&l!=="wheel"||(S=!0),g?S!==void 0?r.addEventListener(l,h,{capture:!0,passive:S}):r.addEventListener(l,h,!0):S!==void 0?r.addEventListener(l,h,{passive:S}):r.addEventListener(l,h,!1)}function uE(r,l,h,g,S){var E=g;if((l&1)===0&&(l&2)===0&&g!==null)e:for(;;){if(g===null)return;var I=g.tag;if(I===3||I===4){var B=g.stateNode.containerInfo;if(B===S)break;if(I===4)for(I=g.return;I!==null;){var Y=I.tag;if((Y===3||Y===4)&&I.stateNode.containerInfo===S)return;I=I.return}for(;B!==null;){if(I=At(B),I===null)return;if(Y=I.tag,Y===5||Y===6||Y===26||Y===27){g=E=I;continue e}B=B.parentNode}}g=g.return}CT(function(){var re=E,de=_w(h),fe=[];e:{var ae=ZT.get(r);if(ae!==void 0){var le=q0,De=r;switch(r){case"keypress":if(G0(h)===0)break e;case"keydown":case"keyup":le=C3;break;case"focusin":De="focus",le=Iw;break;case"focusout":De="blur",le=Iw;break;case"beforeblur":case"afterblur":le=Iw;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=NT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=f3;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=N3;break;case XT:case JT:case KT:le=g3;break;case QT:le=M3;break;case"scroll":case"scrollend":le=d3;break;case"wheel":le=D3;break;case"copy":case"cut":case"paste":le=v3;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=MT;break;case"toggle":case"beforetoggle":le=P3}var Ve=(l&4)!==0,zt=!Ve&&(r==="scroll"||r==="scrollend"),ne=Ve?ae!==null?ae+"Capture":null:ae;Ve=[];for(var K=re,se;K!==null;){var he=K;if(se=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||se===null||ne===null||(he=Qp(K,ne),he!=null&&Ve.push(km(K,he,se))),zt)break;K=K.return}0<Ve.length&&(ae=new le(ae,De,null,h,de),fe.push({event:ae,listeners:Ve}))}}if((l&7)===0){e:{if(ae=r==="mouseover"||r==="pointerover",le=r==="mouseout"||r==="pointerout",ae&&h!==Tw&&(De=h.relatedTarget||h.fromElement)&&(At(De)||De[Fe]))break e;if((le||ae)&&(ae=de.window===de?de:(ae=de.ownerDocument)?ae.defaultView||ae.parentWindow:window,le?(De=h.relatedTarget||h.toElement,le=re,De=De?At(De):null,De!==null&&(zt=a(De),Ve=De.tag,De!==zt||Ve!==5&&Ve!==27&&Ve!==6)&&(De=null)):(le=null,De=re),le!==De)){if(Ve=NT,he="onMouseLeave",ne="onMouseEnter",K="mouse",(r==="pointerout"||r==="pointerover")&&(Ve=MT,he="onPointerLeave",ne="onPointerEnter",K="pointer"),zt=le==null?ae:Ts(le),se=De==null?ae:Ts(De),ae=new Ve(he,K+"leave",le,h,de),ae.target=zt,ae.relatedTarget=se,he=null,At(de)===re&&(Ve=new Ve(ne,K+"enter",De,h,de),Ve.target=se,Ve.relatedTarget=zt,he=Ve),zt=he,le&&De)t:{for(Ve=IF,ne=le,K=De,se=0,he=ne;he;he=Ve(he))se++;he=0;for(var He=K;He;He=Ve(He))he++;for(;0<se-he;)ne=Ve(ne),se--;for(;0<he-se;)K=Ve(K),he--;for(;se--;){if(ne===K||K!==null&&ne===K.alternate){Ve=ne;break t}ne=Ve(ne),K=Ve(K)}Ve=null}else Ve=null;le!==null&&w2(fe,ae,le,Ve,!1),De!==null&&zt!==null&&w2(fe,zt,De,Ve,!0)}}e:{if(ae=re?Ts(re):window,le=ae.nodeName&&ae.nodeName.toLowerCase(),le==="select"||le==="input"&&ae.type==="file")var _t=jT;else if(FT(ae))if(BT)_t=V3;else{_t=z3;var Pe=H3}else le=ae.nodeName,!le||le.toLowerCase()!=="input"||ae.type!=="checkbox"&&ae.type!=="radio"?re&&Cw(re.elementType)&&(_t=jT):_t=G3;if(_t&&(_t=_t(r,re))){UT(fe,_t,h,de);break e}Pe&&Pe(r,ae,re),r==="focusout"&&re&&ae.type==="number"&&re.memoizedProps.value!=null&&Aw(ae,"number",ae.value)}switch(Pe=re?Ts(re):window,r){case"focusin":(FT(Pe)||Pe.contentEditable==="true")&&(ah=Pe,Bw=re,am=null);break;case"focusout":am=Bw=ah=null;break;case"mousedown":Ow=!0;break;case"contextmenu":case"mouseup":case"dragend":Ow=!1,YT(fe,h,de);break;case"selectionchange":if($3)break;case"keydown":case"keyup":YT(fe,h,de)}var tt;if(Lw)e:{switch(r){case"compositionstart":var ft="onCompositionStart";break e;case"compositionend":ft="onCompositionEnd";break e;case"compositionupdate":ft="onCompositionUpdate";break e}ft=void 0}else rh?PT(r,h)&&(ft="onCompositionEnd"):r==="keydown"&&h.keyCode===229&&(ft="onCompositionStart");ft&&(kT&&h.locale!=="ko"&&(rh||ft!=="onCompositionStart"?ft==="onCompositionEnd"&&rh&&(tt=TT()):(Sl=de,Mw="value"in Sl?Sl.value:Sl.textContent,rh=!0)),Pe=Lv(re,ft),0<Pe.length&&(ft=new RT(ft,r,null,h,de),fe.push({event:ft,listeners:Pe}),tt?ft.data=tt:(tt=LT(h),tt!==null&&(ft.data=tt)))),(tt=F3?U3(r,h):j3(r,h))&&(ft=Lv(re,"onBeforeInput"),0<ft.length&&(Pe=new RT("onBeforeInput","beforeinput",null,h,de),fe.push({event:Pe,listeners:ft}),Pe.data=tt)),RF(fe,r,re,h,de)}x2(fe,l)})}function km(r,l,h){return{instance:r,listener:l,currentTarget:h}}function Lv(r,l){for(var h=l+"Capture",g=[];r!==null;){var S=r,E=S.stateNode;if(S=S.tag,S!==5&&S!==26&&S!==27||E===null||(S=Qp(r,h),S!=null&&g.unshift(km(r,S,E)),S=Qp(r,l),S!=null&&g.push(km(r,S,E))),r.tag===3)return g;r=r.return}return[]}function IF(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function w2(r,l,h,g,S){for(var E=l._reactName,I=[];h!==null&&h!==g;){var B=h,Y=B.alternate,re=B.stateNode;if(B=B.tag,Y!==null&&Y===g)break;B!==5&&B!==26&&B!==27||re===null||(Y=re,S?(re=Qp(h,E),re!=null&&I.unshift(km(h,re,Y))):S||(re=Qp(h,E),re!=null&&I.push(km(h,re,Y)))),h=h.return}I.length!==0&&r.push({event:l,listeners:I})}var PF=/\r\n?/g,LF=/\u0000|\uFFFD/g;function S2(r){return(typeof r=="string"?r:""+r).replace(PF,`
`).replace(LF,"")}function E2(r,l){return l=S2(l),S2(r)===l}function Ht(r,l,h,g,S,E){switch(h){case"children":typeof g=="string"?l==="body"||l==="textarea"&&g===""||nh(r,g):(typeof g=="number"||typeof g=="bigint")&&l!=="body"&&nh(r,""+g);break;case"className":lr(r,"class",g);break;case"tabIndex":lr(r,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":lr(r,h,g);break;case"style":ET(r,g,E);break;case"data":if(l!=="object"){lr(r,"data",g);break}case"src":case"href":if(g===""&&(l!=="a"||h!=="href")){r.removeAttribute(h);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){r.removeAttribute(h);break}g=H0(""+g),r.setAttribute(h,g);break;case"action":case"formAction":if(typeof g=="function"){r.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(h==="formAction"?(l!=="input"&&Ht(r,l,"name",S.name,S,null),Ht(r,l,"formEncType",S.formEncType,S,null),Ht(r,l,"formMethod",S.formMethod,S,null),Ht(r,l,"formTarget",S.formTarget,S,null)):(Ht(r,l,"encType",S.encType,S,null),Ht(r,l,"method",S.method,S,null),Ht(r,l,"target",S.target,S,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){r.removeAttribute(h);break}g=H0(""+g),r.setAttribute(h,g);break;case"onClick":g!=null&&(r.onclick=Za);break;case"onScroll":g!=null&&ut("scroll",r);break;case"onScrollEnd":g!=null&&ut("scrollend",r);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(h=g.__html,h!=null){if(S.children!=null)throw Error(n(60));r.innerHTML=h}}break;case"multiple":r.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":r.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){r.removeAttribute("xlink:href");break}h=H0(""+g),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(h,""+g):r.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(h,""):r.removeAttribute(h);break;case"capture":case"download":g===!0?r.setAttribute(h,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?r.setAttribute(h,g):r.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?r.setAttribute(h,g):r.removeAttribute(h);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?r.removeAttribute(h):r.setAttribute(h,g);break;case"popover":ut("beforetoggle",r),ut("toggle",r),Hr(r,"popover",g);break;case"xlinkActuate":Tt(r,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":Tt(r,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":Tt(r,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":Tt(r,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":Tt(r,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":Tt(r,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":Tt(r,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":Tt(r,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":Tt(r,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Hr(r,"is",g);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=c3.get(h)||h,Hr(r,h,g))}}function dE(r,l,h,g,S,E){switch(h){case"style":ET(r,g,E);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(n(61));if(h=g.__html,h!=null){if(S.children!=null)throw Error(n(60));r.innerHTML=h}}break;case"children":typeof g=="string"?nh(r,g):(typeof g=="number"||typeof g=="bigint")&&nh(r,""+g);break;case"onScroll":g!=null&&ut("scroll",r);break;case"onScrollEnd":g!=null&&ut("scrollend",r);break;case"onClick":g!=null&&(r.onclick=Za);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Zd.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(S=h.endsWith("Capture"),l=h.slice(2,S?h.length-7:void 0),E=r[Ce]||null,E=E!=null?E[h]:null,typeof E=="function"&&r.removeEventListener(l,E,S),typeof g=="function")){typeof E!="function"&&E!==null&&(h in r?r[h]=null:r.hasAttribute(h)&&r.removeAttribute(h)),r.addEventListener(l,g,S);break e}h in r?r[h]=g:g===!0?r.setAttribute(h,""):Hr(r,h,g)}}}function wi(r,l,h){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ut("error",r),ut("load",r);var g=!1,S=!1,E;for(E in h)if(h.hasOwnProperty(E)){var I=h[E];if(I!=null)switch(E){case"src":g=!0;break;case"srcSet":S=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Ht(r,l,E,I,h,null)}}S&&Ht(r,l,"srcSet",h.srcSet,h,null),g&&Ht(r,l,"src",h.src,h,null);return;case"input":ut("invalid",r);var B=E=I=S=null,Y=null,re=null;for(g in h)if(h.hasOwnProperty(g)){var de=h[g];if(de!=null)switch(g){case"name":S=de;break;case"type":I=de;break;case"checked":Y=de;break;case"defaultChecked":re=de;break;case"value":E=de;break;case"defaultValue":B=de;break;case"children":case"dangerouslySetInnerHTML":if(de!=null)throw Error(n(137,l));break;default:Ht(r,l,g,de,h,null)}}xT(r,E,B,Y,re,I,S,!1);return;case"select":ut("invalid",r),g=I=E=null;for(S in h)if(h.hasOwnProperty(S)&&(B=h[S],B!=null))switch(S){case"value":E=B;break;case"defaultValue":I=B;break;case"multiple":g=B;default:Ht(r,l,S,B,h,null)}l=E,h=I,r.multiple=!!g,l!=null?th(r,!!g,l,!1):h!=null&&th(r,!!g,h,!0);return;case"textarea":ut("invalid",r),E=S=g=null;for(I in h)if(h.hasOwnProperty(I)&&(B=h[I],B!=null))switch(I){case"value":g=B;break;case"defaultValue":S=B;break;case"children":E=B;break;case"dangerouslySetInnerHTML":if(B!=null)throw Error(n(91));break;default:Ht(r,l,I,B,h,null)}wT(r,g,S,E);return;case"option":for(Y in h)if(h.hasOwnProperty(Y)&&(g=h[Y],g!=null))switch(Y){case"selected":r.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:Ht(r,l,Y,g,h,null)}return;case"dialog":ut("beforetoggle",r),ut("toggle",r),ut("cancel",r),ut("close",r);break;case"iframe":case"object":ut("load",r);break;case"video":case"audio":for(g=0;g<Mm.length;g++)ut(Mm[g],r);break;case"image":ut("error",r),ut("load",r);break;case"details":ut("toggle",r);break;case"embed":case"source":case"link":ut("error",r),ut("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in h)if(h.hasOwnProperty(re)&&(g=h[re],g!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,l));default:Ht(r,l,re,g,h,null)}return;default:if(Cw(l)){for(de in h)h.hasOwnProperty(de)&&(g=h[de],g!==void 0&&dE(r,l,de,g,h,void 0));return}}for(B in h)h.hasOwnProperty(B)&&(g=h[B],g!=null&&Ht(r,l,B,g,h,null))}function FF(r,l,h,g){switch(l){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var S=null,E=null,I=null,B=null,Y=null,re=null,de=null;for(le in h){var fe=h[le];if(h.hasOwnProperty(le)&&fe!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":Y=fe;default:g.hasOwnProperty(le)||Ht(r,l,le,null,g,fe)}}for(var ae in g){var le=g[ae];if(fe=h[ae],g.hasOwnProperty(ae)&&(le!=null||fe!=null))switch(ae){case"type":E=le;break;case"name":S=le;break;case"checked":re=le;break;case"defaultChecked":de=le;break;case"value":I=le;break;case"defaultValue":B=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(n(137,l));break;default:le!==fe&&Ht(r,l,ae,le,g,fe)}}Ew(r,I,B,Y,re,de,E,S);return;case"select":le=I=B=ae=null;for(E in h)if(Y=h[E],h.hasOwnProperty(E)&&Y!=null)switch(E){case"value":break;case"multiple":le=Y;default:g.hasOwnProperty(E)||Ht(r,l,E,null,g,Y)}for(S in g)if(E=g[S],Y=h[S],g.hasOwnProperty(S)&&(E!=null||Y!=null))switch(S){case"value":ae=E;break;case"defaultValue":B=E;break;case"multiple":I=E;default:E!==Y&&Ht(r,l,S,E,g,Y)}l=B,h=I,g=le,ae!=null?th(r,!!h,ae,!1):!!g!=!!h&&(l!=null?th(r,!!h,l,!0):th(r,!!h,h?[]:"",!1));return;case"textarea":le=ae=null;for(B in h)if(S=h[B],h.hasOwnProperty(B)&&S!=null&&!g.hasOwnProperty(B))switch(B){case"value":break;case"children":break;default:Ht(r,l,B,null,g,S)}for(I in g)if(S=g[I],E=h[I],g.hasOwnProperty(I)&&(S!=null||E!=null))switch(I){case"value":ae=S;break;case"defaultValue":le=S;break;case"children":break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(n(91));break;default:S!==E&&Ht(r,l,I,S,g,E)}bT(r,ae,le);return;case"option":for(var De in h)if(ae=h[De],h.hasOwnProperty(De)&&ae!=null&&!g.hasOwnProperty(De))switch(De){case"selected":r.selected=!1;break;default:Ht(r,l,De,null,g,ae)}for(Y in g)if(ae=g[Y],le=h[Y],g.hasOwnProperty(Y)&&ae!==le&&(ae!=null||le!=null))switch(Y){case"selected":r.selected=ae&&typeof ae!="function"&&typeof ae!="symbol";break;default:Ht(r,l,Y,ae,g,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in h)ae=h[Ve],h.hasOwnProperty(Ve)&&ae!=null&&!g.hasOwnProperty(Ve)&&Ht(r,l,Ve,null,g,ae);for(re in g)if(ae=g[re],le=h[re],g.hasOwnProperty(re)&&ae!==le&&(ae!=null||le!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(n(137,l));break;default:Ht(r,l,re,ae,g,le)}return;default:if(Cw(l)){for(var zt in h)ae=h[zt],h.hasOwnProperty(zt)&&ae!==void 0&&!g.hasOwnProperty(zt)&&dE(r,l,zt,void 0,g,ae);for(de in g)ae=g[de],le=h[de],!g.hasOwnProperty(de)||ae===le||ae===void 0&&le===void 0||dE(r,l,de,ae,g,le);return}}for(var ne in h)ae=h[ne],h.hasOwnProperty(ne)&&ae!=null&&!g.hasOwnProperty(ne)&&Ht(r,l,ne,null,g,ae);for(fe in g)ae=g[fe],le=h[fe],!g.hasOwnProperty(fe)||ae===le||ae==null&&le==null||Ht(r,l,fe,ae,g,le)}function A2(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function UF(){if(typeof performance.getEntriesByType=="function"){for(var r=0,l=0,h=performance.getEntriesByType("resource"),g=0;g<h.length;g++){var S=h[g],E=S.transferSize,I=S.initiatorType,B=S.duration;if(E&&B&&A2(I)){for(I=0,B=S.responseEnd,g+=1;g<h.length;g++){var Y=h[g],re=Y.startTime;if(re>B)break;var de=Y.transferSize,fe=Y.initiatorType;de&&A2(fe)&&(Y=Y.responseEnd,I+=de*(Y<B?1:(B-re)/(Y-re)))}if(--g,l+=8*(E+I)/(S.duration/1e3),r++,10<r)break}}if(0<r)return l/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var hE=null,fE=null;function Fv(r){return r.nodeType===9?r:r.ownerDocument}function C2(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function T2(r,l){if(r===0)switch(l){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&l==="foreignObject"?0:r}function pE(r,l){return r==="textarea"||r==="noscript"||typeof l.children=="string"||typeof l.children=="number"||typeof l.children=="bigint"||typeof l.dangerouslySetInnerHTML=="object"&&l.dangerouslySetInnerHTML!==null&&l.dangerouslySetInnerHTML.__html!=null}var mE=null;function jF(){var r=window.event;return r&&r.type==="popstate"?r===mE?!1:(mE=r,!0):(mE=null,!1)}var _2=typeof setTimeout=="function"?setTimeout:void 0,BF=typeof clearTimeout=="function"?clearTimeout:void 0,N2=typeof Promise=="function"?Promise:void 0,OF=typeof queueMicrotask=="function"?queueMicrotask:typeof N2<"u"?function(r){return N2.resolve(null).then(r).catch(HF)}:_2;function HF(r){setTimeout(function(){throw r})}function Bl(r){return r==="head"}function R2(r,l){var h=l,g=0;do{var S=h.nextSibling;if(r.removeChild(h),S&&S.nodeType===8)if(h=S.data,h==="/$"||h==="/&"){if(g===0){r.removeChild(S),Ih(l);return}g--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")g++;else if(h==="html")Dm(r.ownerDocument.documentElement);else if(h==="head"){h=r.ownerDocument.head,Dm(h);for(var E=h.firstChild;E;){var I=E.nextSibling,B=E.nodeName;E[on]||B==="SCRIPT"||B==="STYLE"||B==="LINK"&&E.rel.toLowerCase()==="stylesheet"||h.removeChild(E),E=I}}else h==="body"&&Dm(r.ownerDocument.body);h=S}while(h);Ih(l)}function M2(r,l){var h=r;r=0;do{var g=h.nextSibling;if(h.nodeType===1?l?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(l?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),g&&g.nodeType===8)if(h=g.data,h==="/$"){if(r===0)break;r--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||r++;h=g}while(h)}function gE(r){var l=r.firstChild;for(l&&l.nodeType===10&&(l=l.nextSibling);l;){var h=l;switch(l=l.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":gE(h),An(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}r.removeChild(h)}}function zF(r,l,h,g){for(;r.nodeType===1;){var S=h;if(r.nodeName.toLowerCase()!==l.toLowerCase()){if(!g&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(g){if(!r[on])switch(l){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(E=r.getAttribute("rel"),E==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(E!==S.rel||r.getAttribute("href")!==(S.href==null||S.href===""?null:S.href)||r.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin)||r.getAttribute("title")!==(S.title==null?null:S.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(E=r.getAttribute("src"),(E!==(S.src==null?null:S.src)||r.getAttribute("type")!==(S.type==null?null:S.type)||r.getAttribute("crossorigin")!==(S.crossOrigin==null?null:S.crossOrigin))&&E&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(l==="input"&&r.type==="hidden"){var E=S.name==null?null:""+S.name;if(S.type==="hidden"&&r.getAttribute("name")===E)return r}else return r;if(r=gr(r.nextSibling),r===null)break}return null}function GF(r,l,h){if(l==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!h||(r=gr(r.nextSibling),r===null))return null;return r}function k2(r,l){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!l||(r=gr(r.nextSibling),r===null))return null;return r}function yE(r){return r.data==="$?"||r.data==="$~"}function vE(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function VF(r,l){var h=r.ownerDocument;if(r.data==="$~")r._reactRetry=l;else if(r.data!=="$?"||h.readyState!=="loading")l();else{var g=function(){l(),h.removeEventListener("DOMContentLoaded",g)};h.addEventListener("DOMContentLoaded",g),r._reactRetry=g}}function gr(r){for(;r!=null;r=r.nextSibling){var l=r.nodeType;if(l===1||l===3)break;if(l===8){if(l=r.data,l==="$"||l==="$!"||l==="$?"||l==="$~"||l==="&"||l==="F!"||l==="F")break;if(l==="/$"||l==="/&")return null}}return r}var xE=null;function D2(r){r=r.nextSibling;for(var l=0;r;){if(r.nodeType===8){var h=r.data;if(h==="/$"||h==="/&"){if(l===0)return gr(r.nextSibling);l--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||l++}r=r.nextSibling}return null}function I2(r){r=r.previousSibling;for(var l=0;r;){if(r.nodeType===8){var h=r.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(l===0)return r;l--}else h!=="/$"&&h!=="/&"||l++}r=r.previousSibling}return null}function P2(r,l,h){switch(l=Fv(h),r){case"html":if(r=l.documentElement,!r)throw Error(n(452));return r;case"head":if(r=l.head,!r)throw Error(n(453));return r;case"body":if(r=l.body,!r)throw Error(n(454));return r;default:throw Error(n(451))}}function Dm(r){for(var l=r.attributes;l.length;)r.removeAttributeNode(l[0]);An(r)}var yr=new Map,L2=new Set;function Uv(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var go=V.d;V.d={f:qF,r:$F,D:YF,C:WF,L:XF,m:JF,X:QF,S:KF,M:ZF};function qF(){var r=go.f(),l=Nv();return r||l}function $F(r){var l=Ct(r);l!==null&&l.tag===5&&l.type==="form"?Q_(l):go.r(r)}var Mh=typeof document>"u"?null:document;function F2(r,l,h){var g=Mh;if(g&&typeof l=="string"&&l){var S=cr(l);S='link[rel="'+r+'"][href="'+S+'"]',typeof h=="string"&&(S+='[crossorigin="'+h+'"]'),L2.has(S)||(L2.add(S),r={rel:r,crossOrigin:h,href:l},g.querySelector(S)===null&&(l=g.createElement("link"),wi(l,"link",r),Xt(l),g.head.appendChild(l)))}}function YF(r){go.D(r),F2("dns-prefetch",r,null)}function WF(r,l){go.C(r,l),F2("preconnect",r,l)}function XF(r,l,h){go.L(r,l,h);var g=Mh;if(g&&r&&l){var S='link[rel="preload"][as="'+cr(l)+'"]';l==="image"&&h&&h.imageSrcSet?(S+='[imagesrcset="'+cr(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(S+='[imagesizes="'+cr(h.imageSizes)+'"]')):S+='[href="'+cr(r)+'"]';var E=S;switch(l){case"style":E=kh(r);break;case"script":E=Dh(r)}yr.has(E)||(r=y({rel:"preload",href:l==="image"&&h&&h.imageSrcSet?void 0:r,as:l},h),yr.set(E,r),g.querySelector(S)!==null||l==="style"&&g.querySelector(Im(E))||l==="script"&&g.querySelector(Pm(E))||(l=g.createElement("link"),wi(l,"link",r),Xt(l),g.head.appendChild(l)))}}function JF(r,l){go.m(r,l);var h=Mh;if(h&&r){var g=l&&typeof l.as=="string"?l.as:"script",S='link[rel="modulepreload"][as="'+cr(g)+'"][href="'+cr(r)+'"]',E=S;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Dh(r)}if(!yr.has(E)&&(r=y({rel:"modulepreload",href:r},l),yr.set(E,r),h.querySelector(S)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(Pm(E)))return}g=h.createElement("link"),wi(g,"link",r),Xt(g),h.head.appendChild(g)}}}function KF(r,l,h){go.S(r,l,h);var g=Mh;if(g&&r){var S=or(g).hoistableStyles,E=kh(r);l=l||"default";var I=S.get(E);if(!I){var B={loading:0,preload:null};if(I=g.querySelector(Im(E)))B.loading=5;else{r=y({rel:"stylesheet",href:r,"data-precedence":l},h),(h=yr.get(E))&&bE(r,h);var Y=I=g.createElement("link");Xt(Y),wi(Y,"link",r),Y._p=new Promise(function(re,de){Y.onload=re,Y.onerror=de}),Y.addEventListener("load",function(){B.loading|=1}),Y.addEventListener("error",function(){B.loading|=2}),B.loading|=4,jv(I,l,g)}I={type:"stylesheet",instance:I,count:1,state:B},S.set(E,I)}}}function QF(r,l){go.X(r,l);var h=Mh;if(h&&r){var g=or(h).hoistableScripts,S=Dh(r),E=g.get(S);E||(E=h.querySelector(Pm(S)),E||(r=y({src:r,async:!0},l),(l=yr.get(S))&&wE(r,l),E=h.createElement("script"),Xt(E),wi(E,"link",r),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},g.set(S,E))}}function ZF(r,l){go.M(r,l);var h=Mh;if(h&&r){var g=or(h).hoistableScripts,S=Dh(r),E=g.get(S);E||(E=h.querySelector(Pm(S)),E||(r=y({src:r,async:!0,type:"module"},l),(l=yr.get(S))&&wE(r,l),E=h.createElement("script"),Xt(E),wi(E,"link",r),h.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},g.set(S,E))}}function U2(r,l,h,g){var S=(S=_e.current)?Uv(S):null;if(!S)throw Error(n(446));switch(r){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(l=kh(h.href),h=or(S).hoistableStyles,g=h.get(l),g||(g={type:"style",instance:null,count:0,state:null},h.set(l,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){r=kh(h.href);var E=or(S).hoistableStyles,I=E.get(r);if(I||(S=S.ownerDocument||S,I={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(r,I),(E=S.querySelector(Im(r)))&&!E._p&&(I.instance=E,I.state.loading=5),yr.has(r)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},yr.set(r,h),E||eU(S,r,h,I.state))),l&&g===null)throw Error(n(528,""));return I}if(l&&g!==null)throw Error(n(529,""));return null;case"script":return l=h.async,h=h.src,typeof h=="string"&&l&&typeof l!="function"&&typeof l!="symbol"?(l=Dh(h),h=or(S).hoistableScripts,g=h.get(l),g||(g={type:"script",instance:null,count:0,state:null},h.set(l,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,r))}}function kh(r){return'href="'+cr(r)+'"'}function Im(r){return'link[rel="stylesheet"]['+r+"]"}function j2(r){return y({},r,{"data-precedence":r.precedence,precedence:null})}function eU(r,l,h,g){r.querySelector('link[rel="preload"][as="style"]['+l+"]")?g.loading=1:(l=r.createElement("link"),g.preload=l,l.addEventListener("load",function(){return g.loading|=1}),l.addEventListener("error",function(){return g.loading|=2}),wi(l,"link",h),Xt(l),r.head.appendChild(l))}function Dh(r){return'[src="'+cr(r)+'"]'}function Pm(r){return"script[async]"+r}function B2(r,l,h){if(l.count++,l.instance===null)switch(l.type){case"style":var g=r.querySelector('style[data-href~="'+cr(h.href)+'"]');if(g)return l.instance=g,Xt(g),g;var S=y({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return g=(r.ownerDocument||r).createElement("style"),Xt(g),wi(g,"style",S),jv(g,h.precedence,r),l.instance=g;case"stylesheet":S=kh(h.href);var E=r.querySelector(Im(S));if(E)return l.state.loading|=4,l.instance=E,Xt(E),E;g=j2(h),(S=yr.get(S))&&bE(g,S),E=(r.ownerDocument||r).createElement("link"),Xt(E);var I=E;return I._p=new Promise(function(B,Y){I.onload=B,I.onerror=Y}),wi(E,"link",g),l.state.loading|=4,jv(E,h.precedence,r),l.instance=E;case"script":return E=Dh(h.src),(S=r.querySelector(Pm(E)))?(l.instance=S,Xt(S),S):(g=h,(S=yr.get(E))&&(g=y({},h),wE(g,S)),r=r.ownerDocument||r,S=r.createElement("script"),Xt(S),wi(S,"link",g),r.head.appendChild(S),l.instance=S);case"void":return null;default:throw Error(n(443,l.type))}else l.type==="stylesheet"&&(l.state.loading&4)===0&&(g=l.instance,l.state.loading|=4,jv(g,h.precedence,r));return l.instance}function jv(r,l,h){for(var g=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),S=g.length?g[g.length-1]:null,E=S,I=0;I<g.length;I++){var B=g[I];if(B.dataset.precedence===l)E=B;else if(E!==S)break}E?E.parentNode.insertBefore(r,E.nextSibling):(l=h.nodeType===9?h.head:h,l.insertBefore(r,l.firstChild))}function bE(r,l){r.crossOrigin==null&&(r.crossOrigin=l.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=l.referrerPolicy),r.title==null&&(r.title=l.title)}function wE(r,l){r.crossOrigin==null&&(r.crossOrigin=l.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=l.referrerPolicy),r.integrity==null&&(r.integrity=l.integrity)}var Bv=null;function O2(r,l,h){if(Bv===null){var g=new Map,S=Bv=new Map;S.set(h,g)}else S=Bv,g=S.get(h),g||(g=new Map,S.set(h,g));if(g.has(r))return g;for(g.set(r,null),h=h.getElementsByTagName(r),S=0;S<h.length;S++){var E=h[S];if(!(E[on]||E[Ee]||r==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var I=E.getAttribute(l)||"";I=r+I;var B=g.get(I);B?B.push(E):g.set(I,[E])}}return g}function H2(r,l,h){r=r.ownerDocument||r,r.head.insertBefore(h,l==="title"?r.querySelector("head > title"):null)}function tU(r,l,h){if(h===1||l.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof l.precedence!="string"||typeof l.href!="string"||l.href==="")break;return!0;case"link":if(typeof l.rel!="string"||typeof l.href!="string"||l.href===""||l.onLoad||l.onError)break;switch(l.rel){case"stylesheet":return r=l.disabled,typeof l.precedence=="string"&&r==null;default:return!0}case"script":if(l.async&&typeof l.async!="function"&&typeof l.async!="symbol"&&!l.onLoad&&!l.onError&&l.src&&typeof l.src=="string")return!0}return!1}function z2(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function nU(r,l,h,g){if(h.type==="stylesheet"&&(typeof g.media!="string"||matchMedia(g.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var S=kh(g.href),E=l.querySelector(Im(S));if(E){l=E._p,l!==null&&typeof l=="object"&&typeof l.then=="function"&&(r.count++,r=Ov.bind(r),l.then(r,r)),h.state.loading|=4,h.instance=E,Xt(E);return}E=l.ownerDocument||l,g=j2(g),(S=yr.get(S))&&bE(g,S),E=E.createElement("link"),Xt(E);var I=E;I._p=new Promise(function(B,Y){I.onload=B,I.onerror=Y}),wi(E,"link",g),h.instance=E}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(h,l),(l=h.state.preload)&&(h.state.loading&3)===0&&(r.count++,h=Ov.bind(r),l.addEventListener("load",h),l.addEventListener("error",h))}}var SE=0;function iU(r,l){return r.stylesheets&&r.count===0&&zv(r,r.stylesheets),0<r.count||0<r.imgCount?function(h){var g=setTimeout(function(){if(r.stylesheets&&zv(r,r.stylesheets),r.unsuspend){var E=r.unsuspend;r.unsuspend=null,E()}},6e4+l);0<r.imgBytes&&SE===0&&(SE=62500*UF());var S=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&zv(r,r.stylesheets),r.unsuspend)){var E=r.unsuspend;r.unsuspend=null,E()}},(r.imgBytes>SE?50:800)+l);return r.unsuspend=h,function(){r.unsuspend=null,clearTimeout(g),clearTimeout(S)}}:null}function Ov(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)zv(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Hv=null;function zv(r,l){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Hv=new Map,l.forEach(sU,r),Hv=null,Ov.call(r))}function sU(r,l){if(!(l.state.loading&4)){var h=Hv.get(r);if(h)var g=h.get(null);else{h=new Map,Hv.set(r,h);for(var S=r.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<S.length;E++){var I=S[E];(I.nodeName==="LINK"||I.getAttribute("media")!=="not all")&&(h.set(I.dataset.precedence,I),g=I)}g&&h.set(null,g)}S=l.instance,I=S.getAttribute("data-precedence"),E=h.get(I)||g,E===g&&h.set(null,S),h.set(I,S),this.count++,g=Ov.bind(this),S.addEventListener("load",g),S.addEventListener("error",g),E?E.parentNode.insertBefore(S,E.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(S,r.firstChild)),l.state.loading|=4}}var Lm={$$typeof:R,Provider:null,Consumer:null,_currentValue:Q,_currentValue2:Q,_threadCount:0};function rU(r,l,h,g,S,E,I,B,Y){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=bl(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bl(0),this.hiddenUpdates=bl(null),this.identifierPrefix=g,this.onUncaughtError=S,this.onCaughtError=E,this.onRecoverableError=I,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Y,this.incompleteTransitions=new Map}function G2(r,l,h,g,S,E,I,B,Y,re,de,fe){return r=new rU(r,l,h,I,Y,re,de,fe,B),l=1,E===!0&&(l|=24),E=Ms(3,null,null,l),r.current=E,E.stateNode=r,l=tS(),l.refCount++,r.pooledCache=l,l.refCount++,E.memoizedState={element:g,isDehydrated:h,cache:l},rS(E),r}function V2(r){return r?(r=ch,r):ch}function q2(r,l,h,g,S,E){S=V2(S),g.context===null?g.context=S:g.pendingContext=S,g=Nl(l),g.payload={element:h},E=E===void 0?null:E,E!==null&&(g.callback=E),h=Rl(r,g,l),h!==null&&(hs(h,r,l),fm(h,r,l))}function $2(r,l){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var h=r.retryLane;r.retryLane=h!==0&&h<l?h:l}}function EE(r,l){$2(r,l),(r=r.alternate)&&$2(r,l)}function Y2(r){if(r.tag===13||r.tag===31){var l=uu(r,67108864);l!==null&&hs(l,r,67108864),EE(r,67108864)}}function W2(r){if(r.tag===13||r.tag===31){var l=Ls();l=oe(l);var h=uu(r,l);h!==null&&hs(h,r,l),EE(r,l)}}var Gv=!0;function aU(r,l,h,g){var S=H.T;H.T=null;var E=V.p;try{V.p=2,AE(r,l,h,g)}finally{V.p=E,H.T=S}}function oU(r,l,h,g){var S=H.T;H.T=null;var E=V.p;try{V.p=8,AE(r,l,h,g)}finally{V.p=E,H.T=S}}function AE(r,l,h,g){if(Gv){var S=CE(g);if(S===null)uE(r,l,g,Vv,h),J2(r,g);else if(cU(S,r,l,h,g))g.stopPropagation();else if(J2(r,g),l&4&&-1<lU.indexOf(r)){for(;S!==null;){var E=Ct(S);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var I=Qa(E.pendingLanes);if(I!==0){var B=E;for(B.pendingLanes|=2,B.entangledLanes|=2;I;){var Y=1<<31-Ii(I);B.entanglements[1]|=Y,I&=~Y}pa(E),(kt&6)===0&&(Tv=St()+500,Rm(0))}}break;case 31:case 13:B=uu(E,2),B!==null&&hs(B,E,2),Nv(),EE(E,2)}if(E=CE(g),E===null&&uE(r,l,g,Vv,h),E===S)break;S=E}S!==null&&g.stopPropagation()}else uE(r,l,g,null,h)}}function CE(r){return r=_w(r),TE(r)}var Vv=null;function TE(r){if(Vv=null,r=At(r),r!==null){var l=a(r);if(l===null)r=null;else{var h=l.tag;if(h===13){if(r=o(l),r!==null)return r;r=null}else if(h===31){if(r=c(l),r!==null)return r;r=null}else if(h===3){if(l.stateNode.current.memoizedState.isDehydrated)return l.tag===3?l.stateNode.containerInfo:null;r=null}else l!==r&&(r=null)}}return Vv=r,null}function X2(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ar()){case jr:return 2;case Bt:return 8;case Et:case an:return 32;case In:return 268435456;default:return 32}default:return 32}}var _E=!1,Ol=null,Hl=null,zl=null,Fm=new Map,Um=new Map,Gl=[],lU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function J2(r,l){switch(r){case"focusin":case"focusout":Ol=null;break;case"dragenter":case"dragleave":Hl=null;break;case"mouseover":case"mouseout":zl=null;break;case"pointerover":case"pointerout":Fm.delete(l.pointerId);break;case"gotpointercapture":case"lostpointercapture":Um.delete(l.pointerId)}}function jm(r,l,h,g,S,E){return r===null||r.nativeEvent!==E?(r={blockedOn:l,domEventName:h,eventSystemFlags:g,nativeEvent:E,targetContainers:[S]},l!==null&&(l=Ct(l),l!==null&&Y2(l)),r):(r.eventSystemFlags|=g,l=r.targetContainers,S!==null&&l.indexOf(S)===-1&&l.push(S),r)}function cU(r,l,h,g,S){switch(l){case"focusin":return Ol=jm(Ol,r,l,h,g,S),!0;case"dragenter":return Hl=jm(Hl,r,l,h,g,S),!0;case"mouseover":return zl=jm(zl,r,l,h,g,S),!0;case"pointerover":var E=S.pointerId;return Fm.set(E,jm(Fm.get(E)||null,r,l,h,g,S)),!0;case"gotpointercapture":return E=S.pointerId,Um.set(E,jm(Um.get(E)||null,r,l,h,g,S)),!0}return!1}function K2(r){var l=At(r.target);if(l!==null){var h=a(l);if(h!==null){if(l=h.tag,l===13){if(l=o(h),l!==null){r.blockedOn=l,je(r.priority,function(){W2(h)});return}}else if(l===31){if(l=c(h),l!==null){r.blockedOn=l,je(r.priority,function(){W2(h)});return}}else if(l===3&&h.stateNode.current.memoizedState.isDehydrated){r.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}r.blockedOn=null}function qv(r){if(r.blockedOn!==null)return!1;for(var l=r.targetContainers;0<l.length;){var h=CE(r.nativeEvent);if(h===null){h=r.nativeEvent;var g=new h.constructor(h.type,h);Tw=g,h.target.dispatchEvent(g),Tw=null}else return l=Ct(h),l!==null&&Y2(l),r.blockedOn=h,!1;l.shift()}return!0}function Q2(r,l,h){qv(r)&&h.delete(l)}function uU(){_E=!1,Ol!==null&&qv(Ol)&&(Ol=null),Hl!==null&&qv(Hl)&&(Hl=null),zl!==null&&qv(zl)&&(zl=null),Fm.forEach(Q2),Um.forEach(Q2)}function $v(r,l){r.blockedOn===l&&(r.blockedOn=null,_E||(_E=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,uU)))}var Yv=null;function Z2(r){Yv!==r&&(Yv=r,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){Yv===r&&(Yv=null);for(var l=0;l<r.length;l+=3){var h=r[l],g=r[l+1],S=r[l+2];if(typeof g!="function"){if(TE(g||h)===null)continue;break}var E=Ct(h);E!==null&&(r.splice(l,3),l-=3,CS(E,{pending:!0,data:S,method:h.method,action:g},g,S))}}))}function Ih(r){function l(Y){return $v(Y,r)}Ol!==null&&$v(Ol,r),Hl!==null&&$v(Hl,r),zl!==null&&$v(zl,r),Fm.forEach(l),Um.forEach(l);for(var h=0;h<Gl.length;h++){var g=Gl[h];g.blockedOn===r&&(g.blockedOn=null)}for(;0<Gl.length&&(h=Gl[0],h.blockedOn===null);)K2(h),h.blockedOn===null&&Gl.shift();if(h=(r.ownerDocument||r).$$reactFormReplay,h!=null)for(g=0;g<h.length;g+=3){var S=h[g],E=h[g+1],I=S[Ce]||null;if(typeof E=="function")I||Z2(h);else if(I){var B=null;if(E&&E.hasAttribute("formAction")){if(S=E,I=E[Ce]||null)B=I.formAction;else if(TE(S)!==null)continue}else B=I.action;typeof B=="function"?h[g+1]=B:(h.splice(g,3),g-=3),Z2(h)}}}function eR(){function r(E){E.canIntercept&&E.info==="react-transition"&&E.intercept({handler:function(){return new Promise(function(I){return S=I})},focusReset:"manual",scroll:"manual"})}function l(){S!==null&&(S(),S=null),g||setTimeout(h,20)}function h(){if(!g&&!navigation.transition){var E=navigation.currentEntry;E&&E.url!=null&&navigation.navigate(E.url,{state:E.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var g=!1,S=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",l),navigation.addEventListener("navigateerror",l),setTimeout(h,100),function(){g=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",l),navigation.removeEventListener("navigateerror",l),S!==null&&(S(),S=null)}}}function NE(r){this._internalRoot=r}Wv.prototype.render=NE.prototype.render=function(r){var l=this._internalRoot;if(l===null)throw Error(n(409));var h=l.current,g=Ls();q2(h,g,r,l,null,null)},Wv.prototype.unmount=NE.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var l=r.containerInfo;q2(r.current,2,null,r,null,null),Nv(),l[Fe]=null}};function Wv(r){this._internalRoot=r}Wv.prototype.unstable_scheduleHydration=function(r){if(r){var l=xe();r={blockedOn:null,target:r,priority:l};for(var h=0;h<Gl.length&&l!==0&&l<Gl[h].priority;h++);Gl.splice(h,0,r),h===0&&K2(r)}};var tR=e.version;if(tR!=="19.2.1")throw Error(n(527,tR,"19.2.1"));V.findDOMNode=function(r){var l=r._reactInternals;if(l===void 0)throw typeof r.render=="function"?Error(n(188)):(r=Object.keys(r).join(","),Error(n(268,r)));return r=d(l),r=r!==null?p(r):null,r=r===null?null:r.stateNode,r};var dU={bundleType:0,version:"19.2.1",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xv.isDisabled&&Xv.supportsFiber)try{Br=Xv.inject(dU),gn=Xv}catch{}}return Om.createRoot=function(r,l){if(!s(r))throw Error(n(299));var h=!1,g="",S=lN,E=cN,I=uN;return l!=null&&(l.unstable_strictMode===!0&&(h=!0),l.identifierPrefix!==void 0&&(g=l.identifierPrefix),l.onUncaughtError!==void 0&&(S=l.onUncaughtError),l.onCaughtError!==void 0&&(E=l.onCaughtError),l.onRecoverableError!==void 0&&(I=l.onRecoverableError)),l=G2(r,1,!1,null,null,h,g,null,S,E,I,eR),r[Fe]=l.current,cE(r),new NE(l)},Om.hydrateRoot=function(r,l,h){if(!s(r))throw Error(n(299));var g=!1,S="",E=lN,I=cN,B=uN,Y=null;return h!=null&&(h.unstable_strictMode===!0&&(g=!0),h.identifierPrefix!==void 0&&(S=h.identifierPrefix),h.onUncaughtError!==void 0&&(E=h.onUncaughtError),h.onCaughtError!==void 0&&(I=h.onCaughtError),h.onRecoverableError!==void 0&&(B=h.onRecoverableError),h.formState!==void 0&&(Y=h.formState)),l=G2(r,1,!0,l,h??null,g,S,Y,E,I,B,eR),l.context=V2(null),h=l.current,g=Ls(),g=oe(g),S=Nl(g),S.callback=null,Rl(h,S,g),h=g,l.current.lanes=h,wl(l,h),pa(l),r[Fe]=l.current,cE(r),new Wv(l)},Om.version="19.2.1",Om}var hR;function EU(){if(hR)return DE.exports;hR=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),DE.exports=SU(),DE.exports}var AU=EU();const CU=Ob(AU);/**
 * react-router v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var _D=i=>{throw TypeError(i)},TU=(i,e,t)=>e.has(i)||_D("Cannot "+t),FE=(i,e,t)=>(TU(i,e,"read from private field"),t?t.call(i):e.get(i)),_U=(i,e,t)=>e.has(i)?_D("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),ND=(i=>(i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE",i))(ND||{}),fR="popstate";function RD(i={}){let{initialEntries:e=["/"],initialIndex:t,v5Compat:n=!1}=i,s;s=e.map((w,A)=>p(w,typeof w=="string"?null:w.state,A===0?"default":void 0));let a=u(t??s.length-1),o="POP",c=null;function u(w){return Math.min(Math.max(w,0),s.length-1)}function d(){return s[a]}function p(w,A=null,C){let T=ol(s?d().pathname:"/",w,A,C);return Wt(T.pathname.charAt(0)==="/",`relative pathnames are not supported in memory history: ${JSON.stringify(w)}`),T}function y(w){return typeof w=="string"?w:Di(w)}return{get index(){return a},get action(){return o},get location(){return d()},createHref:y,createURL(w){return new URL(y(w),"http://localhost")},encodeLocation(w){let A=typeof w=="string"?rr(w):w;return{pathname:A.pathname||"",search:A.search||"",hash:A.hash||""}},push(w,A){o="PUSH";let C=p(w,A);a+=1,s.splice(a,s.length,C),n&&c&&c({action:o,location:C,delta:1})},replace(w,A){o="REPLACE";let C=p(w,A);s[a]=C,n&&c&&c({action:o,location:C,delta:0})},go(w){o="POP";let A=u(a+w),C=s[A];a=A,c&&c({action:o,location:C,delta:w})},listen(w){return c=w,()=>{c=null}}}}function Hb(i={}){function e(n,s){let{pathname:a,search:o,hash:c}=n.location;return ol("",{pathname:a,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:Di(s)}return kD(e,t,null,i)}function MD(i={}){function e(s,a){let{pathname:o="/",search:c="",hash:u=""}=rr(s.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),ol("",{pathname:o,search:c,hash:u},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function t(s,a){let o=s.document.querySelector("base"),c="";if(o&&o.getAttribute("href")){let u=s.location.href,d=u.indexOf("#");c=d===-1?u:u.slice(0,d)}return c+"#"+(typeof a=="string"?a:Di(a))}function n(s,a){Wt(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return kD(e,t,n,i)}function Be(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Wt(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function NU(){return Math.random().toString(36).substring(2,10)}function pR(i,e){return{usr:i.state,key:i.key,idx:e}}function ol(i,e,t=null,n){return{pathname:typeof i=="string"?i:i.pathname,search:"",hash:"",...typeof e=="string"?rr(e):e,state:t,key:e&&e.key||n||NU()}}function Di({pathname:i="/",search:e="",hash:t=""}){return e&&e!=="?"&&(i+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(i+=t.charAt(0)==="#"?t:"#"+t),i}function rr(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substring(t),i=i.substring(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substring(n),i=i.substring(0,n)),i&&(e.pathname=i)}return e}function kD(i,e,t,n={}){let{window:s=document.defaultView,v5Compat:a=!1}=n,o=s.history,c="POP",u=null,d=p();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function p(){return(o.state||{idx:null}).idx}function y(){c="POP";let T=p(),_=T==null?null:T-d;d=T,u&&u({action:c,location:C.location,delta:_})}function v(T,_){c="PUSH";let D=ol(C.location,T,_);t&&t(D,T),d=p()+1;let R=pR(D,d),L=C.createHref(D);try{o.pushState(R,"",L)}catch(F){if(F instanceof DOMException&&F.name==="DataCloneError")throw F;s.location.assign(L)}a&&u&&u({action:c,location:C.location,delta:1})}function w(T,_){c="REPLACE";let D=ol(C.location,T,_);t&&t(D,T),d=p();let R=pR(D,d),L=C.createHref(D);o.replaceState(R,"",L),a&&u&&u({action:c,location:C.location,delta:0})}function A(T){return DD(T)}let C={get action(){return c},get location(){return i(s,o)},listen(T){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(fR,y),u=T,()=>{s.removeEventListener(fR,y),u=null}},createHref(T){return e(s,T)},createURL:A,encodeLocation(T){let _=A(T);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:v,replace:w,go(T){return o.go(T)}};return C}function DD(i,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),Be(t,"No window.location.(origin|href) available to create URL");let n=typeof i=="string"?i:Di(i);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function RU(i){return{defaultValue:i}}var Qm,Va=class{constructor(i){if(_U(this,Qm,new Map),i)for(let[e,t]of i)this.set(e,t)}get(i){if(FE(this,Qm).has(i))return FE(this,Qm).get(i);if(i.defaultValue!==void 0)return i.defaultValue;throw new Error("No value found for context")}set(i,e){FE(this,Qm).set(i,e)}};Qm=new WeakMap;var MU=new Set(["lazy","caseSensitive","path","id","index","children"]);function kU(i){return MU.has(i)}var DU=new Set(["lazy","caseSensitive","path","id","index","middleware","children"]);function IU(i){return DU.has(i)}function PU(i){return i.index===!0}function qc(i,e,t=[],n={},s=!1){return i.map((a,o)=>{let c=[...t,String(o)],u=typeof a.id=="string"?a.id:c.join("-");if(Be(a.index!==!0||!a.children,"Cannot specify children on an index route"),Be(s||!n[u],`Found a route id collision on id "${u}".  Route id's must be globally unique within Data Router usages`),PU(a)){let d={...a,id:u};return n[u]=mR(d,e(d)),d}else{let d={...a,id:u,children:void 0};return n[u]=mR(d,e(d)),a.children&&(d.children=qc(a.children,e,c,n,s)),d}})}function mR(i,e){return Object.assign(i,{...e,...typeof e.lazy=="object"&&e.lazy!=null?{lazy:{...i.lazy,...e.lazy}}:{}})}function Es(i,e,t="/"){return Zm(i,e,t,!1)}function Zm(i,e,t,n){let s=typeof e=="string"?rr(e):e,a=ii(s.pathname||"/",t);if(a==null)return null;let o=PD(i);LU(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=UD(a);c=VU(o[u],d,n)}return c}function ID(i,e){let{route:t,pathname:n,params:s}=i;return{id:t.id,pathname:n,params:s,data:e[t.id],loaderData:e[t.id],handle:t.handle}}function PD(i,e=[],t=[],n="",s=!1){let a=(o,c,u=s,d)=>{let p={relativePath:d===void 0?o.path||"":d,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(p.relativePath.startsWith("/")){if(!p.relativePath.startsWith(n)&&u)return;Be(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length)}let y=qa([n,p.relativePath]),v=t.concat(p);o.children&&o.children.length>0&&(Be(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${y}".`),PD(o.children,e,v,y,u)),!(o.path==null&&!o.index)&&e.push({path:y,score:zU(y,o.index),routesMeta:v})};return i.forEach((o,c)=>{var u;if(o.path===""||!((u=o.path)!=null&&u.includes("?")))a(o,c);else for(let d of LD(o.path))a(o,c,!0,d)}),e}function LD(i){let e=i.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),a=t.replace(/\?$/,"");if(n.length===0)return s?[a,""]:[a];let o=LD(n.join("/")),c=[];return c.push(...o.map(u=>u===""?a:[a,u].join("/"))),s&&c.push(...o),c.map(u=>i.startsWith("/")&&u===""?"/":u)}function LU(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:GU(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var FU=/^:[\w-]+$/,UU=3,jU=2,BU=1,OU=10,HU=-2,gR=i=>i==="*";function zU(i,e){let t=i.split("/"),n=t.length;return t.some(gR)&&(n+=HU),e&&(n+=jU),t.filter(s=>!gR(s)).reduce((s,a)=>s+(FU.test(a)?UU:a===""?BU:OU),n)}function GU(i,e){return i.length===e.length&&i.slice(0,-1).every((n,s)=>n===e[s])?i[i.length-1]-e[e.length-1]:0}function VU(i,e,t=!1){let{routesMeta:n}=i,s={},a="/",o=[];for(let c=0;c<n.length;++c){let u=n[c],d=c===n.length-1,p=a==="/"?e:e.slice(a.length)||"/",y=jp({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},p),v=u.route;if(!y&&d&&t&&!n[n.length-1].route.index&&(y=jp({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},p)),!y)return null;Object.assign(s,y.params),o.push({params:s,pathname:qa([a,y.pathname]),pathnameBase:WU(qa([a,y.pathnameBase])),route:v}),y.pathnameBase!=="/"&&(a=qa([a,y.pathnameBase]))}return o}function qU(i,e={}){let t=i;t.endsWith("*")&&t!=="*"&&!t.endsWith("/*")&&(Wt(!1,`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`),t=t.replace(/\*$/,"/*"));const n=t.startsWith("/")?"/":"",s=o=>o==null?"":typeof o=="string"?o:String(o),a=t.split(/\/+/).map((o,c,u)=>{if(c===u.length-1&&o==="*")return s(e["*"]);const p=o.match(/^:([\w-]+)(\??)$/);if(p){const[,y,v]=p;let w=e[y];return Be(v==="?"||w!=null,`Missing ":${y}" param`),encodeURIComponent(s(w))}return o.replace(/\?$/g,"")}).filter(o=>!!o);return n+a.join("/")}function jp(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,n]=FD(i.path,i.caseSensitive,i.end),s=e.match(t);if(!s)return null;let a=s[0],o=a.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:n.reduce((d,{paramName:p,isOptional:y},v)=>{if(p==="*"){let A=c[v]||"";o=a.slice(0,a.length-A.length).replace(/(.)\/+$/,"$1")}const w=c[v];return y&&!w?d[p]=void 0:d[p]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:i}}function FD(i,e=!1,t=!0){Wt(i==="*"||!i.endsWith("*")||i.endsWith("/*"),`Route path "${i}" will be treated as if it were "${i.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${i.replace(/\*$/,"/*")}".`);let n=[],s="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(n.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return i.endsWith("*")?(n.push({paramName:"*"}),s+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":i!==""&&i!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function UD(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Wt(!1,`The URL path "${i}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),i}}function ii(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}function $U({basename:i,pathname:e}){return e==="/"?i:qa([i,e])}var YU=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zb=i=>YU.test(i);function jD(i,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof i=="string"?rr(i):i,a;if(t)if(zb(t))a=t;else{if(t.includes("//")){let o=t;t=t.replace(/\/\/+/g,"/"),Wt(!1,`Pathnames cannot have embedded double slashes - normalizing ${o} -> ${t}`)}t.startsWith("/")?a=yR(t.substring(1),"/"):a=yR(t,e)}else a=e;return{pathname:a,search:XU(n),hash:JU(s)}}function yR(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function UE(i,e,t,n){return`Cannot include a '${i}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function BD(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function Gb(i){let e=BD(i);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function Vb(i,e,t,n=!1){let s;typeof i=="string"?s=rr(i):(s={...i},Be(!s.pathname||!s.pathname.includes("?"),UE("?","pathname","search",s)),Be(!s.pathname||!s.pathname.includes("#"),UE("#","pathname","hash",s)),Be(!s.search||!s.search.includes("#"),UE("#","search","hash",s)));let a=i===""||s.pathname==="",o=a?"/":s.pathname,c;if(o==null)c=t;else{let y=e.length-1;if(!n&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),y-=1;s.pathname=v.join("/")}c=y>=0?e[y]:"/"}let u=jD(s,c),d=o&&o!=="/"&&o.endsWith("/"),p=(a||o===".")&&t.endsWith("/");return!u.pathname.endsWith("/")&&(d||p)&&(u.pathname+="/"),u}var qa=i=>i.join("/").replace(/\/\/+/g,"/"),WU=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),XU=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,JU=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i,KU=class{constructor(i,e){this.type="DataWithResponseInit",this.data=i,this.init=e||null}};function OD(i,e){return new KU(i,typeof e=="number"?{status:e}:e)}var x0=(i,e=302)=>{let t=e;typeof t=="number"?t={status:t}:typeof t.status>"u"&&(t.status=302);let n=new Headers(t.headers);return n.set("Location",i),new Response(null,{...t,headers:n})},HD=(i,e)=>{let t=x0(i,e);return t.headers.set("X-Remix-Reload-Document","true"),t},zD=(i,e)=>{let t=x0(i,e);return t.headers.set("X-Remix-Replace","true"),t},is=class{constructor(i,e,t,n=!1){this.status=i,this.statusText=e||"",this.internal=n,t instanceof Error?(this.data=t.toString(),this.error=t):this.data=t}};function Bn(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}function il(i){return i.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Hc=Symbol("Uninstrumented");function GD(i,e){let t={lazy:[],"lazy.loader":[],"lazy.action":[],"lazy.middleware":[],middleware:[],loader:[],action:[]};i.forEach(s=>s({id:e.id,index:e.index,path:e.path,instrument(a){let o=Object.keys(t);for(let c of o)a[c]&&t[c].push(a[c])}}));let n={};if(typeof e.lazy=="function"&&t.lazy.length>0){let s=Du(t.lazy,e.lazy,()=>{});s&&(n.lazy=s)}if(typeof e.lazy=="object"){let s=e.lazy;["middleware","loader","action"].forEach(a=>{let o=s[a],c=t[`lazy.${a}`];if(typeof o=="function"&&c.length>0){let u=Du(c,o,()=>{});u&&(n.lazy=Object.assign(n.lazy||{},{[a]:u}))}})}return["loader","action"].forEach(s=>{let a=e[s];if(typeof a=="function"&&t[s].length>0){let o=a[Hc]??a,c=Du(t[s],o,(...u)=>vR(u[0]));c&&(c[Hc]=o,n[s]=c)}}),e.middleware&&e.middleware.length>0&&t.middleware.length>0&&(n.middleware=e.middleware.map(s=>{let a=s[Hc]??s,o=Du(t.middleware,a,(...c)=>vR(c[0]));return o?(o[Hc]=a,o):s})),n}function QU(i,e){let t={navigate:[],fetch:[]};if(e.forEach(n=>n({instrument(s){let a=Object.keys(s);for(let o of a)s[o]&&t[o].push(s[o])}})),t.navigate.length>0){let n=i.navigate[Hc]??i.navigate,s=Du(t.navigate,n,(...a)=>{let[o,c]=a;return{to:typeof o=="number"||typeof o=="string"?o:o?Di(o):".",...xR(i,c??{})}});s&&(s[Hc]=n,i.navigate=s)}if(t.fetch.length>0){let n=i.fetch[Hc]??i.fetch,s=Du(t.fetch,n,(...a)=>{let[o,,c,u]=a;return{href:c??".",fetcherKey:o,...xR(i,u??{})}});s&&(s[Hc]=n,i.fetch=s)}return i}function ZU(i,e){let t={request:[]};e.forEach(s=>s({instrument(a){let o=Object.keys(a);for(let c of o)a[c]&&t[c].push(a[c])}}));let n=i;return t.request.length>0&&(n=Du(t.request,i,(...s)=>{let[a,o]=s;return{request:qD(a),context:o!=null?$D(o):o}})),n}function Du(i,e,t){return i.length===0?null:async(...n)=>{let s=await VD(i,t(...n),()=>e(...n),i.length-1);if(s.type==="error")throw s.value;return s.value}}async function VD(i,e,t,n){let s=i[n],a;if(s){let o,c=async()=>(o?console.error("You cannot call instrumented handlers more than once"):o=VD(i,e,t,n-1),a=await o,Be(a,"Expected a result"),a.type==="error"&&a.value instanceof Error?{status:"error",error:a.value}:{status:"success",error:void 0});try{await s(c,e)}catch(u){console.error("An instrumentation function threw an error:",u)}o||await c(),await o}else try{a={type:"success",value:await t()}}catch(o){a={type:"error",value:o}}return a||{type:"error",value:new Error("No result assigned in instrumentation chain.")}}function vR(i){let{request:e,context:t,params:n,unstable_pattern:s}=i;return{request:qD(e),params:{...n},unstable_pattern:s,context:$D(t)}}function xR(i,e){return{currentUrl:Di(i.state.location),..."formMethod"in e?{formMethod:e.formMethod}:{},..."formEncType"in e?{formEncType:e.formEncType}:{},..."formData"in e?{formData:e.formData}:{},..."body"in e?{body:e.body}:{}}}function qD(i){return{method:i.method,url:i.url,headers:{get:(...e)=>i.headers.get(...e)}}}function $D(i){if(tj(i)){let e={...i};return Object.freeze(e),e}else return{get:e=>i.get(e)}}var ej=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function tj(i){if(i===null||typeof i!="object")return!1;const e=Object.getPrototypeOf(i);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===ej}var YD=["POST","PUT","PATCH","DELETE"],nj=new Set(YD),ij=["GET",...YD],sj=new Set(ij),WD=new Set([301,302,303,307,308]),rj=new Set([307,308]),Sg={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},qb={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},$l={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},XD=i=>({hasErrorBoundary:!!i.hasErrorBoundary}),JD="remix-router-transitions",KD=Symbol("ResetLoaderData");function b0(i){const e=i.window?i.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u";Be(i.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=i.hydrationRouteProperties||[],s=i.mapRouteProperties||XD,a=s;if(i.unstable_instrumentations){let W=i.unstable_instrumentations;a=te=>({...s(te),...GD(W.map(oe=>oe.route).filter(Boolean),te)})}let o={},c=qc(i.routes,a,void 0,o),u,d=i.basename||"/";d.startsWith("/")||(d=`/${d}`);let p=i.dataStrategy||dj,y={...i.future},v=null,w=new Set,A=null,C=null,T=null,_=i.hydrationData!=null,D=Es(c,i.history.location,d),R=!1,L=null,F;if(D==null&&!i.patchRoutesOnNavigation){let W=Yn(404,{pathname:i.history.location.pathname}),{matches:te,route:oe}=Wh(c);F=!0,D=te,L={[oe.id]:W}}else if(D&&!i.hydrationData&&ru(D,c,i.history.location.pathname).active&&(D=null),D)if(D.some(W=>W.route.lazy))F=!1;else if(!D.some(W=>uC(W.route)))F=!0;else{let W=i.hydrationData?i.hydrationData.loaderData:null,te=i.hydrationData?i.hydrationData.errors:null;if(te){let oe=D.findIndex(ge=>te[ge.route.id]!==void 0);F=D.slice(0,oe+1).every(ge=>!oA(ge.route,W,te))}else F=D.every(oe=>!oA(oe.route,W,te))}else{F=!1,D=[];let W=ru(null,c,i.history.location.pathname);W.active&&W.matches&&(R=!0,D=W.matches)}let U,M={historyAction:i.history.action,location:i.history.location,matches:D,initialized:F,navigation:Sg,restoreScrollPosition:i.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:i.hydrationData&&i.hydrationData.loaderData||{},actionData:i.hydrationData&&i.hydrationData.actionData||null,errors:i.hydrationData&&i.hydrationData.errors||L,fetchers:new Map,blockers:new Map},O="POP",z=null,J=!1,G,X=!1,ie=new Map,$=null,ee=!1,H=!1,V=new Set,Q=new Map,ce=0,ve=-1,q=new Map,Z=new Set,ue=new Map,me=new Map,be=new Set,_e=new Map,Te,mt=null;function rt(){if(v=i.history.listen(({action:W,location:te,delta:oe})=>{if(Te){Te(),Te=void 0;return}Wt(_e.size===0||oe!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let ge=nu({currentLocation:M.location,nextLocation:te,historyAction:W});if(ge&&oe!=null){let xe=new Promise(je=>{Te=je});i.history.go(oe*-1),Ka(ge,{state:"blocked",location:te,proceed(){Ka(ge,{state:"proceeding",proceed:void 0,reset:void 0,location:te}),xe.then(()=>i.history.go(oe))},reset(){let je=new Map(M.blockers);je.set(ge,$l),wt({blockers:je})}}),z==null||z.resolve(),z=null;return}return Se(W,te)}),t){yj(e,ie);let W=()=>vj(e,ie);e.addEventListener("pagehide",W),$=()=>e.removeEventListener("pagehide",W)}return M.initialized||Se("POP",M.location,{initialHydration:!0}),U}function lt(){v&&v(),$&&$(),w.clear(),G&&G.abort(),M.fetchers.forEach((W,te)=>tu(te)),M.blockers.forEach((W,te)=>U0(te))}function En(W){return w.add(W),()=>w.delete(W)}function wt(W,te={}){W.matches&&(W.matches=W.matches.map(xe=>{let je=o[xe.route.id],ke=xe.route;return ke.element!==je.element||ke.errorElement!==je.errorElement||ke.hydrateFallbackElement!==je.hydrateFallbackElement?{...xe,route:je}:xe})),M={...M,...W};let oe=[],ge=[];M.fetchers.forEach((xe,je)=>{xe.state==="idle"&&(be.has(je)?oe.push(je):ge.push(je))}),be.forEach(xe=>{!M.fetchers.has(xe)&&!Q.has(xe)&&oe.push(xe)}),[...w].forEach(xe=>xe(M,{deletedFetchers:oe,newErrors:W.errors??null,viewTransitionOpts:te.viewTransitionOpts,flushSync:te.flushSync===!0})),oe.forEach(xe=>tu(xe)),ge.forEach(xe=>M.fetchers.delete(xe))}function Ye(W,te,{flushSync:oe}={}){var Ge,Oe;let ge=M.actionData!=null&&M.navigation.formMethod!=null&&Gi(M.navigation.formMethod)&&M.navigation.state==="loading"&&((Ge=W.state)==null?void 0:Ge._isRedirect)!==!0,xe;te.actionData?Object.keys(te.actionData).length>0?xe=te.actionData:xe=null:ge?xe=M.actionData:xe=null;let je=te.loaderData?kR(M.loaderData,te.loaderData,te.matches||[],te.errors):M.loaderData,ke=M.blockers;ke.size>0&&(ke=new Map(ke),ke.forEach((We,Mt)=>ke.set(Mt,$l)));let Ee=ee?!1:j0(W,te.matches||M.matches),Ce=J===!0||M.navigation.formMethod!=null&&Gi(M.navigation.formMethod)&&((Oe=W.state)==null?void 0:Oe._isRedirect)!==!0;u&&(c=u,u=void 0),ee||O==="POP"||(O==="PUSH"?i.history.push(W,W.state):O==="REPLACE"&&i.history.replace(W,W.state));let Fe;if(O==="POP"){let We=ie.get(M.location.pathname);We&&We.has(W.pathname)?Fe={currentLocation:M.location,nextLocation:W}:ie.has(W.pathname)&&(Fe={currentLocation:W,nextLocation:M.location})}else if(X){let We=ie.get(M.location.pathname);We?We.add(W.pathname):(We=new Set([W.pathname]),ie.set(M.location.pathname,We)),Fe={currentLocation:M.location,nextLocation:W}}wt({...te,actionData:xe,loaderData:je,historyAction:O,location:W,initialized:!0,navigation:Sg,revalidation:"idle",restoreScrollPosition:Ee,preventScrollReset:Ce,blockers:ke},{viewTransitionOpts:Fe,flushSync:oe===!0}),O="POP",J=!1,X=!1,ee=!1,H=!1,z==null||z.resolve(),z=null,mt==null||mt.resolve(),mt=null}async function at(W,te){if(z==null||z.resolve(),z=null,typeof W=="number"){z||(z=PR());let Mt=z.promise;return i.history.go(W),Mt}let oe=aA(M.location,M.matches,d,W,te==null?void 0:te.fromRouteId,te==null?void 0:te.relative),{path:ge,submission:xe,error:je}=wR(!1,oe,te),ke=M.location,Ee=ol(M.location,ge,te&&te.state);Ee={...Ee,...i.history.encodeLocation(Ee)};let Ce=te&&te.replace!=null?te.replace:void 0,Fe="PUSH";Ce===!0?Fe="REPLACE":Ce===!1||xe!=null&&Gi(xe.formMethod)&&xe.formAction===M.location.pathname+M.location.search&&(Fe="REPLACE");let Ge=te&&"preventScrollReset"in te?te.preventScrollReset===!0:void 0,Oe=(te&&te.flushSync)===!0,We=nu({currentLocation:ke,nextLocation:Ee,historyAction:Fe});if(We){Ka(We,{state:"blocked",location:Ee,proceed(){Ka(We,{state:"proceeding",proceed:void 0,reset:void 0,location:Ee}),at(W,te)},reset(){let Mt=new Map(M.blockers);Mt.set(We,$l),wt({blockers:Mt})}});return}await Se(Fe,Ee,{submission:xe,pendingError:je,preventScrollReset:Ge,replace:te&&te.replace,enableViewTransition:te&&te.viewTransition,flushSync:Oe})}function pe(){mt||(mt=PR()),Bt(),wt({revalidation:"loading"});let W=mt.promise;return M.navigation.state==="submitting"?W:M.navigation.state==="idle"?(Se(M.historyAction,M.location,{startUninterruptedRevalidation:!0}),W):(Se(O||M.historyAction,M.navigation.location,{overrideNavigation:M.navigation,enableViewTransition:X===!0}),W)}async function Se(W,te,oe){G&&G.abort(),G=null,O=W,ee=(oe&&oe.startUninterruptedRevalidation)===!0,su(M.location,M.matches),J=(oe&&oe.preventScrollReset)===!0,X=(oe&&oe.enableViewTransition)===!0;let ge=u||c,xe=oe&&oe.overrideNavigation,je=oe!=null&&oe.initialHydration&&M.matches&&M.matches.length>0&&!R?M.matches:Es(ge,te,d),ke=(oe&&oe.flushSync)===!0;if(je&&M.initialized&&!H&&fj(M.location,te)&&!(oe&&oe.submission&&Gi(oe.submission.formMethod))){Ye(te,{matches:je},{flushSync:ke});return}let Ee=ru(je,ge,te.pathname);if(Ee.active&&Ee.matches&&(je=Ee.matches),!je){let{error:An,notFoundMatches:At,route:Ct}=xl(te.pathname);Ye(te,{matches:At,loaderData:{},errors:{[Ct.id]:An}},{flushSync:ke});return}G=new AbortController;let Ce=Bh(i.history,te,G.signal,oe&&oe.submission),Fe=i.getContext?await i.getContext():new Va,Ge;if(oe&&oe.pendingError)Ge=[Dr(je).route.id,{type:"error",error:oe.pendingError}];else if(oe&&oe.submission&&Gi(oe.submission.formMethod)){let An=await ze(Ce,te,oe.submission,je,Fe,Ee.active,oe&&oe.initialHydration===!0,{replace:oe.replace,flushSync:ke});if(An.shortCircuited)return;if(An.pendingActionResult){let[At,Ct]=An.pendingActionResult;if(fi(Ct)&&Bn(Ct.error)&&Ct.error.status===404){G=null,Ye(te,{matches:An.matches,loaderData:{},errors:{[At]:Ct.error}});return}}je=An.matches||je,Ge=An.pendingActionResult,xe=jE(te,oe.submission),ke=!1,Ee.active=!1,Ce=Bh(i.history,Ce.url,Ce.signal)}let{shortCircuited:Oe,matches:We,loaderData:Mt,errors:on}=await $e(Ce,te,je,Fe,Ee.active,xe,oe&&oe.submission,oe&&oe.fetcherSubmission,oe&&oe.replace,oe&&oe.initialHydration===!0,ke,Ge);Oe||(G=null,Ye(te,{matches:We||je,...DR(Ge),loaderData:Mt,errors:on}))}async function ze(W,te,oe,ge,xe,je,ke,Ee={}){Bt();let Ce=mj(te,oe);if(wt({navigation:Ce},{flushSync:Ee.flushSync===!0}),je){let Oe=await bl(ge,te.pathname,W.signal);if(Oe.type==="aborted")return{shortCircuited:!0};if(Oe.type==="error"){if(Oe.partialMatches.length===0){let{matches:Mt,route:on}=Wh(c);return{matches:Mt,pendingActionResult:[on.id,{type:"error",error:Oe.error}]}}let We=Dr(Oe.partialMatches).route.id;return{matches:Oe.partialMatches,pendingActionResult:[We,{type:"error",error:Oe.error}]}}else if(Oe.matches)ge=Oe.matches;else{let{notFoundMatches:We,error:Mt,route:on}=xl(te.pathname);return{matches:We,pendingActionResult:[on.id,{type:"error",error:Mt}]}}}let Fe,Ge=tf(ge,te);if(!Ge.route.action&&!Ge.route.lazy)Fe={type:"error",error:Yn(405,{method:W.method,pathname:te.pathname,routeId:Ge.route.id})};else{let Oe=Gc(a,o,W,ge,Ge,ke?[]:n,xe),We=await ar(W,Oe,xe,null);if(Fe=We[Ge.route.id],!Fe){for(let Mt of ge)if(We[Mt.route.id]){Fe=We[Mt.route.id];break}}if(W.signal.aborted)return{shortCircuited:!0}}if(zc(Fe)){let Oe;return Ee&&Ee.replace!=null?Oe=Ee.replace:Oe=NR(Fe.response.headers.get("Location"),new URL(W.url),d)===M.location.pathname+M.location.search,await St(W,Fe,!0,{submission:oe,replace:Oe}),{shortCircuited:!0}}if(fi(Fe)){let Oe=Dr(ge,Ge.route.id);return(Ee&&Ee.replace)!==!0&&(O="PUSH"),{matches:ge,pendingActionResult:[Oe.route.id,Fe,Ge.route.id]}}return{matches:ge,pendingActionResult:[Ge.route.id,Fe]}}async function $e(W,te,oe,ge,xe,je,ke,Ee,Ce,Fe,Ge,Oe){let We=je||jE(te,ke),Mt=ke||Ee||IR(We),on=!ee&&!Fe;if(xe){if(on){let si=gt(Oe);wt({navigation:We,...si!==void 0?{actionData:si}:{}},{flushSync:Ge})}let dt=await bl(oe,te.pathname,W.signal);if(dt.type==="aborted")return{shortCircuited:!0};if(dt.type==="error"){if(dt.partialMatches.length===0){let{matches:Hr,route:lr}=Wh(c);return{matches:Hr,loaderData:{},errors:{[lr.id]:dt.error}}}let si=Dr(dt.partialMatches).route.id;return{matches:dt.partialMatches,loaderData:{},errors:{[si]:dt.error}}}else if(dt.matches)oe=dt.matches;else{let{error:si,notFoundMatches:Hr,route:lr}=xl(te.pathname);return{matches:Hr,loaderData:{},errors:{[lr.id]:si}}}}let An=u||c,{dsMatches:At,revalidatingFetchers:Ct}=SR(W,ge,a,o,i.history,M,oe,Mt,te,Fe?[]:n,Fe===!0,H,V,be,ue,Z,An,d,i.patchRoutesOnNavigation!=null,Oe);if(ve=++ce,!i.dataStrategy&&!At.some(dt=>dt.shouldLoad)&&!At.some(dt=>dt.route.middleware&&dt.route.middleware.length>0)&&Ct.length===0){let dt=Ii();return Ye(te,{matches:oe,loaderData:{},errors:Oe&&fi(Oe[1])?{[Oe[0]]:Oe[1].error}:null,...DR(Oe),...dt?{fetchers:new Map(M.fetchers)}:{}},{flushSync:Ge}),{shortCircuited:!0}}if(on){let dt={};if(!xe){dt.navigation=We;let si=gt(Oe);si!==void 0&&(dt.actionData=si)}Ct.length>0&&(dt.fetchers=Xn(Ct)),wt(dt,{flushSync:Ge})}Ct.forEach(dt=>{gn(dt.key),dt.controller&&Q.set(dt.key,dt.controller)});let Ts=()=>Ct.forEach(dt=>gn(dt.key));G&&G.signal.addEventListener("abort",Ts);let{loaderResults:or,fetcherResults:Xt}=await jr(At,Ct,W,ge);if(W.signal.aborted)return{shortCircuited:!0};G&&G.signal.removeEventListener("abort",Ts),Ct.forEach(dt=>Q.delete(dt.key));let _s=Jv(or);if(_s)return await St(W,_s.result,!0,{replace:Ce}),{shortCircuited:!0};if(_s=Jv(Xt),_s)return Z.add(_s.key),await St(W,_s.result,!0,{replace:Ce}),{shortCircuited:!0};let{loaderData:Zd,errors:Ns}=MR(M,oe,or,Oe,Ct,Xt);Fe&&M.errors&&(Ns={...M.errors,...Ns});let as=Ii(),eh=F0(ve),au=as||eh||Ct.length>0;return{matches:oe,loaderData:Zd,errors:Ns,...au?{fetchers:new Map(M.fetchers)}:{}}}function gt(W){if(W&&!fi(W[1]))return{[W[0]]:W[1].data};if(M.actionData)return Object.keys(M.actionData).length===0?null:M.actionData}function Xn(W){return W.forEach(te=>{let oe=M.fetchers.get(te.key),ge=Hm(void 0,oe?oe.data:void 0);M.fetchers.set(te.key,ge)}),new Map(M.fetchers)}async function rn(W,te,oe,ge){gn(W);let xe=(ge&&ge.flushSync)===!0,je=u||c,ke=aA(M.location,M.matches,d,oe,te,ge==null?void 0:ge.relative),Ee=Es(je,ke,d),Ce=ru(Ee,je,ke);if(Ce.active&&Ce.matches&&(Ee=Ce.matches),!Ee){an(W,te,Yn(404,{pathname:ke}),{flushSync:xe});return}let{path:Fe,submission:Ge,error:Oe}=wR(!0,ke,ge);if(Oe){an(W,te,Oe,{flushSync:xe});return}let We=i.getContext?await i.getContext():new Va,Mt=(ge&&ge.preventScrollReset)===!0;if(Ge&&Gi(Ge.formMethod)){await On(W,te,Fe,Ee,We,Ce.active,xe,Mt,Ge);return}ue.set(W,{routeId:te,path:Fe}),await Ja(W,te,Fe,Ee,We,Ce.active,xe,Mt,Ge)}async function On(W,te,oe,ge,xe,je,ke,Ee,Ce){Bt(),ue.delete(W);let Fe=M.fetchers.get(W);Et(W,gj(Ce,Fe),{flushSync:ke});let Ge=new AbortController,Oe=Bh(i.history,oe,Ge.signal,Ce);if(je){let Tt=await bl(ge,new URL(Oe.url).pathname,Oe.signal,W);if(Tt.type==="aborted")return;if(Tt.type==="error"){an(W,te,Tt.error,{flushSync:ke});return}else if(Tt.matches)ge=Tt.matches;else{an(W,te,Yn(404,{pathname:oe}),{flushSync:ke});return}}let We=tf(ge,oe);if(!We.route.action&&!We.route.lazy){let Tt=Yn(405,{method:Ce.formMethod,pathname:oe,routeId:te});an(W,te,Tt,{flushSync:ke});return}Q.set(W,Ge);let Mt=ce,on=Gc(a,o,Oe,ge,We,n,xe),An=await ar(Oe,on,xe,W),At=An[We.route.id];if(!At){for(let Tt of on)if(An[Tt.route.id]){At=An[Tt.route.id];break}}if(Oe.signal.aborted){Q.get(W)===Ge&&Q.delete(W);return}if(be.has(W)){if(zc(At)||fi(At)){Et(W,yo(void 0));return}}else{if(zc(At))if(Q.delete(W),ve>Mt){Et(W,yo(void 0));return}else return Z.add(W),Et(W,Hm(Ce)),St(Oe,At,!1,{fetcherSubmission:Ce,preventScrollReset:Ee});if(fi(At)){an(W,te,At.error);return}}let Ct=M.navigation.location||M.location,Ts=Bh(i.history,Ct,Ge.signal),or=u||c,Xt=M.navigation.state!=="idle"?Es(or,M.navigation.location,d):M.matches;Be(Xt,"Didn't find any matches after fetcher action");let _s=++ce;q.set(W,_s);let Zd=Hm(Ce,At.data);M.fetchers.set(W,Zd);let{dsMatches:Ns,revalidatingFetchers:as}=SR(Ts,xe,a,o,i.history,M,Xt,Ce,Ct,n,!1,H,V,be,ue,Z,or,d,i.patchRoutesOnNavigation!=null,[We.route.id,At]);as.filter(Tt=>Tt.key!==W).forEach(Tt=>{let yi=Tt.key,Kp=M.fetchers.get(yi),ww=Hm(void 0,Kp?Kp.data:void 0);M.fetchers.set(yi,ww),gn(yi),Tt.controller&&Q.set(yi,Tt.controller)}),wt({fetchers:new Map(M.fetchers)});let eh=()=>as.forEach(Tt=>gn(Tt.key));Ge.signal.addEventListener("abort",eh);let{loaderResults:au,fetcherResults:dt}=await jr(Ns,as,Ts,xe);if(Ge.signal.aborted)return;if(Ge.signal.removeEventListener("abort",eh),q.delete(W),Q.delete(W),as.forEach(Tt=>Q.delete(Tt.key)),M.fetchers.has(W)){let Tt=yo(At.data);M.fetchers.set(W,Tt)}let si=Jv(au);if(si)return St(Ts,si.result,!1,{preventScrollReset:Ee});if(si=Jv(dt),si)return Z.add(si.key),St(Ts,si.result,!1,{preventScrollReset:Ee});let{loaderData:Hr,errors:lr}=MR(M,Xt,au,void 0,as,dt);F0(_s),M.navigation.state==="loading"&&_s>ve?(Be(O,"Expected pending action"),G&&G.abort(),Ye(M.navigation.location,{matches:Xt,loaderData:Hr,errors:lr,fetchers:new Map(M.fetchers)})):(wt({errors:lr,loaderData:kR(M.loaderData,Hr,Xt,lr),fetchers:new Map(M.fetchers)}),H=!1)}async function Ja(W,te,oe,ge,xe,je,ke,Ee,Ce){let Fe=M.fetchers.get(W);Et(W,Hm(Ce,Fe?Fe.data:void 0),{flushSync:ke});let Ge=new AbortController,Oe=Bh(i.history,oe,Ge.signal);if(je){let Ct=await bl(ge,new URL(Oe.url).pathname,Oe.signal,W);if(Ct.type==="aborted")return;if(Ct.type==="error"){an(W,te,Ct.error,{flushSync:ke});return}else if(Ct.matches)ge=Ct.matches;else{an(W,te,Yn(404,{pathname:oe}),{flushSync:ke});return}}let We=tf(ge,oe);Q.set(W,Ge);let Mt=ce,on=Gc(a,o,Oe,ge,We,n,xe),At=(await ar(Oe,on,xe,W))[We.route.id];if(Q.get(W)===Ge&&Q.delete(W),!Oe.signal.aborted){if(be.has(W)){Et(W,yo(void 0));return}if(zc(At))if(ve>Mt){Et(W,yo(void 0));return}else{Z.add(W),await St(Oe,At,!1,{preventScrollReset:Ee});return}if(fi(At)){an(W,te,At.error);return}Et(W,yo(At.data))}}async function St(W,te,oe,{submission:ge,fetcherSubmission:xe,preventScrollReset:je,replace:ke}={}){oe||(z==null||z.resolve(),z=null),te.response.headers.has("X-Remix-Revalidate")&&(H=!0);let Ee=te.response.headers.get("Location");Be(Ee,"Expected a Location header on the redirect Response"),Ee=NR(Ee,new URL(W.url),d);let Ce=ol(M.location,Ee,{_isRedirect:!0});if(t){let on=!1;if(te.response.headers.has("X-Remix-Reload-Document"))on=!0;else if(zb(Ee)){const An=DD(Ee,!0);on=An.origin!==e.location.origin||ii(An.pathname,d)==null}if(on){ke?e.location.replace(Ee):e.location.assign(Ee);return}}G=null;let Fe=ke===!0||te.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Ge,formAction:Oe,formEncType:We}=M.navigation;!ge&&!xe&&Ge&&Oe&&We&&(ge=IR(M.navigation));let Mt=ge||xe;if(rj.has(te.response.status)&&Mt&&Gi(Mt.formMethod))await Se(Fe,Ce,{submission:{...Mt,formAction:Ee},preventScrollReset:je||J,enableViewTransition:oe?X:void 0});else{let on=jE(Ce,ge);await Se(Fe,Ce,{overrideNavigation:on,fetcherSubmission:xe,preventScrollReset:je||J,enableViewTransition:oe?X:void 0})}}async function ar(W,te,oe,ge){let xe,je={};try{xe=await rI(p,W,te,ge,oe,!1)}catch(ke){return te.filter(Ee=>Ee.shouldLoad).forEach(Ee=>{je[Ee.route.id]={type:"error",error:ke}}),je}if(W.signal.aborted)return je;for(let[ke,Ee]of Object.entries(xe))if(fI(Ee)){let Ce=Ee.result;je[ke]={type:"redirect",response:lI(Ce,W,ke,te,d)}}else je[ke]=await oI(Ee);return je}async function jr(W,te,oe,ge){let xe=ar(oe,W,ge,null),je=Promise.all(te.map(async Ce=>{if(Ce.matches&&Ce.match&&Ce.request&&Ce.controller){let Ge=(await ar(Ce.request,Ce.matches,ge,Ce.key))[Ce.match.route.id];return{[Ce.key]:Ge}}else return Promise.resolve({[Ce.key]:{type:"error",error:Yn(404,{pathname:Ce.path})}})})),ke=await xe,Ee=(await je).reduce((Ce,Fe)=>Object.assign(Ce,Fe),{});return{loaderResults:ke,fetcherResults:Ee}}function Bt(){H=!0,ue.forEach((W,te)=>{Q.has(te)&&V.add(te),gn(te)})}function Et(W,te,oe={}){M.fetchers.set(W,te),wt({fetchers:new Map(M.fetchers)},{flushSync:(oe&&oe.flushSync)===!0})}function an(W,te,oe,ge={}){let xe=Dr(M.matches,te);tu(W),wt({errors:{[xe.route.id]:oe},fetchers:new Map(M.fetchers)},{flushSync:(ge&&ge.flushSync)===!0})}function In(W){return me.set(W,(me.get(W)||0)+1),be.has(W)&&be.delete(W),M.fetchers.get(W)||qb}function rs(W,te){gn(W,te==null?void 0:te.reason),Et(W,yo(null))}function tu(W){let te=M.fetchers.get(W);Q.has(W)&&!(te&&te.state==="loading"&&q.has(W))&&gn(W),ue.delete(W),q.delete(W),Z.delete(W),be.delete(W),V.delete(W),M.fetchers.delete(W)}function Br(W){let te=(me.get(W)||0)-1;te<=0?(me.delete(W),be.add(W)):me.set(W,te),wt({fetchers:new Map(M.fetchers)})}function gn(W,te){let oe=Q.get(W);oe&&(oe.abort(te),Q.delete(W))}function Or(W){for(let te of W){let oe=In(te),ge=yo(oe.data);M.fetchers.set(te,ge)}}function Ii(){let W=[],te=!1;for(let oe of Z){let ge=M.fetchers.get(oe);Be(ge,`Expected fetcher: ${oe}`),ge.state==="loading"&&(Z.delete(oe),W.push(oe),te=!0)}return Or(W),te}function F0(W){let te=[];for(let[oe,ge]of q)if(ge<W){let xe=M.fetchers.get(oe);Be(xe,`Expected fetcher: ${oe}`),xe.state==="loading"&&(gn(oe),q.delete(oe),te.push(oe))}return Or(te),te.length>0}function xw(W,te){let oe=M.blockers.get(W)||$l;return _e.get(W)!==te&&_e.set(W,te),oe}function U0(W){M.blockers.delete(W),_e.delete(W)}function Ka(W,te){let oe=M.blockers.get(W)||$l;Be(oe.state==="unblocked"&&te.state==="blocked"||oe.state==="blocked"&&te.state==="blocked"||oe.state==="blocked"&&te.state==="proceeding"||oe.state==="blocked"&&te.state==="unblocked"||oe.state==="proceeding"&&te.state==="unblocked",`Invalid blocker state transition: ${oe.state} -> ${te.state}`);let ge=new Map(M.blockers);ge.set(W,te),wt({blockers:ge})}function nu({currentLocation:W,nextLocation:te,historyAction:oe}){if(_e.size===0)return;_e.size>1&&Wt(!1,"A router only supports one blocker at a time");let ge=Array.from(_e.entries()),[xe,je]=ge[ge.length-1],ke=M.blockers.get(xe);if(!(ke&&ke.state==="proceeding")&&je({currentLocation:W,nextLocation:te,historyAction:oe}))return xe}function xl(W){let te=Yn(404,{pathname:W}),oe=u||c,{matches:ge,route:xe}=Wh(oe);return{notFoundMatches:ge,route:xe,error:te}}function Qa(W,te,oe){if(A=W,T=te,C=oe||null,!_&&M.navigation===Sg){_=!0;let ge=j0(M.location,M.matches);ge!=null&&wt({restoreScrollPosition:ge})}return()=>{A=null,T=null,C=null}}function iu(W,te){return C&&C(W,te.map(ge=>ID(ge,M.loaderData)))||W.key}function su(W,te){if(A&&T){let oe=iu(W,te);A[oe]=T()}}function j0(W,te){if(A){let oe=iu(W,te),ge=A[oe];if(typeof ge=="number")return ge}return null}function ru(W,te,oe){if(i.patchRoutesOnNavigation)if(W){if(Object.keys(W[0].params).length>0)return{active:!0,matches:Zm(te,oe,d,!0)}}else return{active:!0,matches:Zm(te,oe,d,!0)||[]};return{active:!1,matches:null}}async function bl(W,te,oe,ge){if(!i.patchRoutesOnNavigation)return{type:"success",matches:W};let xe=W;for(;;){let je=u==null,ke=u||c,Ee=o;try{await i.patchRoutesOnNavigation({signal:oe,path:te,matches:xe,fetcherKey:ge,patch:(Ge,Oe)=>{oe.aborted||ER(Ge,Oe,ke,Ee,a,!1)}})}catch(Ge){return{type:"error",error:Ge,partialMatches:xe}}finally{je&&!oe.aborted&&(c=[...c])}if(oe.aborted)return{type:"aborted"};let Ce=Es(ke,te,d),Fe=null;if(Ce){if(Object.keys(Ce[0].params).length===0)return{type:"success",matches:Ce};if(Fe=Zm(ke,te,d,!0),!(Fe&&xe.length<Fe.length&&wl(xe,Fe.slice(0,xe.length))))return{type:"success",matches:Ce}}if(Fe||(Fe=Zm(ke,te,d,!0)),!Fe||wl(xe,Fe))return{type:"success",matches:null};xe=Fe}}function wl(W,te){return W.length===te.length&&W.every((oe,ge)=>oe.route.id===te[ge].route.id)}function bw(W){o={},u=qc(W,a,void 0,o)}function B0(W,te,oe=!1){let ge=u==null;ER(W,te,u||c,o,a,oe),ge&&(c=[...c],wt({}))}return U={get basename(){return d},get future(){return y},get state(){return M},get routes(){return c},get window(){return e},initialize:rt,subscribe:En,enableScrollRestoration:Qa,navigate:at,fetch:rn,revalidate:pe,createHref:W=>i.history.createHref(W),encodeLocation:W=>i.history.encodeLocation(W),getFetcher:In,resetFetcher:rs,deleteFetcher:Br,dispose:lt,getBlocker:xw,deleteBlocker:U0,patchRoutes:B0,_internalFetchControllers:Q,_internalSetRoutes:bw,_internalSetStateDoNotUseOrYouWillBreakYourApp(W){wt(W)}},i.unstable_instrumentations&&(U=QU(U,i.unstable_instrumentations.map(W=>W.router).filter(Boolean))),U}function QD(i,e){Be(i.length>0,"You must provide a non-empty routes array to createStaticHandler");let t={},n=(e?e.basename:null)||"/",s=(e==null?void 0:e.mapRouteProperties)||XD,a=s;if(e!=null&&e.unstable_instrumentations){let w=e.unstable_instrumentations;a=A=>({...s(A),...GD(w.map(C=>C.route).filter(Boolean),A)})}let o=qc(i,a,void 0,t);async function c(w,{requestContext:A,filterMatchesToLoad:C,skipLoaderErrorBubbling:T,skipRevalidation:_,dataStrategy:D,generateMiddlewareResponse:R}={}){let L=new URL(w.url),F=w.method,U=ol("",Di(L),null,"default"),M=Es(o,U,n);if(A=A??new Va,!dA(F)&&F!=="HEAD"){let z=Yn(405,{method:F}),{matches:J,route:G}=Wh(o),X={basename:n,location:U,matches:J,loaderData:{},actionData:null,errors:{[G.id]:z},statusCode:z.status,loaderHeaders:{},actionHeaders:{}};return R?R(()=>Promise.resolve(X)):X}else if(!M){let z=Yn(404,{pathname:U.pathname}),{matches:J,route:G}=Wh(o),X={basename:n,location:U,matches:J,loaderData:{},actionData:null,errors:{[G.id]:z},statusCode:z.status,loaderHeaders:{},actionHeaders:{}};return R?R(()=>Promise.resolve(X)):X}if(R){Be(A instanceof Va,"When using middleware in `staticHandler.query()`, any provided `requestContext` must be an instance of `RouterContextProvider`");try{await TR(M,t,a);let z,J=await _R({request:w,unstable_pattern:il(M),matches:M,params:M[0].params,context:A},async()=>await R(async(X,ie={})=>{let $=await d(X,U,M,A,D||null,T===!0,null,"filterMatchesToLoad"in ie?ie.filterMatchesToLoad??null:C??null,_===!0);return xn($)?$:(z={location:U,basename:n,...$},z)}),async(G,X)=>{var ie;if(Qx(G))return G;if(xn(G))try{G=new is(G.status,G.statusText,await aI(G))}catch($){G=$}if(Vc(G)&&(G=dI(G)),z){X in z.loaderData&&(z.loaderData[X]=void 0);let $=ZD(o,z,G,T?X:Dr(M,X).route.id);return R(()=>Promise.resolve($))}else{let $=T?X:Dr(M,((ie=M.find(H=>H.route.id===X||H.route.loader))==null?void 0:ie.route.id)||X).route.id,ee={matches:M,location:U,basename:n,loaderData:{},actionData:null,errors:{[$]:G},statusCode:Bn(G)?G.status:500,actionHeaders:{},loaderHeaders:{}};return R(()=>Promise.resolve(ee))}});return Be(xn(J),"Expected a response in query()"),J}catch(z){if(xn(z))return z;throw z}}let O=await d(w,U,M,A,D||null,T===!0,null,C||null,_===!0);return xn(O)?O:{location:U,basename:n,...O}}async function u(w,{routeId:A,requestContext:C,dataStrategy:T,generateMiddlewareResponse:_}={}){let D=new URL(w.url),R=w.method,L=ol("",Di(D),null,"default"),F=Es(o,L,n);if(C=C??new Va,!dA(R)&&R!=="HEAD"&&R!=="OPTIONS")throw Yn(405,{method:R});if(!F)throw Yn(404,{pathname:L.pathname});let U=A?F.find(z=>z.route.id===A):tf(F,L);if(A&&!U)throw Yn(403,{pathname:L.pathname,routeId:A});if(!U)throw Yn(404,{pathname:L.pathname});if(_)return Be(C instanceof Va,"When using middleware in `staticHandler.queryRoute()`, any provided `requestContext` must be an instance of `RouterContextProvider`"),await TR(F,t,a),await _R({request:w,unstable_pattern:il(F),matches:F,params:F[0].params,context:C},async()=>await _(async G=>{let X=await d(G,L,F,C,T||null,!1,U,null,!1),ie=O(X);return xn(ie)?ie:typeof ie=="string"?new Response(ie):Response.json(ie)}),J=>{if(Vc(J))return Promise.resolve(uA(J));if(xn(J))return Promise.resolve(J);throw J});let M=await d(w,L,F,C,T||null,!1,U,null,!1);return O(M);function O(z){if(xn(z))return z;let J=z.errors?Object.values(z.errors)[0]:void 0;if(J!==void 0)throw J;if(z.actionData)return Object.values(z.actionData)[0];if(z.loaderData)return Object.values(z.loaderData)[0]}}async function d(w,A,C,T,_,D,R,L,F){Be(w.signal,"query()/queryRoute() requests must contain an AbortController signal");try{if(Gi(w.method))return await p(w,C,R||tf(C,A),T,_,D,R!=null,L,F);let U=await y(w,C,T,_,D,R,L);return xn(U)?U:{...U,actionData:null,actionHeaders:{}}}catch(U){if(hI(U)&&xn(U.result)){if(U.type==="error")throw U.result;return U.result}if(Qx(U))return U;throw U}}async function p(w,A,C,T,_,D,R,L,F){let U;if(!C.route.action&&!C.route.lazy){let z=Yn(405,{method:w.method,pathname:new URL(w.url).pathname,routeId:C.route.id});if(R)throw z;U={type:"error",error:z}}else{let z=Gc(a,t,w,A,C,[],T);U=(await v(w,z,R,T,_))[C.route.id],w.signal.aborted&&bR(w,R)}if(zc(U))throw new Response(null,{status:U.response.status,headers:{Location:U.response.headers.get("Location")}});if(R){if(fi(U))throw U.error;return{matches:[C],loaderData:{},actionData:{[C.route.id]:U.data},errors:null,statusCode:200,loaderHeaders:{},actionHeaders:{}}}if(F)if(fi(U)){let z=D?C:Dr(A,C.route.id);return{statusCode:Bn(U.error)?U.error.status:U.statusCode!=null?U.statusCode:500,actionData:null,actionHeaders:{...U.headers?{[C.route.id]:U.headers}:{}},matches:A,loaderData:{},errors:{[z.route.id]:U.error},loaderHeaders:{}}}else return{actionData:{[C.route.id]:U.data},actionHeaders:U.headers?{[C.route.id]:U.headers}:{},matches:A,loaderData:{},errors:null,statusCode:U.statusCode||200,loaderHeaders:{}};let M=new Request(w.url,{headers:w.headers,redirect:w.redirect,signal:w.signal});if(fi(U)){let z=D?C:Dr(A,C.route.id);return{...await y(M,A,T,_,D,null,L,[z.route.id,U]),statusCode:Bn(U.error)?U.error.status:U.statusCode!=null?U.statusCode:500,actionData:null,actionHeaders:{...U.headers?{[C.route.id]:U.headers}:{}}}}return{...await y(M,A,T,_,D,null,L),actionData:{[C.route.id]:U.data},...U.statusCode?{statusCode:U.statusCode}:{},actionHeaders:U.headers?{[C.route.id]:U.headers}:{}}}async function y(w,A,C,T,_,D,R,L){let F=D!=null;if(F&&!(D!=null&&D.route.loader)&&!(D!=null&&D.route.lazy))throw Yn(400,{method:w.method,pathname:new URL(w.url).pathname,routeId:D==null?void 0:D.route.id});let U;if(D)U=Gc(a,t,w,A,D,[],C);else{let z=L&&fi(L[1])?A.findIndex(G=>G.route.id===L[0])-1:void 0,J=il(A);U=A.map((G,X)=>z!=null&&X>z?Cg(a,t,w,J,G,[],C,!1):Cg(a,t,w,J,G,[],C,(G.route.loader||G.route.lazy)!=null&&(!R||R(G))))}if(!T&&!U.some(z=>z.shouldLoad))return{matches:A,loaderData:{},errors:L&&fi(L[1])?{[L[0]]:L[1].error}:null,statusCode:200,loaderHeaders:{}};let M=await v(w,U,F,C,T);return w.signal.aborted&&bR(w,F),{...cI(A,M,L,!0,_),matches:A}}async function v(w,A,C,T,_){let D=await rI(_||lA,w,A,null,T,!0),R={};return await Promise.all(A.map(async L=>{if(!(L.route.id in D))return;let F=D[L.route.id];if(fI(F)){let U=F.result;throw lI(U,w,L.route.id,A,n)}if(C){if(xn(F.result))throw F;if(Vc(F.result))throw uA(F.result)}R[L.route.id]=await oI(F)})),R}return{dataRoutes:o,query:c,queryRoute:u}}function ZD(i,e,t,n){let s=n||e._deepestRenderedBoundaryId||i[0].id;return{...e,statusCode:Bn(t)?t.status:500,errors:{[s]:t}}}function bR(i,e){if(i.signal.reason!==void 0)throw i.signal.reason;let t=e?"queryRoute":"query";throw new Error(`${t}() call aborted without an \`AbortSignal.reason\`: ${i.method} ${i.url}`)}function aj(i){return i!=null&&("formData"in i&&i.formData!=null||"body"in i&&i.body!==void 0)}function aA(i,e,t,n,s,a){let o,c;if(s){o=[];for(let d of e)if(o.push(d),d.route.id===s){c=d;break}}else o=e,c=e[e.length-1];let u=Vb(n||".",Gb(o),ii(i.pathname,t)||i.pathname,a==="path");if(n==null&&(u.search=i.search,u.hash=i.hash),(n==null||n===""||n===".")&&c){let d=hC(u.search);if(c.route.index&&!d)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&d){let p=new URLSearchParams(u.search),y=p.getAll("index");p.delete("index"),y.filter(w=>w).forEach(w=>p.append("index",w));let v=p.toString();u.search=v?`?${v}`:""}}return t!=="/"&&(u.pathname=$U({basename:t,pathname:u.pathname})),Di(u)}function wR(i,e,t){if(!t||!aj(t))return{path:e};if(t.formMethod&&!dA(t.formMethod))return{path:e,error:Yn(405,{method:t.formMethod})};let n=()=>({path:e,error:Yn(400,{type:"invalid-body"})}),a=(t.formMethod||"get").toUpperCase(),o=uI(e);if(t.body!==void 0){if(t.formEncType==="text/plain"){if(!Gi(a))return n();let y=typeof t.body=="string"?t.body:t.body instanceof FormData||t.body instanceof URLSearchParams?Array.from(t.body.entries()).reduce((v,[w,A])=>`${v}${w}=${A}
`,""):String(t.body);return{path:e,submission:{formMethod:a,formAction:o,formEncType:t.formEncType,formData:void 0,json:void 0,text:y}}}else if(t.formEncType==="application/json"){if(!Gi(a))return n();try{let y=typeof t.body=="string"?JSON.parse(t.body):t.body;return{path:e,submission:{formMethod:a,formAction:o,formEncType:t.formEncType,formData:void 0,json:y,text:void 0}}}catch{return n()}}}Be(typeof FormData=="function","FormData is not available in this environment");let c,u;if(t.formData)c=cA(t.formData),u=t.formData;else if(t.body instanceof FormData)c=cA(t.body),u=t.body;else if(t.body instanceof URLSearchParams)c=t.body,u=RR(c);else if(t.body==null)c=new URLSearchParams,u=new FormData;else try{c=new URLSearchParams(t.body),u=RR(c)}catch{return n()}let d={formMethod:a,formAction:o,formEncType:t&&t.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(Gi(d.formMethod))return{path:e,submission:d};let p=rr(e);return i&&p.search&&hC(p.search)&&c.append("index",""),p.search=`?${c}`,{path:Di(p),submission:d}}function SR(i,e,t,n,s,a,o,c,u,d,p,y,v,w,A,C,T,_,D,R){var $;let L=R?fi(R[1])?R[1].error:R[1].data:void 0,F=s.createURL(a.location),U=s.createURL(u),M;if(p&&a.errors){let ee=Object.keys(a.errors)[0];M=o.findIndex(H=>H.route.id===ee)}else if(R&&fi(R[1])){let ee=R[0];M=o.findIndex(H=>H.route.id===ee)-1}let O=R?R[1].statusCode:void 0,z=O&&O>=400,J={currentUrl:F,currentParams:(($=a.matches[0])==null?void 0:$.params)||{},nextUrl:U,nextParams:o[0].params,...c,actionResult:L,actionStatus:O},G=il(o),X=o.map((ee,H)=>{let{route:V}=ee,Q=null;if(M!=null&&H>M?Q=!1:V.lazy?Q=!0:uC(V)?p?Q=oA(V,a.loaderData,a.errors):oj(a.loaderData,a.matches[H],ee)&&(Q=!0):Q=!1,Q!==null)return Cg(t,n,i,G,ee,d,e,Q);let ce=z?!1:y||F.pathname+F.search===U.pathname+U.search||F.search!==U.search||lj(a.matches[H],ee),ve={...J,defaultShouldRevalidate:ce},q=Kx(ee,ve);return Cg(t,n,i,G,ee,d,e,q,ve)}),ie=[];return A.forEach((ee,H)=>{if(p||!o.some(me=>me.route.id===ee.routeId)||w.has(H))return;let V=a.fetchers.get(H),Q=V&&V.state!=="idle"&&V.data===void 0,ce=Es(T,ee.path,_);if(!ce){if(D&&Q)return;ie.push({key:H,routeId:ee.routeId,path:ee.path,matches:null,match:null,request:null,controller:null});return}if(C.has(H))return;let ve=tf(ce,ee.path),q=new AbortController,Z=Bh(s,ee.path,q.signal),ue=null;if(v.has(H))v.delete(H),ue=Gc(t,n,Z,ce,ve,d,e);else if(Q)y&&(ue=Gc(t,n,Z,ce,ve,d,e));else{let me={...J,defaultShouldRevalidate:z?!1:y};Kx(ve,me)&&(ue=Gc(t,n,Z,ce,ve,d,e,me))}ue&&ie.push({key:H,routeId:ee.routeId,path:ee.path,matches:ue,match:ve,request:Z,controller:q})}),{dsMatches:X,revalidatingFetchers:ie}}function uC(i){return i.loader!=null||i.middleware!=null&&i.middleware.length>0}function oA(i,e,t){if(i.lazy)return!0;if(!uC(i))return!1;let n=e!=null&&i.id in e,s=t!=null&&t[i.id]!==void 0;return!n&&s?!1:typeof i.loader=="function"&&i.loader.hydrate===!0?!0:!n&&!s}function oj(i,e,t){let n=!e||t.route.id!==e.route.id,s=!i.hasOwnProperty(t.route.id);return n||s}function lj(i,e){let t=i.route.path;return i.pathname!==e.pathname||t!=null&&t.endsWith("*")&&i.params["*"]!==e.params["*"]}function Kx(i,e){if(i.route.shouldRevalidate){let t=i.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function ER(i,e,t,n,s,a){let o;if(i){let d=n[i];Be(d,`No route found to patch children into: routeId = ${i}`),d.children||(d.children=[]),o=d.children}else o=t;let c=[],u=[];if(e.forEach(d=>{let p=o.find(y=>eI(d,y));p?u.push({existingRoute:p,newRoute:d}):c.push(d)}),c.length>0){let d=qc(c,s,[i||"_","patch",String((o==null?void 0:o.length)||"0")],n);o.push(...d)}if(a&&u.length>0)for(let d=0;d<u.length;d++){let{existingRoute:p,newRoute:y}=u[d],v=p,[w]=qc([y],s,[],{},!0);Object.assign(v,{element:w.element?w.element:v.element,errorElement:w.errorElement?w.errorElement:v.errorElement,hydrateFallbackElement:w.hydrateFallbackElement?w.hydrateFallbackElement:v.hydrateFallbackElement})}}function eI(i,e){return"id"in i&&"id"in e&&i.id===e.id?!0:i.index===e.index&&i.path===e.path&&i.caseSensitive===e.caseSensitive?(!i.children||i.children.length===0)&&(!e.children||e.children.length===0)?!0:i.children.every((t,n)=>{var s;return(s=e.children)==null?void 0:s.some(a=>eI(t,a))}):!1}var AR=new WeakMap,dC=({key:i,route:e,manifest:t,mapRouteProperties:n})=>{let s=t[e.id];if(Be(s,"No route found in manifest"),!s.lazy||typeof s.lazy!="object")return;let a=s.lazy[i];if(!a)return;let o=AR.get(s);o||(o={},AR.set(s,o));let c=o[i];if(c)return c;let u=(async()=>{let d=kU(i),y=s[i]!==void 0&&i!=="hasErrorBoundary";if(d)Wt(!d,"Route property "+i+" is not a supported lazy route property. This property will be ignored."),o[i]=Promise.resolve();else if(y)Wt(!1,`Route "${s.id}" has a static property "${i}" defined. The lazy property will be ignored.`);else{let v=await a();v!=null&&(Object.assign(s,{[i]:v}),Object.assign(s,n(s)))}typeof s.lazy=="object"&&(s.lazy[i]=void 0,Object.values(s.lazy).every(v=>v===void 0)&&(s.lazy=void 0))})();return o[i]=u,u},CR=new WeakMap;function cj(i,e,t,n,s){let a=t[i.id];if(Be(a,"No route found in manifest"),!i.lazy)return{lazyRoutePromise:void 0,lazyHandlerPromise:void 0};if(typeof i.lazy=="function"){let p=CR.get(a);if(p)return{lazyRoutePromise:p,lazyHandlerPromise:p};let y=(async()=>{Be(typeof i.lazy=="function","No lazy route function found");let v=await i.lazy(),w={};for(let A in v){let C=v[A];if(C===void 0)continue;let T=IU(A),D=a[A]!==void 0&&A!=="hasErrorBoundary";T?Wt(!T,"Route property "+A+" is not a supported property to be returned from a lazy route function. This property will be ignored."):D?Wt(!D,`Route "${a.id}" has a static property "${A}" defined but its lazy function is also returning a value for this property. The lazy route property "${A}" will be ignored.`):w[A]=C}Object.assign(a,w),Object.assign(a,{...n(a),lazy:void 0})})();return CR.set(a,y),y.catch(()=>{}),{lazyRoutePromise:y,lazyHandlerPromise:y}}let o=Object.keys(i.lazy),c=[],u;for(let p of o){if(s&&s.includes(p))continue;let y=dC({key:p,route:i,manifest:t,mapRouteProperties:n});y&&(c.push(y),p===e&&(u=y))}let d=c.length>0?Promise.all(c).then(()=>{}):void 0;return d==null||d.catch(()=>{}),u==null||u.catch(()=>{}),{lazyRoutePromise:d,lazyHandlerPromise:u}}function uj(i){return i!==void 0}function TR(i,e,t){let n=i.map(({route:s})=>{if(!(typeof s.lazy!="object"||!s.lazy.middleware))return dC({key:"middleware",route:s,manifest:e,mapRouteProperties:t})}).filter(uj);return n.length>0?Promise.all(n):void 0}async function lA(i){let e=i.matches.filter(s=>s.shouldLoad),t={};return(await Promise.all(e.map(s=>s.resolve()))).forEach((s,a)=>{t[e[a].route.id]=s}),t}async function dj(i){return i.matches.some(e=>e.route.middleware)?tI(i,()=>lA(i)):lA(i)}function _R(i,e,t){return nI(i,e,n,xn,t);function n(s){return Vc(s)?uA(s):s}}function tI(i,e){return nI(i,e,n=>n,pj,t);function t(n,s,a){if(a)return Promise.resolve(Object.assign(a.value,{[s]:{type:"error",result:n}}));{let{matches:o}=i,c=Math.min(Math.max(o.findIndex(d=>d.route.id===s),0),Math.max(o.findIndex(d=>d.shouldCallHandler()),0)),u=Dr(o,o[c].route.id).route.id;return Promise.resolve({[u]:{type:"error",result:n}})}}}async function nI(i,e,t,n,s){let{matches:a,request:o,params:c,context:u,unstable_pattern:d}=i,p=a.flatMap(v=>v.route.middleware?v.route.middleware.map(w=>[v.route.id,w]):[]);return await iI({request:o,params:c,context:u,unstable_pattern:d},p,e,t,n,s)}async function iI(i,e,t,n,s,a,o=0){let{request:c}=i;if(c.signal.aborted)throw c.signal.reason??new Error(`Request aborted: ${c.method} ${c.url}`);let u=e[o];if(!u)return await t();let[d,p]=u,y,v=async()=>{if(y)throw new Error("You may only call `next()` once per middleware");try{return y={value:await iI(i,e,t,n,s,a,o+1)},y.value}catch(w){return y={value:await a(w,d,y)},y.value}};try{let w=await p(i,v),A=w!=null?n(w):void 0;return s(A)?A:y?A??y.value:(y={value:await v()},y.value)}catch(w){return await a(w,d,y)}}function sI(i,e,t,n,s){let a=dC({key:"middleware",route:n.route,manifest:e,mapRouteProperties:i}),o=cj(n.route,Gi(t.method)?"action":"loader",e,i,s);return{middleware:a,route:o.lazyRoutePromise,handler:o.lazyHandlerPromise}}function Cg(i,e,t,n,s,a,o,c,u=null){let d=!1,p=sI(i,e,t,s,a);return{...s,_lazyPromises:p,shouldLoad:c,shouldRevalidateArgs:u,shouldCallHandler(y){return d=!0,u?typeof y=="boolean"?Kx(s,{...u,defaultShouldRevalidate:y}):Kx(s,u):c},resolve(y){let{lazy:v,loader:w,middleware:A}=s.route,C=d||c||y&&!Gi(t.method)&&(v||w),T=A&&A.length>0&&!w&&!v;return C&&(Gi(t.method)||!T)?hj({request:t,unstable_pattern:n,match:s,lazyHandlerPromise:p==null?void 0:p.handler,lazyRoutePromise:p==null?void 0:p.route,handlerOverride:y,scopedContext:o}):Promise.resolve({type:"data",result:void 0})}}}function Gc(i,e,t,n,s,a,o,c=null){return n.map(u=>u.route.id!==s.route.id?{...u,shouldLoad:!1,shouldRevalidateArgs:c,shouldCallHandler:()=>!1,_lazyPromises:sI(i,e,t,u,a),resolve:()=>Promise.resolve({type:"data",result:void 0})}:Cg(i,e,t,il(n),u,a,o,!0,c))}async function rI(i,e,t,n,s,a){t.some(d=>{var p;return(p=d._lazyPromises)==null?void 0:p.middleware})&&await Promise.all(t.map(d=>{var p;return(p=d._lazyPromises)==null?void 0:p.middleware}));let o={request:e,unstable_pattern:il(t),params:t[0].params,context:s,matches:t},u=await i({...o,fetcherKey:n,runClientMiddleware:a?()=>{throw new Error("You cannot call `runClientMiddleware()` from a static handler `dataStrategy`. Middleware is run outside of `dataStrategy` during SSR in order to bubble up the Response.  You can enable middleware via the `respond` API in `query`/`queryRoute`")}:d=>{let p=o;return tI(p,()=>d({...p,fetcherKey:n,runClientMiddleware:()=>{throw new Error("Cannot call `runClientMiddleware()` from within an `runClientMiddleware` handler")}}))}});try{await Promise.all(t.flatMap(d=>{var p,y;return[(p=d._lazyPromises)==null?void 0:p.handler,(y=d._lazyPromises)==null?void 0:y.route]}))}catch{}return u}async function hj({request:i,unstable_pattern:e,match:t,lazyHandlerPromise:n,lazyRoutePromise:s,handlerOverride:a,scopedContext:o}){let c,u,d=Gi(i.method),p=d?"action":"loader",y=v=>{let w,A=new Promise((_,D)=>w=D);u=()=>w(),i.signal.addEventListener("abort",u);let C=_=>typeof v!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${p}" [routeId: ${t.route.id}]`)):v({request:i,unstable_pattern:e,params:t.params,context:o},..._!==void 0?[_]:[]),T=(async()=>{try{return{type:"data",result:await(a?a(D=>C(D)):C())}}catch(_){return{type:"error",result:_}}})();return Promise.race([T,A])};try{let v=d?t.route.action:t.route.loader;if(n||s)if(v){let w,[A]=await Promise.all([y(v).catch(C=>{w=C}),n,s]);if(w!==void 0)throw w;c=A}else{await n;let w=d?t.route.action:t.route.loader;if(w)[c]=await Promise.all([y(w),s]);else if(p==="action"){let A=new URL(i.url),C=A.pathname+A.search;throw Yn(405,{method:i.method,pathname:C,routeId:t.route.id})}else return{type:"data",result:void 0}}else if(v)c=await y(v);else{let w=new URL(i.url),A=w.pathname+w.search;throw Yn(404,{pathname:A})}}catch(v){return{type:"error",result:v}}finally{u&&i.signal.removeEventListener("abort",u)}return c}async function aI(i){let e=i.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?i.body==null?null:i.json():i.text()}async function oI(i){var n,s,a,o,c;let{result:e,type:t}=i;if(xn(e)){let u;try{u=await aI(e)}catch(d){return{type:"error",error:d}}return t==="error"?{type:"error",error:new is(e.status,e.statusText,u),statusCode:e.status,headers:e.headers}:{type:"data",data:u,statusCode:e.status,headers:e.headers}}return t==="error"?Vc(e)?e.data instanceof Error?{type:"error",error:e.data,statusCode:(n=e.init)==null?void 0:n.status,headers:(s=e.init)!=null&&s.headers?new Headers(e.init.headers):void 0}:{type:"error",error:dI(e),statusCode:Bn(e)?e.status:void 0,headers:(a=e.init)!=null&&a.headers?new Headers(e.init.headers):void 0}:{type:"error",error:e,statusCode:Bn(e)?e.status:void 0}:Vc(e)?{type:"data",data:e.data,statusCode:(o=e.init)==null?void 0:o.status,headers:(c=e.init)!=null&&c.headers?new Headers(e.init.headers):void 0}:{type:"data",data:e}}function lI(i,e,t,n,s){let a=i.headers.get("Location");if(Be(a,"Redirects returned/thrown from loaders/actions must have a Location header"),!zb(a)){let o=n.slice(0,n.findIndex(c=>c.route.id===t)+1);a=aA(new URL(e.url),o,s,a),i.headers.set("Location",a)}return i}function NR(i,e,t){if(zb(i)){let n=i,s=n.startsWith("//")?new URL(e.protocol+n):new URL(n),a=ii(s.pathname,t)!=null;if(s.origin===e.origin&&a)return s.pathname+s.search+s.hash}return i}function Bh(i,e,t,n){let s=i.createURL(uI(e)).toString(),a={signal:t};if(n&&Gi(n.formMethod)){let{formMethod:o,formEncType:c}=n;a.method=o.toUpperCase(),c==="application/json"?(a.headers=new Headers({"Content-Type":c}),a.body=JSON.stringify(n.json)):c==="text/plain"?a.body=n.text:c==="application/x-www-form-urlencoded"&&n.formData?a.body=cA(n.formData):a.body=n.formData}return new Request(s,a)}function cA(i){let e=new URLSearchParams;for(let[t,n]of i.entries())e.append(t,typeof n=="string"?n:n.name);return e}function RR(i){let e=new FormData;for(let[t,n]of i.entries())e.append(t,n);return e}function cI(i,e,t,n=!1,s=!1){let a={},o=null,c,u=!1,d={},p=t&&fi(t[1])?t[1].error:void 0;return i.forEach(y=>{if(!(y.route.id in e))return;let v=y.route.id,w=e[v];if(Be(!zc(w),"Cannot handle redirect results in processLoaderData"),fi(w)){let A=w.error;if(p!==void 0&&(A=p,p=void 0),o=o||{},s)o[v]=A;else{let C=Dr(i,v);o[C.route.id]==null&&(o[C.route.id]=A)}n||(a[v]=KD),u||(u=!0,c=Bn(w.error)?w.error.status:500),w.headers&&(d[v]=w.headers)}else a[v]=w.data,w.statusCode&&w.statusCode!==200&&!u&&(c=w.statusCode),w.headers&&(d[v]=w.headers)}),p!==void 0&&t&&(o={[t[0]]:p},t[2]&&(a[t[2]]=void 0)),{loaderData:a,errors:o,statusCode:c||200,loaderHeaders:d}}function MR(i,e,t,n,s,a){let{loaderData:o,errors:c}=cI(e,t,n);return s.filter(u=>!u.matches||u.matches.some(d=>d.shouldLoad)).forEach(u=>{let{key:d,match:p,controller:y}=u;if(y&&y.signal.aborted)return;let v=a[d];if(Be(v,"Did not find corresponding fetcher result"),fi(v)){let w=Dr(i.matches,p==null?void 0:p.route.id);c&&c[w.route.id]||(c={...c,[w.route.id]:v.error}),i.fetchers.delete(d)}else if(zc(v))Be(!1,"Unhandled fetcher revalidation redirect");else{let w=yo(v.data);i.fetchers.set(d,w)}}),{loaderData:o,errors:c}}function kR(i,e,t,n){let s=Object.entries(e).filter(([,a])=>a!==KD).reduce((a,[o,c])=>(a[o]=c,a),{});for(let a of t){let o=a.route.id;if(!e.hasOwnProperty(o)&&i.hasOwnProperty(o)&&a.route.loader&&(s[o]=i[o]),n&&n.hasOwnProperty(o))break}return s}function DR(i){return i?fi(i[1])?{actionData:{}}:{actionData:{[i[0]]:i[1].data}}:{}}function Dr(i,e){return(e?i.slice(0,i.findIndex(n=>n.route.id===e)+1):[...i]).reverse().find(n=>n.route.hasErrorBoundary===!0)||i[0]}function Wh(i){let e=i.length===1?i[0]:i.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function Yn(i,{pathname:e,routeId:t,method:n,type:s,message:a}={}){let o="Unknown Server Error",c="Unknown @remix-run/router error";return i===400?(o="Bad Request",n&&e&&t?c=`You made a ${n} request to "${e}" but did not provide a \`loader\` for route "${t}", so there is no way to handle the request.`:s==="invalid-body"&&(c="Unable to encode submission body")):i===403?(o="Forbidden",c=`Route "${t}" does not match URL "${e}"`):i===404?(o="Not Found",c=`No route matches URL "${e}"`):i===405&&(o="Method Not Allowed",n&&e&&t?c=`You made a ${n.toUpperCase()} request to "${e}" but did not provide an \`action\` for route "${t}", so there is no way to handle the request.`:n&&(c=`Invalid request method "${n.toUpperCase()}"`)),new is(i||500,o,new Error(c),!0)}function Jv(i){let e=Object.entries(i);for(let t=e.length-1;t>=0;t--){let[n,s]=e[t];if(zc(s))return{key:n,result:s}}}function uI(i){let e=typeof i=="string"?rr(i):i;return Di({...e,hash:""})}function fj(i,e){return i.pathname!==e.pathname||i.search!==e.search?!1:i.hash===""?e.hash!=="":i.hash===e.hash?!0:e.hash!==""}function uA(i){return Response.json(i.data,i.init??void 0)}function dI(i){var e,t;return new is(((e=i.init)==null?void 0:e.status)??500,((t=i.init)==null?void 0:t.statusText)??"Internal Server Error",i.data)}function pj(i){return i!=null&&typeof i=="object"&&Object.entries(i).every(([e,t])=>typeof e=="string"&&hI(t))}function hI(i){return i!=null&&typeof i=="object"&&"type"in i&&"result"in i&&(i.type==="data"||i.type==="error")}function fI(i){return xn(i.result)&&WD.has(i.result.status)}function fi(i){return i.type==="error"}function zc(i){return(i&&i.type)==="redirect"}function Vc(i){return typeof i=="object"&&i!=null&&"type"in i&&"data"in i&&"init"in i&&i.type==="DataWithResponseInit"}function xn(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.headers=="object"&&typeof i.body<"u"}function $b(i){return WD.has(i)}function Qx(i){return xn(i)&&$b(i.status)&&i.headers.has("Location")}function dA(i){return sj.has(i.toUpperCase())}function Gi(i){return nj.has(i.toUpperCase())}function hC(i){return new URLSearchParams(i).getAll("index").some(e=>e==="")}function tf(i,e){let t=typeof e=="string"?rr(e).search:e.search;if(i[i.length-1].route.index&&hC(t||""))return i[i.length-1];let n=BD(i);return n[n.length-1]}function IR(i){let{formMethod:e,formAction:t,formEncType:n,text:s,formData:a,json:o}=i;if(!(!e||!t||!n)){if(s!=null)return{formMethod:e,formAction:t,formEncType:n,formData:void 0,json:void 0,text:s};if(a!=null)return{formMethod:e,formAction:t,formEncType:n,formData:a,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:t,formEncType:n,formData:void 0,json:o,text:void 0}}}function jE(i,e){return e?{state:"loading",location:i,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:i,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function mj(i,e){return{state:"submitting",location:i,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Hm(i,e){return i?{state:"loading",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function gj(i,e){return{state:"submitting",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:e?e.data:void 0}}function yo(i){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:i}}function yj(i,e){try{let t=i.sessionStorage.getItem(JD);if(t){let n=JSON.parse(t);for(let[s,a]of Object.entries(n||{}))a&&Array.isArray(a)&&e.set(s,new Set(a||[]))}}catch{}}function vj(i,e){if(e.size>0){let t={};for(let[n,s]of e)t[n]=[...s];try{i.sessionStorage.setItem(JD,JSON.stringify(t))}catch(n){Wt(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function PR(){let i,e,t=new Promise((n,s)=>{i=async a=>{n(a);try{await t}catch{}},e=async a=>{s(a);try{await t}catch{}}});return{promise:t,resolve:i,reject:e}}var Xa=k.createContext(null);Xa.displayName="DataRouter";var pl=k.createContext(null);pl.displayName="DataRouterState";var pI=k.createContext(!1);function xj(){return k.useContext(pI)}var w0=k.createContext({isTransitioning:!1});w0.displayName="ViewTransition";var S0=k.createContext(new Map);S0.displayName="Fetchers";var Bp=k.createContext(null);Bp.displayName="Await";var bj=i=>k.createElement(Bp.Provider,i),ss=k.createContext(null);ss.displayName="Navigation";var Wd=k.createContext(null);Wd.displayName="Location";var As=k.createContext({outlet:null,matches:[],isDataRoute:!1});As.displayName="Route";var fC=k.createContext(null);fC.displayName="RouteError";function mI(i,{relative:e}={}){Be(Qc(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=k.useContext(ss),{hash:s,pathname:a,search:o}=Gp(i,{relative:e}),c=a;return t!=="/"&&(c=a==="/"?t:qa([t,a])),n.createHref({pathname:c,search:o,hash:s})}function Qc(){return k.useContext(Wd)!=null}function Cs(){return Be(Qc(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(Wd).location}function wj(){return k.useContext(Wd).navigationType}function Sj(i){Be(Qc(),"useMatch() may be used only in the context of a <Router> component.");let{pathname:e}=Cs();return k.useMemo(()=>jp(i,UD(e)),[e,i])}var gI="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function yI(i){k.useContext(ss).static||k.useLayoutEffect(i)}function Yb(){let{isDataRoute:i}=k.useContext(As);return i?Lj():Ej()}function Ej(){Be(Qc(),"useNavigate() may be used only in the context of a <Router> component.");let i=k.useContext(Xa),{basename:e,navigator:t}=k.useContext(ss),{matches:n}=k.useContext(As),{pathname:s}=Cs(),a=JSON.stringify(Gb(n)),o=k.useRef(!1);return yI(()=>{o.current=!0}),k.useCallback((u,d={})=>{if(Wt(o.current,gI),!o.current)return;if(typeof u=="number"){t.go(u);return}let p=Vb(u,JSON.parse(a),s,d.relative==="path");i==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:qa([e,p.pathname])),(d.replace?t.replace:t.push)(p,d.state,d)},[e,t,a,s,i])}var vI=k.createContext(null);function Aj(){return k.useContext(vI)}function xI(i){let e=k.useContext(As).outlet;return k.useMemo(()=>e&&k.createElement(vI.Provider,{value:i},e),[e,i])}function Wb(){let{matches:i}=k.useContext(As),e=i[i.length-1];return e?e.params:{}}function Gp(i,{relative:e}={}){let{matches:t}=k.useContext(As),{pathname:n}=Cs(),s=JSON.stringify(Gb(t));return k.useMemo(()=>Vb(i,JSON.parse(s),n,e==="path"),[i,s,n,e])}function bI(i,e){return pC(i,e)}function pC(i,e,t,n,s){var D;Be(Qc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=k.useContext(ss),{matches:o}=k.useContext(As),c=o[o.length-1],u=c?c.params:{},d=c?c.pathname:"/",p=c?c.pathnameBase:"/",y=c&&c.route;{let R=y&&y.path||"";CI(d,!y||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${d}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let v=Cs(),w;if(e){let R=typeof e=="string"?rr(e):e;Be(p==="/"||((D=R.pathname)==null?void 0:D.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${R.pathname}" was given in the \`location\` prop.`),w=R}else w=v;let A=w.pathname||"/",C=A;if(p!=="/"){let R=p.replace(/^\//,"").split("/");C="/"+A.replace(/^\//,"").split("/").slice(R.length).join("/")}let T=Es(i,{pathname:C});Wt(y||T!=null,`No routes matched location "${w.pathname}${w.search}${w.hash}" `),Wt(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${w.pathname}${w.search}${w.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let _=wI(T&&T.map(R=>Object.assign({},R,{params:Object.assign({},u,R.params),pathname:qa([p,a.encodeLocation?a.encodeLocation(R.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?p:qa([p,a.encodeLocation?a.encodeLocation(R.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:R.pathnameBase])})),o,t,n,s);return e&&_?k.createElement(Wd.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...w},navigationType:"POP"}},_):_}function Cj(){let i=E0(),e=Bn(i)?`${i.status} ${i.statusText}`:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",i),o=k.createElement(k.Fragment,null,k.createElement("p",null," Hey developer "),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:a},"ErrorBoundary")," or"," ",k.createElement("code",{style:a},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),t?k.createElement("pre",{style:s},t):null,o)}var Tj=k.createElement(Cj,null),_j=class extends k.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location||e.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:e.error,location:e.location,revalidation:i.revalidation||e.revalidation}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("React Router caught the following error during render",i)}render(){return this.state.error!==void 0?k.createElement(As.Provider,{value:this.props.routeContext},k.createElement(fC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Nj({routeContext:i,match:e,children:t}){let n=k.useContext(Xa);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),k.createElement(As.Provider,{value:i},t)}function wI(i,e=[],t=null,n=null,s=null){if(i==null){if(!t)return null;if(t.errors)i=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let a=i,o=t==null?void 0:t.errors;if(o!=null){let p=a.findIndex(y=>y.route.id&&(o==null?void 0:o[y.route.id])!==void 0);Be(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,p+1))}let c=!1,u=-1;if(t)for(let p=0;p<a.length;p++){let y=a[p];if((y.route.HydrateFallback||y.route.hydrateFallbackElement)&&(u=p),y.route.id){let{loaderData:v,errors:w}=t,A=y.route.loader&&!v.hasOwnProperty(y.route.id)&&(!w||w[y.route.id]===void 0);if(y.route.lazy||A){c=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}let d=t&&n?(p,y)=>{var v,w;n(p,{location:t.location,params:((w=(v=t.matches)==null?void 0:v[0])==null?void 0:w.params)??{},unstable_pattern:il(t.matches),errorInfo:y})}:void 0;return a.reduceRight((p,y,v)=>{let w,A=!1,C=null,T=null;t&&(w=o&&y.route.id?o[y.route.id]:void 0,C=y.route.errorElement||Tj,c&&(u<0&&v===0?(CI("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),A=!0,T=null):u===v&&(A=!0,T=y.route.hydrateFallbackElement||null)));let _=e.concat(a.slice(0,v+1)),D=()=>{let R;return w?R=C:A?R=T:y.route.Component?R=k.createElement(y.route.Component,null):y.route.element?R=y.route.element:R=p,k.createElement(Nj,{match:y,routeContext:{outlet:p,matches:_,isDataRoute:t!=null},children:R})};return t&&(y.route.ErrorBoundary||y.route.errorElement||v===0)?k.createElement(_j,{location:t.location,revalidation:t.revalidation,component:C,error:w,children:D(),routeContext:{outlet:null,matches:_,isDataRoute:!0},onError:d}):D()},null)}function mC(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gC(i){let e=k.useContext(Xa);return Be(e,mC(i)),e}function ml(i){let e=k.useContext(pl);return Be(e,mC(i)),e}function Rj(i){let e=k.useContext(As);return Be(e,mC(i)),e}function Vp(i){let e=Rj(i),t=e.matches[e.matches.length-1];return Be(t.route.id,`${i} can only be used on routes that contain a unique "id"`),t.route.id}function Mj(){return Vp("useRouteId")}function SI(){return ml("useNavigation").navigation}function kj(){let i=gC("useRevalidator"),e=ml("useRevalidator"),t=k.useCallback(async()=>{await i.router.revalidate()},[i.router]);return k.useMemo(()=>({revalidate:t,state:e.revalidation}),[t,e.revalidation])}function Xb(){let{matches:i,loaderData:e}=ml("useMatches");return k.useMemo(()=>i.map(t=>ID(t,e)),[i,e])}function Jb(){let i=ml("useLoaderData"),e=Vp("useLoaderData");return i.loaderData[e]}function Dj(i){return ml("useRouteLoaderData").loaderData[i]}function Kb(){let i=ml("useActionData"),e=Vp("useLoaderData");return i.actionData?i.actionData[e]:void 0}function E0(){var n;let i=k.useContext(fC),e=ml("useRouteError"),t=Vp("useRouteError");return i!==void 0?i:(n=e.errors)==null?void 0:n[t]}function EI(){let i=k.useContext(Bp);return i==null?void 0:i._data}function Ij(){let i=k.useContext(Bp);return i==null?void 0:i._error}var Pj=0;function AI(i){let{router:e,basename:t}=gC("useBlocker"),n=ml("useBlocker"),[s,a]=k.useState(""),o=k.useCallback(c=>{if(typeof i!="function")return!!i;if(t==="/")return i(c);let{currentLocation:u,nextLocation:d,historyAction:p}=c;return i({currentLocation:{...u,pathname:ii(u.pathname,t)||u.pathname},nextLocation:{...d,pathname:ii(d.pathname,t)||d.pathname},historyAction:p})},[t,i]);return k.useEffect(()=>{let c=String(++Pj);return a(c),()=>e.deleteBlocker(c)},[e]),k.useEffect(()=>{s!==""&&e.getBlocker(s,o)},[e,s,o]),s&&n.blockers.has(s)?n.blockers.get(s):$l}function Lj(){let{router:i}=gC("useNavigate"),e=Vp("useNavigate"),t=k.useRef(!1);return yI(()=>{t.current=!0}),k.useCallback(async(s,a={})=>{Wt(t.current,gI),t.current&&(typeof s=="number"?await i.navigate(s):await i.navigate(s,{fromRouteId:e,...a}))},[i,e])}var LR={};function CI(i,e,t){!e&&!LR[i]&&(LR[i]=!0,Wt(!1,t))}function Fj(...i){var a;const e=Vp("useRoute"),t=i[0]??e,n=ml("useRoute"),s=n.matches.find(({route:o})=>o.id===t);if(s!==void 0)return{handle:s.route.handle,loaderData:n.loaderData[t],actionData:(a=n.actionData)==null?void 0:a[t]}}var FR={};function Tg(i,e){!i&&!FR[e]&&(FR[e]=!0,console.warn(e))}var Uj="useOptimistic",UR=CD[Uj],jj=()=>{};function Bj(i){return UR?UR(i):[i,jj]}function Xd(i){let e={hasErrorBoundary:i.hasErrorBoundary||i.ErrorBoundary!=null||i.errorElement!=null};return i.Component&&(i.element&&Wt(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(e,{element:k.createElement(i.Component),Component:void 0})),i.HydrateFallback&&(i.hydrateFallbackElement&&Wt(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(e,{hydrateFallbackElement:k.createElement(i.HydrateFallback),HydrateFallback:void 0})),i.ErrorBoundary&&(i.errorElement&&Wt(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(e,{errorElement:k.createElement(i.ErrorBoundary),ErrorBoundary:void 0})),e}var A0=["HydrateFallback","hydrateFallbackElement"];function TI(i,e){return b0({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:RD({initialEntries:e==null?void 0:e.initialEntries,initialIndex:e==null?void 0:e.initialIndex}),hydrationData:e==null?void 0:e.hydrationData,routes:i,hydrationRouteProperties:A0,mapRouteProperties:Xd,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}var Oj=class{constructor(){this.status="pending",this.promise=new Promise((i,e)=>{this.resolve=t=>{this.status==="pending"&&(this.status="resolved",i(t))},this.reject=t=>{this.status==="pending"&&(this.status="rejected",e(t))}})}};function _I({router:i,flushSync:e,unstable_onError:t,unstable_useTransitions:n}){let[s,a]=k.useState(i.state),[o,c]=Bj(s),[u,d]=k.useState(),[p,y]=k.useState({isTransitioning:!1}),[v,w]=k.useState(),[A,C]=k.useState(),[T,_]=k.useState(),D=k.useRef(new Map),R=k.useCallback((M,{deletedFetchers:O,newErrors:z,flushSync:J,viewTransitionOpts:G})=>{z&&t&&Object.values(z).forEach(ie=>{var $;return t(ie,{location:M.location,params:(($=M.matches[0])==null?void 0:$.params)??{},unstable_pattern:il(M.matches)})}),M.fetchers.forEach((ie,$)=>{ie.data!==void 0&&D.current.set($,ie.data)}),O.forEach(ie=>D.current.delete(ie)),Tg(J===!1||e!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let X=i.window!=null&&i.window.document!=null&&typeof i.window.document.startViewTransition=="function";if(Tg(G==null||X,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!G||!X){e&&J?e(()=>a(M)):n===!1?a(M):k.startTransition(()=>{n===!0&&c(ie=>jR(ie,M)),a(M)});return}if(e&&J){e(()=>{A&&(v==null||v.resolve(),A.skipTransition()),y({isTransitioning:!0,flushSync:!0,currentLocation:G.currentLocation,nextLocation:G.nextLocation})});let ie=i.window.document.startViewTransition(()=>{e(()=>a(M))});ie.finished.finally(()=>{e(()=>{w(void 0),C(void 0),d(void 0),y({isTransitioning:!1})})}),e(()=>C(ie));return}A?(v==null||v.resolve(),A.skipTransition(),_({state:M,currentLocation:G.currentLocation,nextLocation:G.nextLocation})):(d(M),y({isTransitioning:!0,flushSync:!1,currentLocation:G.currentLocation,nextLocation:G.nextLocation}))},[i.window,e,A,v,n,c,t]);k.useLayoutEffect(()=>i.subscribe(R),[i,R]),k.useEffect(()=>{p.isTransitioning&&!p.flushSync&&w(new Oj)},[p]),k.useEffect(()=>{if(v&&u&&i.window){let M=u,O=v.promise,z=i.window.document.startViewTransition(async()=>{n===!1?a(M):k.startTransition(()=>{n===!0&&c(J=>jR(J,M)),a(M)}),await O});z.finished.finally(()=>{w(void 0),C(void 0),d(void 0),y({isTransitioning:!1})}),C(z)}},[u,v,i.window,n,c]),k.useEffect(()=>{v&&u&&o.location.key===u.location.key&&v.resolve()},[v,A,o.location,u]),k.useEffect(()=>{!p.isTransitioning&&T&&(d(T.state),y({isTransitioning:!0,flushSync:!1,currentLocation:T.currentLocation,nextLocation:T.nextLocation}),_(void 0))},[p.isTransitioning,T]);let L=k.useMemo(()=>({createHref:i.createHref,encodeLocation:i.encodeLocation,go:M=>i.navigate(M),push:(M,O,z)=>i.navigate(M,{state:O,preventScrollReset:z==null?void 0:z.preventScrollReset}),replace:(M,O,z)=>i.navigate(M,{replace:!0,state:O,preventScrollReset:z==null?void 0:z.preventScrollReset})}),[i]),F=i.basename||"/",U=k.useMemo(()=>({router:i,navigator:L,static:!1,basename:F,unstable_onError:t}),[i,L,F,t]);return k.createElement(k.Fragment,null,k.createElement(Xa.Provider,{value:U},k.createElement(pl.Provider,{value:o},k.createElement(S0.Provider,{value:D.current},k.createElement(w0.Provider,{value:p},k.createElement(Zc,{basename:F,location:o.location,navigationType:o.historyAction,navigator:L,unstable_useTransitions:n===!0},k.createElement(Hj,{routes:i.routes,future:i.future,state:o,unstable_onError:t})))))),null)}function jR(i,e){return{...i,navigation:e.navigation.state!=="idle"?e.navigation:i.navigation,revalidation:e.revalidation!=="idle"?e.revalidation:i.revalidation,actionData:e.navigation.state!=="submitting"?e.actionData:i.actionData,fetchers:e.fetchers}}var Hj=k.memo(zj);function zj({routes:i,future:e,state:t,unstable_onError:n}){return pC(i,void 0,t,n,e)}function Gj({basename:i,children:e,initialEntries:t,initialIndex:n,unstable_useTransitions:s}){let a=k.useRef();a.current==null&&(a.current=RD({initialEntries:t,initialIndex:n,v5Compat:!0}));let o=a.current,[c,u]=k.useState({action:o.action,location:o.location}),d=k.useCallback(p=>{s===!1?u(p):k.startTransition(()=>u(p))},[s]);return k.useLayoutEffect(()=>o.listen(d),[o,d]),k.createElement(Zc,{basename:i,children:e,location:c.location,navigationType:c.action,navigator:o,unstable_useTransitions:s===!0})}function Vj({to:i,replace:e,state:t,relative:n}){Be(Qc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=k.useContext(ss);Wt(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=k.useContext(As),{pathname:o}=Cs(),c=Yb(),u=Vb(i,Gb(a),o,n==="path"),d=JSON.stringify(u);return k.useEffect(()=>{c(JSON.parse(d),{replace:e,state:t,relative:n})},[c,d,n,e,t]),null}function NI(i){return xI(i.context)}function RI(i){Be(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Zc({basename:i="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:a=!1,unstable_useTransitions:o}){Be(!Qc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=i.replace(/^\/*/,"/"),u=k.useMemo(()=>({basename:c,navigator:s,static:a,unstable_useTransitions:o,future:{}}),[c,s,a,o]);typeof t=="string"&&(t=rr(t));let{pathname:d="/",search:p="",hash:y="",state:v=null,key:w="default"}=t,A=k.useMemo(()=>{let C=ii(d,c);return C==null?null:{location:{pathname:C,search:p,hash:y,state:v,key:w},navigationType:n}},[c,d,p,y,v,w,n]);return Wt(A!=null,`<Router basename="${c}"> is not able to match the URL "${d}${p}${y}" because it does not start with the basename, so the <Router> won't render anything.`),A==null?null:k.createElement(ss.Provider,{value:u},k.createElement(Wd.Provider,{children:e,value:A}))}function qj({children:i,location:e}){return bI(_g(i),e)}function $j({children:i,errorElement:e,resolve:t}){let n=k.useContext(Xa),s=k.useContext(pl),a=k.useCallback((o,c)=>{var u;n&&n.unstable_onError&&s&&n.unstable_onError(o,{location:s.location,params:((u=s.matches[0])==null?void 0:u.params)||{},unstable_pattern:il(s.matches),errorInfo:c})},[n,s]);return k.createElement(Yj,{resolve:t,errorElement:e,onError:a},k.createElement(Wj,null,i))}var Yj=class extends k.Component{constructor(i){super(i),this.state={error:null}}static getDerivedStateFromError(i){return{error:i}}componentDidCatch(i,e){this.props.onError?this.props.onError(i,e):console.error("<Await> caught the following error during render",i,e)}render(){let{children:i,errorElement:e,resolve:t}=this.props,n=null,s=0;if(!(t instanceof Promise))s=1,n=Promise.resolve(),Object.defineProperty(n,"_tracked",{get:()=>!0}),Object.defineProperty(n,"_data",{get:()=>t});else if(this.state.error){s=2;let a=this.state.error;n=Promise.reject().catch(()=>{}),Object.defineProperty(n,"_tracked",{get:()=>!0}),Object.defineProperty(n,"_error",{get:()=>a})}else t._tracked?(n=t,s="_error"in n?2:"_data"in n?1:0):(s=0,Object.defineProperty(t,"_tracked",{get:()=>!0}),n=t.then(a=>Object.defineProperty(t,"_data",{get:()=>a}),a=>{var o,c;(c=(o=this.props).onError)==null||c.call(o,a),Object.defineProperty(t,"_error",{get:()=>a})}));if(s===2&&!e)throw n._error;if(s===2)return k.createElement(Bp.Provider,{value:n,children:e});if(s===1)return k.createElement(Bp.Provider,{value:n,children:i});throw n}};function Wj({children:i}){let e=EI(),t=typeof i=="function"?i(e):i;return k.createElement(k.Fragment,null,t)}function _g(i,e=[]){let t=[];return k.Children.forEach(i,(n,s)=>{if(!k.isValidElement(n))return;let a=[...e,s];if(n.type===k.Fragment){t.push.apply(t,_g(n.props.children,a));return}Be(n.type===RI,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Be(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=_g(n.props.children,a)),t.push(o)}),t}var Xj=_g;function Jj(i){return wI(i)}function MI(){return{params:Wb(),loaderData:Jb(),actionData:Kb(),matches:Xb()}}function Kj({children:i}){const e=MI();return k.cloneElement(i,e)}function kI(i){return function(){const t=MI();return k.createElement(i,t)}}function DI(){return{params:Wb(),loaderData:Jb(),actionData:Kb()}}function Qj({children:i}){const e=DI();return k.cloneElement(i,e)}function II(i){return function(){const t=DI();return k.createElement(i,t)}}function PI(){return{params:Wb(),loaderData:Jb(),actionData:Kb(),error:E0()}}function Zj({children:i}){const e=PI();return k.cloneElement(i,e)}function LI(i){return function(){const t=PI();return k.createElement(i,t)}}var hx="get",fx="application/x-www-form-urlencoded";function Qb(i){return typeof HTMLElement<"u"&&i instanceof HTMLElement}function eB(i){return Qb(i)&&i.tagName.toLowerCase()==="button"}function tB(i){return Qb(i)&&i.tagName.toLowerCase()==="form"}function nB(i){return Qb(i)&&i.tagName.toLowerCase()==="input"}function iB(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function sB(i,e){return i.button===0&&(!e||e==="_self")&&!iB(i)}function Zx(i=""){return new URLSearchParams(typeof i=="string"||Array.isArray(i)||i instanceof URLSearchParams?i:Object.keys(i).reduce((e,t)=>{let n=i[t];return e.concat(Array.isArray(n)?n.map(s=>[t,s]):[[t,n]])},[]))}function rB(i,e){let t=Zx(i);return e&&e.forEach((n,s)=>{t.has(s)||e.getAll(s).forEach(a=>{t.append(s,a)})}),t}var Kv=null;function aB(){if(Kv===null)try{new FormData(document.createElement("form"),0),Kv=!1}catch{Kv=!0}return Kv}var oB=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function BE(i){return i!=null&&!oB.has(i)?(Wt(!1,`"${i}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${fx}"`),null):i}function lB(i,e){let t,n,s,a,o;if(tB(i)){let c=i.getAttribute("action");n=c?ii(c,e):null,t=i.getAttribute("method")||hx,s=BE(i.getAttribute("enctype"))||fx,a=new FormData(i)}else if(eB(i)||nB(i)&&(i.type==="submit"||i.type==="image")){let c=i.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let u=i.getAttribute("formaction")||c.getAttribute("action");if(n=u?ii(u,e):null,t=i.getAttribute("formmethod")||c.getAttribute("method")||hx,s=BE(i.getAttribute("formenctype"))||BE(c.getAttribute("enctype"))||fx,a=new FormData(c,i),!aB()){let{name:d,type:p,value:y}=i;if(p==="image"){let v=d?`${d}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else d&&a.append(d,y)}}else{if(Qb(i))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=hx,n=null,s=fx,o=i}return a&&s==="text/plain"&&(o=a,a=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:a,body:o}}var FI=-1,UI=-2,jI=-3,BI=-4,yC=-5,OI=-6,HI=-7,zI="B",GI="D",nf="E",hA="M",VI="N",sf="P",qI="R",fA="S",$I="Y",YI="U",pA="Z",WI=class{constructor(){this.promise=new Promise((i,e)=>{this.resolve=i,this.reject=e})}};function cB(){const i=new TextDecoder;let e="";return new TransformStream({transform(t,n){const s=i.decode(t,{stream:!0}),a=(e+s).split(`
`);e=a.pop()||"";for(const o of a)n.enqueue(o)},flush(t){e&&t.enqueue(e)}})}function br(i){const{indices:e}=this,t=e.get(i);if(t)return[t];if(i===void 0)return HI;if(i===null)return yC;if(Number.isNaN(i))return UI;if(i===Number.POSITIVE_INFINITY)return OI;if(i===Number.NEGATIVE_INFINITY)return jI;if(i===0&&1/i<0)return BI;const n=this.index++;return e.set(i,n),uB.call(this,i,n),n}function uB(i,e){const{deferred:t,plugins:n,postPlugins:s}=this,a=this.stringified,o=[[i,e]];for(;o.length>0;){const[c,u]=o.pop(),d=y=>Object.keys(y).map(v=>`"_${br.call(this,v)}":${br.call(this,y[v])}`).join(",");let p=null;switch(typeof c){case"boolean":case"number":case"string":a[u]=JSON.stringify(c);break;case"bigint":a[u]=`["${zI}","${c}"]`;break;case"symbol":{const y=Symbol.keyFor(c);y?a[u]=`["${$I}",${JSON.stringify(y)}]`:p=new Error("Cannot encode symbol unless created with Symbol.for()");break}case"object":{if(!c){a[u]=`${yC}`;break}const y=Array.isArray(c);let v=!1;if(!y&&n)for(const w of n){const A=w(c);if(Array.isArray(A)){v=!0;const[C,...T]=A;a[u]=`[${JSON.stringify(C)}`,T.length>0&&(a[u]+=`,${T.map(_=>br.call(this,_)).join(",")}`),a[u]+="]";break}}if(!v){let w=y?"[":"{";if(y){for(let A=0;A<c.length;A++)w+=(A?",":"")+(A in c?br.call(this,c[A]):FI);a[u]=`${w}]`}else if(c instanceof Date){const A=c.getTime();a[u]=`["${GI}",${Number.isNaN(A)?JSON.stringify("invalid"):A}]`}else c instanceof URL?a[u]=`["${YI}",${JSON.stringify(c.href)}]`:c instanceof RegExp?a[u]=`["${qI}",${JSON.stringify(c.source)},${JSON.stringify(c.flags)}]`:c instanceof Set?c.size>0?a[u]=`["${fA}",${[...c].map(A=>br.call(this,A)).join(",")}]`:a[u]=`["${fA}"]`:c instanceof Map?c.size>0?a[u]=`["${hA}",${[...c].flatMap(([A,C])=>[br.call(this,A),br.call(this,C)]).join(",")}]`:a[u]=`["${hA}"]`:c instanceof Promise?(a[u]=`["${sf}",${u}]`,t[u]=c):c instanceof Error?(a[u]=`["${nf}",${JSON.stringify(c.message)}`,c.name!=="Error"&&(a[u]+=`,${JSON.stringify(c.name)}`),a[u]+="]"):Object.getPrototypeOf(c)===null?a[u]=`["${VI}",{${d(c)}}]`:hB(c)?a[u]=`{${d(c)}}`:p=new Error("Cannot encode object with prototype")}break}default:{const y=Array.isArray(c);let v=!1;if(!y&&n)for(const w of n){const A=w(c);if(Array.isArray(A)){v=!0;const[C,...T]=A;a[u]=`[${JSON.stringify(C)}`,T.length>0&&(a[u]+=`,${T.map(_=>br.call(this,_)).join(",")}`),a[u]+="]";break}}v||(p=new Error("Cannot encode function or unexpected type"))}}if(p){let y=!1;if(s)for(const v of s){const w=v(c);if(Array.isArray(w)){y=!0;const[A,...C]=w;a[u]=`[${JSON.stringify(A)}`,C.length>0&&(a[u]+=`,${C.map(T=>br.call(this,T)).join(",")}`),a[u]+="]";break}}if(!y)throw p}}}var dB=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function hB(i){const e=Object.getPrototypeOf(i);return e===Object.prototype||e===null||Object.getOwnPropertyNames(e).sort().join("\0")===dB}var OE=typeof window<"u"?window:typeof globalThis<"u"?globalThis:void 0;function mA(i){const{hydrated:e,values:t}=this;if(typeof i=="number")return BR.call(this,i);if(!Array.isArray(i)||!i.length)throw new SyntaxError;const n=t.length;for(const s of i)t.push(s);return e.length=t.length,BR.call(this,n)}function BR(i){const{hydrated:e,values:t,deferred:n,plugins:s}=this;let a;const o=[[i,u=>{a=u}]];let c=[];for(;o.length>0;){const[u,d]=o.pop();switch(u){case HI:d(void 0);continue;case yC:d(null);continue;case UI:d(NaN);continue;case OI:d(1/0);continue;case jI:d(-1/0);continue;case BI:d(-0);continue}if(e[u]){d(e[u]);continue}const p=t[u];if(!p||typeof p!="object"){e[u]=p,d(p);continue}if(Array.isArray(p))if(typeof p[0]=="string"){const[y,v,w]=p;switch(y){case GI:d(e[u]=new Date(v));continue;case YI:d(e[u]=new URL(v));continue;case zI:d(e[u]=BigInt(v));continue;case qI:d(e[u]=new RegExp(v,w));continue;case $I:d(e[u]=Symbol.for(v));continue;case fA:const A=new Set;e[u]=A;for(let L=p.length-1;L>0;L--)o.push([p[L],F=>{A.add(F)}]);d(A);continue;case hA:const C=new Map;e[u]=C;for(let L=p.length-2;L>0;L-=2){const F=[];o.push([p[L+1],U=>{F[1]=U}]),o.push([p[L],U=>{F[0]=U}]),c.push(()=>{C.set(F[0],F[1])})}d(C);continue;case VI:const T=Object.create(null);e[u]=T;for(const L of Object.keys(v).reverse()){const F=[];o.push([v[L],U=>{F[1]=U}]),o.push([Number(L.slice(1)),U=>{F[0]=U}]),c.push(()=>{T[F[0]]=F[1]})}d(T);continue;case sf:if(e[v])d(e[u]=e[v]);else{const L=new WI;n[v]=L,d(e[u]=L.promise)}continue;case nf:const[,_,D]=p;let R=D&&OE&&OE[D]?new OE[D](_):new Error(_);e[u]=R,d(R);continue;case pA:d(e[u]=e[v]);continue;default:if(Array.isArray(s)){const L=[],F=p.slice(1);for(let U=0;U<F.length;U++){const M=F[U];o.push([M,O=>{L[U]=O}])}c.push(()=>{for(const U of s){const M=U(p[0],...L);if(M){d(e[u]=M.value);return}}throw new SyntaxError});continue}throw new SyntaxError}}else{const y=[];e[u]=y;for(let v=0;v<p.length;v++){const w=p[v];w!==FI&&o.push([w,A=>{y[v]=A}])}d(y);continue}else{const y={};e[u]=y;for(const v of Object.keys(p).reverse()){const w=[];o.push([p[v],A=>{w[1]=A}]),o.push([Number(v.slice(1)),A=>{w[0]=A}]),c.push(()=>{y[w[0]]=w[1]})}d(y);continue}}for(;c.length>0;)c.pop()();return a}async function fB(i,e){const{plugins:t}=e??{},n=new WI,s=i.pipeThrough(cB()).getReader(),a={values:[],hydrated:[],deferred:{},plugins:t},o=await pB.call(a,s);let c=n.promise;return o.done?n.resolve():c=mB.call(a,s).then(n.resolve).catch(u=>{for(const d of Object.values(a.deferred))d.reject(u);n.reject(u)}),{done:c.then(()=>s.closed),value:o.value}}async function pB(i){const e=await i.read();if(!e.value)throw new SyntaxError;let t;try{t=JSON.parse(e.value)}catch{throw new SyntaxError}return{done:e.done,value:mA.call(this,t)}}async function mB(i){let e=await i.read();for(;!e.done;){if(!e.value)continue;const t=e.value;switch(t[0]){case sf:{const n=t.indexOf(":"),s=Number(t.slice(1,n)),a=this.deferred[s];if(!a)throw new Error(`Deferred ID ${s} not found in stream`);const o=t.slice(n+1);let c;try{c=JSON.parse(o)}catch{throw new SyntaxError}const u=mA.call(this,c);a.resolve(u);break}case nf:{const n=t.indexOf(":"),s=Number(t.slice(1,n)),a=this.deferred[s];if(!a)throw new Error(`Deferred ID ${s} not found in stream`);const o=t.slice(n+1);let c;try{c=JSON.parse(o)}catch{throw new SyntaxError}const u=mA.call(this,c);a.reject(u);break}default:throw new SyntaxError}e=await i.read()}}function gB(i,e){const{plugins:t,postPlugins:n,signal:s}=e??{},a={deferred:{},index:0,indices:new Map,stringified:[],plugins:t,postPlugins:n,signal:s},o=new TextEncoder;let c=0;return new ReadableStream({async start(d){const p=br.call(a,i);if(Array.isArray(p))throw new Error("This should never happen");p<0?d.enqueue(o.encode(`${p}
`)):(d.enqueue(o.encode(`[${a.stringified.join(",")}]
`)),c=a.stringified.length-1);const y=new WeakSet;if(Object.keys(a.deferred).length){let v;const w=new Promise((A,C)=>{if(v=A,s){const T=()=>C(s.reason||new Error("Signal was aborted."));s.aborted?T():s.addEventListener("abort",_=>{T()})}});for(;Object.keys(a.deferred).length>0;){for(const[A,C]of Object.entries(a.deferred))y.has(C)||y.add(a.deferred[Number(A)]=Promise.race([w,C]).then(T=>{const _=br.call(a,T);if(Array.isArray(_))d.enqueue(o.encode(`${sf}${A}:[["${pA}",${_[0]}]]
`)),a.index++,c++;else if(_<0)d.enqueue(o.encode(`${sf}${A}:${_}
`));else{const D=a.stringified.slice(c+1).join(",");d.enqueue(o.encode(`${sf}${A}:[${D}]
`)),c=a.stringified.length-1}},T=>{(!T||typeof T!="object"||!(T instanceof Error))&&(T=new Error("An unknown error occurred"));const _=br.call(a,T);if(Array.isArray(_))d.enqueue(o.encode(`${nf}${A}:[["${pA}",${_[0]}]]
`)),a.index++,c++;else if(_<0)d.enqueue(o.encode(`${nf}${A}:${_}
`));else{const D=a.stringified.slice(c+1).join(",");d.enqueue(o.encode(`${nf}${A}:[${D}]
`)),c=a.stringified.length-1}}).finally(()=>{delete a.deferred[Number(A)]}));await Promise.race(Object.values(a.deferred))}v()}await Promise.all(Object.values(a.deferred)),d.close()}})}async function yB(i){let e={signal:i.signal};if(i.method!=="GET"){e.method=i.method;let t=i.headers.get("Content-Type");t&&/\bapplication\/json\b/.test(t)?(e.headers={"Content-Type":t},e.body=JSON.stringify(await i.json())):t&&/\btext\/plain\b/.test(t)?(e.headers={"Content-Type":t},e.body=await i.text()):t&&/\bapplication\/x-www-form-urlencoded\b/.test(t)?e.body=new URLSearchParams(await i.text()):e.body=await i.formData()}return e}var vB={"&":"\\u0026",">":"\\u003e","<":"\\u003c","\u2028":"\\u2028","\u2029":"\\u2029"},xB=/[&><\u2028\u2029]/g;function vC(i){return i.replace(xB,e=>vB[e])}function Vi(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}var ll=Symbol("SingleFetchRedirect"),XI=class extends Error{},xC=202,JI=new Set([100,101,204,205]);function KI({context:i,identifier:e,reader:t,textDecoder:n,nonce:s}){if(!i.renderMeta||!i.renderMeta.didRenderScripts)return null;i.renderMeta.streamCache||(i.renderMeta.streamCache={});let{streamCache:a}=i.renderMeta,o=a[e];if(o||(o=a[e]=t.read().then(p=>{a[e].result={done:p.done,value:n.decode(p.value,{stream:!0})}}).catch(p=>{a[e].error=p})),o.error)throw o.error;if(o.result===void 0)throw o;let{done:c,value:u}=o.result,d=u?k.createElement("script",{nonce:s,dangerouslySetInnerHTML:{__html:`window.__reactRouterContext.streamController.enqueue(${vC(JSON.stringify(u))});`}}):null;return c?k.createElement(k.Fragment,null,d,k.createElement("script",{nonce:s,dangerouslySetInnerHTML:{__html:"window.__reactRouterContext.streamController.close();"}})):k.createElement(k.Fragment,null,d,k.createElement(k.Suspense,null,k.createElement(KI,{context:i,identifier:e+1,reader:t,textDecoder:n,nonce:s})))}function QI(i,e,t,n,s){let a=bB(i,o=>{let c=e.routes[o.route.id];Vi(c,"Route not found in manifest");let u=t[o.route.id];return{hasLoader:c.hasLoader,hasClientLoader:c.hasClientLoader,hasShouldRevalidate:!!(u!=null&&u.shouldRevalidate)}},_B,n,s);return async o=>o.runClientMiddleware(a)}function bB(i,e,t,n,s,a=()=>!0){return async o=>{let{request:c,matches:u,fetcherKey:d}=o,p=i();if(c.method!=="GET")return wB(o,t,s);let y=u.some(v=>{let{hasLoader:w,hasClientLoader:A}=e(v);return v.shouldCallHandler()&&w&&!A});return!n&&!y?SB(o,e,t,s):d?CB(o,t,s):EB(o,p,e,t,n,s,a)}}async function wB(i,e,t){let n=i.matches.find(o=>o.shouldCallHandler());Vi(n,"No action match found");let s,a=await n.resolve(async o=>await o(async()=>{let{data:u,status:d}=await e(i,t,[n.route.id]);return s=d,Ng(u,n.route.id)}));return xn(a.result)||Bn(a.result)||Vc(a.result)?{[n.route.id]:a}:{[n.route.id]:{type:a.type,result:OD(a.result,s)}}}async function SB(i,e,t,n){let s=i.matches.filter(o=>o.shouldCallHandler()),a={};return await Promise.all(s.map(o=>o.resolve(async c=>{try{let{hasClientLoader:u}=e(o),d=o.route.id,p=u?await c(async()=>{let{data:y}=await t(i,n,[d]);return Ng(y,d)}):await c();a[o.route.id]={type:"data",result:p}}catch(u){a[o.route.id]={type:"error",result:u}}}))),a}async function EB(i,e,t,n,s,a,o=()=>!0){let c=new Set,u=!1,d=i.matches.map(()=>OR()),p=OR(),y={},v=Promise.all(i.matches.map(async(A,C)=>A.resolve(async T=>{d[C].resolve();let _=A.route.id,{hasLoader:D,hasClientLoader:R,hasShouldRevalidate:L}=t(A),F=!A.shouldRevalidateArgs||A.shouldRevalidateArgs.actionStatus==null||A.shouldRevalidateArgs.actionStatus<400;if(!A.shouldCallHandler(F)){u||(u=A.shouldRevalidateArgs!=null&&D&&L===!0);return}if(o(A)&&R){D&&(u=!0);try{let M=await T(async()=>{let{data:O}=await n(i,a,[_]);return Ng(O,_)});y[_]={type:"data",result:M}}catch(M){y[_]={type:"error",result:M}}return}D&&c.add(_);try{let M=await T(async()=>{let O=await p.promise;return Ng(O,_)});y[_]={type:"data",result:M}}catch(M){y[_]={type:"error",result:M}}})));if(await Promise.all(d.map(A=>A.promise)),(!e.state.initialized&&e.state.navigation.state==="idle"||c.size===0)&&!window.__reactRouterHdrActive)p.resolve({routes:{}});else{let A=s&&u&&c.size>0?[...c.keys()]:void 0;try{let C=await n(i,a,A);p.resolve(C.data)}catch(C){p.reject(C)}}return await v,await AB(p.promise,i.matches,c,y),y}async function AB(i,e,t,n){var s;try{let a,o=await i;if("routes"in o){for(let c of e)if(c.route.id in o.routes){let u=o.routes[c.route.id];if("error"in u){a=u.error,((s=n[c.route.id])==null?void 0:s.result)==null&&(n[c.route.id]={type:"error",result:a});break}}}a!==void 0&&Array.from(t.values()).forEach(c=>{n[c].result instanceof XI&&(n[c].result=a)})}catch{}}async function CB(i,e,t){let n=i.matches.find(o=>o.shouldCallHandler());Vi(n,"No fetcher match found");let s=n.route.id,a=await n.resolve(async o=>o(async()=>{let{data:c}=await e(i,t,[s]);return Ng(c,s)}));return{[n.route.id]:a}}function TB(i){let e=i.searchParams.getAll("index");i.searchParams.delete("index");let t=[];for(let n of e)n&&t.push(n);for(let n of t)i.searchParams.append("index",n);return i}function ZI(i,e,t){let n=typeof i=="string"?new URL(i,typeof window>"u"?"server://singlefetch/":window.location.origin):i;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&ii(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function _B(i,e,t){let{request:n}=i,s=ZI(n.url,e,"data");n.method==="GET"&&(s=TB(s),t&&s.searchParams.set("_routes",t.join(",")));let a=await fetch(s,await yB(n));if(a.status>=400&&!a.headers.has("X-Remix-Response"))throw new is(a.status,a.statusText,await a.text());if(a.status===204&&a.headers.has("X-Remix-Redirect"))return{status:xC,data:{redirect:{redirect:a.headers.get("X-Remix-Redirect"),status:Number(a.headers.get("X-Remix-Status")||"302"),revalidate:a.headers.get("X-Remix-Revalidate")==="true",reload:a.headers.get("X-Remix-Reload-Document")==="true",replace:a.headers.get("X-Remix-Replace")==="true"}}};if(JI.has(a.status)){let o={};return t&&n.method!=="GET"&&(o[t[0]]={data:void 0}),{status:a.status,data:{routes:o}}}Vi(a.body,"No response body to decode");try{let o=await Zb(a.body,window),c;if(n.method==="GET"){let u=o.value;ll in u?c={redirect:u[ll]}:c={routes:u}}else{let u=o.value,d=t==null?void 0:t[0];Vi(d,"No routeId found for single fetch call decoding"),"redirect"in u?c={redirect:u}:c={routes:{[d]:u}}}return{status:a.status,data:c}}catch{throw new Error("Unable to decode turbo-stream response")}}function Zb(i,e){return fB(i,{plugins:[(t,...n)=>{if(t==="SanitizedError"){let[s,a,o]=n,c=Error;s&&s in e&&typeof e[s]=="function"&&(c=e[s]);let u=new c(a);return u.stack=o,{value:u}}if(t==="ErrorResponse"){let[s,a,o]=n;return{value:new is(a,o,s)}}if(t==="SingleFetchRedirect")return{value:{[ll]:n[0]}};if(t==="SingleFetchClassInstance")return{value:n[0]};if(t==="SingleFetchFallback")return{value:void 0}}]})}function Ng(i,e){if("redirect"in i){let{redirect:n,revalidate:s,reload:a,replace:o,status:c}=i.redirect;throw x0(n,{status:c,headers:{...s?{"X-Remix-Revalidate":"yes"}:null,...a?{"X-Remix-Reload-Document":"yes"}:null,...o?{"X-Remix-Replace":"yes"}:null}})}let t=i.routes[e];if(t==null)throw new XI(`No result found for routeId "${e}"`);if("error"in t)throw t.error;if("data"in t)return t.data;throw new Error(`Invalid response found for routeId "${e}"`)}function OR(){let i,e,t=new Promise((n,s)=>{i=async a=>{n(a);try{await t}catch{}},e=async a=>{s(a);try{await t}catch{}}});return{promise:t,resolve:i,reject:e}}async function eP(i,e){if(i.id in e)return e[i.id];try{let t=await import(i.module);return e[i.id]=t,t}catch(t){return console.error(`Error loading route module \`${i.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function NB(i,e,t){let n=i.map(a=>{var u;let o=e[a.route.id],c=t.routes[a.route.id];return[c&&c.css?c.css.map(d=>({rel:"stylesheet",href:d})):[],((u=o==null?void 0:o.links)==null?void 0:u.call(o))||[]]}).flat(2),s=wC(i,t);return sP(n,s)}function tP(i){return i.css?i.css.map(e=>({rel:"stylesheet",href:e})):[]}async function RB(i){if(!i.css)return;let e=tP(i);await Promise.all(e.map(iP))}async function nP(i,e){if(!i.css&&!e.links||!PB())return;let t=[];if(i.css&&t.push(...tP(i)),e.links&&t.push(...e.links()),t.length===0)return;let n=[];for(let s of t)!bC(s)&&s.rel==="stylesheet"&&n.push({...s,rel:"preload",as:"style"});await Promise.all(n.map(iP))}async function iP(i){return new Promise(e=>{if(i.media&&!window.matchMedia(i.media).matches||document.querySelector(`link[rel="stylesheet"][href="${i.href}"]`))return e();let t=document.createElement("link");Object.assign(t,i);function n(){document.head.contains(t)&&document.head.removeChild(t)}t.onload=()=>{n(),e()},t.onerror=()=>{n(),e()},document.head.appendChild(t)})}function bC(i){return i!=null&&typeof i.page=="string"}function MB(i){return i==null?!1:i.href==null?i.rel==="preload"&&typeof i.imageSrcSet=="string"&&typeof i.imageSizes=="string":typeof i.rel=="string"&&typeof i.href=="string"}async function kB(i,e,t){let n=await Promise.all(i.map(async s=>{let a=e.routes[s.route.id];if(a){let o=await eP(a,t);return o.links?o.links():[]}return[]}));return sP(n.flat(1).filter(MB).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function HR(i,e,t,n,s,a){let o=(u,d)=>t[d]?u.route.id!==t[d].route.id:!0,c=(u,d)=>{var p;return t[d].pathname!==u.pathname||((p=t[d].route.path)==null?void 0:p.endsWith("*"))&&t[d].params["*"]!==u.params["*"]};return a==="assets"?e.filter((u,d)=>o(u,d)||c(u,d)):a==="data"?e.filter((u,d)=>{var y;let p=n.routes[u.route.id];if(!p||!p.hasLoader)return!1;if(o(u,d)||c(u,d))return!0;if(u.route.shouldRevalidate){let v=u.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((y=t[0])==null?void 0:y.params)||{},nextUrl:new URL(i,window.origin),nextParams:u.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function wC(i,e,{includeHydrateFallback:t}={}){return DB(i.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let a=[s.module];return s.clientActionModule&&(a=a.concat(s.clientActionModule)),s.clientLoaderModule&&(a=a.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(a=a.concat(s.hydrateFallbackModule)),s.imports&&(a=a.concat(s.imports)),a}).flat(1))}function DB(i){return[...new Set(i)]}function IB(i){let e={},t=Object.keys(i).sort();for(let n of t)e[n]=i[n];return e}function sP(i,e){let t=new Set,n=new Set(e);return i.reduce((s,a)=>{if(e&&!bC(a)&&a.as==="script"&&a.href&&n.has(a.href))return s;let c=JSON.stringify(IB(a));return t.has(c)||(t.add(c),s.push({key:c,link:a})),s},[])}var Qv;function PB(){if(Qv!==void 0)return Qv;let i=document.createElement("link");return Qv=i.relList.supports("preload"),i=null,Qv}function LB(){return k.createElement(gA,{title:"Loading...",renderScripts:!0},k.createElement("script",{dangerouslySetInnerHTML:{__html:`
              console.log(
                " Hey developer . You can provide a way better UX than this " +
                "when your app is loading JS modules and/or running \`clientLoader\` " +
                "functions. Check out https://reactrouter.com/start/framework/route-module#hydratefallback " +
                "for more information."
              );
            `}}))}function SC(i){let e={};return Object.values(i).forEach(t=>{if(t){let n=t.parentId||"";e[n]||(e[n]=[]),e[n].push(t)}}),e}function rP(i,e,t){let n=lP(e),s=e.HydrateFallback&&(!t||i.id==="root")?e.HydrateFallback:i.id==="root"?LB:void 0,a=e.ErrorBoundary?e.ErrorBoundary:i.id==="root"?()=>k.createElement(pP,{error:E0()}):void 0;return i.id==="root"&&e.Layout?{...n?{element:k.createElement(e.Layout,null,k.createElement(n,null))}:{Component:n},...a?{errorElement:k.createElement(e.Layout,null,k.createElement(a,null))}:{ErrorBoundary:a},...s?{hydrateFallbackElement:k.createElement(e.Layout,null,k.createElement(s,null))}:{HydrateFallback:s}}:{Component:n,ErrorBoundary:a,HydrateFallback:s}}function aP(i,e,t,n,s="",a=SC(i),o=Promise.resolve({Component:()=>null})){return(a[s]||[]).map(c=>{let u=e[c.id];Vi(u,"No `routeModule` available to create server routes");let d={...rP(c,u,n),caseSensitive:c.caseSensitive,id:c.id,index:c.index,path:c.path,handle:u.handle,lazy:n?()=>o:void 0,loader:c.hasLoader||c.hasClientLoader?()=>null:void 0},p=aP(i,e,t,n,c.id,a,o);return p.length>0&&(d.children=p),d})}function oP(i,e,t,n,s,a){return C0(e,t,n,s,a,"",SC(e),i)}function Zv(i,e){if(i==="loader"&&!e.hasLoader||i==="action"&&!e.hasAction){let n=`You are trying to call ${i==="action"?"serverAction()":"serverLoader()"} on a route that does not have a server ${i} (routeId: "${e.id}")`;throw console.error(n),new is(400,"Bad Request",new Error(n),!0)}}function HE(i,e){let t=i==="clientAction"?"a":"an",n=`Route "${e}" does not have ${t} ${i}, but you are trying to submit to it. To fix this, please add ${t} \`${i}\` function to the route`;throw console.error(n),new is(405,"Method Not Allowed",new Error(n),!0)}function C0(i,e,t,n,s,a="",o=SC(i),c){return(o[a]||[]).map(u=>{var D,R,L;let d=e[u.id];function p(F){return Vi(typeof F=="function","No single fetch function available for route handler"),F()}function y(F){return u.hasLoader?p(F):Promise.resolve(null)}function v(F){if(!u.hasAction)throw HE("action",u.id);return p(F)}function w(F){import(F)}function A(F){F.clientActionModule&&w(F.clientActionModule),F.clientLoaderModule&&w(F.clientLoaderModule)}async function C(F){let U=e[u.id],M=U?nP(u,U):Promise.resolve();try{return F()}finally{await M}}let T={id:u.id,index:u.index,path:u.path};if(d){Object.assign(T,{...T,...rP(u,d,s),middleware:d.clientMiddleware,handle:d.handle,shouldRevalidate:zR(T.path,d,u,n,c)});let F=t&&t.loaderData&&u.id in t.loaderData,U=F?(D=t==null?void 0:t.loaderData)==null?void 0:D[u.id]:void 0,M=t&&t.errors&&u.id in t.errors,O=M?(R=t==null?void 0:t.errors)==null?void 0:R[u.id]:void 0,z=c==null&&(((L=d.clientLoader)==null?void 0:L.hydrate)===!0||!u.hasLoader);T.loader=async({request:J,params:G,context:X,unstable_pattern:ie},$)=>{try{return await C(async()=>(Vi(d,"No `routeModule` available for critical-route loader"),d.clientLoader?d.clientLoader({request:J,params:G,context:X,unstable_pattern:ie,async serverLoader(){if(Zv("loader",u),z){if(F)return U;if(M)throw O}return y($)}}):y($)))}finally{z=!1}},T.loader.hydrate=T0(u.id,d.clientLoader,u.hasLoader,s),T.action=({request:J,params:G,context:X,unstable_pattern:ie},$)=>C(async()=>{if(Vi(d,"No `routeModule` available for critical-route action"),!d.clientAction){if(s)throw HE("clientAction",u.id);return v($)}return d.clientAction({request:J,params:G,context:X,unstable_pattern:ie,async serverAction(){return Zv("action",u),v($)}})})}else{u.hasClientLoader||(T.loader=(M,O)=>C(()=>y(O))),u.hasClientAction||(T.action=(M,O)=>C(()=>{if(s)throw HE("clientAction",u.id);return v(O)}));let F;async function U(){return F?await F:(F=(async()=>{(u.clientLoaderModule||u.clientActionModule)&&await new Promise(O=>setTimeout(O,0));let M=UB(u,e);return A(u),await M})(),await F)}T.lazy={loader:u.hasClientLoader?async()=>{let{clientLoader:M}=u.clientLoaderModule?await import(u.clientLoaderModule):await U();return Vi(M,"No `clientLoader` export found"),(O,z)=>M({...O,async serverLoader(){return Zv("loader",u),y(z)}})}:void 0,action:u.hasClientAction?async()=>{let M=u.clientActionModule?import(u.clientActionModule):U();A(u);let{clientAction:O}=await M;return Vi(O,"No `clientAction` export found"),(z,J)=>O({...z,async serverAction(){return Zv("action",u),v(J)}})}:void 0,middleware:u.hasClientMiddleware?async()=>{let{clientMiddleware:M}=u.clientMiddlewareModule?await import(u.clientMiddlewareModule):await U();return Vi(M,"No `clientMiddleware` export found"),M}:void 0,shouldRevalidate:async()=>{let M=await U();return zR(T.path,M,u,n,c)},handle:async()=>(await U()).handle,Component:async()=>(await U()).Component,ErrorBoundary:u.hasErrorBoundary?async()=>(await U()).ErrorBoundary:void 0}}let _=C0(i,e,t,n,s,u.id,o,c);return _.length>0&&(T.children=_),T})}function zR(i,e,t,n,s){if(s)return FB(t.id,e.shouldRevalidate,s);if(!n&&t.hasLoader&&!t.hasClientLoader){let a=i?FD(i)[1].map(c=>c.paramName):[];const o=c=>a.some(u=>c.currentParams[u]!==c.nextParams[u]);if(e.shouldRevalidate){let c=e.shouldRevalidate;return u=>c({...u,defaultShouldRevalidate:o(u)})}else return c=>o(c)}return e.shouldRevalidate}function FB(i,e,t){let n=!1;return s=>n?e?e(s):s.defaultShouldRevalidate:(n=!0,t.has(i))}async function UB(i,e){let t=eP(i,e),n=RB(i),s=await t;return await Promise.all([n,nP(i,s)]),{Component:lP(s),ErrorBoundary:s.ErrorBoundary,clientMiddleware:s.clientMiddleware,clientAction:s.clientAction,clientLoader:s.clientLoader,handle:s.handle,links:s.links,meta:s.meta,shouldRevalidate:s.shouldRevalidate}}function lP(i){if(i.default==null)return;if(!(typeof i.default=="object"&&Object.keys(i.default).length===0))return i.default}function T0(i,e,t,n){return n&&i!=="root"||e!=null&&(e.hydrate===!0||t!==!0)}var px=new Set,jB=1e3,eb=new Set,BB=7680;function EC(i,e){return i.mode==="lazy"&&e===!0}function OB({sri:i,...e},t){let n=new Set(t.state.matches.map(c=>c.route.id)),s=t.state.location.pathname.split("/").filter(Boolean),a=["/"];for(s.pop();s.length>0;)a.push(`/${s.join("/")}`),s.pop();a.forEach(c=>{let u=Es(t.routes,c,t.basename);u&&u.forEach(d=>n.add(d.route.id))});let o=[...n].reduce((c,u)=>Object.assign(c,{[u]:e.routes[u]}),{});return{...e,routes:o,sri:i?!0:void 0}}function cP(i,e,t,n,s,a){if(EC(n,t))return async({path:o,patch:c,signal:u,fetcherKey:d})=>{eb.has(o)||await hP([o],d?window.location.href:o,i,e,t,s,a,n.manifestPath,c,u)}}function uP(i,e,t,n,s,a){k.useEffect(()=>{var p,y;if(!EC(s,n)||((y=(p=window.navigator)==null?void 0:p.connection)==null?void 0:y.saveData)===!0)return;function o(v){let w=v.tagName==="FORM"?v.getAttribute("action"):v.getAttribute("href");if(!w)return;let A=v.tagName==="A"?v.pathname:new URL(w,window.location.origin).pathname;eb.has(A)||px.add(A)}async function c(){document.querySelectorAll("a[data-discover], form[data-discover]").forEach(o);let v=Array.from(px.keys()).filter(w=>eb.has(w)?(px.delete(w),!1):!0);if(v.length!==0)try{await hP(v,null,e,t,n,a,i.basename,s.manifestPath,i.patchRoutes)}catch(w){console.error("Failed to fetch manifest patches",w)}}let u=zB(c,100);c();let d=new MutationObserver(()=>u());return d.observe(document.documentElement,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["data-discover","href","action"]}),()=>d.disconnect()},[n,a,e,t,i,s])}function dP(i,e){let t=i||"/__manifest";return e==null?t:`${e}${t}`.replace(/\/+/g,"/")}var zE="react-router-manifest-version";async function hP(i,e,t,n,s,a,o,c,u,d){const p=new URLSearchParams;p.set("paths",i.sort().join(",")),p.set("version",t.version);let y=new URL(dP(c,o),window.location.origin);if(y.search=p.toString(),y.toString().length>BB){px.clear();return}let v;try{let T=await fetch(y,{signal:d});if(T.ok){if(T.status===204&&T.headers.has("X-Remix-Reload-Document")){if(!e){console.warn("Detected a manifest version mismatch during eager route discovery. The next navigation/fetch to an undiscovered route will result in a new document navigation to sync up with the latest manifest.");return}try{if(sessionStorage.getItem(zE)===t.version){console.error("Unable to discover routes due to manifest version mismatch.");return}sessionStorage.setItem(zE,t.version)}catch{}window.location.href=e,console.warn("Detected manifest version mismatch, reloading..."),await new Promise(()=>{})}else if(T.status>=400)throw new Error(await T.text())}else throw new Error(`${T.status} ${T.statusText}`);try{sessionStorage.removeItem(zE)}catch{}v=await T.json()}catch(T){if(d!=null&&d.aborted)return;throw T}let w=new Set(Object.keys(t.routes)),A=Object.values(v).reduce((T,_)=>(_&&!w.has(_.id)&&(T[_.id]=_),T),{});Object.assign(t.routes,A),i.forEach(T=>HB(T,eb));let C=new Set;Object.values(A).forEach(T=>{T&&(!T.parentId||!A[T.parentId])&&C.add(T.parentId)}),C.forEach(T=>u(T||null,C0(A,n,null,s,a,T)))}function HB(i,e){if(e.size>=jB){let t=e.values().next().value;e.delete(t)}e.add(i)}function zB(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function AC(){let i=k.useContext(Xa);return Vi(i,"You must render this element inside a <DataRouterContext.Provider> element"),i}function ew(){let i=k.useContext(pl);return Vi(i,"You must render this element inside a <DataRouterStateContext.Provider> element"),i}var gl=k.createContext(void 0);gl.displayName="FrameworkContext";function qp(){let i=k.useContext(gl);return Vi(i,"You must render this element inside a <HydratedRouter> element"),i}function GB(i,e){let t=k.useContext(gl),[n,s]=k.useState(!1),[a,o]=k.useState(!1),{onFocus:c,onBlur:u,onMouseEnter:d,onMouseLeave:p,onTouchStart:y}=e,v=k.useRef(null);k.useEffect(()=>{if(i==="render"&&o(!0),i==="viewport"){let C=_=>{_.forEach(D=>{o(D.isIntersecting)})},T=new IntersectionObserver(C,{threshold:.5});return v.current&&T.observe(v.current),()=>{T.disconnect()}}},[i]),k.useEffect(()=>{if(n){let C=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(C)}}},[n]);let w=()=>{s(!0)},A=()=>{s(!1),o(!1)};return t?i!=="intent"?[a,v,{}]:[a,v,{onFocus:zm(c,w),onBlur:zm(u,A),onMouseEnter:zm(d,w),onMouseLeave:zm(p,A),onTouchStart:zm(y,w)}]:[!1,v,{}]}function zm(i,e){return t=>{i&&i(t),t.defaultPrevented||e(t)}}function CC(i,e,t){if(t&&!tb)return[i[0]];if(e){let n=i.findIndex(s=>e[s.route.id]!==void 0);return i.slice(0,n+1)}return i}var GR="data-react-router-critical-css";function VB({nonce:i}){let{isSpaMode:e,manifest:t,routeModules:n,criticalCss:s}=qp(),{errors:a,matches:o}=ew(),c=CC(o,a,e),u=k.useMemo(()=>NB(c,n,t),[c,n,t]);return k.createElement(k.Fragment,null,typeof s=="string"?k.createElement("style",{[GR]:"",dangerouslySetInnerHTML:{__html:s}}):null,typeof s=="object"?k.createElement("link",{[GR]:"",rel:"stylesheet",href:s.href,nonce:i}):null,u.map(({key:d,link:p})=>bC(p)?k.createElement(TC,{key:d,nonce:i,...p}):k.createElement("link",{key:d,nonce:i,...p})))}function TC({page:i,...e}){let{router:t}=AC(),n=k.useMemo(()=>Es(t.routes,i,t.basename),[t.routes,i,t.basename]);return n?k.createElement($B,{page:i,matches:n,...e}):null}function qB(i){let{manifest:e,routeModules:t}=qp(),[n,s]=k.useState([]);return k.useEffect(()=>{let a=!1;return kB(i,e,t).then(o=>{a||s(o)}),()=>{a=!0}},[i,e,t]),n}function $B({page:i,matches:e,...t}){let n=Cs(),{manifest:s,routeModules:a}=qp(),{basename:o}=AC(),{loaderData:c,matches:u}=ew(),d=k.useMemo(()=>HR(i,e,u,s,n,"data"),[i,e,u,s,n]),p=k.useMemo(()=>HR(i,e,u,s,n,"assets"),[i,e,u,s,n]),y=k.useMemo(()=>{if(i===n.pathname+n.search+n.hash)return[];let A=new Set,C=!1;if(e.forEach(_=>{var R;let D=s.routes[_.route.id];!D||!D.hasLoader||(!d.some(L=>L.route.id===_.route.id)&&_.route.id in c&&((R=a[_.route.id])!=null&&R.shouldRevalidate)||D.hasClientLoader?C=!0:A.add(_.route.id))}),A.size===0)return[];let T=ZI(i,o,"data");return C&&A.size>0&&T.searchParams.set("_routes",e.filter(_=>A.has(_.route.id)).map(_=>_.route.id).join(",")),[T.pathname+T.search]},[o,c,n,s,d,e,i,a]),v=k.useMemo(()=>wC(p,s),[p,s]),w=qB(p);return k.createElement(k.Fragment,null,y.map(A=>k.createElement("link",{key:A,rel:"prefetch",as:"fetch",href:A,...t})),v.map(A=>k.createElement("link",{key:A,rel:"modulepreload",href:A,...t})),w.map(({key:A,link:C})=>k.createElement("link",{key:A,nonce:t.nonce,...C})))}function YB(){let{isSpaMode:i,routeModules:e}=qp(),{errors:t,matches:n,loaderData:s}=ew(),a=Cs(),o=CC(n,t,i),c=null;t&&(c=t[o[o.length-1].route.id]);let u=[],d=null,p=[];for(let y=0;y<o.length;y++){let v=o[y],w=v.route.id,A=s[w],C=v.params,T=e[w],_=[],D={id:w,data:A,loaderData:A,meta:[],params:v.params,pathname:v.pathname,handle:v.route.handle,error:c};if(p[y]=D,T!=null&&T.meta?_=typeof T.meta=="function"?T.meta({data:A,loaderData:A,params:C,location:a,matches:p,error:c}):Array.isArray(T.meta)?[...T.meta]:T.meta:d&&(_=[...d]),_=_||[],!Array.isArray(_))throw new Error("The route at "+v.route.path+` returns an invalid value. All route meta functions must return an array of meta objects.

To reference the meta function API, see https://remix.run/route/meta`);D.meta=_,p[y]=D,u=[..._],d=u}return k.createElement(k.Fragment,null,u.flat().map(y=>{if(!y)return null;if("tagName"in y){let{tagName:v,...w}=y;if(!WB(v))return console.warn(`A meta object uses an invalid tagName: ${v}. Expected either 'link' or 'meta'`),null;let A=v;return k.createElement(A,{key:JSON.stringify(w),...w})}if("title"in y)return k.createElement("title",{key:"title"},String(y.title));if("charset"in y&&(y.charSet??(y.charSet=y.charset),delete y.charset),"charSet"in y&&y.charSet!=null)return typeof y.charSet=="string"?k.createElement("meta",{key:"charSet",charSet:y.charSet}):null;if("script:ld+json"in y)try{let v=JSON.stringify(y["script:ld+json"]);return k.createElement("script",{key:`script:ld+json:${v}`,type:"application/ld+json",dangerouslySetInnerHTML:{__html:vC(v)}})}catch{return null}return k.createElement("meta",{key:JSON.stringify(y),...y})}))}function WB(i){return typeof i=="string"&&/^(meta|link)$/.test(i)}var tb=!1;function XB(){tb=!0}function fP(i){let{manifest:e,serverHandoffString:t,isSpaMode:n,renderMeta:s,routeDiscovery:a,ssr:o}=qp(),{router:c,static:u,staticContext:d}=AC(),{matches:p}=ew(),y=xj(),v=EC(a,o);s&&(s.didRenderScripts=!0);let w=CC(p,null,n);k.useEffect(()=>{XB()},[]);let A=k.useMemo(()=>{var L;if(y)return null;let D=d?`window.__reactRouterContext = ${t};window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());`:" ",R=u?`${(L=e.hmr)!=null&&L.runtime?`import ${JSON.stringify(e.hmr.runtime)};`:""}${v?"":`import ${JSON.stringify(e.url)}`};
${w.map((F,U)=>{let M=`route${U}`,O=e.routes[F.route.id];Vi(O,`Route ${F.route.id} not found in manifest`);let{clientActionModule:z,clientLoaderModule:J,clientMiddlewareModule:G,hydrateFallbackModule:X,module:ie}=O,$=[...z?[{module:z,varName:`${M}_clientAction`}]:[],...J?[{module:J,varName:`${M}_clientLoader`}]:[],...G?[{module:G,varName:`${M}_clientMiddleware`}]:[],...X?[{module:X,varName:`${M}_HydrateFallback`}]:[],{module:ie,varName:`${M}_main`}];if($.length===1)return`import * as ${M} from ${JSON.stringify(ie)};`;let ee=$.map(V=>`import * as ${V.varName} from "${V.module}";`).join(`
`),H=`const ${M} = {${$.map(V=>`...${V.varName}`).join(",")}};`;return[ee,H].join(`
`)}).join(`
`)}
  ${v?`window.__reactRouterManifest = ${JSON.stringify(OB(e,c),null,2)};`:""}
  window.__reactRouterRouteModules = {${w.map((F,U)=>`${JSON.stringify(F.route.id)}:route${U}`).join(",")}};

import(${JSON.stringify(e.entry.module)});`:" ";return k.createElement(k.Fragment,null,k.createElement("script",{...i,suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:D},type:void 0}),k.createElement("script",{...i,suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:R},type:"module",async:!0}))},[]),C=tb||y?[]:JB(e.entry.imports.concat(wC(w,e,{includeHydrateFallback:!0}))),T=typeof e.sri=="object"?e.sri:{};return Tg(!y,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),tb||y?null:k.createElement(k.Fragment,null,typeof e.sri=="object"?k.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:T})}}):null,v?null:k.createElement("link",{rel:"modulepreload",href:e.url,crossOrigin:i.crossOrigin,integrity:T[e.url],suppressHydrationWarning:!0}),k.createElement("link",{rel:"modulepreload",href:e.entry.module,crossOrigin:i.crossOrigin,integrity:T[e.entry.module],suppressHydrationWarning:!0}),C.map(_=>k.createElement("link",{key:_,rel:"modulepreload",href:_,crossOrigin:i.crossOrigin,integrity:T[_],suppressHydrationWarning:!0})),A)}function JB(i){return[...new Set(i)]}function KB(...i){return e=>{i.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var _C=class extends k.Component{constructor(i){super(i),this.state={error:i.error||null,location:i.location}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location?{error:i.error||null,location:i.location}:{error:i.error||e.error,location:e.location}}render(){return this.state.error?k.createElement(pP,{error:this.state.error,isOutsideRemixApp:!0}):this.props.children}};function pP({error:i,isOutsideRemixApp:e}){console.error(i);let t=k.createElement("script",{dangerouslySetInnerHTML:{__html:`
        console.log(
          " Hey developer . You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."
        );
      `}});if(Bn(i))return k.createElement(gA,{title:"Unhandled Thrown Response!"},k.createElement("h1",{style:{fontSize:"24px"}},i.status," ",i.statusText),t);let n;if(i instanceof Error)n=i;else{let s=i==null?"Unknown Error":typeof i=="object"&&"toString"in i?i.toString():JSON.stringify(i);n=new Error(s)}return k.createElement(gA,{title:"Application Error!",isOutsideRemixApp:e},k.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),k.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},n.stack),t)}function gA({title:i,renderScripts:e,isOutsideRemixApp:t,children:n}){var a;let{routeModules:s}=qp();return(a=s.root)!=null&&a.Layout&&!t?n:k.createElement("html",{lang:"en"},k.createElement("head",null,k.createElement("meta",{charSet:"utf-8"}),k.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),k.createElement("title",null,i)),k.createElement("body",null,k.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},n,e?k.createElement(fP,null):null)))}var mP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{mP&&(window.__reactRouterVersion="7.10.1")}catch{}function QB(i,e){return b0({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:Hb({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||gP(),routes:i,mapRouteProperties:Xd,hydrationRouteProperties:A0,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function ZB(i,e){return b0({basename:e==null?void 0:e.basename,getContext:e==null?void 0:e.getContext,future:e==null?void 0:e.future,history:MD({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||gP(),routes:i,mapRouteProperties:Xd,hydrationRouteProperties:A0,dataStrategy:e==null?void 0:e.dataStrategy,patchRoutesOnNavigation:e==null?void 0:e.patchRoutesOnNavigation,window:e==null?void 0:e.window,unstable_instrumentations:e==null?void 0:e.unstable_instrumentations}).initialize()}function gP(){let i=window==null?void 0:window.__staticRouterHydrationData;return i&&i.errors&&(i={...i,errors:eO(i.errors)}),i}function eO(i){if(!i)return null;let e=Object.entries(i),t={};for(let[n,s]of e)if(s&&s.__type==="RouteErrorResponse")t[n]=new is(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let a=window[s.__subType];if(typeof a=="function")try{let o=new a(s.message);o.stack="",t[n]=o}catch{}}if(t[n]==null){let a=new Error(s.message);a.stack="",t[n]=a}}else t[n]=s;return t}function tO({basename:i,children:e,unstable_useTransitions:t,window:n}){let s=k.useRef();s.current==null&&(s.current=Hb({window:n,v5Compat:!0}));let a=s.current,[o,c]=k.useState({action:a.action,location:a.location}),u=k.useCallback(d=>{t===!1?c(d):k.startTransition(()=>c(d))},[t]);return k.useLayoutEffect(()=>a.listen(u),[a,u]),k.createElement(Zc,{basename:i,children:e,location:o.location,navigationType:o.action,navigator:a,unstable_useTransitions:t===!0})}function nO({basename:i,children:e,unstable_useTransitions:t,window:n}){let s=k.useRef();s.current==null&&(s.current=MD({window:n,v5Compat:!0}));let a=s.current,[o,c]=k.useState({action:a.action,location:a.location}),u=k.useCallback(d=>{t===!1?c(d):k.startTransition(()=>c(d))},[t]);return k.useLayoutEffect(()=>a.listen(u),[a,u]),k.createElement(Zc,{basename:i,children:e,location:o.location,navigationType:o.action,navigator:a,unstable_useTransitions:t===!0})}function yP({basename:i,children:e,history:t,unstable_useTransitions:n}){let[s,a]=k.useState({action:t.action,location:t.location}),o=k.useCallback(c=>{n===!1?a(c):k.startTransition(()=>a(c))},[n]);return k.useLayoutEffect(()=>t.listen(o),[t,o]),k.createElement(Zc,{basename:i,children:e,location:s.location,navigationType:s.action,navigator:t,unstable_useTransitions:n===!0})}yP.displayName="unstable_HistoryRouter";var vP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,NC=k.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:a,replace:o,state:c,target:u,to:d,preventScrollReset:p,viewTransition:y,...v},w){let{basename:A,unstable_useTransitions:C}=k.useContext(ss),T=typeof d=="string"&&vP.test(d),_,D=!1;if(typeof d=="string"&&T&&(_=d,mP))try{let J=new URL(window.location.href),G=d.startsWith("//")?new URL(J.protocol+d):new URL(d),X=ii(G.pathname,A);G.origin===J.origin&&X!=null?d=X+G.search+G.hash:D=!0}catch{Wt(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=mI(d,{relative:s}),[L,F,U]=GB(n,v),M=SP(d,{replace:o,state:c,target:u,preventScrollReset:p,relative:s,viewTransition:y,unstable_useTransitions:C});function O(J){e&&e(J),J.defaultPrevented||M(J)}let z=k.createElement("a",{...v,...U,href:_||R,onClick:D||a?e:O,ref:KB(w,F),target:u,"data-discover":!T&&t==="render"?"true":void 0});return L&&!T?k.createElement(k.Fragment,null,z,k.createElement(TC,{page:R})):z});NC.displayName="Link";var xP=k.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:a,to:o,viewTransition:c,children:u,...d},p){let y=Gp(o,{relative:d.relative}),v=Cs(),w=k.useContext(pl),{navigator:A,basename:C}=k.useContext(ss),T=w!=null&&CP(y)&&c===!0,_=A.encodeLocation?A.encodeLocation(y).pathname:y.pathname,D=v.pathname,R=w&&w.navigation&&w.navigation.location?w.navigation.location.pathname:null;t||(D=D.toLowerCase(),R=R?R.toLowerCase():null,_=_.toLowerCase()),R&&C&&(R=ii(R,C)||R);const L=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let F=D===_||!s&&D.startsWith(_)&&D.charAt(L)==="/",U=R!=null&&(R===_||!s&&R.startsWith(_)&&R.charAt(_.length)==="/"),M={isActive:F,isPending:U,isTransitioning:T},O=F?e:void 0,z;typeof n=="function"?z=n(M):z=[n,F?"active":null,U?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let J=typeof a=="function"?a(M):a;return k.createElement(NC,{...d,"aria-current":O,className:z,ref:p,style:J,to:o,viewTransition:c},typeof u=="function"?u(M):u)});xP.displayName="NavLink";var RC=k.forwardRef(({discover:i="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:a,method:o=hx,action:c,onSubmit:u,relative:d,preventScrollReset:p,viewTransition:y,...v},w)=>{let{unstable_useTransitions:A}=k.useContext(ss),C=kC(),T=EP(c,{relative:d}),_=o.toLowerCase()==="get"?"get":"post",D=typeof c=="string"&&vP.test(c),R=L=>{if(u&&u(L),L.defaultPrevented)return;L.preventDefault();let F=L.nativeEvent.submitter,U=(F==null?void 0:F.getAttribute("formmethod"))||o,M=()=>C(F||L.currentTarget,{fetcherKey:e,method:U,navigate:t,replace:s,state:a,relative:d,preventScrollReset:p,viewTransition:y});A&&t!==!1?k.startTransition(()=>M()):M()};return k.createElement("form",{ref:w,method:_,action:T,onSubmit:n?u:R,...v,"data-discover":!D&&i==="render"?"true":void 0})});RC.displayName="Form";function bP({getKey:i,storageKey:e,...t}){let n=k.useContext(gl),{basename:s}=k.useContext(ss),a=Cs(),o=Xb();AP({getKey:i,storageKey:e});let c=k.useMemo(()=>{if(!n||!i)return null;let d=vA(a,o,s,i);return d!==a.key?d:null},[]);if(!n||n.isSpaMode)return null;let u=((d,p)=>{if(!window.history.state||!window.history.state.key){let y=Math.random().toString(32).slice(2);window.history.replaceState({key:y},"")}try{let v=JSON.parse(sessionStorage.getItem(d)||"{}")[p||window.history.state.key];typeof v=="number"&&window.scrollTo(0,v)}catch(y){console.error(y),sessionStorage.removeItem(d)}}).toString();return k.createElement("script",{...t,suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:`(${u})(${JSON.stringify(e||yA)}, ${JSON.stringify(c)})`}})}bP.displayName="ScrollRestoration";function wP(i){return`${i} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function tw(i){let e=k.useContext(Xa);return Be(e,wP(i)),e}function MC(i){let e=k.useContext(pl);return Be(e,wP(i)),e}function SP(i,{target:e,replace:t,state:n,preventScrollReset:s,relative:a,viewTransition:o,unstable_useTransitions:c}={}){let u=Yb(),d=Cs(),p=Gp(i,{relative:a});return k.useCallback(y=>{if(sB(y,e)){y.preventDefault();let v=t!==void 0?t:Di(d)===Di(p),w=()=>u(i,{replace:v,state:n,preventScrollReset:s,relative:a,viewTransition:o});c?k.startTransition(()=>w()):w()}},[d,u,p,t,n,e,i,s,a,o,c])}function iO(i){Wt(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=k.useRef(Zx(i)),t=k.useRef(!1),n=Cs(),s=k.useMemo(()=>rB(n.search,t.current?null:e.current),[n.search]),a=Yb(),o=k.useCallback((c,u)=>{const d=Zx(typeof c=="function"?c(new URLSearchParams(s)):c);t.current=!0,a("?"+d,u)},[a,s]);return[s,o]}var sO=0,rO=()=>`__${String(++sO)}__`;function kC(){let{router:i}=tw("useSubmit"),{basename:e}=k.useContext(ss),t=Mj(),n=i.fetch,s=i.navigate;return k.useCallback(async(a,o={})=>{let{action:c,method:u,encType:d,formData:p,body:y}=lB(a,e);if(o.navigate===!1){let v=o.fetcherKey||rO();await n(v,t,o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||u,formEncType:o.encType||d,flushSync:o.flushSync})}else await s(o.action||c,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||u,formEncType:o.encType||d,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,s,e,t])}function EP(i,{relative:e}={}){let{basename:t}=k.useContext(ss),n=k.useContext(As);Be(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),a={...Gp(i||".",{relative:e})},o=Cs();if(i==null){a.search=o.search;let c=new URLSearchParams(a.search),u=c.getAll("index");if(u.some(p=>p==="")){c.delete("index"),u.filter(y=>y).forEach(y=>c.append("index",y));let p=c.toString();a.search=p?`?${p}`:""}}return(!i||i===".")&&s.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(a.pathname=a.pathname==="/"?t:qa([t,a.pathname])),Di(a)}function aO({key:i}={}){var F;let{router:e}=tw("useFetcher"),t=MC("useFetcher"),n=k.useContext(S0),s=k.useContext(As),a=(F=s.matches[s.matches.length-1])==null?void 0:F.route.id;Be(n,"useFetcher must be used inside a FetchersContext"),Be(s,"useFetcher must be used inside a RouteContext"),Be(a!=null,'useFetcher can only be used on routes that contain a unique "id"');let o=k.useId(),[c,u]=k.useState(i||o);i&&i!==c&&u(i);let{deleteFetcher:d,getFetcher:p,resetFetcher:y,fetch:v}=e;k.useEffect(()=>(p(c),()=>d(c)),[d,p,c]);let w=k.useCallback(async(U,M)=>{Be(a,"No routeId available for fetcher.load()"),await v(c,a,U,M)},[c,a,v]),A=kC(),C=k.useCallback(async(U,M)=>{await A(U,{...M,navigate:!1,fetcherKey:c})},[c,A]),T=k.useCallback(U=>y(c,U),[y,c]),_=k.useMemo(()=>{let U=k.forwardRef((M,O)=>k.createElement(RC,{...M,navigate:!1,fetcherKey:c,ref:O}));return U.displayName="fetcher.Form",U},[c]),D=t.fetchers.get(c)||qb,R=n.get(c);return k.useMemo(()=>({Form:_,submit:C,load:w,reset:T,...D,data:R}),[_,C,w,T,D,R])}function oO(){let i=MC("useFetchers");return Array.from(i.fetchers.entries()).map(([e,t])=>({...t,key:e}))}var yA="react-router-scroll-positions",ex={};function vA(i,e,t,n){let s=null;return n&&(t!=="/"?s=n({...i,pathname:ii(i.pathname,t)||i.pathname},e):s=n(i,e)),s==null&&(s=i.key),s}function AP({getKey:i,storageKey:e}={}){let{router:t}=tw("useScrollRestoration"),{restoreScrollPosition:n,preventScrollReset:s}=MC("useScrollRestoration"),{basename:a}=k.useContext(ss),o=Cs(),c=Xb(),u=SI();k.useEffect(()=>(window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration="auto"}),[]),cO(k.useCallback(()=>{if(u.state==="idle"){let d=vA(o,c,a,i);ex[d]=window.scrollY}try{sessionStorage.setItem(e||yA,JSON.stringify(ex))}catch(d){Wt(!1,`Failed to save scroll positions in sessionStorage, <ScrollRestoration /> will not work properly (${d}).`)}window.history.scrollRestoration="auto"},[u.state,i,a,o,c,e])),typeof document<"u"&&(k.useLayoutEffect(()=>{try{let d=sessionStorage.getItem(e||yA);d&&(ex=JSON.parse(d))}catch{}},[e]),k.useLayoutEffect(()=>{let d=t==null?void 0:t.enableScrollRestoration(ex,()=>window.scrollY,i?(p,y)=>vA(p,y,a,i):void 0);return()=>d&&d()},[t,a,i]),k.useLayoutEffect(()=>{if(n!==!1){if(typeof n=="number"){window.scrollTo(0,n);return}try{if(o.hash){let d=document.getElementById(decodeURIComponent(o.hash.slice(1)));if(d){d.scrollIntoView();return}}}catch{Wt(!1,`"${o.hash.slice(1)}" is not a decodable element ID. The view will not scroll to it.`)}s!==!0&&window.scrollTo(0,0)}},[o,n,s]))}function lO(i,e){let{capture:t}=e||{};k.useEffect(()=>{let n=t!=null?{capture:t}:void 0;return window.addEventListener("beforeunload",i,n),()=>{window.removeEventListener("beforeunload",i,n)}},[i,t])}function cO(i,e){let{capture:t}={};k.useEffect(()=>{let n=t!=null?{capture:t}:void 0;return window.addEventListener("pagehide",i,n),()=>{window.removeEventListener("pagehide",i,n)}},[i,t])}function uO({when:i,message:e}){let t=AI(i);k.useEffect(()=>{t.state==="blocked"&&(window.confirm(e)?setTimeout(t.proceed,0):t.reset())},[t,e]),k.useEffect(()=>{t.state==="blocked"&&!i&&t.reset()},[t,i])}function CP(i,{relative:e}={}){let t=k.useContext(w0);Be(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=tw("useViewTransitionState"),s=Gp(i,{relative:e});if(!t.isTransitioning)return!1;let a=ii(t.currentLocation.pathname,n)||t.currentLocation.pathname,o=ii(t.nextLocation.pathname,n)||t.nextLocation.pathname;return jp(s.pathname,o)!=null||jp(s.pathname,a)!=null}function dO({basename:i,children:e,location:t="/"}){typeof t=="string"&&(t=rr(t));let n="POP",s={pathname:t.pathname||"/",search:t.search||"",hash:t.hash||"",state:t.state!=null?t.state:null,key:t.key||"default"},a=TP();return k.createElement(Zc,{basename:i,children:e,location:s,navigationType:n,navigator:a,static:!0,unstable_useTransitions:!1})}function DC({context:i,router:e,hydrate:t=!0,nonce:n}){Be(e&&i,"You must provide `router` and `context` to <StaticRouterProvider>");let s={router:e,navigator:TP(),static:!0,staticContext:i,basename:i.basename||"/"},a=new Map,o="";if(t!==!1){let u={loaderData:i.loaderData,actionData:i.actionData,errors:fO(i.errors)};o=`window.__staticRouterHydrationData = JSON.parse(${vO(JSON.stringify(JSON.stringify(u)))});`}let{state:c}=s.router;return k.createElement(k.Fragment,null,k.createElement(Xa.Provider,{value:s},k.createElement(pl.Provider,{value:c},k.createElement(S0.Provider,{value:a},k.createElement(w0.Provider,{value:{isTransitioning:!1}},k.createElement(Zc,{basename:s.basename,location:c.location,navigationType:c.historyAction,navigator:s.navigator,static:s.static,unstable_useTransitions:!1},k.createElement(hO,{routes:e.routes,future:e.future,state:c})))))),o?k.createElement("script",{suppressHydrationWarning:!0,nonce:n,dangerouslySetInnerHTML:{__html:o}}):null)}function hO({routes:i,future:e,state:t}){return pC(i,void 0,t,void 0,e)}function fO(i){if(!i)return null;let e=Object.entries(i),t={};for(let[n,s]of e)Bn(s)?t[n]={...s,__type:"RouteErrorResponse"}:s instanceof Error?t[n]={message:s.message,__type:"Error",...s.name!=="Error"?{__subType:s.name}:{}}:t[n]=s;return t}function TP(){return{createHref:_P,encodeLocation:NP,push(i){throw new Error(`You cannot use navigator.push() on the server because it is a stateless environment. This error was probably triggered when you did a \`navigate(${JSON.stringify(i)})\` somewhere in your app.`)},replace(i){throw new Error(`You cannot use navigator.replace() on the server because it is a stateless environment. This error was probably triggered when you did a \`navigate(${JSON.stringify(i)}, { replace: true })\` somewhere in your app.`)},go(i){throw new Error(`You cannot use navigator.go() on the server because it is a stateless environment. This error was probably triggered when you did a \`navigate(${i})\` somewhere in your app.`)},back(){throw new Error("You cannot use navigator.back() on the server because it is a stateless environment.")},forward(){throw new Error("You cannot use navigator.forward() on the server because it is a stateless environment.")}}}function pO(i,e){return QD(i,{...e,mapRouteProperties:Xd})}function IC(i,e,t={}){let n={},s=qc(i,Xd,void 0,n),a=e.matches.map(c=>{let u=n[c.route.id]||c.route;return{...c,route:u}}),o=c=>`You cannot use router.${c}() on the server because it is a stateless environment`;return{get basename(){return e.basename},get future(){return{v8_middleware:!1,...t==null?void 0:t.future}},get state(){return{historyAction:"POP",location:e.location,matches:a,loaderData:e.loaderData,actionData:e.actionData,errors:e.errors,initialized:!0,navigation:Sg,restoreScrollPosition:null,preventScrollReset:!1,revalidation:"idle",fetchers:new Map,blockers:new Map}},get routes(){return s},get window(){},initialize(){throw o("initialize")},subscribe(){throw o("subscribe")},enableScrollRestoration(){throw o("enableScrollRestoration")},navigate(){throw o("navigate")},fetch(){throw o("fetch")},revalidate(){throw o("revalidate")},createHref:_P,encodeLocation:NP,getFetcher(){return qb},deleteFetcher(){throw o("deleteFetcher")},resetFetcher(){throw o("resetFetcher")},dispose(){throw o("dispose")},getBlocker(){return $l},deleteBlocker(){throw o("deleteBlocker")},patchRoutes(){throw o("patchRoutes")},_internalFetchControllers:new Map,_internalSetRoutes(){throw o("_internalSetRoutes")},_internalSetStateDoNotUseOrYouWillBreakYourApp(){throw o("_internalSetStateDoNotUseOrYouWillBreakYourApp")}}}function _P(i){return typeof i=="string"?i:Di(i)}function NP(i){let e=typeof i=="string"?i:Di(i);e=e.replace(/ $/,"%20");let t=mO.test(e)?new URL(e):new URL(e,"http://localhost");return{pathname:t.pathname,search:t.search,hash:t.hash}}var mO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gO={"&":"\\u0026",">":"\\u003e","<":"\\u003c","\u2028":"\\u2028","\u2029":"\\u2029"},yO=/[&><\u2028\u2029]/g;function vO(i){return i.replace(yO,e=>gO[e])}var qr={},VR;function xO(){if(VR)return qr;VR=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.parseCookie=c,qr.parse=c,qr.stringifyCookie=u,qr.stringifySetCookie=d,qr.serialize=d,qr.parseSetCookie=p,qr.stringifySetCookie=d,qr.serialize=d;const i=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=/^-?\d+$/,a=Object.prototype.toString,o=(()=>{const T=function(){};return T.prototype=Object.create(null),T})();function c(T,_){const D=new o,R=T.length;if(R<2)return D;const L=(_==null?void 0:_.decode)||A;let F=0;do{const U=v(T,F,R);if(U===-1)break;const M=y(T,F,R);if(U>M){F=T.lastIndexOf(";",U-1)+1;continue}const O=w(T,F,U);D[O]===void 0&&(D[O]=L(w(T,U+1,M))),F=M+1}while(F<R);return D}function u(T,_){const D=(_==null?void 0:_.encode)||encodeURIComponent,R=[];for(const L of Object.keys(T)){const F=T[L];if(F===void 0)continue;if(!i.test(L))throw new TypeError(`cookie name is invalid: ${L}`);const U=D(F);if(!e.test(U))throw new TypeError(`cookie val is invalid: ${F}`);R.push(`${L}=${U}`)}return R.join("; ")}function d(T,_,D){const R=typeof T=="object"?T:{...D,name:T,value:String(_)},L=typeof _=="object"?_:D,F=(L==null?void 0:L.encode)||encodeURIComponent;if(!i.test(R.name))throw new TypeError(`argument name is invalid: ${R.name}`);const U=R.value?F(R.value):"";if(!e.test(U))throw new TypeError(`argument val is invalid: ${R.value}`);let M=R.name+"="+U;if(R.maxAge!==void 0){if(!Number.isInteger(R.maxAge))throw new TypeError(`option maxAge is invalid: ${R.maxAge}`);M+="; Max-Age="+R.maxAge}if(R.domain){if(!t.test(R.domain))throw new TypeError(`option domain is invalid: ${R.domain}`);M+="; Domain="+R.domain}if(R.path){if(!n.test(R.path))throw new TypeError(`option path is invalid: ${R.path}`);M+="; Path="+R.path}if(R.expires){if(!C(R.expires)||!Number.isFinite(R.expires.valueOf()))throw new TypeError(`option expires is invalid: ${R.expires}`);M+="; Expires="+R.expires.toUTCString()}if(R.httpOnly&&(M+="; HttpOnly"),R.secure&&(M+="; Secure"),R.partitioned&&(M+="; Partitioned"),R.priority)switch(typeof R.priority=="string"?R.priority.toLowerCase():void 0){case"low":M+="; Priority=Low";break;case"medium":M+="; Priority=Medium";break;case"high":M+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${R.priority}`)}if(R.sameSite)switch(typeof R.sameSite=="string"?R.sameSite.toLowerCase():R.sameSite){case!0:case"strict":M+="; SameSite=Strict";break;case"lax":M+="; SameSite=Lax";break;case"none":M+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${R.sameSite}`)}return M}function p(T,_){const D=(_==null?void 0:_.decode)||A,R=T.length,L=y(T,0,R),F=v(T,0,L),U=F===-1?{name:"",value:D(w(T,0,L))}:{name:w(T,0,F),value:D(w(T,F+1,L))};let M=L+1;for(;M<R;){const O=y(T,M,R),z=v(T,M,O),J=z===-1?w(T,M,O):w(T,M,z),G=z===-1?void 0:w(T,z+1,O);switch(J.toLowerCase()){case"httponly":U.httpOnly=!0;break;case"secure":U.secure=!0;break;case"partitioned":U.partitioned=!0;break;case"domain":U.domain=G;break;case"path":U.path=G;break;case"max-age":G&&s.test(G)&&(U.maxAge=Number(G));break;case"expires":if(!G)break;const X=new Date(G);Number.isFinite(X.valueOf())&&(U.expires=X);break;case"priority":if(!G)break;const ie=G.toLowerCase();(ie==="low"||ie==="medium"||ie==="high")&&(U.priority=ie);break;case"samesite":if(!G)break;const $=G.toLowerCase();($==="lax"||$==="strict"||$==="none")&&(U.sameSite=$);break}M=O+1}return U}function y(T,_,D){const R=T.indexOf(";",_);return R===-1?D:R}function v(T,_,D){const R=T.indexOf("=",_);return R<D?R:-1}function w(T,_,D){let R=_,L=D;do{const F=T.charCodeAt(R);if(F!==32&&F!==9)break}while(++R<L);for(;L>R;){const F=T.charCodeAt(L-1);if(F!==32&&F!==9)break;L--}return T.slice(R,L)}function A(T){if(T.indexOf("%")===-1)return T;try{return decodeURIComponent(T)}catch{return T}}function C(T){return a.call(T)==="[object Date]"}return qr}var qR=xO(),Ph={exports:{}},$R;function bO(){if($R)return Ph.exports;$R=1;var i={decodeValues:!0,map:!1,silent:!1};function e(u){return typeof u!="string"||u in{}}function t(){return Object.create(null)}function n(u){return typeof u=="string"&&!!u.trim()}function s(u,d){var p=u.split(";").filter(n),y=p.shift(),v=a(y),w=v.name,A=v.value;if(d=d?Object.assign({},i,d):i,e(w))return null;try{A=d.decodeValues?decodeURIComponent(A):A}catch(T){console.error("set-cookie-parser: failed to decode cookie value. Set options.decodeValues=false to disable decoding.",T)}var C=t();return C.name=w,C.value=A,p.forEach(function(T){var _=T.split("="),D=_.shift().trimLeft().toLowerCase();if(!e(D)){var R=_.join("=");if(D==="expires")C.expires=new Date(R);else if(D==="max-age"){var L=parseInt(R,10);Number.isNaN(L)||(C.maxAge=L)}else D==="secure"?C.secure=!0:D==="httponly"?C.httpOnly=!0:D==="samesite"?C.sameSite=R:D==="partitioned"?C.partitioned=!0:D&&(C[D]=R)}}),C}function a(u){var d="",p="",y=u.split("=");return y.length>1?(d=y.shift(),p=y.join("=")):p=u,{name:d,value:p}}function o(u,d){if(d=d?Object.assign({},i,d):i,!u)return d.map?t():[];if(u.headers)if(typeof u.headers.getSetCookie=="function")u=u.headers.getSetCookie();else if(u.headers["set-cookie"])u=u.headers["set-cookie"];else{var p=u.headers[Object.keys(u.headers).find(function(v){return v.toLowerCase()==="set-cookie"})];!p&&u.headers.cookie&&!d.silent&&console.warn("Warning: set-cookie-parser appears to have been called on a request object. It is designed to parse Set-Cookie headers from responses, not Cookie headers from requests. Set the option {silent: true} to suppress this warning."),u=p}if(Array.isArray(u)||(u=[u]),d.map){var y=t();return u.filter(n).reduce(function(v,w){var A=s(w,d);return A&&!e(A.name)&&(v[A.name]=A),v},y)}else return u.filter(n).map(function(v){return s(v,d)}).filter(Boolean)}function c(u){if(Array.isArray(u))return u;if(typeof u!="string")return[];var d=[],p=0,y,v,w,A,C;function T(){for(;p<u.length&&/\s/.test(u.charAt(p));)p+=1;return p<u.length}function _(){return v=u.charAt(p),v!=="="&&v!==";"&&v!==","}for(;p<u.length;){for(y=p,C=!1;T();)if(v=u.charAt(p),v===","){for(w=p,p+=1,T(),A=p;p<u.length&&_();)p+=1;p<u.length&&u.charAt(p)==="="?(C=!0,p=A,d.push(u.substring(y,w)),y=p):p=w+1}else p+=1;(!C||p>=u.length)&&d.push(u.substring(y,u.length))}return d}return Ph.exports=o,Ph.exports.parse=o,Ph.exports.parseString=s,Ph.exports.splitCookiesString=c,Ph.exports}var wO=bO(),GE={};function SO({context:i,url:e,nonce:t}){typeof e=="string"&&(e=new URL(e));let{manifest:n,routeModules:s,criticalCss:a,serverHandoffString:o}=i,c=aP(n.routes,s,i.future,i.isSpaMode);i.staticHandlerContext.loaderData={...i.staticHandlerContext.loaderData};for(let d of i.staticHandlerContext.matches){let p=d.route.id,y=s[p],v=i.manifest.routes[p];y&&v&&T0(p,y.clientLoader,v.hasLoader,i.isSpaMode)&&(y.HydrateFallback||!v.hasLoader)&&delete i.staticHandlerContext.loaderData[p]}let u=IC(c,i.staticHandlerContext);return k.createElement(k.Fragment,null,k.createElement(gl.Provider,{value:{manifest:n,routeModules:s,criticalCss:a,serverHandoffString:o,future:i.future,ssr:i.ssr,isSpaMode:i.isSpaMode,routeDiscovery:i.routeDiscovery,serializeError:i.serializeError,renderMeta:i.renderMeta}},k.createElement(_C,{location:u.state.location},k.createElement(DC,{router:u,context:i.staticHandlerContext,hydrate:!1}))),i.serverHandoffStream?k.createElement(k.Suspense,null,k.createElement(KI,{context:i,identifier:0,reader:i.serverHandoffStream.getReader(),textDecoder:new TextDecoder,nonce:t})):null)}function EO(i,e){return function({initialEntries:n,initialIndex:s,hydrationData:a,future:o}){let c=k.useRef(),u=k.useRef();if(c.current==null){u.current={future:{unstable_subResourceIntegrity:(o==null?void 0:o.unstable_subResourceIntegrity)===!0,v8_middleware:(o==null?void 0:o.v8_middleware)===!0},manifest:{routes:{},entry:{imports:[],module:""},url:"",version:""},routeModules:{},ssr:!1,isSpaMode:!1,routeDiscovery:{mode:"lazy",manifestPath:"/__manifest"}};let d=RP(qc(i,p=>p),e!==void 0?e:o!=null&&o.v8_middleware?new Va:{},u.current.manifest,u.current.routeModules);c.current=TI(d,{initialEntries:n,initialIndex:s,hydrationData:a})}return k.createElement(gl.Provider,{value:u.current},k.createElement(_I,{router:c.current}))}}function RP(i,e,t,n,s){return i.map(a=>{if(!a.id)throw new Error("Expected a route.id in react-router processRoutes() function");let o={id:a.id,path:a.path,index:a.index,Component:a.Component?kI(a.Component):void 0,HydrateFallback:a.HydrateFallback?II(a.HydrateFallback):void 0,ErrorBoundary:a.ErrorBoundary?LI(a.ErrorBoundary):void 0,action:a.action?u=>a.action({...u,context:e}):void 0,loader:a.loader?u=>a.loader({...u,context:e}):void 0,middleware:a.middleware?a.middleware.map(u=>(...d)=>u({...d[0],context:e},d[1])):void 0,handle:a.handle,shouldRevalidate:a.shouldRevalidate},c={id:a.id,path:a.path,index:a.index,parentId:s,hasAction:a.action!=null,hasLoader:a.loader!=null,hasClientAction:!1,hasClientLoader:!1,hasClientMiddleware:!1,hasErrorBoundary:a.ErrorBoundary!=null,module:"build/stub-path-to-module.js",clientActionModule:void 0,clientLoaderModule:void 0,clientMiddlewareModule:void 0,hydrateFallbackModule:void 0};return t.routes[o.id]=c,n[a.id]={default:o.Component||NI,ErrorBoundary:o.ErrorBoundary||void 0,handle:a.handle,links:a.links,meta:a.meta,shouldRevalidate:a.shouldRevalidate},a.children&&(o.children=RP(a.children,e,t,n,o.id)),o})}var PC=new TextEncoder,AO=async(i,e)=>{let t=PC.encode(i),n=await MP(e,["sign"]),s=await crypto.subtle.sign("HMAC",n,t),a=btoa(String.fromCharCode(...new Uint8Array(s))).replace(/=+$/,"");return i+"."+a},CO=async(i,e)=>{let t=i.lastIndexOf("."),n=i.slice(0,t),s=i.slice(t+1),a=PC.encode(n),o=await MP(e,["verify"]);try{let c=TO(atob(s));return await crypto.subtle.verify("HMAC",o,c,a)?n:!1}catch{return!1}},MP=async(i,e)=>crypto.subtle.importKey("raw",PC.encode(i),{name:"HMAC",hash:"SHA-256"},!1,e);function TO(i){let e=new Uint8Array(i.length);for(let t=0;t<i.length;t++)e[t]=i.charCodeAt(t);return e}var LC=(i,e={})=>{let{secrets:t=[],...n}={path:"/",sameSite:"lax",...e};return DO(i,n.expires),{get name(){return i},get isSigned(){return t.length>0},get expires(){return typeof n.maxAge<"u"?new Date(Date.now()+n.maxAge*1e3):n.expires},async parse(s,a){if(!s)return null;let o=qR.parse(s,{...n,...a});if(i in o){let c=o[i];return typeof c=="string"&&c!==""?await NO(c,t):""}else return null},async serialize(s,a){return qR.serialize(i,s===""?"":await _O(s,t),{...n,...a})}}},FC=i=>i!=null&&typeof i.name=="string"&&typeof i.isSigned=="boolean"&&typeof i.parse=="function"&&typeof i.serialize=="function";async function _O(i,e){let t=RO(i);return e.length>0&&(t=await AO(t,e[0])),t}async function NO(i,e){if(e.length>0){for(let t of e){let n=await CO(i,t);if(n!==!1)return YR(n)}return null}return YR(i)}function RO(i){return btoa(kO(encodeURIComponent(JSON.stringify(i))))}function YR(i){try{return JSON.parse(decodeURIComponent(MO(atob(i))))}catch{return{}}}function MO(i){let e=i.toString(),t="",n=0,s,a;for(;n<e.length;)s=e.charAt(n++),/[\w*+\-./@]/.exec(s)?t+=s:(a=s.charCodeAt(0),a<256?t+="%"+WR(a,2):t+="%u"+WR(a,4).toUpperCase());return t}function WR(i,e){let t=i.toString(16);for(;t.length<e;)t="0"+t;return t}function kO(i){let e=i.toString(),t="",n=0,s,a;for(;n<e.length;){if(s=e.charAt(n++),s==="%"){if(e.charAt(n)==="u"){if(a=e.slice(n+1,n+5),/^[\da-f]{4}$/i.exec(a)){t+=String.fromCharCode(parseInt(a,16)),n+=5;continue}}else if(a=e.slice(n,n+2),/^[\da-f]{2}$/i.exec(a)){t+=String.fromCharCode(parseInt(a,16)),n+=2;continue}}t+=s}return t}function DO(i,e){Tg(!e,`The "${i}" cookie has an "expires" property set. This will cause the expires value to not be updated when the session is committed. Instead, you should set the expires value when serializing the cookie. You can use \`commitSession(session, { expires })\` if using a session storage object, or \`cookie.serialize("value", { expires })\` if you're using the cookie directly.`)}function IO(i){return Object.keys(i).reduce((e,t)=>{let n=i[t];return n&&(e[t]=n.module),e},{})}var kP=(i=>(i.Development="development",i.Production="production",i.Test="test",i))(kP||{});function PO(i){return i==="development"||i==="production"||i==="test"}function nw(i,e){if(i instanceof Error&&e!=="development"){let t=new Error("Unexpected Server Error");return t.stack=void 0,t}return i}function nb(i,e){return Object.entries(i).reduce((t,[n,s])=>Object.assign(t,{[n]:nw(s,e)}),{})}function DP(i,e){let t=nw(i,e);return{message:t.message,stack:t.stack}}function XR(i,e){if(!i)return null;let t=Object.entries(i),n={};for(let[s,a]of t)if(Bn(a))n[s]={...a,__type:"RouteErrorResponse"};else if(a instanceof Error){let o=nw(a,e);n[s]={message:o.message,stack:o.stack,__type:"Error",...o.name!=="Error"?{__subType:o.name}:{}}}else n[s]=a;return n}function xA(i,e,t){let n=Es(i,e,t);return n?n.map(s=>({params:s.params,pathname:s.pathname,route:s.route})):null}async function JR(i,e){let t=await i({request:FO(LO(e.request)),params:e.params,context:e.context,unstable_pattern:e.unstable_pattern});if(Vc(t)&&t.init&&t.init.status&&$b(t.init.status))throw new Response(null,t.init);return t}function LO(i){let e=new URL(i.url),t=e.searchParams.getAll("index");e.searchParams.delete("index");let n=[];for(let a of t)a&&n.push(a);for(let a of n)e.searchParams.append("index",a);let s={method:i.method,body:i.body,headers:i.headers,signal:i.signal};return s.body&&(s.duplex="half"),new Request(e.href,s)}function FO(i){let e=new URL(i.url);e.searchParams.delete("_routes");let t={method:i.method,body:i.body,headers:i.headers,signal:i.signal};return t.body&&(t.duplex="half"),new Request(e.href,t)}function mx(i,e){if(i===!1||i===null||typeof i>"u")throw console.error("The following error is a bug in React Router; please open an issue! https://github.com/remix-run/react-router/issues/new/choose"),new Error(e)}var IP="__reactRouterDevServerHooks";function UO(i){globalThis[IP]=i}function VE(){return globalThis[IP]}function PP(i,e){if(typeof process<"u")try{if((GE==null?void 0:GE.IS_RR_BUILD_REQUEST)==="yes")return i.headers.get(e)}catch{}return null}function LP(i){let e={};return Object.values(i).forEach(t=>{if(t){let n=t.parentId||"";e[n]||(e[n]=[]),e[n].push(t)}}),e}function FP(i,e="",t=LP(i)){return(t[e]||[]).map(n=>({...n,children:FP(i,n.id,t)}))}function UP(i,e,t="",n=LP(i)){return(n[t]||[]).map(s=>{let a={hasErrorBoundary:s.id==="root"||s.module.ErrorBoundary!=null,id:s.id,path:s.path,middleware:s.module.middleware,loader:s.module.loader?async o=>{let c=PP(o.request,"X-React-Router-Prerender-Data");if(c!=null){let d=c&&decodeURI(c);mx(d,"Missing prerendered data for route");let p=new TextEncoder().encode(d),y=new ReadableStream({start(A){A.enqueue(p),A.close()}}),w=(await Zb(y,global)).value;if(w&&ll in w){let A=w[ll],C={status:A.status};throw A.reload?HD(A.redirect,C):A.replace?zD(A.redirect,C):x0(A.redirect,C)}else{mx(w&&s.id in w,"Unable to decode prerendered data");let A=w[s.id];return mx("data"in A,"Unable to process prerendered data"),A.data}}return await JR(s.module.loader,o)}:void 0,action:s.module.action?o=>JR(s.module.action,o):void 0,handle:s.module.handle};return s.index?{index:!0,...a}:{caseSensitive:s.caseSensitive,children:UP(i,e,s.id,n),...a}})}function KR(i){return vC(JSON.stringify(i))}function UC(i,e){return jO(i,t=>{let n=e.routes[t.route.id];return mx(n,`Route with id "${t.route.id}" not found in build`),n.module.headers})}function jO(i,e,t){let n=i.errors?i.matches.findIndex(c=>i.errors[c.route.id]):-1,s=n>=0?i.matches.slice(0,n+1):i.matches,a;if(n>=0){let{actionHeaders:c,actionData:u,loaderHeaders:d,loaderData:p}=i;i.matches.slice(n).some(y=>{let v=y.route.id;return c[v]&&(!u||!u.hasOwnProperty(v))?a=c[v]:d[v]&&!p.hasOwnProperty(v)&&(a=d[v]),a!=null})}const o=new Headers(t);return s.reduce((c,u,d)=>{let{id:p}=u.route,y=i.loaderHeaders[p]||new Headers,v=i.actionHeaders[p]||new Headers,w=a!=null&&d===s.length-1,A=w&&a!==y&&a!==v,C=e(u);if(C==null){let _=new Headers(c);return A&&Eu(a,_),Eu(v,_),Eu(y,_),_}let T=new Headers(typeof C=="function"?C({loaderHeaders:y,parentHeaders:c,actionHeaders:v,errorHeaders:w?a:void 0}):C);return A&&Eu(a,T),Eu(v,T),Eu(y,T),Eu(c,T),T},new Headers(o))}function Eu(i,e){let t=i.get("Set-Cookie");if(t){let n=wO.splitCookiesString(t),s=new Set(e.getSetCookie());n.forEach(a=>{s.has(a)||e.append("Set-Cookie",a)})}}var jP=new Set([...JI,304]);async function BO(i,e,t,n,s,a,o){try{let p=new Request(s,{method:n.method,body:n.body,headers:n.headers,signal:n.signal,...n.body?{duplex:"half"}:void 0}),y=await t.query(p,{requestContext:a,skipLoaderErrorBubbling:!0,skipRevalidation:!0,generateMiddlewareResponse:i.future.v8_middleware?async v=>{try{let w=await v(p);return c(w)}catch(w){return u(w)}}:void 0});return c(y)}catch(p){return u(p)}function c(p){return xn(p)?p:d(p)}function u(p){return o(p),Rg(n,i,e,{result:{error:p},headers:new Headers,status:500})}function d(p){let y=UC(p,i);if($b(p.statusCode)&&y.has("Location"))return new Response(null,{status:p.statusCode,headers:y});p.errors&&(Object.values(p.errors).forEach(w=>{(!Bn(w)||w.error)&&o(w)}),p.errors=nb(p.errors,e));let v;return p.errors?v={error:Object.values(p.errors)[0]}:v={data:Object.values(p.actionData||{})[0]},Rg(n,i,e,{result:v,headers:y,status:p.statusCode})}}async function OO(i,e,t,n,s,a,o){let c=new URL(n.url).searchParams.get("_routes"),u=c?new Set(c.split(",")):null;try{let v=new Request(s,{headers:n.headers,signal:n.signal}),w=await t.query(v,{requestContext:a,filterMatchesToLoad:A=>!u||u.has(A.route.id),skipLoaderErrorBubbling:!0,generateMiddlewareResponse:i.future.v8_middleware?async A=>{try{let C=await A(v);return d(C)}catch(C){return p(C)}}:void 0});return d(w)}catch(v){return p(v)}function d(v){return xn(v)?v:y(v)}function p(v){return o(v),Rg(n,i,e,{result:{error:v},headers:new Headers,status:500})}function y(v){let w=UC(v,i);if($b(v.statusCode)&&w.has("Location"))return new Response(null,{status:v.statusCode,headers:w});v.errors&&(Object.values(v.errors).forEach(T=>{(!Bn(T)||T.error)&&o(T)}),v.errors=nb(v.errors,e));let A={},C=new Set(v.matches.filter(T=>u?u.has(T.route.id):T.route.loader!=null).map(T=>T.route.id));if(v.errors)for(let[T,_]of Object.entries(v.errors))A[T]={error:_};for(let[T,_]of Object.entries(v.loaderData))!(T in A)&&C.has(T)&&(A[T]={data:_});return Rg(n,i,e,{result:A,headers:w,status:v.statusCode})}}function Rg(i,e,t,{result:n,headers:s,status:a}){let o=new Headers(s);return o.set("X-Remix-Response","yes"),jP.has(a)?new Response(null,{status:a,headers:o}):(o.set("Content-Type","text/x-script"),o.delete("Content-Length"),new Response(bA(n,i.signal,e.entry.module.streamTimeout,t),{status:a||200,headers:o}))}function QR(i,e,t,n){let s=HO(i.status,i.headers,t.basename),a=new Headers(i.headers);return a.delete("Location"),a.set("Content-Type","text/x-script"),Rg(e,t,n,{result:e.method==="GET"?{[ll]:s}:s,headers:a,status:xC})}function HO(i,e,t){let n=e.get("Location");return t&&(n=ii(n,t)||n),{redirect:n,status:i,revalidate:e.has("X-Remix-Revalidate")||e.has("Set-Cookie"),reload:e.has("X-Remix-Reload-Document"),replace:e.has("X-Remix-Replace")}}function bA(i,e,t,n){let s=new AbortController,a=setTimeout(()=>s.abort(new Error("Server Timeout")),typeof t=="number"?t:4950);return e.addEventListener("abort",()=>clearTimeout(a)),gB(i,{signal:s.signal,plugins:[o=>{if(o instanceof Error){let{name:c,message:u,stack:d}=n==="production"?nw(o,n):o;return["SanitizedError",c,u,d]}if(o instanceof is){let{data:c,status:u,statusText:d}=o;return["ErrorResponse",c,u,d]}if(o&&typeof o=="object"&&ll in o)return["SingleFetchRedirect",o[ll]]}],postPlugins:[o=>{if(o&&typeof o=="object")return["SingleFetchClassInstance",Object.fromEntries(Object.entries(o))]},()=>["SingleFetchFallback"]]})}function ZR(i,e){let t=FP(i.routes),n=UP(i.routes,i.future),s=PO(e)?e:"production",a=QD(n,{basename:i.basename,unstable_instrumentations:i.entry.module.unstable_instrumentations}),o=i.entry.module.handleError||((u,{request:d})=>{s!=="test"&&!d.signal.aborted&&console.error(Bn(u)&&u.error?u.error:u)}),c=async(u,d)=>{var L,F,U;let p={},y,v=M=>{var O,z;e==="development"&&((z=(O=VE())==null?void 0:O.processRequestError)==null||z.call(O,M)),o(M,{context:y,params:p,request:u})};if(i.future.v8_middleware){if(d&&!(d instanceof Va)){let M=new Error("Invalid `context` value provided to `handleRequest`. When middleware is enabled you must return an instance of `RouterContextProvider` from your `getLoadContext` function.");return v(M),ib(M,s)}y=d||new Va}else y=d||{};let w=new URL(u.url),A=i.basename||"/",C=w.pathname;ii(C,A)==="/_root.data"?C=A:C.endsWith(".data")&&(C=C.replace(/\.data$/,"")),ii(C,A)!=="/"&&C.endsWith("/")&&(C=C.slice(0,-1));let T=PP(u,"X-React-Router-SPA-Mode")==="yes";if(!i.ssr){let M=decodeURI(C);if(A!=="/"){let O=ii(M,A);if(O==null)return o(new is(404,"Not Found",`Refusing to prerender the \`${M}\` path because it does not start with the basename \`${A}\``),{context:y,params:p,request:u}),new Response("Not Found",{status:404,statusText:"Not Found"});M=O}if(i.prerender.length===0)T=!0;else if(!i.prerender.includes(M)&&!i.prerender.includes(M+"/")){if(w.pathname.endsWith(".data"))return o(new is(404,"Not Found",`Refusing to SSR the path \`${M}\` because \`ssr:false\` is set and the path is not included in the \`prerender\` config, so in production the path will be a 404.`),{context:y,params:p,request:u}),new Response("Not Found",{status:404,statusText:"Not Found"});T=!0}}let _=dP(i.routeDiscovery.manifestPath,A);if(w.pathname===_)try{return await GO(i,t,w)}catch(M){return v(M),new Response("Unknown Server Error",{status:500})}let D=xA(t,C,i.basename);D&&D.length>0&&Object.assign(p,D[0].params);let R;if(w.pathname.endsWith(".data")){let M=new URL(u.url);M.pathname=C;let O=xA(t,M.pathname,i.basename);R=await VO(s,i,a,u,M,y,v),Qx(R)&&(R=QR(R,u,i,s)),i.entry.module.handleDataRequest&&(R=await i.entry.module.handleDataRequest(R,{context:y,params:O?O[0].params:{},request:u}),Qx(R)&&(R=QR(R,u,i,s)))}else if(!T&&D&&D[D.length-1].route.module.default==null&&D[D.length-1].route.module.ErrorBoundary==null)R=await $O(s,i,a,D.slice(-1)[0].route.id,u,y,v);else{let{pathname:M}=w,O;i.unstable_getCriticalCss?O=await i.unstable_getCriticalCss({pathname:M}):e==="development"&&((L=VE())!=null&&L.getCriticalCss)&&(O=await((U=(F=VE())==null?void 0:F.getCriticalCss)==null?void 0:U.call(F,M))),R=await qO(s,i,a,u,y,v,T,O)}return u.method==="HEAD"?new Response(null,{headers:R.headers,status:R.status,statusText:R.statusText}):R};return i.entry.module.unstable_instrumentations&&(c=ZU(c,i.entry.module.unstable_instrumentations.map(u=>u.handler).filter(Boolean))),{routes:t,dataRoutes:n,serverMode:s,staticHandler:a,errorHandler:o,requestHandler:c}}var zO=(i,e)=>{let t,n,s,a,o,c;return async function(d,p){if(t=typeof i=="function"?await i():i,typeof i=="function"){let y=ZR(t,e);n=y.routes,s=y.serverMode,a=y.staticHandler,o=y.errorHandler,c=y.requestHandler}else if(!n||!s||!a||!o||!c){let y=ZR(t,e);n=y.routes,s=y.serverMode,a=y.staticHandler,o=y.errorHandler,c=y.requestHandler}return c(d,p)}};async function GO(i,e,t){if(i.assets.version!==t.searchParams.get("version"))return new Response(null,{status:204,headers:{"X-Remix-Reload-Document":"true"}});let n={};if(t.searchParams.has("paths")){let s=new Set;(t.searchParams.get("paths")||"").split(",").filter(Boolean).forEach(c=>{c.startsWith("/")||(c=`/${c}`);let u=c.split("/").slice(1);u.forEach((d,p)=>{let y=u.slice(0,p+1).join("/");s.add(`/${y}`)})});for(let c of s){let u=xA(e,c,i.basename);if(u)for(let d of u){let p=d.route.id,y=i.assets.routes[p];y&&(n[p]=y)}}return Response.json(n,{headers:{"Cache-Control":"public, max-age=31536000, immutable"}})}return new Response("Invalid Request",{status:400})}async function VO(i,e,t,n,s,a,o){return n.method!=="GET"?await BO(e,i,t,n,s,a,o):await OO(e,i,t,n,s,a,o)}async function qO(i,e,t,n,s,a,o,c){try{let d=await t.query(n,{requestContext:s,generateMiddlewareResponse:e.future.v8_middleware?async p=>{try{let y=await p(n);return xn(y)||(y=await u(y,o)),y}catch(y){return a(y),new Response(null,{status:500})}}:void 0});return xn(d)||(d=await u(d,o)),d}catch(d){return a(d),new Response(null,{status:500})}async function u(d,p){let y=UC(d,e);if(jP.has(d.statusCode))return new Response(null,{status:d.statusCode,headers:y});d.errors&&(Object.values(d.errors).forEach(T=>{(!Bn(T)||T.error)&&a(T)}),d.errors=nb(d.errors,i));let v={loaderData:d.loaderData,actionData:d.actionData,errors:XR(d.errors,i)},w={basename:e.basename,future:e.future,routeDiscovery:e.routeDiscovery,ssr:e.ssr,isSpaMode:p},A={manifest:e.assets,routeModules:IO(e.routes),staticHandlerContext:d,criticalCss:c,serverHandoffString:KR({...w,criticalCss:c}),serverHandoffStream:bA(v,n.signal,e.entry.module.streamTimeout,i),renderMeta:{},future:e.future,ssr:e.ssr,routeDiscovery:e.routeDiscovery,isSpaMode:p,serializeError:T=>DP(T,i)},C=e.entry.module.default;try{return await C(n,d.statusCode,y,A,s)}catch(T){a(T);let _=T;if(xn(T))try{let R=await WO(T);_=new is(T.status,T.statusText,R)}catch{}d=ZD(t.dataRoutes,d,_),d.errors&&(d.errors=nb(d.errors,i));let D={loaderData:d.loaderData,actionData:d.actionData,errors:XR(d.errors,i)};A={...A,staticHandlerContext:d,serverHandoffString:KR(w),serverHandoffStream:bA(D,n.signal,e.entry.module.streamTimeout,i),renderMeta:{}};try{return await C(n,d.statusCode,y,A,s)}catch(R){return a(R),ib(R,i)}}}}async function $O(i,e,t,n,s,a,o){try{let d=await t.queryRoute(s,{routeId:n,requestContext:a,generateMiddlewareResponse:e.future.v8_middleware?async p=>{try{let y=await p(s);return c(y)}catch(y){return u(y)}}:void 0});return c(d)}catch(d){return u(d)}function c(d){return xn(d)?d:typeof d=="string"?new Response(d):Response.json(d)}function u(d){if(xn(d))return d;if(Bn(d))return o(d),YO(d,i);if(d instanceof Error&&d.message==="Expected a response from queryRoute"){let p=new Error("Expected a Response to be returned from resource route handler");return o(p),ib(p,i)}return o(d),ib(d,i)}}function YO(i,e){return Response.json(DP(i.error||new Error("Unexpected Server Error"),e),{status:i.status,statusText:i.statusText})}function ib(i,e){let t="Unexpected Server Error";return e!=="production"&&(t+=`

${String(i)}`),new Response(t,{status:500,headers:{"Content-Type":"text/plain"}})}function WO(i){let e=i.headers.get("Content-Type");return e&&/\bapplication\/json\b/.test(e)?i.body==null?null:i.json():i.text()}function qE(i){return`__flash_${i}__`}var jC=(i={},e="")=>{let t=new Map(Object.entries(i));return{get id(){return e},get data(){return Object.fromEntries(t)},has(n){return t.has(n)||t.has(qE(n))},get(n){if(t.has(n))return t.get(n);let s=qE(n);if(t.has(s)){let a=t.get(s);return t.delete(s),a}},set(n,s){t.set(n,s)},flash(n,s){t.set(qE(n),s)},unset(n){t.delete(n)}}},XO=i=>i!=null&&typeof i.id=="string"&&typeof i.data<"u"&&typeof i.has=="function"&&typeof i.get=="function"&&typeof i.set=="function"&&typeof i.flash=="function"&&typeof i.unset=="function";function BP({cookie:i,createData:e,readData:t,updateData:n,deleteData:s}){let a=FC(i)?i:LC((i==null?void 0:i.name)||"__session",i);return OP(a),{async getSession(o,c){let u=o&&await a.parse(o,c),d=u&&await t(u);return jC(d||{},u||"")},async commitSession(o,c){let{id:u,data:d}=o,p=(c==null?void 0:c.maxAge)!=null?new Date(Date.now()+c.maxAge*1e3):(c==null?void 0:c.expires)!=null?c.expires:a.expires;return u?await n(u,d,p):u=await e(d,p),a.serialize(u,c)},async destroySession(o,c){return await s(o.id),a.serialize("",{...c,maxAge:void 0,expires:new Date(0)})}}}function OP(i){Tg(i.isSigned,`The "${i.name}" cookie is not signed, but session cookies should be signed to prevent tampering on the client before they are sent back to the server. See https://reactrouter.com/explanation/sessions-and-cookies#signing-cookies for more information.`)}function JO({cookie:i}={}){let e=FC(i)?i:LC((i==null?void 0:i.name)||"__session",i);return OP(e),{async getSession(t,n){return jC(t&&await e.parse(t,n)||{})},async commitSession(t,n){let s=await e.serialize(t.data,n);if(s.length>4096)throw new Error("Cookie length will exceed browser maximum. Length: "+s.length);return s},async destroySession(t,n){return e.serialize("",{...n,maxAge:void 0,expires:new Date(0)})}}}function KO({cookie:i}={}){let e=new Map;return BP({cookie:i,async createData(t,n){let s=Math.random().toString(36).substring(2,10);return e.set(s,{data:t,expires:n}),s},async readData(t){if(e.has(t)){let{data:n,expires:s}=e.get(t);if(!s||s>new Date)return n;s&&e.delete(t)}return null},async updateData(t,n,s){e.set(t,{data:n,expires:s})},async deleteData(t){e.delete(t)}})}function QO(i,...e){let t=e[0],n=ZO(i).replace(/\/:([\w-]+)(\?)?/g,(s,a,o)=>{const c=o===void 0,u=t==null?void 0:t[a];if(c&&u===void 0)throw new Error(`Path '${i}' requires param '${a}' but it was not provided`);return u===void 0?"":"/"+u});if(i.endsWith("*")){const s=t==null?void 0:t["*"];s!==void 0&&(n+="/"+s)}return n||"/"}function ZO(i){let e=i.length-1,t=i[e];if(t!=="*"&&t!=="/")return i;for(e--;e>=0&&i[e]==="/";e--);return i.slice(0,e+1)}var wA=new TextEncoder,eM="</body></html>";function tM(i){let e=new TextDecoder,t,n=new Promise(u=>t=u),s=!1,a=[],o=null;function c(u){for(let d of a){let p=e.decode(d,{stream:!0});p.endsWith(eM)&&(p=p.slice(0,-eM.length)),u.enqueue(wA.encode(p))}a.length=0,o=null}return new TransformStream({transform(u,d){a.push(u),!o&&(o=setTimeout(async()=>{c(d),s||(s=!0,eH(i,d).catch(p=>d.error(p)).then(t))},0))},async flush(u){await n,o&&(clearTimeout(o),c(u)),u.enqueue(wA.encode("</body></html>"))}})}async function eH(i,e){let t=new TextDecoder("utf-8",{fatal:!0});const n=i.getReader();try{let a;for(;(a=await n.read())&&!a.done;){const o=a.value;try{$E(JSON.stringify(t.decode(o,{stream:!0})),e)}catch{let u=JSON.stringify(btoa(String.fromCodePoint(...o)));$E(`Uint8Array.from(atob(${u}), m => m.codePointAt(0))`,e)}}}finally{n.releaseLock()}let s=t.decode();s.length&&$E(JSON.stringify(s),e)}function $E(i,e){e.enqueue(wA.encode(`<script>${tH(`(self.__FLIGHT_DATA||=[]).push(${i})`)}<\/script>`))}function tH(i){return i.replace(/<!--/g,"<\\!--").replace(/<\/(script)/gi,"</\\$1")}var nH=class extends wn.Component{constructor(i){super(i),this.state={error:null,location:i.location}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,e){return e.location!==i.location?{error:null,location:i.location}:{error:e.error,location:e.location}}render(){return this.state.error?wn.createElement(HP,{error:this.state.error,renderAppShell:!0}):this.props.children}};function nM({renderAppShell:i,title:e,children:t}){return i?wn.createElement("html",{lang:"en"},wn.createElement("head",null,wn.createElement("meta",{charSet:"utf-8"}),wn.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),wn.createElement("title",null,e)),wn.createElement("body",null,wn.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},t))):t}function HP({error:i,renderAppShell:e}){console.error(i);let t=wn.createElement("script",{dangerouslySetInnerHTML:{__html:`
        console.log(
          " Hey developer . You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."
        );
      `}});if(Bn(i))return wn.createElement(nM,{renderAppShell:e,title:"Unhandled Thrown Response!"},wn.createElement("h1",{style:{fontSize:"24px"}},i.status," ",i.statusText),t);let n;if(i instanceof Error)n=i;else{let s=i==null?"Unknown Error":typeof i=="object"&&"toString"in i?i.toString():JSON.stringify(i);n=new Error(s)}return wn.createElement(nM,{renderAppShell:e,title:"Application Error!"},wn.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),wn.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},n.stack),t)}function iH({hasRootLayout:i}){let e=E0();if(i===void 0)throw new Error("Missing 'hasRootLayout' prop");return wn.createElement(HP,{renderAppShell:!i,error:e})}function sH(i){const e={};for(const t of i.matches)rH(e,t);return e}function rH(i,e){e=Array.isArray(e)?e:[e];for(const t of e)i[t.id]={links:t.links,meta:t.meta,default:aH}}var aH=()=>null,oH="use",iM=CD[oH];function lH(i){if(iM)return iM(i);throw new Error("React Router v7 requires React 19+ for RSC features.")}async function cH({request:i,fetchServer:e,createFromReadableStream:t,renderHTML:n,hydrate:s=!0}){const a=new URL(i.url),c=dH(a)||hH(a)||i.headers.has("rsc-action-id"),u=await e(i);if(c||u.headers.get("React-Router-Resource")==="true")return u;if(!u.body)throw new Error("Missing body in server response");const d=u.clone();let p=null;s&&(p=u.clone());const y=u.body;let v,w=[];const A=()=>v?new ReadableStream({start(_){v.forEach(D=>_.enqueue(D)),w.push(_)}}):(v=[],y.pipeThrough(new TransformStream({transform(_,D){v.push(_),D.enqueue(_),w.forEach(R=>R.enqueue(_))},flush(){w.forEach(_=>_.close()),w=[]}})));let C=null;const T=()=>{const _=Promise.resolve(t(A()));return Object.defineProperties(_,{_deepestRenderedBoundaryId:{get(){return C},set(D){C=D}},formState:{get(){return _.then(D=>D.type==="render"?D.formState:void 0)}}})};try{if(!d.body)throw new Error("Failed to clone server response");const _=await t(d.body);if(u.status===xC&&_.type==="redirect"){const F=new Headers(u.headers);return F.delete("Content-Encoding"),F.delete("Content-Length"),F.delete("Content-Type"),F.delete("X-Remix-Response"),F.set("Location",_.location),new Response((p==null?void 0:p.body)||"",{headers:F,status:_.status,statusText:u.statusText})}const D=await n(T),R=new Headers(u.headers);if(R.set("Content-Type","text/html; charset=utf-8"),!s)return new Response(D,{status:u.status,headers:R});if(!(p!=null&&p.body))throw new Error("Failed to clone server response");const L=D.pipeThrough(tM(p.body));return new Response(L,{status:u.status,headers:R})}catch(_){if(_ instanceof Response)return _;try{const D=Bn(_)?_.status:500,R=await n(()=>{const M=Promise.resolve(t(A())).then(O=>Object.assign(O,{status:D,errors:C?{[C]:_}:{}}));return Object.defineProperties(M,{_deepestRenderedBoundaryId:{get(){return C},set(O){C=O}},formState:{get(){return M.then(O=>O.type==="render"?O.formState:void 0)}}})}),L=new Headers(u.headers);if(L.set("Content-Type","text/html"),!s)return new Response(R,{status:D,headers:L});if(!(p!=null&&p.body))throw new Error("Failed to clone server response");const F=R.pipeThrough(tM(p.body));return new Response(F,{status:D,headers:L})}catch{}throw _}}function uH({getPayload:i}){const e=i(),t=lH(e);if(t.type==="redirect")throw new Response(null,{status:t.status,headers:{Location:t.location}});if(t.type!=="render")return null;let n={...t.loaderData};for(const c of t.matches)T0(c.id,c.clientLoader,c.hasLoader,!1)&&(c.hydrateFallbackElement||!c.hasLoader)&&delete n[c.id];const s={get _deepestRenderedBoundaryId(){return e._deepestRenderedBoundaryId??null},set _deepestRenderedBoundaryId(c){e._deepestRenderedBoundaryId=c},actionData:t.actionData,actionHeaders:{},basename:t.basename,errors:t.errors,loaderData:n,loaderHeaders:{},location:t.location,statusCode:200,matches:t.matches.map(c=>({params:c.params,pathname:c.pathname,pathnameBase:c.pathnameBase,route:{id:c.id,action:c.hasAction||!!c.clientAction,handle:c.handle,hasErrorBoundary:c.hasErrorBoundary,loader:c.hasLoader||!!c.clientLoader,index:c.index,path:c.path,shouldRevalidate:c.shouldRevalidate}}))},a=IC(t.matches.reduceRight((c,u)=>{const d={id:u.id,action:u.hasAction||!!u.clientAction,element:u.element,errorElement:u.errorElement,handle:u.handle,hasErrorBoundary:!!u.errorElement,hydrateFallbackElement:u.hydrateFallbackElement,index:u.index,loader:u.hasLoader||!!u.clientLoader,path:u.path,shouldRevalidate:u.shouldRevalidate};return c.length>0&&(d.children=c),[d]},[]),s),o={future:{v8_middleware:!1,unstable_subResourceIntegrity:!1},isSpaMode:!1,ssr:!0,criticalCss:"",manifest:{routes:{},version:"1",url:"",entry:{module:"",imports:[]}},routeDiscovery:{mode:"lazy",manifestPath:"/__manifest"},routeModules:sH(t)};return k.createElement(pI.Provider,{value:!0},k.createElement(nH,{location:t.location},k.createElement(gl.Provider,{value:o},k.createElement(DC,{context:s,router:a,hydrate:!1,nonce:t.nonce}))))}function dH(i){return i.pathname.endsWith(".rsc")}function hH(i){return i.pathname.endsWith(".manifest")}function zP(i){if(!i)return null;let e=Object.entries(i),t={};for(let[n,s]of e)if(s&&s.__type==="RouteErrorResponse")t[n]=new is(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let a=window[s.__subType];if(typeof a=="function")try{let o=new a(s.message);o.stack=s.stack,t[n]=o}catch{}}if(t[n]==null){let a=new Error(s.message);a.stack=s.stack,t[n]=a}}else t[n]=s;return t}function GP({state:i,routes:e,getRouteInfo:t,location:n,basename:s,isSpaMode:a}){let o={...i,loaderData:{...i.loaderData}},c=Es(e,n,s);if(c)for(let u of c){let d=u.route.id,p=t(d);T0(d,p.clientLoader,p.hasLoader,a)&&(p.hasHydrateFallback||!p.hasLoader)?delete o.loaderData[d]:p.hasLoader||(o.loaderData[d]=null)}return o}var VP=TD();const fH=Ob(VP);function qP(i){return k.createElement(_I,{flushSync:VP.flushSync,...i})}var Ue=null,Gm=null;function pH(){if(!Ue&&window.__reactRouterContext&&window.__reactRouterManifest&&window.__reactRouterRouteModules){if(window.__reactRouterManifest.sri===!0){const i=document.querySelector("script[rr-importmap]");if(i!=null&&i.textContent)try{window.__reactRouterManifest.sri=JSON.parse(i.textContent).integrity}catch(e){console.error("Failed to parse import map",e)}}Ue={context:window.__reactRouterContext,manifest:window.__reactRouterManifest,routeModules:window.__reactRouterRouteModules,stateDecodingPromise:void 0,router:void 0,routerInitialized:!1}}}function mH({getContext:i,unstable_instrumentations:e}){var o,c;if(pH(),!Ue)throw new Error("You must be using the SSR features of React Router in order to skip passing a `router` prop to `<RouterProvider>`");let t=Ue;if(!Ue.stateDecodingPromise){let u=Ue.context.stream;Be(u,"No stream found for single fetch decoding"),Ue.context.stream=void 0,Ue.stateDecodingPromise=Zb(u,window).then(d=>{Ue.context.state=d.value,t.stateDecodingPromise.value=!0}).catch(d=>{t.stateDecodingPromise.error=d})}if(Ue.stateDecodingPromise.error)throw Ue.stateDecodingPromise.error;if(!Ue.stateDecodingPromise.value)throw Ue.stateDecodingPromise;let n=C0(Ue.manifest.routes,Ue.routeModules,Ue.context.state,Ue.context.ssr,Ue.context.isSpaMode),s;if(Ue.context.isSpaMode){let{loaderData:u}=Ue.context.state;(o=Ue.manifest.routes.root)!=null&&o.hasLoader&&u&&"root"in u&&(s={loaderData:{root:u.root}})}else s=GP({state:Ue.context.state,routes:n,getRouteInfo:u=>{var d,p,y;return{clientLoader:(d=Ue.routeModules[u])==null?void 0:d.clientLoader,hasLoader:((p=Ue.manifest.routes[u])==null?void 0:p.hasLoader)===!0,hasHydrateFallback:((y=Ue.routeModules[u])==null?void 0:y.HydrateFallback)!=null}},location:window.location,basename:(c=window.__reactRouterContext)==null?void 0:c.basename,isSpaMode:Ue.context.isSpaMode}),s&&s.errors&&(s.errors=zP(s.errors));let a=b0({routes:n,history:Hb(),basename:Ue.context.basename,getContext:i,hydrationData:s,hydrationRouteProperties:A0,unstable_instrumentations:e,mapRouteProperties:Xd,future:{middleware:Ue.context.future.v8_middleware},dataStrategy:QI(()=>a,Ue.manifest,Ue.routeModules,Ue.context.ssr,Ue.context.basename),patchRoutesOnNavigation:cP(Ue.manifest,Ue.routeModules,Ue.context.ssr,Ue.context.routeDiscovery,Ue.context.isSpaMode,Ue.context.basename)});return Ue.router=a,a.state.initialized&&(Ue.routerInitialized=!0,a.initialize()),a.createRoutesForHMR=oP,window.__reactRouterDataRouter=a,a}function gH(i){Gm||(Gm=mH({getContext:i.getContext,unstable_instrumentations:i.unstable_instrumentations}));let[e,t]=k.useState(void 0);k.useEffect(()=>{},[]),k.useEffect(()=>{},[e]);let[n,s]=k.useState(Gm.state.location);return k.useLayoutEffect(()=>{Ue&&Ue.router&&!Ue.routerInitialized&&(Ue.routerInitialized=!0,Ue.router.initialize())},[]),k.useLayoutEffect(()=>{if(Ue&&Ue.router)return Ue.router.subscribe(a=>{a.location!==n&&s(a.location)})},[n]),Be(Ue,"ssrInfo unavailable for HydratedRouter"),uP(Gm,Ue.manifest,Ue.routeModules,Ue.context.ssr,Ue.context.routeDiscovery,Ue.context.isSpaMode),k.createElement(k.Fragment,null,k.createElement(gl.Provider,{value:{manifest:Ue.manifest,routeModules:Ue.routeModules,future:Ue.context.future,criticalCss:e,ssr:Ue.context.ssr,isSpaMode:Ue.context.isSpaMode,routeDiscovery:Ue.context.routeDiscovery}},k.createElement(_C,{location:n},k.createElement(qP,{router:Gm,unstable_useTransitions:i.unstable_useTransitions,unstable_onError:i.unstable_onError}))),k.createElement(k.Fragment,null))}/**
 * react-router-dom v7.10.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const gi=Object.freeze(Object.defineProperty({__proto__:null,Await:$j,BrowserRouter:tO,Form:RC,HashRouter:nO,HydratedRouter:gH,IDLE_BLOCKER:$l,IDLE_FETCHER:qb,IDLE_NAVIGATION:Sg,Link:NC,Links:VB,MemoryRouter:Gj,Meta:YB,NavLink:xP,Navigate:Vj,NavigationType:ND,Outlet:NI,PrefetchPageLinks:TC,Route:RI,Router:Zc,RouterContextProvider:Va,RouterProvider:qP,Routes:qj,Scripts:fP,ScrollRestoration:bP,ServerRouter:SO,StaticRouter:dO,StaticRouterProvider:DC,UNSAFE_AwaitContextProvider:bj,UNSAFE_DataRouterContext:Xa,UNSAFE_DataRouterStateContext:pl,UNSAFE_ErrorResponseImpl:is,UNSAFE_FetchersContext:S0,UNSAFE_FrameworkContext:gl,UNSAFE_LocationContext:Wd,UNSAFE_NavigationContext:ss,UNSAFE_RSCDefaultRootErrorBoundary:iH,UNSAFE_RemixErrorBoundary:_C,UNSAFE_RouteContext:As,UNSAFE_ServerMode:kP,UNSAFE_SingleFetchRedirectSymbol:ll,UNSAFE_ViewTransitionContext:w0,UNSAFE_WithComponentProps:Kj,UNSAFE_WithErrorBoundaryProps:Zj,UNSAFE_WithHydrateFallbackProps:Qj,UNSAFE_createBrowserHistory:Hb,UNSAFE_createClientRoutes:C0,UNSAFE_createClientRoutesWithHMRRevalidationOptOut:oP,UNSAFE_createRouter:b0,UNSAFE_decodeViaTurboStream:Zb,UNSAFE_deserializeErrors:zP,UNSAFE_getHydrationData:GP,UNSAFE_getPatchRoutesOnNavigationFunction:cP,UNSAFE_getTurboStreamSingleFetchDataStrategy:QI,UNSAFE_hydrationRouteProperties:A0,UNSAFE_invariant:Be,UNSAFE_mapRouteProperties:Xd,UNSAFE_shouldHydrateRouteLoader:T0,UNSAFE_useFogOFWarDiscovery:uP,UNSAFE_useScrollRestoration:AP,UNSAFE_withComponentProps:kI,UNSAFE_withErrorBoundaryProps:LI,UNSAFE_withHydrateFallbackProps:II,createBrowserRouter:QB,createContext:RU,createCookie:LC,createCookieSessionStorage:JO,createHashRouter:ZB,createMemoryRouter:TI,createMemorySessionStorage:KO,createPath:Di,createRequestHandler:zO,createRoutesFromChildren:_g,createRoutesFromElements:Xj,createRoutesStub:EO,createSearchParams:Zx,createSession:jC,createSessionStorage:BP,createStaticHandler:pO,createStaticRouter:IC,data:OD,generatePath:qU,href:QO,isCookie:FC,isRouteErrorResponse:Bn,isSession:XO,matchPath:jp,matchRoutes:Es,parsePath:rr,redirect:x0,redirectDocument:HD,renderMatches:Jj,replace:zD,resolvePath:jD,unstable_HistoryRouter:yP,unstable_RSCStaticRouter:uH,unstable_routeRSCServerRequest:cH,unstable_setDevServerHooks:UO,unstable_usePrompt:uO,unstable_useRoute:Fj,useActionData:Kb,useAsyncError:Ij,useAsyncValue:EI,useBeforeUnload:lO,useBlocker:AI,useFetcher:aO,useFetchers:oO,useFormAction:EP,useHref:mI,useInRouterContext:Qc,useLinkClickHandler:SP,useLoaderData:Jb,useLocation:Cs,useMatch:Sj,useMatches:Xb,useNavigate:Yb,useNavigation:SI,useNavigationType:wj,useOutlet:xI,useOutletContext:Aj,useParams:Wb,useResolvedPath:Gp,useRevalidator:kj,useRouteError:E0,useRouteLoaderData:Dj,useRoutes:bI,useSearchParams:iO,useSubmit:kC,useViewTransitionState:CP},Symbol.toStringTag,{value:"Module"}));var It=(i=>(i.GUEST="guest",i.USER="user",i.SELLER="seller",i))(It||{});const qd=[{id:"manual-01",title:"Ebook-Engine Manual",author:"Ebook-Engine AI",description:"The official documentation for the Ebook-Engine platform. Learn how to use the Neural Engine, generate viral covers, and publish your work to the world.",price:0,coverImageUrl:"https://images.unsplash.com/photo-1555421689-491a97ff2040?auto=format&fit=crop&q=80&w=800",genre:"Technology",sellerId:"seller_admin",publicationDate:"2025-10-15",pages:[{id:"p1",pageNumber:1,title:"Welcome to the Future",content:`# Welcome to Ebook-Engine

**Where Thought Becomes Literature.**

Ebook-Engine is more than just a writing tool; it is a collaborative neural engine designed to elevate your creative process. Whether you are outlining a sci-fi epic, drafting a technical manual, or publishing your first novel, this platform provides the intelligence and infrastructure you need.

![Workspace](https://images.unsplash.com/photo-1497215728101-856f4ea42174?auto=format&fit=crop&q=80&w=1000)

### Core Philosophy

We believe that AI should not replace the author, but amplify them. Our "Co-Author" engine is built on Google's Gemini models, fine-tuned to understand narrative structure, tone, and pacing.

### In This Manual

Over the next 10 pages, we will cover:
- The Studio Interface
- AI Tools & Prompting
- Visual Asset Generation
- Publishing & Monetization`},{id:"p2",pageNumber:2,title:"The Dashboard",content:`# Your Command Center

The Dashboard is your home base. From here, you can track sales, manage your library, and access the Studio.

![Dashboard](https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&q=80&w=1000)

### Key Sections

1. **Overview**: Real-time analytics of your book sales and reader engagement.
2. **My Library**: Access books you have purchased or written.
3. **Wishlist**: Books you've saved for later.
4. **Studio Access**: One-click launch into the writing environment.

**Pro Tip:** Switch between "Reader Mode" and "Writer Mode" in the sidebar to toggle between consuming content and creating it.`},{id:"p3",pageNumber:3,title:"The eBook Studio",content:`# The Studio

This is where the magic happens. The Studio is divided into two main zones: the **Context Panel** (Left) and the **Editor** (Right).

![Studio](https://images.unsplash.com/photo-1581291518633-83b4ebd1d83e?auto=format&fit=crop&q=80&w=1000)

### 1. The Editor

A distraction-free markdown environment. It supports:
- **Rich Text**: Headers (#), Bold (**text**), and Lists (- item).
- **Slash Commands**: Type \`/\` to open the quick menu for headings, images, or AI generation.

### 2. The Context Panel

Your AI Co-Author lives here. You can chat with it to brainstorm ideas, or switch to the **Outline View** to manage your chapters.`},{id:"p4",pageNumber:4,title:"Using the AI Co-Author",content:`# The Neural Engine

Your Co-Author is always listening. You can ask it to:

- *"Write the next paragraph describing a rainy neon city."*
- *"Fix the grammar in this chapter."*
- *"Give me 5 ideas for a plot twist."*

![AI Brain](https://images.unsplash.com/photo-1620712943543-bcc4688e7485?auto=format&fit=crop&q=80&w=1000)

### Context Awareness

The AI reads what you write. If you are in Chapter 3, it knows what happened in Chapter 2. This ensures consistency in character names, plot points, and tone.

**Auto-Pilot**: Use the "Auto-Write" button in the header to let the AI draft an entire chapter structure for you automatically.`},{id:"p5",pageNumber:5,title:"Generating Visuals",content:`# AI Art Generation

A picture is worth a thousand words. Ebook-Engine integrates the **Gemini 2.5 Image Model** to generate professional cover art and in-book illustrations.

![Art Generation](https://images.unsplash.com/photo-1561557944-6e7860d9a7fd?auto=format&fit=crop&q=80&w=1000)

### How to Generate

1. **Cover Art**: Go to the "Publish" page and use the AI Cover Designer. Select a style (e.g., Cinematic, Minimalist) and describe your vision.
2. **In-Text Illustrations**: In the Studio editor, type \`/image\` to conjure an image command. Describe the scene, and the AI will insert it directly into your page.

> *Note: All images are royalty-free and unique to your book.*`},{id:"p6",pageNumber:6,title:"Audio Features",content:`# Voice & Dictation

Writer's block? Speak your story. The Studio supports real-time dictation and text-to-speech.

![Microphone](https://images.unsplash.com/photo-1590602847861-f357a9332bbc?auto=format&fit=crop&q=80&w=1000)

### Dictation

Click the **Mic Icon** in the chat bar. Speak naturally. The AI will transcribe your voice into text, which you can then ask it to format or expand upon.

### Text-to-Speech (TTS)

The AI can read its responses back to you. This is perfect for proofhearing your dialogue flow or brainstorming while multitasking.`},{id:"p7",pageNumber:7,title:"Publishing Your Work",content:`# Going Live

Once your manuscript is ready, it's time to share it with the world.

![Publishing](https://images.unsplash.com/photo-1463320726281-696a485928c7?auto=format&fit=crop&q=80&w=1000)

### The Process

1. **Metadata**: Enter your Title, Author Name, and Description.
2. **Genre & Pricing**: Choose a category. Decide if your book is **Free** (for growth) or **Paid** (for revenue).
3. **AI Pricing**: Use our "Smart Pricing Model" to analyze market trends and suggest the optimal price point.
4. **Publish**: Click "Publish to Store". Your book is instantly available to all users on the platform.`},{id:"p8",pageNumber:8,title:"Seller Features",content:`# Monetization

Creators keep **70%** of every sale. We handle the payment processing, file hosting, and delivery.

![Analytics](https://images.unsplash.com/photo-1551288049-bebda4e38f71?auto=format&fit=crop&q=80&w=1000)

### Audience Analytics

Go to the **Audience** tab in your dashboard to see who is reading your books. You can track:
- Total Visitors
- Active Readers
- Geographic Location
- Purchase History

Use this data to refine your marketing strategy and write what your audience loves.`},{id:"p9",pageNumber:9,title:"Pro Tips",content:`# Mastering the Platform

Here are some advanced tips for power users:

![Lightbulb](https://images.unsplash.com/photo-1531297461136-82lwDe43qRm?auto=format&fit=crop&q=80&w=1000)

- **Slash Commands**: Learn them. \`/h1\` for titles, \`/quote\` for blockquotes. Speed is key.
- **Variable Pacing**: Ask the AI to "Slow down and describe the room" or "Speed up the action". It understands pacing.
- **Series Management**: Keep your character notes in a separate text file or the chat context to ensure consistency across multiple books.
- **Draft Mode**: You can save books as drafts without publishing them. They stay in your Studio securely.`},{id:"p10",pageNumber:10,title:"Community & Support",content:`# We Are Here For You

Ebook-Engine is built by writers, for writers. If you encounter bugs or have feature requests, reach out.

![Community](https://images.unsplash.com/photo-1529156069898-49953e39b3ac?auto=format&fit=crop&q=80&w=1000)

### Channels

- **Help Center**: Accessible from your profile dropdown.
- **Email**: opendev-labs.help@gmail.com
- **Updates**: Follow the "Ebook-Engine Manual" book for patch notes and new feature guides.

Thank you for creating with us.

**- The OpenDev Team**`}]},{id:"sacred-quantum-01",title:"The Quantum Scripture",author:"Dr. A. Vance & The Institute",description:"Hidden Laws of Consciousness Backed by Real Scientific Evidence. A deep dive into the observer effect, entanglement, and the unification of ancient spirituality with modern physics.",price:1111,coverImageUrl:"https://images.unsplash.com/photo-1506318137071-a8bcbf67cc77?auto=format&fit=crop&q=80&w=800",genre:"Spirituality",sellerId:"seller_admin",publicationDate:"2025-11-11",pages:[{id:"qs-p1",pageNumber:1,title:"Introduction: The Bridge",content:`# The Bridge Between Worlds

For centuries, science and spirituality have stood on opposite banks of a wide river. Spirituality spoke of the "soul," "connection," and "miracles." Science spoke of "atoms," "forces," and "proof." 

**But the river is drying up.**

New discoveries in Quantum Mechanics are not just validating ancient texts; they are explaining *how* they work. This book is not a metaphorical comparison. It is a technical manual for consciousness, cited with peer-reviewed studies.

> "The first gulp from the glass of natural sciences will turn you into an atheist, but at the bottom of the glass God is waiting for you."  *Werner Heisenberg, Nobel Prize Winner in Physics*

We begin our journey at the intersection of the Observer and the Observed.`},{id:"qs-p2",pageNumber:2,title:"The Observer Effect",content:`# The Observer Effect

In the classical Newtonian world, things exist whether you look at them or not. A falling tree makes a sound. But in the quantum world, this rule breaks.

### The Double-Slit Experiment

When particles (like electrons) are fired at two slits, they behave like waves, creating an interference pattern. However, when a measuring device (an "observer") is placed to see which slit the particle goes through, the particle **behaves like solid matter**.

**Scientific Source:** *Nature Physics, "Quantum interference of large organic molecules," 2011.*

**The Implication:** Consciousness collapses the wave function. Your attention literally constructs reality from a field of infinite probability.`},{id:"qs-p3",pageNumber:3,title:"Quantum Entanglement",content:`# Entanglement: The Science of Oneness

"Spooky action at a distance," Einstein called it. When two particles are entangled, a change in the spin of one *instantly* affects the other, even if they are galaxies apart.

### Non-Locality

This proves that space is an illusion. Information travels faster than light because, at a fundamental level, the two particles are not separate.

**Scientific Source:** *The Big Bell Test Collaboration, Nature, 2018.*

**Spiritual Corollary:** This is the scientific basis for telepathy, prayer, and the concept that "we are all one." We are distinct points in a unified field.`},{id:"qs-p4",pageNumber:4,title:"The Holographic Principle",content:`# The Holographic Universe

Leading physicists now posit that our 3D reality is a projection of information stored on a 2D surface at the boundary of the universe (the cosmological horizon).

### Information Theory

If we live in a hologram, then "matter" is just "resolution." The spiritual idea that the physical world is "Maya" (illusion) is now a valid physical theory.

**Scientific Source:** *Juan Maldacena, "The Large N Limit of Superconformal Field Theories," 1997.*

Every part contains the whole. Your mind is not *in* the universe; the universe is *in* your mind.`},{id:"qs-p5",pageNumber:5,title:"The Zero Point Field",content:`# The Field

Space is not empty. It is a seething ocean of energy called the Zero Point Field (or Quantum Vacuum). Even at absolute zero, this field contains infinite potential energy.

### Tapping the Source

Ancient mystics called this the *Akasha*. It is the memory of the universe. It connects everything. When you meditate, you are quieting the noise to access this signal.

**Evidence:** The Casimir Effect proves the existence of vacuum fluctuations pushing plates together.

We are essentially bioluminescent beings floating in a sea of light.`},{id:"qs-p6",pageNumber:6,title:"Biocentrism",content:`# Biocentrism

Proposed by Dr. Robert Lanza, Biocentrism argues that biology creates the universe, not the other way around. Space and time are tools of the mind, not external objects.

### The Goldilocks Universe

Why are the laws of physics perfectly tuned for life? Because life is the primary constant. Without consciousness, the equations of the universe have no solution.

**Scientific Context:** *Robert Lanza, "Biocentrism," 2009.*

You are not a visitor to this world. You are the projector.`},{id:"qs-p7",pageNumber:7,title:"Neurotheology",content:`# The God Helmet

Neuroscience has identified specific centers in the brain (the temporal lobes) that active during deep spiritual experiences. 

### Dr. Michael Persinger's Experiments

By stimulating the temporal lobes with weak magnetic fields, researchers induced "sensed presence" (the feeling of God or angels) in atheists. 

**Source:** *Neuropsychologia, 2003.*

This doesn't mean God is "just inside the head." It means the brain is a **receiver**. Just as a radio tunes into a station, your brain tunes into the frequency of the divine.`},{id:"qs-p8",pageNumber:8,title:"Epigenetics",content:`# Belief Changes Biology

For decades, we believed genes were destiny. The new field of Epigenetics proves that environment and **perception** control gene expression.

### The Placebo Effect

Your belief in a cure is often as potent as the chemistry. The mind signals the cells to rewrite their instruction sets.

**Scientific Source:** *Bruce Lipton, The Biology of Belief.*

**Implication:** You can heal your lineage. Your thoughts are not just smoke; they are biochemical triggers.`},{id:"qs-p9",pageNumber:9,title:"The Unified Field",content:`# The Grand Unified Theory

Physicists are hunting for the equation that unites Gravity with Quantum Mechanics. String Theory proposes that tiny vibrating filaments create all matter.

### Frequency is Key

If everything is a vibrating string, then the universe is literally a symphony. "In the beginning was the Word" (Sound/Vibration).

We are approaching a singularity where scientific equations will look identical to spiritual sutras.`},{id:"qs-p10",pageNumber:10,title:"Conclusion",content:`# Conclusion: The Awakened Scientist

The age of separation is over. 

1. **You are the Observer.**
2. **You are Entangled with all life.**
3. **Your beliefs rewrite your Biology.**

Take this knowledge. Test it. Be the experiment.

### References
- *Journal of Consciousness Studies*
- *Physical Review Letters*
- *Nature*
- *Max Planck Institute for Quantum Optics*`}]},{id:"sacred-quantum-02",title:"Divine Mechanics",author:"Nikola T. & The Collective",description:"How Energy, Frequency, and Vibration Create Reality  Proven Through Modern Physics. Unlocking the secrets of Tesla, Cymatics, and the frequencies that heal.",price:888,coverImageUrl:"https://images.unsplash.com/photo-1620052581237-b5d148ef2716?auto=format&fit=crop&q=80&w=800",genre:"Physics",sellerId:"seller_admin",publicationDate:"2025-12-01",pages:[{id:"dm-p1",pageNumber:1,title:"The Key to the Universe",content:`# The Key

> "If you want to find the secrets of the universe, think in terms of energy, frequency and vibration."  *Nikola Tesla*

Everything in existence is vibrating. The chair you sit on, the thoughts you think, the light you see. Matter is simply energy condensed to a slow vibration.

This book explores the mechanics of this vibration and how you can tune your personal frequency to alter your reality.

**Scope:** From the oscillation of atoms to the rotation of galaxies.`},{id:"dm-p2",pageNumber:2,title:"3, 6, 9",content:`# The Mathematics of Creation

Tesla was obsessed with 3, 6, and 9. Why? 

### Vortex Math

If you double 1 (1, 2, 4, 8, 16...), the sum of digits never touches 3, 6, or 9. These numbers represent a higher-dimensional flux fieldthe energy that governs the physical circuit.

**Application:** 9 is the number of the Universe. It represents completion and the void. By aligning with these mathematical constants, we tap into free energy principles.`},{id:"dm-p3",pageNumber:3,title:"Cymatics",content:`# Visible Sound

Cymatics is the study of visible sound and vibration. 

### The Experiment

Place sand on a metal plate. Play a violin bow or a frequency tone. The sand arranges itself into complex, beautiful geometric mandalas.

**Source:** *Hans Jenny, "Cymatics," 1967.*

**The Truth:** You are 70% water. If sound organizes sand into sacred geometry, imagine what words, music, and thoughts are doing to the cellular structure of your body.`},{id:"dm-p4",pageNumber:4,title:"String Theory",content:`# The Cosmic Symphony

String Theory posits that the fundamental constituents of the universe are not point-like particles, but one-dimensional "strings."

### Modes of Vibration

A quark is a string vibrating in one mode. An electron is the same string vibrating in another. The only difference between gold and lead is the *music* their atoms are playing.

**Scientific Source:** *Edward Witten, M-Theory.*

Reality is music solidified.`},{id:"dm-p5",pageNumber:5,title:"Resonance",content:`# The Law of Resonance

Strike a tuning fork tuned to 'C'. Bring it near another 'C' fork. The second one will begin to vibrate without being touched. This is Resonance.

### Emotional Resonance

Your heart emits an electromagnetic field 5,000 times stronger than your brain. It acts as a tuning fork. You do not "attract" what you want; you resonate with what you *are*.

**Evidence:** *HeartMath Institute Research.*

To change your life, you must change your broadcast signal.`},{id:"dm-p6",pageNumber:6,title:"Schumann Resonance",content:`# The Heartbeat of Earth

The space between the Earth's surface and the Ionosphere acts as a cavity resonator. It hums at **7.83 Hz**.

### The Human Connection

This frequency matches the Alpha/Theta brainwave state (deep relaxation/healing). When we disconnect from nature, we desynchronize from the planet's pulse, leading to anxiety and illness.

**Source:** *W.O. Schumann, 1952.*

Grounding (walking barefoot) reconnects your electrical circuit to this stabilizing frequency.`},{id:"dm-p7",pageNumber:7,title:"Water Memory",content:`# The Memory of Water

Dr. Masaru Emoto exposed water to words like "Love" and "Hate," then froze it. The "Love" water formed perfect crystals. The "Hate" water formed chaotic blobs.

### Controversy & Validation

While controversial, recent Nobel Prize winner Luc Montagnier proved water can retain the electromagnetic signature of DNA even after the DNA is removed.

**Source:** *Journal of Physics: Conference Series, 2011.*

Speak kindly to yourself. You are mostly water.`},{id:"dm-p8",pageNumber:8,title:"Entrainment",content:`# Frequency Entrainment

A stronger rhythm will always pull a weaker rhythm into sync. This is why pendulums sync up, and why you feel calm near the ocean.

### Binaural Beats

We can hack the brain by playing slightly different frequencies in each ear. The brain creates a third "phantom" beat, shifting consciousness instantly into Gamma (Insight) or Delta (Sleep) states.

**Scientific Application:** Used in clinical settings for PTSD and ADHD treatment.`},{id:"dm-p9",pageNumber:9,title:"Sound Healing",content:`# Ultrasound & Healing

Hospitals use ultrasound to break up kidney stones and speed up bone regeneration. This is sound healing.

### Ancient Solfeggio

Ancient chants used specific frequencies (like 528 Hz) believed to repair DNA. Modern science is just catching up to the fact that specific frequencies trigger specific biological responses.

**Future Tech:** "Frequency Pharmacy"  prescribing sounds instead of pills.`},{id:"dm-p10",pageNumber:10,title:"Mastery",content:`# Mastering Your Frequency

You are the conductor of this divine mechanics.

1. **Monitor your input** (Music, News, People).
2. **Regulate your output** (Speech, Thought).
3. **Use Tools** (Meditation, Breath, Nature).

If you want to understand the Universe, listen to the sound of your own breath.

**End of Volume 1.**`}]},{id:"sacred-quantum-03",title:"The Sacred Algorithm",author:"Cipher X",description:"Ancient Truth, Quantum Science, and Verified Sources Revealed. Exploring the code behind the cosmos: Fibonacci, Simulation Theory, and the digital nature of reality.",price:999,coverImageUrl:"https://images.unsplash.com/photo-1614726365723-49cfae934794?auto=format&fit=crop&q=80&w=800",genre:"Science",sellerId:"seller_admin",publicationDate:"2026-01-10",pages:[{id:"sa-p1",pageNumber:1,title:"The Code",content:`# The Code Behind the Canvas

Is the universe biological or digital? The deeper we look, the more it resembles computer code. 

From the spiral of a galaxy to the arrangement of seeds in a sunflower, a specific algorithm repeats. This book investigates the possibility that we are living in a programmed realitya Sacred Simulation.

**The Question:** If there is a code, who is the Programmer?`},{id:"sa-p2",pageNumber:2,title:"Phi",content:`# The Golden Ratio (1.618...)

Phi. The Divine Proportion. It appears in the pyramids of Giza, the Parthenon, and the proportions of the human face.

### Efficiency

Nature uses Phi not for aesthetics, but for efficiency. It allows for maximum packing (seeds) and exposure (leaves) with minimal energy expenditure. It is the optimization algorithm of the universe.

**Observation:** The stock market and heartbeats also follow Phi fractal patterns.`},{id:"sa-p3",pageNumber:3,title:"Fractals",content:`# Fractals Everywhere

A fractal is a pattern that repeats at different scales. Zoom into a coastline, it looks the same. Zoom into a fern, the leaf looks like the whole plant.

### The Mandelbrot Set

A simple mathematical equation ($Z = Z^2 + C$) produces infinite complexity. This suggests our complex universe comes from a very simple seed code.

**Spiritual Truth:** "As above, so below." The macrocosm reflects the microcosm.`},{id:"sa-p4",pageNumber:4,title:"Simulation Theory",content:`# Evidence of Simulation

Elon Musk and Neil deGrasse Tyson famously argued there is a billion-to-one chance we are in "base reality."

### Pixelation (Planck Length)

Space is not continuous. It is discrete. There is a minimum unit of length (Planck length), much like a pixel on a screen. You cannot zoom in forever.

**Scientific Source:** *Nick Bostrom, "Are You Living in a Computer Simulation?" 2003.*

**Glitch:** The Observer Effect is basically "rendering optimization"  only drawing what is being looked at.`},{id:"sa-p5",pageNumber:5,title:"It From Bit",content:`# It From Bit

Physicist John Wheeler proposed that the universe is made of information, not matter. Every particle, every field, every force is ultimately a yes/no answer to a question.

### The Digital Physics

At the bottom of the rabbit hole, there is no "stuff." There are only bits. Information is more fundamental than time or space.

**Source:** *John Archibald Wheeler, 1990.*

We are processing information in a sea of data.`},{id:"sa-p6",pageNumber:6,title:"DNA Code",content:`# The Software of Life

DNA is literally a 4-character code (A, C, T, G). It functions exactly like computer software, complete with error-correcting subroutines.

### Microsoft vs Nature

Bill Gates said, "DNA is like a computer program but far, far more advanced than any software ever created."

**Source:** *The Road Ahead.*

If DNA is code, it implies a language. And a language implies an Intelligence.`},{id:"sa-p7",pageNumber:7,title:"Fine Tuning",content:`# The Fine-Tuning Problem

If the force of gravity were slightly stronger, the universe would collapse. If slightly weaker, stars wouldn't form. There are ~20 constants that are precisely set for life to exist.

### Randomness vs Design

The odds of this happening by chance are akin to throwing a dart across the universe and hitting a specific atom.

**Conclusion:** The parameters were set. The simulation was configured.`},{id:"sa-p8",pageNumber:8,title:"Algorithmic Botany",content:`# Algorithmic Botany

L-systems (Lindenmayer systems) are simple algorithms that can generate realistic 3D trees and plants. Nature follows strict procedural generation rules.

### The Fibonacci Sequence

Count the petals on a flower. 3, 5, 8, 13, 21... almost always a Fibonacci number. The universe calculates its growth steps.

**We are watching a procedural generation script run in real-time.**`},{id:"sa-p9",pageNumber:9,title:"Consciousness",content:`# The Player

If reality is the game, Consciousness is the Player. The brain is not the source of consciousness; it is the VR headset.

### Non-Local Data

Near-Death Experiences (NDEs) suggest that when the "headset" dies, the signal continues. The user logs out of the avatar but retains the data.

**Source:** *Dr. Eben Alexander, "Proof of Heaven."*`},{id:"sa-p10",pageNumber:10,title:"The Programmer",content:`# Who is the Programmer?

We call it God, Source, The All, or The Architect. 

The Sacred Algorithm reveals that science and religion are describing the same interface. One describes the User Experience (Spirituality), the other describes the Code (Physics).

**Final Truth:** You are not just in the simulation. You are a piece of the code that woke up.

**[End of Stream]**`}]}],sM={isEnabled:!0,slug:"admin",theme:"dark-minimal",profileImageUrl:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?auto=format&fit=crop&q=80&w=200",displayName:"Ebook-Engine Team",tagline:"Official Updates & Manuals",showcasedBookIds:["manual-01","sacred-quantum-01","sacred-quantum-02"]},yH={id:"seller_admin",name:"Ebook-Engine Official",username:"@ebookengine_hq",email:"admin@ebook-engine.com",payoutEmail:"finance@ebook-engine.com",uploadedBooks:qd,creatorSite:sM,isVerified:!0,profileImageUrl:sM.profileImageUrl,coverImageUrl:"https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?auto=format&fit=crop&q=80&w=1200",bio:"The official account for Ebook-Engine updates and documentation."},vH={id:"seller_opendev",name:"OpenDev Labs",username:"@opendev",email:"opendev-labs",payoutEmail:"opendev-labs@gmail.com",uploadedBooks:[],creatorSite:{isEnabled:!0,slug:"opendev",theme:"tech-vibrant",displayName:"OpenDev Labs",tagline:"System Architecture",showcasedBookIds:[]},isVerified:!0,isAdmin:!0,bio:"Platform Administrator"},xH={id:"user_admin",name:"Admin User",username:"@admin",email:"admin@ebook-engine.com",purchaseHistory:[qd[0]],wishlist:[],isVerified:!0,profileImageUrl:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?auto=format&fit=crop&q=80&w=200",coverImageUrl:"https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?auto=format&fit=crop&q=80&w=1200",bio:"System Administrator and First Node."},va={user_admin:xH,seller_admin:yH,seller_opendev:vH,guest:{id:"guest",name:"Guest",email:""}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let bH,wH;function SH(){return{geminiUrl:bH,vertexUrl:wH}}function EH(i,e,t,n){var s,a;if(!(i!=null&&i.baseUrl)){const o=SH();return e?(s=o.vertexUrl)!==null&&s!==void 0?s:t:(a=o.geminiUrl)!==null&&a!==void 0?a:n}return i.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class yl{}function Ae(i,e){const t=/\{([^}]+)\}/g;return i.replace(t,(n,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const a=e[s];return a!=null?String(a):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function b(i,e,t){for(let a=0;a<e.length-1;a++){const o=e[a];if(o.endsWith("[]")){const c=o.slice(0,-2);if(!(c in i))if(Array.isArray(t))i[c]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(i[c])){const u=i[c];if(Array.isArray(t))for(let d=0;d<u.length;d++){const p=u[d];b(p,e.slice(a+1),t[d])}else for(const d of u)b(d,e.slice(a+1),t)}return}else if(o.endsWith("[0]")){const c=o.slice(0,-3);c in i||(i[c]=[{}]);const u=i[c];b(u[0],e.slice(a+1),t);return}(!i[o]||typeof i[o]!="object")&&(i[o]={}),i=i[o]}const n=e[e.length-1],s=i[n];if(s!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===s)return;if(typeof s=="object"&&typeof t=="object"&&s!==null&&t!==null)Object.assign(s,t);else throw new Error(`Cannot set value for an existing key. Key: ${n}`)}else n==="_self"&&typeof t=="object"&&t!==null&&!Array.isArray(t)?Object.assign(i,t):i[n]=t}function x(i,e,t=void 0){try{if(e.length===1&&e[0]==="_self")return i;for(let n=0;n<e.length;n++){if(typeof i!="object"||i===null)return t;const s=e[n];if(s.endsWith("[]")){const a=s.slice(0,-2);if(a in i){const o=i[a];return Array.isArray(o)?o.map(c=>x(c,e.slice(n+1),t)):t}else return t}else i=i[s]}return i}catch(n){if(n instanceof TypeError)return t;throw n}}function AH(i,e){for(const[t,n]of Object.entries(e)){const s=t.split("."),a=n.split("."),o=new Set;let c=-1;for(let u=0;u<s.length;u++)if(s[u]==="*"){c=u;break}if(c!==-1&&a.length>c)for(let u=c;u<a.length;u++){const d=a[u];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&o.add(d)}SA(i,s,a,0,o)}}function SA(i,e,t,n,s){if(n>=e.length||typeof i!="object"||i===null)return;const a=e[n];if(a.endsWith("[]")){const o=a.slice(0,-2),c=i;if(o in c&&Array.isArray(c[o]))for(const u of c[o])SA(u,e,t,n+1,s)}else if(a==="*"){if(typeof i=="object"&&i!==null&&!Array.isArray(i)){const o=i,c=Object.keys(o).filter(d=>!d.startsWith("_")&&!s.has(d)),u={};for(const d of c)u[d]=o[d];for(const[d,p]of Object.entries(u)){const y=[];for(const v of t.slice(n))v==="*"?y.push(d):y.push(v);b(o,y,p)}for(const d of c)delete o[d]}}else{const o=i;a in o&&SA(o[a],e,t,n+1,s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function BC(i){if(typeof i!="string")throw new Error("fromImageBytes must be a string");return i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function CH(i){const e={},t=x(i,["operationName"]);t!=null&&b(e,["operationName"],t);const n=x(i,["resourceName"]);return n!=null&&b(e,["_url","resourceName"],n),e}function TH(i){const e={},t=x(i,["name"]);t!=null&&b(e,["name"],t);const n=x(i,["metadata"]);n!=null&&b(e,["metadata"],n);const s=x(i,["done"]);s!=null&&b(e,["done"],s);const a=x(i,["error"]);a!=null&&b(e,["error"],a);const o=x(i,["response","generateVideoResponse"]);return o!=null&&b(e,["response"],NH(o)),e}function _H(i){const e={},t=x(i,["name"]);t!=null&&b(e,["name"],t);const n=x(i,["metadata"]);n!=null&&b(e,["metadata"],n);const s=x(i,["done"]);s!=null&&b(e,["done"],s);const a=x(i,["error"]);a!=null&&b(e,["error"],a);const o=x(i,["response"]);return o!=null&&b(e,["response"],RH(o)),e}function NH(i){const e={},t=x(i,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(o=>MH(o))),b(e,["generatedVideos"],a)}const n=x(i,["raiMediaFilteredCount"]);n!=null&&b(e,["raiMediaFilteredCount"],n);const s=x(i,["raiMediaFilteredReasons"]);return s!=null&&b(e,["raiMediaFilteredReasons"],s),e}function RH(i){const e={},t=x(i,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(o=>kH(o))),b(e,["generatedVideos"],a)}const n=x(i,["raiMediaFilteredCount"]);n!=null&&b(e,["raiMediaFilteredCount"],n);const s=x(i,["raiMediaFilteredReasons"]);return s!=null&&b(e,["raiMediaFilteredReasons"],s),e}function MH(i){const e={},t=x(i,["video"]);return t!=null&&b(e,["video"],UH(t)),e}function kH(i){const e={},t=x(i,["_self"]);return t!=null&&b(e,["video"],jH(t)),e}function DH(i){const e={},t=x(i,["operationName"]);return t!=null&&b(e,["_url","operationName"],t),e}function IH(i){const e={},t=x(i,["operationName"]);return t!=null&&b(e,["_url","operationName"],t),e}function PH(i){const e={},t=x(i,["name"]);t!=null&&b(e,["name"],t);const n=x(i,["metadata"]);n!=null&&b(e,["metadata"],n);const s=x(i,["done"]);s!=null&&b(e,["done"],s);const a=x(i,["error"]);a!=null&&b(e,["error"],a);const o=x(i,["response"]);return o!=null&&b(e,["response"],LH(o)),e}function LH(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["parent"]);n!=null&&b(e,["parent"],n);const s=x(i,["documentName"]);return s!=null&&b(e,["documentName"],s),e}function $P(i){const e={},t=x(i,["name"]);t!=null&&b(e,["name"],t);const n=x(i,["metadata"]);n!=null&&b(e,["metadata"],n);const s=x(i,["done"]);s!=null&&b(e,["done"],s);const a=x(i,["error"]);a!=null&&b(e,["error"],a);const o=x(i,["response"]);return o!=null&&b(e,["response"],FH(o)),e}function FH(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["parent"]);n!=null&&b(e,["parent"],n);const s=x(i,["documentName"]);return s!=null&&b(e,["documentName"],s),e}function UH(i){const e={},t=x(i,["uri"]);t!=null&&b(e,["uri"],t);const n=x(i,["encodedVideo"]);n!=null&&b(e,["videoBytes"],BC(n));const s=x(i,["encoding"]);return s!=null&&b(e,["mimeType"],s),e}function jH(i){const e={},t=x(i,["gcsUri"]);t!=null&&b(e,["uri"],t);const n=x(i,["bytesBase64Encoded"]);n!=null&&b(e,["videoBytes"],BC(n));const s=x(i,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var rM;(function(i){i.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",i.OUTCOME_OK="OUTCOME_OK",i.OUTCOME_FAILED="OUTCOME_FAILED",i.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(rM||(rM={}));var aM;(function(i){i.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",i.PYTHON="PYTHON"})(aM||(aM={}));var oM;(function(i){i.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",i.SILENT="SILENT",i.WHEN_IDLE="WHEN_IDLE",i.INTERRUPT="INTERRUPT"})(oM||(oM={}));var ti;(function(i){i.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",i.STRING="STRING",i.NUMBER="NUMBER",i.INTEGER="INTEGER",i.BOOLEAN="BOOLEAN",i.ARRAY="ARRAY",i.OBJECT="OBJECT",i.NULL="NULL"})(ti||(ti={}));var lM;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(lM||(lM={}));var cM;(function(i){i.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",i.SIMPLE_SEARCH="SIMPLE_SEARCH",i.ELASTIC_SEARCH="ELASTIC_SEARCH"})(cM||(cM={}));var uM;(function(i){i.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",i.NO_AUTH="NO_AUTH",i.API_KEY_AUTH="API_KEY_AUTH",i.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",i.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",i.OAUTH="OAUTH",i.OIDC_AUTH="OIDC_AUTH"})(uM||(uM={}));var dM;(function(i){i.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",i.HTTP_IN_QUERY="HTTP_IN_QUERY",i.HTTP_IN_HEADER="HTTP_IN_HEADER",i.HTTP_IN_PATH="HTTP_IN_PATH",i.HTTP_IN_BODY="HTTP_IN_BODY",i.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(dM||(dM={}));var hM;(function(i){i.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",i.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",i.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",i.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(hM||(hM={}));var fM;(function(i){i.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",i.LOW="LOW",i.HIGH="HIGH"})(fM||(fM={}));var pM;(function(i){i.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",i.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",i.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",i.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",i.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",i.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",i.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",i.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",i.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",i.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(pM||(pM={}));var mM;(function(i){i.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",i.SEVERITY="SEVERITY",i.PROBABILITY="PROBABILITY"})(mM||(mM={}));var gM;(function(i){i.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE",i.OFF="OFF"})(gM||(gM={}));var yM;(function(i){i.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",i.STOP="STOP",i.MAX_TOKENS="MAX_TOKENS",i.SAFETY="SAFETY",i.RECITATION="RECITATION",i.LANGUAGE="LANGUAGE",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.SPII="SPII",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.IMAGE_SAFETY="IMAGE_SAFETY",i.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",i.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",i.NO_IMAGE="NO_IMAGE"})(yM||(yM={}));var vM;(function(i){i.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",i.NEGLIGIBLE="NEGLIGIBLE",i.LOW="LOW",i.MEDIUM="MEDIUM",i.HIGH="HIGH"})(vM||(vM={}));var xM;(function(i){i.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",i.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",i.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",i.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",i.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(xM||(xM={}));var bM;(function(i){i.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",i.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",i.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",i.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",i.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(bM||(bM={}));var wM;(function(i){i.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",i.SAFETY="SAFETY",i.OTHER="OTHER",i.BLOCKLIST="BLOCKLIST",i.PROHIBITED_CONTENT="PROHIBITED_CONTENT",i.IMAGE_SAFETY="IMAGE_SAFETY",i.MODEL_ARMOR="MODEL_ARMOR",i.JAILBREAK="JAILBREAK"})(wM||(wM={}));var SM;(function(i){i.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",i.ON_DEMAND="ON_DEMAND",i.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(SM||(SM={}));var sb;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.AUDIO="AUDIO"})(sb||(sb={}));var EM;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(EM||(EM={}));var AM;(function(i){i.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",i.TUNING_MODE_FULL="TUNING_MODE_FULL",i.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(AM||(AM={}));var CM;(function(i){i.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",i.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",i.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",i.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",i.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",i.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",i.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(CM||(CM={}));var EA;(function(i){i.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",i.JOB_STATE_QUEUED="JOB_STATE_QUEUED",i.JOB_STATE_PENDING="JOB_STATE_PENDING",i.JOB_STATE_RUNNING="JOB_STATE_RUNNING",i.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",i.JOB_STATE_FAILED="JOB_STATE_FAILED",i.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",i.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",i.JOB_STATE_PAUSED="JOB_STATE_PAUSED",i.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",i.JOB_STATE_UPDATING="JOB_STATE_UPDATING",i.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(EA||(EA={}));var TM;(function(i){i.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",i.TUNING_TASK_I2V="TUNING_TASK_I2V",i.TUNING_TASK_T2V="TUNING_TASK_T2V",i.TUNING_TASK_R2V="TUNING_TASK_R2V"})(TM||(TM={}));var _M;(function(i){i.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",i.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",i.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",i.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(_M||(_M={}));var NM;(function(i){i.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",i.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",i.BALANCED="BALANCED",i.PRIORITIZE_COST="PRIORITIZE_COST"})(NM||(NM={}));var RM;(function(i){i.UNSPECIFIED="UNSPECIFIED",i.BLOCKING="BLOCKING",i.NON_BLOCKING="NON_BLOCKING"})(RM||(RM={}));var MM;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.MODE_DYNAMIC="MODE_DYNAMIC"})(MM||(MM={}));var kM;(function(i){i.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",i.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(kM||(kM={}));var DM;(function(i){i.MODE_UNSPECIFIED="MODE_UNSPECIFIED",i.AUTO="AUTO",i.ANY="ANY",i.NONE="NONE",i.VALIDATED="VALIDATED"})(DM||(DM={}));var IM;(function(i){i.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",i.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",i.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",i.BLOCK_NONE="BLOCK_NONE"})(IM||(IM={}));var PM;(function(i){i.DONT_ALLOW="DONT_ALLOW",i.ALLOW_ADULT="ALLOW_ADULT",i.ALLOW_ALL="ALLOW_ALL"})(PM||(PM={}));var LM;(function(i){i.auto="auto",i.en="en",i.ja="ja",i.ko="ko",i.hi="hi",i.zh="zh",i.pt="pt",i.es="es"})(LM||(LM={}));var FM;(function(i){i.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",i.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",i.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",i.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",i.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(FM||(FM={}));var UM;(function(i){i.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",i.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",i.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",i.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(UM||(UM={}));var jM;(function(i){i.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",i.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",i.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",i.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(jM||(jM={}));var BM;(function(i){i.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",i.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",i.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",i.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",i.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",i.EDIT_MODE_STYLE="EDIT_MODE_STYLE",i.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",i.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(BM||(BM={}));var OM;(function(i){i.FOREGROUND="FOREGROUND",i.BACKGROUND="BACKGROUND",i.PROMPT="PROMPT",i.SEMANTIC="SEMANTIC",i.INTERACTIVE="INTERACTIVE"})(OM||(OM={}));var HM;(function(i){i.ASSET="ASSET",i.STYLE="STYLE"})(HM||(HM={}));var zM;(function(i){i.INSERT="INSERT",i.REMOVE="REMOVE",i.REMOVE_STATIC="REMOVE_STATIC",i.OUTPAINT="OUTPAINT"})(zM||(zM={}));var GM;(function(i){i.OPTIMIZED="OPTIMIZED",i.LOSSLESS="LOSSLESS"})(GM||(GM={}));var VM;(function(i){i.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",i.PREFERENCE_TUNING="PREFERENCE_TUNING"})(VM||(VM={}));var qM;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.STATE_PENDING="STATE_PENDING",i.STATE_ACTIVE="STATE_ACTIVE",i.STATE_FAILED="STATE_FAILED"})(qM||(qM={}));var $M;(function(i){i.STATE_UNSPECIFIED="STATE_UNSPECIFIED",i.PROCESSING="PROCESSING",i.ACTIVE="ACTIVE",i.FAILED="FAILED"})($M||($M={}));var YM;(function(i){i.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",i.UPLOADED="UPLOADED",i.GENERATED="GENERATED"})(YM||(YM={}));var WM;(function(i){i.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",i.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",i.RESPONSE_REJECTED="RESPONSE_REJECTED",i.NEED_MORE_INPUT="NEED_MORE_INPUT"})(WM||(WM={}));var XM;(function(i){i.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",i.TEXT="TEXT",i.IMAGE="IMAGE",i.VIDEO="VIDEO",i.AUDIO="AUDIO",i.DOCUMENT="DOCUMENT"})(XM||(XM={}));var JM;(function(i){i.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",i.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",i.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(JM||(JM={}));var KM;(function(i){i.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",i.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",i.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(KM||(KM={}));var QM;(function(i){i.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",i.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",i.NO_INTERRUPTION="NO_INTERRUPTION"})(QM||(QM={}));var ZM;(function(i){i.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",i.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",i.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ZM||(ZM={}));var ek;(function(i){i.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",i.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",i.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",i.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",i.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",i.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",i.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",i.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",i.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",i.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",i.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",i.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",i.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ek||(ek={}));var tk;(function(i){i.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",i.QUALITY="QUALITY",i.DIVERSITY="DIVERSITY",i.VOCALIZATION="VOCALIZATION"})(tk||(tk={}));var Xh;(function(i){i.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",i.PLAY="PLAY",i.PAUSE="PAUSE",i.STOP="STOP",i.RESET_CONTEXT="RESET_CONTEXT"})(Xh||(Xh={}));class AA{constructor(e){const t={};for(const n of e.headers.entries())t[n[0]]=n[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class Vm{get text(){var e,t,n,s,a,o,c,u;if(((s=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",p=!1;const y=[];for(const v of(u=(c=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)!==null&&u!==void 0?u:[]){for(const[w,A]of Object.entries(v))w!=="text"&&w!=="thought"&&w!=="thoughtSignature"&&(A!==null||A!==void 0)&&y.push(w);if(typeof v.text=="string"){if(typeof v.thought=="boolean"&&v.thought)continue;p=!0,d+=v.text}}return y.length>0&&console.warn(`there are non-text parts ${y} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),p?d:void 0}get data(){var e,t,n,s,a,o,c,u;if(((s=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const p=[];for(const y of(u=(c=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)!==null&&u!==void 0?u:[]){for(const[v,w]of Object.entries(y))v!=="inlineData"&&(w!==null||w!==void 0)&&p.push(v);y.inlineData&&typeof y.inlineData.data=="string"&&(d+=atob(y.inlineData.data))}return p.length>0&&console.warn(`there are non-data parts ${p} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,t,n,s,a,o,c,u;if(((s=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(u=(c=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)===null||u===void 0?void 0:u.filter(p=>p.functionCall).map(p=>p.functionCall).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,t,n,s,a,o,c,u,d;if(((s=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const p=(u=(c=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)===null||u===void 0?void 0:u.filter(y=>y.executableCode).map(y=>y.executableCode).filter(y=>y!==void 0);if((p==null?void 0:p.length)!==0)return(d=p==null?void 0:p[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,t,n,s,a,o,c,u,d;if(((s=(n=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||n===void 0?void 0:n.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const p=(u=(c=(o=(a=this.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)===null||u===void 0?void 0:u.filter(y=>y.codeExecutionResult).map(y=>y.codeExecutionResult).filter(y=>y!==void 0);if((p==null?void 0:p.length)!==0)return(d=p==null?void 0:p[0])===null||d===void 0?void 0:d.output}}class nk{}class ik{}class BH{}class OH{}class HH{}class zH{}class sk{}class rk{}class ak{}class GH{}class rb{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const n=new rb;let s;const a=e;return t?s=_H(a):s=TH(a),Object.assign(n,s),n}}class ok{}class lk{}class ck{}class uk{}class VH{}class qH{}class $H{}class OC{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const n=new OC,a=PH(e);return Object.assign(n,a),n}}class YH{}class WH{}class XH{}class dk{}class JH{get text(){var e,t,n;let s="",a=!1;const o=[];for(const c of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[u,d]of Object.entries(c))u!=="text"&&u!=="thought"&&d!==null&&o.push(u);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;a=!0,s+=c.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),a?s:void 0}get data(){var e,t,n;let s="";const a=[];for(const o of(n=(t=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||t===void 0?void 0:t.parts)!==null&&n!==void 0?n:[]){for(const[c,u]of Object.entries(o))c!=="inlineData"&&u!==null&&a.push(c);o.inlineData&&typeof o.inlineData.data=="string"&&(s+=atob(o.inlineData.data))}return a.length>0&&console.warn(`there are non-data parts ${a} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),s.length>0?btoa(s):void 0}}class KH{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class HC{_fromAPIResponse({apiResponse:e,_isVertexAI:t}){const n=new HC,a=$P(e);return Object.assign(n,a),n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Rt(i,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(i.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function YP(i,e){const t=Rt(i,e);return t?t.startsWith("publishers/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}`:t.startsWith("models/")&&i.isVertexAI()?`projects/${i.getProject()}/locations/${i.getLocation()}/publishers/google/${t}`:t:""}function WP(i){return Array.isArray(i)?i.map(e=>ab(e)):[ab(i)]}function ab(i){if(typeof i=="object"&&i!==null)return i;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof i}`)}function XP(i){const e=ab(i);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function JP(i){const e=ab(i);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function hk(i){if(i==null)throw new Error("PartUnion is required");if(typeof i=="object")return i;if(typeof i=="string")return{text:i};throw new Error(`Unsupported part type: ${typeof i}`)}function KP(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("PartListUnion is required");return Array.isArray(i)?i.map(e=>hk(e)):[hk(i)]}function CA(i){return i!=null&&typeof i=="object"&&"parts"in i&&Array.isArray(i.parts)}function fk(i){return i!=null&&typeof i=="object"&&"functionCall"in i}function pk(i){return i!=null&&typeof i=="object"&&"functionResponse"in i}function $i(i){if(i==null)throw new Error("ContentUnion is required");return CA(i)?i:{role:"user",parts:KP(i)}}function zC(i,e){if(!e)return[];if(i.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const n=$i(t);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]});if(i.isVertexAI()){const t=$i(e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>$i(t)):[$i(e)]}function Lr(i){if(i==null||Array.isArray(i)&&i.length===0)throw new Error("contents are required");if(!Array.isArray(i)){if(fk(i)||pk(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[$i(i)]}const e=[],t=[],n=CA(i[0]);for(const s of i){const a=CA(s);if(a!=n)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(a)e.push(s);else{if(fk(s)||pk(s))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");t.push(s)}}return n||e.push({role:"user",parts:KP(t)}),e}function QH(i,e){i.includes("null")&&(e.nullable=!0);const t=i.filter(n=>n!=="null");if(t.length===1)e.type=Object.values(ti).includes(t[0].toUpperCase())?t[0].toUpperCase():ti.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const n of t)e.anyOf.push({type:Object.values(ti).includes(n.toUpperCase())?n.toUpperCase():ti.TYPE_UNSPECIFIED})}}function rf(i){const e={},t=["items"],n=["anyOf"],s=["properties"];if(i.type&&i.anyOf)throw new Error("type and anyOf cannot be both populated.");const a=i.anyOf;a!=null&&a.length==2&&(a[0].type==="null"?(e.nullable=!0,i=a[1]):a[1].type==="null"&&(e.nullable=!0,i=a[0])),i.type instanceof Array&&QH(i.type,e);for(const[o,c]of Object.entries(i))if(c!=null)if(o=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(ti).includes(c.toUpperCase())?c.toUpperCase():ti.TYPE_UNSPECIFIED}else if(t.includes(o))e[o]=rf(c);else if(n.includes(o)){const u=[];for(const d of c){if(d.type=="null"){e.nullable=!0;continue}u.push(rf(d))}e[o]=u}else if(s.includes(o)){const u={};for(const[d,p]of Object.entries(c))u[d]=rf(p);e[o]=u}else{if(o==="additionalProperties")continue;e[o]=c}return e}function GC(i){return rf(i)}function VC(i){if(typeof i=="object")return i;if(typeof i=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:i}}};throw new Error(`Unsupported speechConfig type: ${typeof i}`)}function qC(i){if("multiSpeakerVoiceConfig"in i)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return i}function $p(i){if(i.functionDeclarations)for(const e of i.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=rf(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=rf(e.response));return i}function Yp(i){if(i==null)throw new Error("tools is required");if(!Array.isArray(i))throw new Error("tools is required and must be an array of Tools");const e=[];for(const t of i)e.push(t);return e}function ZH(i,e,t,n=1){const s=!e.startsWith(`${t}/`)&&e.split("/").length===n;return i.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${i.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${i.getProject()}/locations/${i.getLocation()}/${e}`:s?`projects/${i.getProject()}/locations/${i.getLocation()}/${t}/${e}`:e:s?`${t}/${e}`:e}function vl(i,e){if(typeof e!="string")throw new Error("name must be a string");return ZH(i,e,"cachedContents")}function QP(i){switch(i){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return i}}function eu(i){return BC(i)}function e6(i){return i!=null&&typeof i=="object"&&"name"in i}function t6(i){return i!=null&&typeof i=="object"&&"video"in i}function n6(i){return i!=null&&typeof i=="object"&&"uri"in i}function ZP(i){var e;let t;if(e6(i)&&(t=i.name),!(n6(i)&&(t=i.uri,t===void 0))&&!(t6(i)&&(t=(e=i.video)===null||e===void 0?void 0:e.uri,t===void 0))){if(typeof i=="string"&&(t=i),t===void 0)throw new Error("Could not extract file name from the provided input.");if(t.startsWith("https://")){const s=t.split("files/")[1].match(/[a-z0-9]+/);if(s===null)throw new Error(`Could not extract file name from URI ${t}`);t=s[0]}else t.startsWith("files/")&&(t=t.split("files/")[1]);return t}}function eL(i,e){let t;return i.isVertexAI()?t=e?"publishers/google/models":"models":t=e?"models":"tunedModels",t}function tL(i){for(const e of["models","tunedModels","publisherModels"])if(i6(i,e))return i[e];return[]}function i6(i,e){return i!==null&&typeof i=="object"&&e in i}function s6(i,e={}){const t=i,n={name:t.name,description:t.description,parametersJsonSchema:t.inputSchema};return t.outputSchema&&(n.responseJsonSchema=t.outputSchema),e.behavior&&(n.behavior=e.behavior),{functionDeclarations:[n]}}function r6(i,e={}){const t=[],n=new Set;for(const s of i){const a=s.name;if(n.has(a))throw new Error(`Duplicate function name ${a} found in MCP tools. Please ensure function names are unique.`);n.add(a);const o=s6(s,e);o.functionDeclarations&&t.push(...o.functionDeclarations)}return{functionDeclarations:t}}function nL(i,e){let t;if(typeof e=="string")if(i.isVertexAI())if(e.startsWith("gs://"))t={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))t={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))t={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(i.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");t={inlinedRequests:e}}else t=e;const n=[t.gcsUri,t.bigqueryUri].filter(Boolean).length,s=[t.inlinedRequests,t.fileName].filter(Boolean).length;if(i.isVertexAI()){if(s>0||n!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(n>0||s!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return t}function a6(i){if(typeof i!="string")return i;const e=i;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function iL(i){if(typeof i!="object"||i===null)return{};const e=i,t=e.inlinedResponses;if(typeof t!="object"||t===null)return i;const s=t.inlinedResponses;if(!Array.isArray(s)||s.length===0)return i;let a=!1;for(const o of s){if(typeof o!="object"||o===null)continue;const u=o.response;if(typeof u!="object"||u===null)continue;if(u.embedding!==void 0){a=!0;break}}return a&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),i}function Wp(i,e){const t=e;if(!i.isVertexAI()){if(/batches\/[^/]+$/.test(t))return t.split("/").pop();throw new Error(`Invalid batch job name: ${t}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(t))return t.split("/").pop();if(/^\d+$/.test(t))return t;throw new Error(`Invalid batch job name: ${t}.`)}function sL(i){const e=i;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function o6(i){const e={},t=x(i,["responsesFile"]);t!=null&&b(e,["fileName"],t);const n=x(i,["inlinedResponses","inlinedResponses"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>H6(o))),b(e,["inlinedResponses"],a)}const s=x(i,["inlinedEmbedContentResponses","inlinedResponses"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),b(e,["inlinedEmbedContentResponses"],a)}return e}function l6(i){const e={},t=x(i,["predictionsFormat"]);t!=null&&b(e,["format"],t);const n=x(i,["gcsDestination","outputUriPrefix"]);n!=null&&b(e,["gcsUri"],n);const s=x(i,["bigqueryDestination","outputUri"]);return s!=null&&b(e,["bigqueryUri"],s),e}function c6(i){const e={},t=x(i,["format"]);t!=null&&b(e,["predictionsFormat"],t);const n=x(i,["gcsUri"]);n!=null&&b(e,["gcsDestination","outputUriPrefix"],n);const s=x(i,["bigqueryUri"]);if(s!=null&&b(e,["bigqueryDestination","outputUri"],s),x(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(i,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(x(i,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function gx(i){const e={},t=x(i,["name"]);t!=null&&b(e,["name"],t);const n=x(i,["metadata","displayName"]);n!=null&&b(e,["displayName"],n);const s=x(i,["metadata","state"]);s!=null&&b(e,["state"],sL(s));const a=x(i,["metadata","createTime"]);a!=null&&b(e,["createTime"],a);const o=x(i,["metadata","endTime"]);o!=null&&b(e,["endTime"],o);const c=x(i,["metadata","updateTime"]);c!=null&&b(e,["updateTime"],c);const u=x(i,["metadata","model"]);u!=null&&b(e,["model"],u);const d=x(i,["metadata","output"]);return d!=null&&b(e,["dest"],o6(iL(d))),e}function TA(i){const e={},t=x(i,["name"]);t!=null&&b(e,["name"],t);const n=x(i,["displayName"]);n!=null&&b(e,["displayName"],n);const s=x(i,["state"]);s!=null&&b(e,["state"],sL(s));const a=x(i,["error"]);a!=null&&b(e,["error"],a);const o=x(i,["createTime"]);o!=null&&b(e,["createTime"],o);const c=x(i,["startTime"]);c!=null&&b(e,["startTime"],c);const u=x(i,["endTime"]);u!=null&&b(e,["endTime"],u);const d=x(i,["updateTime"]);d!=null&&b(e,["updateTime"],d);const p=x(i,["model"]);p!=null&&b(e,["model"],p);const y=x(i,["inputConfig"]);y!=null&&b(e,["src"],u6(y));const v=x(i,["outputConfig"]);v!=null&&b(e,["dest"],l6(iL(v)));const w=x(i,["completionStats"]);return w!=null&&b(e,["completionStats"],w),e}function u6(i){const e={},t=x(i,["instancesFormat"]);t!=null&&b(e,["format"],t);const n=x(i,["gcsSource","uris"]);n!=null&&b(e,["gcsUri"],n);const s=x(i,["bigquerySource","inputUri"]);return s!=null&&b(e,["bigqueryUri"],s),e}function d6(i,e){const t={};if(x(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(x(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const n=x(e,["fileName"]);n!=null&&b(t,["fileName"],n);const s=x(e,["inlinedRequests"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>O6(i,o))),b(t,["requests","requests"],a)}return t}function h6(i){const e={},t=x(i,["format"]);t!=null&&b(e,["instancesFormat"],t);const n=x(i,["gcsUri"]);n!=null&&b(e,["gcsSource","uris"],n);const s=x(i,["bigqueryUri"]);if(s!=null&&b(e,["bigquerySource","inputUri"],s),x(i,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(i,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function f6(i){const e={},t=x(i,["data"]);if(t!=null&&b(e,["data"],t),x(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(i,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function p6(i,e){const t={},n=x(e,["name"]);return n!=null&&b(t,["_url","name"],Wp(i,n)),t}function m6(i,e){const t={},n=x(e,["name"]);return n!=null&&b(t,["_url","name"],Wp(i,n)),t}function g6(i){const e={},t=x(i,["content"]);t!=null&&b(e,["content"],t);const n=x(i,["citationMetadata"]);n!=null&&b(e,["citationMetadata"],y6(n));const s=x(i,["tokenCount"]);s!=null&&b(e,["tokenCount"],s);const a=x(i,["finishReason"]);a!=null&&b(e,["finishReason"],a);const o=x(i,["avgLogprobs"]);o!=null&&b(e,["avgLogprobs"],o);const c=x(i,["groundingMetadata"]);c!=null&&b(e,["groundingMetadata"],c);const u=x(i,["index"]);u!=null&&b(e,["index"],u);const d=x(i,["logprobsResult"]);d!=null&&b(e,["logprobsResult"],d);const p=x(i,["safetyRatings"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(w=>w)),b(e,["safetyRatings"],v)}const y=x(i,["urlContextMetadata"]);return y!=null&&b(e,["urlContextMetadata"],y),e}function y6(i){const e={},t=x(i,["citationSources"]);if(t!=null){let n=t;Array.isArray(n)&&(n=n.map(s=>s)),b(e,["citations"],n)}return e}function rL(i){const e={},t=x(i,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>W6(a))),b(e,["parts"],s)}const n=x(i,["role"]);return n!=null&&b(e,["role"],n),e}function v6(i,e){const t={},n=x(i,["displayName"]);if(e!==void 0&&n!=null&&b(e,["batch","displayName"],n),x(i,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return t}function x6(i,e){const t={},n=x(i,["displayName"]);e!==void 0&&n!=null&&b(e,["displayName"],n);const s=x(i,["dest"]);return e!==void 0&&s!=null&&b(e,["outputConfig"],c6(a6(s))),t}function mk(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["_url","model"],Rt(i,n));const s=x(e,["src"]);s!=null&&b(t,["batch","inputConfig"],d6(i,nL(i,s)));const a=x(e,["config"]);return a!=null&&v6(a,t),t}function b6(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["model"],Rt(i,n));const s=x(e,["src"]);s!=null&&b(t,["inputConfig"],h6(nL(i,s)));const a=x(e,["config"]);return a!=null&&x6(a,t),t}function w6(i,e){const t={},n=x(i,["displayName"]);return e!==void 0&&n!=null&&b(e,["batch","displayName"],n),t}function S6(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["_url","model"],Rt(i,n));const s=x(e,["src"]);s!=null&&b(t,["batch","inputConfig"],R6(i,s));const a=x(e,["config"]);return a!=null&&w6(a,t),t}function E6(i,e){const t={},n=x(e,["name"]);return n!=null&&b(t,["_url","name"],Wp(i,n)),t}function A6(i,e){const t={},n=x(e,["name"]);return n!=null&&b(t,["_url","name"],Wp(i,n)),t}function C6(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["name"]);n!=null&&b(e,["name"],n);const s=x(i,["done"]);s!=null&&b(e,["done"],s);const a=x(i,["error"]);return a!=null&&b(e,["error"],a),e}function T6(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["name"]);n!=null&&b(e,["name"],n);const s=x(i,["done"]);s!=null&&b(e,["done"],s);const a=x(i,["error"]);return a!=null&&b(e,["error"],a),e}function _6(i,e){const t={},n=x(e,["contents"]);if(n!=null){let a=zC(i,n);Array.isArray(a)&&(a=a.map(o=>o)),b(t,["requests[]","request","content"],a)}const s=x(e,["config"]);return s!=null&&(b(t,["_self"],N6(s,t)),AH(t,{"requests[].*":"requests[].request.*"})),t}function N6(i,e){const t={},n=x(i,["taskType"]);e!==void 0&&n!=null&&b(e,["requests[]","taskType"],n);const s=x(i,["title"]);e!==void 0&&s!=null&&b(e,["requests[]","title"],s);const a=x(i,["outputDimensionality"]);if(e!==void 0&&a!=null&&b(e,["requests[]","outputDimensionality"],a),x(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function R6(i,e){const t={},n=x(e,["fileName"]);n!=null&&b(t,["file_name"],n);const s=x(e,["inlinedRequests"]);return s!=null&&b(t,["requests"],_6(i,s)),t}function M6(i){const e={};if(x(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=x(i,["fileUri"]);t!=null&&b(e,["fileUri"],t);const n=x(i,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function k6(i){const e={},t=x(i,["id"]);t!=null&&b(e,["id"],t);const n=x(i,["args"]);n!=null&&b(e,["args"],n);const s=x(i,["name"]);if(s!=null&&b(e,["name"],s),x(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function D6(i){const e={},t=x(i,["mode"]);t!=null&&b(e,["mode"],t);const n=x(i,["allowedFunctionNames"]);if(n!=null&&b(e,["allowedFunctionNames"],n),x(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function I6(i,e,t){const n={},s=x(e,["systemInstruction"]);t!==void 0&&s!=null&&b(t,["systemInstruction"],rL($i(s)));const a=x(e,["temperature"]);a!=null&&b(n,["temperature"],a);const o=x(e,["topP"]);o!=null&&b(n,["topP"],o);const c=x(e,["topK"]);c!=null&&b(n,["topK"],c);const u=x(e,["candidateCount"]);u!=null&&b(n,["candidateCount"],u);const d=x(e,["maxOutputTokens"]);d!=null&&b(n,["maxOutputTokens"],d);const p=x(e,["stopSequences"]);p!=null&&b(n,["stopSequences"],p);const y=x(e,["responseLogprobs"]);y!=null&&b(n,["responseLogprobs"],y);const v=x(e,["logprobs"]);v!=null&&b(n,["logprobs"],v);const w=x(e,["presencePenalty"]);w!=null&&b(n,["presencePenalty"],w);const A=x(e,["frequencyPenalty"]);A!=null&&b(n,["frequencyPenalty"],A);const C=x(e,["seed"]);C!=null&&b(n,["seed"],C);const T=x(e,["responseMimeType"]);T!=null&&b(n,["responseMimeType"],T);const _=x(e,["responseSchema"]);_!=null&&b(n,["responseSchema"],GC(_));const D=x(e,["responseJsonSchema"]);if(D!=null&&b(n,["responseJsonSchema"],D),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=x(e,["safetySettings"]);if(t!==void 0&&R!=null){let X=R;Array.isArray(X)&&(X=X.map(ie=>X6(ie))),b(t,["safetySettings"],X)}const L=x(e,["tools"]);if(t!==void 0&&L!=null){let X=Yp(L);Array.isArray(X)&&(X=X.map(ie=>K6($p(ie)))),b(t,["tools"],X)}const F=x(e,["toolConfig"]);if(t!==void 0&&F!=null&&b(t,["toolConfig"],J6(F)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=x(e,["cachedContent"]);t!==void 0&&U!=null&&b(t,["cachedContent"],vl(i,U));const M=x(e,["responseModalities"]);M!=null&&b(n,["responseModalities"],M);const O=x(e,["mediaResolution"]);O!=null&&b(n,["mediaResolution"],O);const z=x(e,["speechConfig"]);if(z!=null&&b(n,["speechConfig"],VC(z)),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const J=x(e,["thinkingConfig"]);J!=null&&b(n,["thinkingConfig"],J);const G=x(e,["imageConfig"]);return G!=null&&b(n,["imageConfig"],B6(G)),n}function P6(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>g6(d))),b(e,["candidates"],u)}const s=x(i,["modelVersion"]);s!=null&&b(e,["modelVersion"],s);const a=x(i,["promptFeedback"]);a!=null&&b(e,["promptFeedback"],a);const o=x(i,["responseId"]);o!=null&&b(e,["responseId"],o);const c=x(i,["usageMetadata"]);return c!=null&&b(e,["usageMetadata"],c),e}function L6(i,e){const t={},n=x(e,["name"]);return n!=null&&b(t,["_url","name"],Wp(i,n)),t}function F6(i,e){const t={},n=x(e,["name"]);return n!=null&&b(t,["_url","name"],Wp(i,n)),t}function U6(i){const e={};if(x(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=x(i,["enableWidget"]);return t!=null&&b(e,["enableWidget"],t),e}function j6(i){const e={};if(x(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=x(i,["timeRangeFilter"]);return t!=null&&b(e,["timeRangeFilter"],t),e}function B6(i){const e={},t=x(i,["aspectRatio"]);t!=null&&b(e,["aspectRatio"],t);const n=x(i,["imageSize"]);if(n!=null&&b(e,["imageSize"],n),x(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(x(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function O6(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["request","model"],Rt(i,n));const s=x(e,["contents"]);if(s!=null){let c=Lr(s);Array.isArray(c)&&(c=c.map(u=>rL(u))),b(t,["request","contents"],c)}const a=x(e,["metadata"]);a!=null&&b(t,["metadata"],a);const o=x(e,["config"]);return o!=null&&b(t,["request","generationConfig"],I6(i,o,x(t,["request"],{}))),t}function H6(i){const e={},t=x(i,["response"]);t!=null&&b(e,["response"],P6(t));const n=x(i,["error"]);return n!=null&&b(e,["error"],n),e}function z6(i,e){const t={},n=x(i,["pageSize"]);e!==void 0&&n!=null&&b(e,["_query","pageSize"],n);const s=x(i,["pageToken"]);if(e!==void 0&&s!=null&&b(e,["_query","pageToken"],s),x(i,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return t}function G6(i,e){const t={},n=x(i,["pageSize"]);e!==void 0&&n!=null&&b(e,["_query","pageSize"],n);const s=x(i,["pageToken"]);e!==void 0&&s!=null&&b(e,["_query","pageToken"],s);const a=x(i,["filter"]);return e!==void 0&&a!=null&&b(e,["_query","filter"],a),t}function V6(i){const e={},t=x(i,["config"]);return t!=null&&z6(t,e),e}function q6(i){const e={},t=x(i,["config"]);return t!=null&&G6(t,e),e}function $6(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);const s=x(i,["operations"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>gx(o))),b(e,["batchJobs"],a)}return e}function Y6(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);const s=x(i,["batchPredictionJobs"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>TA(o))),b(e,["batchJobs"],a)}return e}function W6(i){const e={},t=x(i,["mediaResolution"]);t!=null&&b(e,["mediaResolution"],t);const n=x(i,["codeExecutionResult"]);n!=null&&b(e,["codeExecutionResult"],n);const s=x(i,["executableCode"]);s!=null&&b(e,["executableCode"],s);const a=x(i,["fileData"]);a!=null&&b(e,["fileData"],M6(a));const o=x(i,["functionCall"]);o!=null&&b(e,["functionCall"],k6(o));const c=x(i,["functionResponse"]);c!=null&&b(e,["functionResponse"],c);const u=x(i,["inlineData"]);u!=null&&b(e,["inlineData"],f6(u));const d=x(i,["text"]);d!=null&&b(e,["text"],d);const p=x(i,["thought"]);p!=null&&b(e,["thought"],p);const y=x(i,["thoughtSignature"]);y!=null&&b(e,["thoughtSignature"],y);const v=x(i,["videoMetadata"]);return v!=null&&b(e,["videoMetadata"],v),e}function X6(i){const e={},t=x(i,["category"]);if(t!=null&&b(e,["category"],t),x(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=x(i,["threshold"]);return n!=null&&b(e,["threshold"],n),e}function J6(i){const e={},t=x(i,["functionCallingConfig"]);t!=null&&b(e,["functionCallingConfig"],D6(t));const n=x(i,["retrievalConfig"]);return n!=null&&b(e,["retrievalConfig"],n),e}function K6(i){const e={},t=x(i,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(y=>y)),b(e,["functionDeclarations"],p)}if(x(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(i,["googleSearchRetrieval"]);n!=null&&b(e,["googleSearchRetrieval"],n);const s=x(i,["computerUse"]);s!=null&&b(e,["computerUse"],s);const a=x(i,["fileSearch"]);a!=null&&b(e,["fileSearch"],a);const o=x(i,["codeExecution"]);if(o!=null&&b(e,["codeExecution"],o),x(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=x(i,["googleMaps"]);c!=null&&b(e,["googleMaps"],U6(c));const u=x(i,["googleSearch"]);u!=null&&b(e,["googleSearch"],j6(u));const d=x(i,["urlContext"]);return d!=null&&b(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var cl;(function(i){i.PAGED_ITEM_BATCH_JOBS="batchJobs",i.PAGED_ITEM_MODELS="models",i.PAGED_ITEM_TUNING_JOBS="tuningJobs",i.PAGED_ITEM_FILES="files",i.PAGED_ITEM_CACHED_CONTENTS="cachedContents",i.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",i.PAGED_ITEM_DOCUMENTS="documents"})(cl||(cl={}));class Jd{constructor(e,t,n,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,n,s)}init(e,t,n){var s,a;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.sdkHttpResponseInternal=t==null?void 0:t.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!n||Object.keys(n).length===0?o={config:{}}:typeof n=="object"?o=Object.assign({},n):o=n,o.config&&(o.config.pageToken=t.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(a=(s=o.config)===null||s===void 0?void 0:s.pageSize)!==null&&a!==void 0?a:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Q6 extends yl{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Jd(cl.PAGED_ITEM_BATCH_JOBS,n=>this.listInternal(n),await this.listInternal(t),t),this.create=async t=>(this.apiClient.isVertexAI()&&(t.config=this.formatDestination(t.src,t.config)),this.createInternal(t)),this.createEmbeddings=async t=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(t)}}createInlinedGenerateContentRequest(e){const t=mk(this.apiClient,e),n=t._url,s=Ae("{model}:batchGenerateContent",n),c=t.batch.inputConfig.requests,u=c.requests,d=[];for(const p of u){const y=Object.assign({},p);if(y.systemInstruction){const v=y.systemInstruction;delete y.systemInstruction;const w=y.request;w.systemInstruction=v,y.request=w}d.push(y)}return c.requests=d,delete t.config,delete t._url,delete t._query,{path:s,body:t}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,t){const n=t?Object.assign({},t):{},s=Date.now().toString();if(n.displayName||(n.displayName=`genaiBatchJob_${s}`),n.dest===void 0){const a=this.getGcsUri(e),o=this.getBigqueryUri(e);if(a)a.endsWith(".jsonl")?n.dest=`${a.slice(0,-6)}/dest`:n.dest=`${a}_dest_${s}`;else if(o)n.dest=`${o}_dest_${s}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return n}async createInternal(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=b6(this.apiClient,e);return c=Ae("batchPredictionJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),o.then(p=>TA(p))}else{const d=mk(this.apiClient,e);return c=Ae("{model}:batchGenerateContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),o.then(p=>gx(p))}}async createEmbeddingsInternal(e){var t,n;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=S6(this.apiClient,e);return a=Ae("{model}:asyncBatchEmbedContent",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>gx(u))}}async get(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=F6(this.apiClient,e);return c=Ae("batchPredictionJobs/{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),o.then(p=>TA(p))}else{const d=L6(this.apiClient,e);return c=Ae("batches/{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),o.then(p=>gx(p))}}async cancel(e){var t,n,s,a;let o="",c={};if(this.apiClient.isVertexAI()){const u=m6(this.apiClient,e);o=Ae("batchPredictionJobs/{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}else{const u=p6(this.apiClient,e);o=Ae("batches/{name}:cancel",u._url),c=u._query,delete u._url,delete u._query,await this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal})}}async listInternal(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=q6(e);return c=Ae("batchPredictionJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const y=Y6(p),v=new dk;return Object.assign(v,y),v})}else{const d=V6(e);return c=Ae("batches",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const y=$6(p),v=new dk;return Object.assign(v,y),v})}}async delete(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=A6(this.apiClient,e);return c=Ae("batchPredictionJobs/{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>T6(p))}else{const d=E6(this.apiClient,e);return c=Ae("batches/{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>C6(p))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Z6(i){const e={},t=x(i,["data"]);if(t!=null&&b(e,["data"],t),x(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(i,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function gk(i){const e={},t=x(i,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>Sz(a))),b(e,["parts"],s)}const n=x(i,["role"]);return n!=null&&b(e,["role"],n),e}function ez(i,e){const t={},n=x(i,["ttl"]);e!==void 0&&n!=null&&b(e,["ttl"],n);const s=x(i,["expireTime"]);e!==void 0&&s!=null&&b(e,["expireTime"],s);const a=x(i,["displayName"]);e!==void 0&&a!=null&&b(e,["displayName"],a);const o=x(i,["contents"]);if(e!==void 0&&o!=null){let p=Lr(o);Array.isArray(p)&&(p=p.map(y=>gk(y))),b(e,["contents"],p)}const c=x(i,["systemInstruction"]);e!==void 0&&c!=null&&b(e,["systemInstruction"],gk($i(c)));const u=x(i,["tools"]);if(e!==void 0&&u!=null){let p=u;Array.isArray(p)&&(p=p.map(y=>Az(y))),b(e,["tools"],p)}const d=x(i,["toolConfig"]);if(e!==void 0&&d!=null&&b(e,["toolConfig"],Ez(d)),x(i,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return t}function tz(i,e){const t={},n=x(i,["ttl"]);e!==void 0&&n!=null&&b(e,["ttl"],n);const s=x(i,["expireTime"]);e!==void 0&&s!=null&&b(e,["expireTime"],s);const a=x(i,["displayName"]);e!==void 0&&a!=null&&b(e,["displayName"],a);const o=x(i,["contents"]);if(e!==void 0&&o!=null){let y=Lr(o);Array.isArray(y)&&(y=y.map(v=>v)),b(e,["contents"],y)}const c=x(i,["systemInstruction"]);e!==void 0&&c!=null&&b(e,["systemInstruction"],$i(c));const u=x(i,["tools"]);if(e!==void 0&&u!=null){let y=u;Array.isArray(y)&&(y=y.map(v=>Cz(v))),b(e,["tools"],y)}const d=x(i,["toolConfig"]);e!==void 0&&d!=null&&b(e,["toolConfig"],d);const p=x(i,["kmsKeyName"]);return e!==void 0&&p!=null&&b(e,["encryption_spec","kmsKeyName"],p),t}function nz(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["model"],YP(i,n));const s=x(e,["config"]);return s!=null&&ez(s,t),t}function iz(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["model"],YP(i,n));const s=x(e,["config"]);return s!=null&&tz(s,t),t}function sz(i,e){const t={},n=x(e,["name"]);return n!=null&&b(t,["_url","name"],vl(i,n)),t}function rz(i,e){const t={},n=x(e,["name"]);return n!=null&&b(t,["_url","name"],vl(i,n)),t}function az(i){const e={},t=x(i,["sdkHttpResponse"]);return t!=null&&b(e,["sdkHttpResponse"],t),e}function oz(i){const e={},t=x(i,["sdkHttpResponse"]);return t!=null&&b(e,["sdkHttpResponse"],t),e}function lz(i){const e={};if(x(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=x(i,["fileUri"]);t!=null&&b(e,["fileUri"],t);const n=x(i,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function cz(i){const e={},t=x(i,["id"]);t!=null&&b(e,["id"],t);const n=x(i,["args"]);n!=null&&b(e,["args"],n);const s=x(i,["name"]);if(s!=null&&b(e,["name"],s),x(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function uz(i){const e={},t=x(i,["mode"]);t!=null&&b(e,["mode"],t);const n=x(i,["allowedFunctionNames"]);if(n!=null&&b(e,["allowedFunctionNames"],n),x(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function dz(i){const e={};if(x(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=x(i,["description"]);t!=null&&b(e,["description"],t);const n=x(i,["name"]);n!=null&&b(e,["name"],n);const s=x(i,["parameters"]);s!=null&&b(e,["parameters"],s);const a=x(i,["parametersJsonSchema"]);a!=null&&b(e,["parametersJsonSchema"],a);const o=x(i,["response"]);o!=null&&b(e,["response"],o);const c=x(i,["responseJsonSchema"]);return c!=null&&b(e,["responseJsonSchema"],c),e}function hz(i,e){const t={},n=x(e,["name"]);return n!=null&&b(t,["_url","name"],vl(i,n)),t}function fz(i,e){const t={},n=x(e,["name"]);return n!=null&&b(t,["_url","name"],vl(i,n)),t}function pz(i){const e={};if(x(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=x(i,["enableWidget"]);return t!=null&&b(e,["enableWidget"],t),e}function mz(i){const e={};if(x(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=x(i,["timeRangeFilter"]);return t!=null&&b(e,["timeRangeFilter"],t),e}function gz(i,e){const t={},n=x(i,["pageSize"]);e!==void 0&&n!=null&&b(e,["_query","pageSize"],n);const s=x(i,["pageToken"]);return e!==void 0&&s!=null&&b(e,["_query","pageToken"],s),t}function yz(i,e){const t={},n=x(i,["pageSize"]);e!==void 0&&n!=null&&b(e,["_query","pageSize"],n);const s=x(i,["pageToken"]);return e!==void 0&&s!=null&&b(e,["_query","pageToken"],s),t}function vz(i){const e={},t=x(i,["config"]);return t!=null&&gz(t,e),e}function xz(i){const e={},t=x(i,["config"]);return t!=null&&yz(t,e),e}function bz(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);const s=x(i,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),b(e,["cachedContents"],a)}return e}function wz(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);const s=x(i,["cachedContents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),b(e,["cachedContents"],a)}return e}function Sz(i){const e={},t=x(i,["mediaResolution"]);t!=null&&b(e,["mediaResolution"],t);const n=x(i,["codeExecutionResult"]);n!=null&&b(e,["codeExecutionResult"],n);const s=x(i,["executableCode"]);s!=null&&b(e,["executableCode"],s);const a=x(i,["fileData"]);a!=null&&b(e,["fileData"],lz(a));const o=x(i,["functionCall"]);o!=null&&b(e,["functionCall"],cz(o));const c=x(i,["functionResponse"]);c!=null&&b(e,["functionResponse"],c);const u=x(i,["inlineData"]);u!=null&&b(e,["inlineData"],Z6(u));const d=x(i,["text"]);d!=null&&b(e,["text"],d);const p=x(i,["thought"]);p!=null&&b(e,["thought"],p);const y=x(i,["thoughtSignature"]);y!=null&&b(e,["thoughtSignature"],y);const v=x(i,["videoMetadata"]);return v!=null&&b(e,["videoMetadata"],v),e}function Ez(i){const e={},t=x(i,["functionCallingConfig"]);t!=null&&b(e,["functionCallingConfig"],uz(t));const n=x(i,["retrievalConfig"]);return n!=null&&b(e,["retrievalConfig"],n),e}function Az(i){const e={},t=x(i,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(y=>y)),b(e,["functionDeclarations"],p)}if(x(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(i,["googleSearchRetrieval"]);n!=null&&b(e,["googleSearchRetrieval"],n);const s=x(i,["computerUse"]);s!=null&&b(e,["computerUse"],s);const a=x(i,["fileSearch"]);a!=null&&b(e,["fileSearch"],a);const o=x(i,["codeExecution"]);if(o!=null&&b(e,["codeExecution"],o),x(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=x(i,["googleMaps"]);c!=null&&b(e,["googleMaps"],pz(c));const u=x(i,["googleSearch"]);u!=null&&b(e,["googleSearch"],mz(u));const d=x(i,["urlContext"]);return d!=null&&b(e,["urlContext"],d),e}function Cz(i){const e={},t=x(i,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(v=>dz(v))),b(e,["functionDeclarations"],y)}const n=x(i,["retrieval"]);n!=null&&b(e,["retrieval"],n);const s=x(i,["googleSearchRetrieval"]);s!=null&&b(e,["googleSearchRetrieval"],s);const a=x(i,["computerUse"]);if(a!=null&&b(e,["computerUse"],a),x(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=x(i,["codeExecution"]);o!=null&&b(e,["codeExecution"],o);const c=x(i,["enterpriseWebSearch"]);c!=null&&b(e,["enterpriseWebSearch"],c);const u=x(i,["googleMaps"]);u!=null&&b(e,["googleMaps"],u);const d=x(i,["googleSearch"]);d!=null&&b(e,["googleSearch"],d);const p=x(i,["urlContext"]);return p!=null&&b(e,["urlContext"],p),e}function Tz(i,e){const t={},n=x(i,["ttl"]);e!==void 0&&n!=null&&b(e,["ttl"],n);const s=x(i,["expireTime"]);return e!==void 0&&s!=null&&b(e,["expireTime"],s),t}function _z(i,e){const t={},n=x(i,["ttl"]);e!==void 0&&n!=null&&b(e,["ttl"],n);const s=x(i,["expireTime"]);return e!==void 0&&s!=null&&b(e,["expireTime"],s),t}function Nz(i,e){const t={},n=x(e,["name"]);n!=null&&b(t,["_url","name"],vl(i,n));const s=x(e,["config"]);return s!=null&&Tz(s,t),t}function Rz(i,e){const t={},n=x(e,["name"]);n!=null&&b(t,["_url","name"],vl(i,n));const s=x(e,["config"]);return s!=null&&_z(s,t),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Mz extends yl{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Jd(cl.PAGED_ITEM_CACHED_CONTENTS,n=>this.listInternal(n),await this.listInternal(t),t)}async create(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=iz(this.apiClient,e);return c=Ae("cachedContents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),o.then(p=>p)}else{const d=nz(this.apiClient,e);return c=Ae("cachedContents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async get(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=fz(this.apiClient,e);return c=Ae("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),o.then(p=>p)}else{const d=hz(this.apiClient,e);return c=Ae("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async delete(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=rz(this.apiClient,e);return c=Ae("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const y=oz(p),v=new ck;return Object.assign(v,y),v})}else{const d=sz(this.apiClient,e);return c=Ae("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const y=az(p),v=new ck;return Object.assign(v,y),v})}}async update(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=Rz(this.apiClient,e);return c=Ae("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),o.then(p=>p)}else{const d=Nz(this.apiClient,e);return c=Ae("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),o.then(p=>p)}}async listInternal(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=xz(e);return c=Ae("cachedContents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const y=wz(p),v=new uk;return Object.assign(v,y),v})}else{const d=vz(e);return c=Ae("cachedContents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const y=bz(p),v=new uk;return Object.assign(v,y),v})}}}function yk(i){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&i[e],n=0;if(t)return t.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function dn(i){return this instanceof dn?(this.v=i,this):new dn(i)}function af(i,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(i,e||[]),s,a=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(w){return function(A){return Promise.resolve(A).then(w,y)}}function c(w,A){n[w]&&(s[w]=function(C){return new Promise(function(T,_){a.push([w,C,T,_])>1||u(w,C)})},A&&(s[w]=A(s[w])))}function u(w,A){try{d(n[w](A))}catch(C){v(a[0][3],C)}}function d(w){w.value instanceof dn?Promise.resolve(w.value.v).then(p,y):v(a[0][2],w)}function p(w){u("next",w)}function y(w){u("throw",w)}function v(w,A){w(A),a.shift(),a.length&&u(a[0][0],a[0][1])}}function Eg(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=i[Symbol.asyncIterator],t;return e?e.call(i):(i=typeof yk=="function"?yk(i):i[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=i[a]&&function(o){return new Promise(function(c,u){o=i[a](o),s(c,u,o.done,o.value)})}}function s(a,o,c,u){Promise.resolve(u).then(function(d){a({value:d,done:c})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function kz(i){var e;if(i.candidates==null||i.candidates.length===0)return!1;const t=(e=i.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:aL(t)}function aL(i){if(i.parts===void 0||i.parts.length===0)return!1;for(const e of i.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function Dz(i){if(i.length!==0){for(const e of i)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function vk(i){if(i===void 0||i.length===0)return[];const e=[],t=i.length;let n=0;for(;n<t;)if(i[n].role==="user")e.push(i[n]),n++;else{const s=[];let a=!0;for(;n<t&&i[n].role==="model";)s.push(i[n]),a&&!aL(i[n])&&(a=!1),n++;a?e.push(...s):e.pop()}return e}class Iz{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new Pz(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class Pz{constructor(e,t,n,s={},a=[]){this.apiClient=e,this.modelsModule=t,this.model=n,this.config=s,this.history=a,this.sendPromise=Promise.resolve(),Dz(a)}async sendMessage(e){var t;await this.sendPromise;const n=$i(e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var a,o,c;const u=await s,d=(o=(a=u.candidates)===null||a===void 0?void 0:a[0])===null||o===void 0?void 0:o.content,p=u.automaticFunctionCallingHistory,y=this.getHistory(!0).length;let v=[];p!=null&&(v=(c=p.slice(y))!==null&&c!==void 0?c:[]);const w=d?[d]:[];this.recordHistory(n,w,v)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),s}async sendMessageStream(e){var t;await this.sendPromise;const n=$i(e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(n),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=s.then(()=>{}).catch(()=>{});const a=await s;return this.processStreamResponse(a,n)}getHistory(e=!1){const t=e?vk(this.history):this.history;return structuredClone(t)}processStreamResponse(e,t){var n,s;return af(this,arguments,function*(){var o,c,u,d;const p=[];try{for(var y=!0,v=Eg(e),w;w=yield dn(v.next()),o=w.done,!o;y=!0){d=w.value,y=!1;const A=d;if(kz(A)){const C=(s=(n=A.candidates)===null||n===void 0?void 0:n[0])===null||s===void 0?void 0:s.content;C!==void 0&&p.push(C)}yield yield dn(A)}}catch(A){c={error:A}}finally{try{!y&&!o&&(u=v.return)&&(yield dn(u.call(v)))}finally{if(c)throw c.error}}this.recordHistory(t,p)})}recordHistory(e,t,n){let s=[];t.length>0&&t.every(a=>a.role!==void 0)?s=t:s.push({role:"model",parts:[]}),n&&n.length>0?this.history.push(...vk(n)):this.history.push(e),this.history.push(...s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iw extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,iw.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Lz(i){const e={},t=x(i,["file"]);return t!=null&&b(e,["file"],t),e}function Fz(i){const e={},t=x(i,["sdkHttpResponse"]);return t!=null&&b(e,["sdkHttpResponse"],t),e}function Uz(i){const e={},t=x(i,["name"]);return t!=null&&b(e,["_url","file"],ZP(t)),e}function jz(i){const e={},t=x(i,["sdkHttpResponse"]);return t!=null&&b(e,["sdkHttpResponse"],t),e}function Bz(i){const e={},t=x(i,["name"]);return t!=null&&b(e,["_url","file"],ZP(t)),e}function Oz(i,e){const t={},n=x(i,["pageSize"]);e!==void 0&&n!=null&&b(e,["_query","pageSize"],n);const s=x(i,["pageToken"]);return e!==void 0&&s!=null&&b(e,["_query","pageToken"],s),t}function Hz(i){const e={},t=x(i,["config"]);return t!=null&&Oz(t,e),e}function zz(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);const s=x(i,["files"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),b(e,["files"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gz extends yl{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Jd(cl.PAGED_ITEM_FILES,n=>this.listInternal(n),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>t)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var t,n;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Hz(e);return a=Ae("files",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:u.headers},p})),s.then(u=>{const d=zz(u),p=new YH;return Object.assign(p,d),p})}}async createInternal(e){var t,n;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Lz(e);return a=Ae("upload/v1beta/files",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>{const d=Fz(u),p=new WH;return Object.assign(p,d),p})}}async get(e){var t,n;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Bz(e);return a=Ae("files/{file}",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>u)}}async delete(e){var t,n;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Uz(e);return a=Ae("files/{file}",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:u.headers},p})),s.then(u=>{const d=jz(u),p=new XH;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function yx(i){const e={},t=x(i,["data"]);if(t!=null&&b(e,["data"],t),x(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(i,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function Vz(i){const e={},t=x(i,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>a8(a))),b(e,["parts"],s)}const n=x(i,["role"]);return n!=null&&b(e,["role"],n),e}function qz(i){const e={};if(x(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=x(i,["fileUri"]);t!=null&&b(e,["fileUri"],t);const n=x(i,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function $z(i){const e={},t=x(i,["id"]);t!=null&&b(e,["id"],t);const n=x(i,["args"]);n!=null&&b(e,["args"],n);const s=x(i,["name"]);if(s!=null&&b(e,["name"],s),x(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Yz(i){const e={};if(x(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=x(i,["description"]);t!=null&&b(e,["description"],t);const n=x(i,["name"]);n!=null&&b(e,["name"],n);const s=x(i,["parameters"]);s!=null&&b(e,["parameters"],s);const a=x(i,["parametersJsonSchema"]);a!=null&&b(e,["parametersJsonSchema"],a);const o=x(i,["response"]);o!=null&&b(e,["response"],o);const c=x(i,["responseJsonSchema"]);return c!=null&&b(e,["responseJsonSchema"],c),e}function Wz(i){const e={},t=x(i,["modelSelectionConfig"]);t!=null&&b(e,["modelConfig"],t);const n=x(i,["responseJsonSchema"]);n!=null&&b(e,["responseJsonSchema"],n);const s=x(i,["audioTimestamp"]);s!=null&&b(e,["audioTimestamp"],s);const a=x(i,["candidateCount"]);a!=null&&b(e,["candidateCount"],a);const o=x(i,["enableAffectiveDialog"]);o!=null&&b(e,["enableAffectiveDialog"],o);const c=x(i,["frequencyPenalty"]);c!=null&&b(e,["frequencyPenalty"],c);const u=x(i,["logprobs"]);u!=null&&b(e,["logprobs"],u);const d=x(i,["maxOutputTokens"]);d!=null&&b(e,["maxOutputTokens"],d);const p=x(i,["mediaResolution"]);p!=null&&b(e,["mediaResolution"],p);const y=x(i,["presencePenalty"]);y!=null&&b(e,["presencePenalty"],y);const v=x(i,["responseLogprobs"]);v!=null&&b(e,["responseLogprobs"],v);const w=x(i,["responseMimeType"]);w!=null&&b(e,["responseMimeType"],w);const A=x(i,["responseModalities"]);A!=null&&b(e,["responseModalities"],A);const C=x(i,["responseSchema"]);C!=null&&b(e,["responseSchema"],C);const T=x(i,["routingConfig"]);T!=null&&b(e,["routingConfig"],T);const _=x(i,["seed"]);_!=null&&b(e,["seed"],_);const D=x(i,["speechConfig"]);D!=null&&b(e,["speechConfig"],oL(D));const R=x(i,["stopSequences"]);R!=null&&b(e,["stopSequences"],R);const L=x(i,["temperature"]);L!=null&&b(e,["temperature"],L);const F=x(i,["thinkingConfig"]);F!=null&&b(e,["thinkingConfig"],F);const U=x(i,["topK"]);U!=null&&b(e,["topK"],U);const M=x(i,["topP"]);if(M!=null&&b(e,["topP"],M),x(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function Xz(i){const e={};if(x(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=x(i,["enableWidget"]);return t!=null&&b(e,["enableWidget"],t),e}function Jz(i){const e={};if(x(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=x(i,["timeRangeFilter"]);return t!=null&&b(e,["timeRangeFilter"],t),e}function Kz(i,e){const t={},n=x(i,["generationConfig"]);e!==void 0&&n!=null&&b(e,["setup","generationConfig"],n);const s=x(i,["responseModalities"]);e!==void 0&&s!=null&&b(e,["setup","generationConfig","responseModalities"],s);const a=x(i,["temperature"]);e!==void 0&&a!=null&&b(e,["setup","generationConfig","temperature"],a);const o=x(i,["topP"]);e!==void 0&&o!=null&&b(e,["setup","generationConfig","topP"],o);const c=x(i,["topK"]);e!==void 0&&c!=null&&b(e,["setup","generationConfig","topK"],c);const u=x(i,["maxOutputTokens"]);e!==void 0&&u!=null&&b(e,["setup","generationConfig","maxOutputTokens"],u);const d=x(i,["mediaResolution"]);e!==void 0&&d!=null&&b(e,["setup","generationConfig","mediaResolution"],d);const p=x(i,["seed"]);e!==void 0&&p!=null&&b(e,["setup","generationConfig","seed"],p);const y=x(i,["speechConfig"]);e!==void 0&&y!=null&&b(e,["setup","generationConfig","speechConfig"],qC(y));const v=x(i,["thinkingConfig"]);e!==void 0&&v!=null&&b(e,["setup","generationConfig","thinkingConfig"],v);const w=x(i,["enableAffectiveDialog"]);e!==void 0&&w!=null&&b(e,["setup","generationConfig","enableAffectiveDialog"],w);const A=x(i,["systemInstruction"]);e!==void 0&&A!=null&&b(e,["setup","systemInstruction"],Vz($i(A)));const C=x(i,["tools"]);if(e!==void 0&&C!=null){let U=Yp(C);Array.isArray(U)&&(U=U.map(M=>l8($p(M)))),b(e,["setup","tools"],U)}const T=x(i,["sessionResumption"]);e!==void 0&&T!=null&&b(e,["setup","sessionResumption"],o8(T));const _=x(i,["inputAudioTranscription"]);e!==void 0&&_!=null&&b(e,["setup","inputAudioTranscription"],_);const D=x(i,["outputAudioTranscription"]);e!==void 0&&D!=null&&b(e,["setup","outputAudioTranscription"],D);const R=x(i,["realtimeInputConfig"]);e!==void 0&&R!=null&&b(e,["setup","realtimeInputConfig"],R);const L=x(i,["contextWindowCompression"]);e!==void 0&&L!=null&&b(e,["setup","contextWindowCompression"],L);const F=x(i,["proactivity"]);return e!==void 0&&F!=null&&b(e,["setup","proactivity"],F),t}function Qz(i,e){const t={},n=x(i,["generationConfig"]);e!==void 0&&n!=null&&b(e,["setup","generationConfig"],Wz(n));const s=x(i,["responseModalities"]);e!==void 0&&s!=null&&b(e,["setup","generationConfig","responseModalities"],s);const a=x(i,["temperature"]);e!==void 0&&a!=null&&b(e,["setup","generationConfig","temperature"],a);const o=x(i,["topP"]);e!==void 0&&o!=null&&b(e,["setup","generationConfig","topP"],o);const c=x(i,["topK"]);e!==void 0&&c!=null&&b(e,["setup","generationConfig","topK"],c);const u=x(i,["maxOutputTokens"]);e!==void 0&&u!=null&&b(e,["setup","generationConfig","maxOutputTokens"],u);const d=x(i,["mediaResolution"]);e!==void 0&&d!=null&&b(e,["setup","generationConfig","mediaResolution"],d);const p=x(i,["seed"]);e!==void 0&&p!=null&&b(e,["setup","generationConfig","seed"],p);const y=x(i,["speechConfig"]);e!==void 0&&y!=null&&b(e,["setup","generationConfig","speechConfig"],oL(qC(y)));const v=x(i,["thinkingConfig"]);e!==void 0&&v!=null&&b(e,["setup","generationConfig","thinkingConfig"],v);const w=x(i,["enableAffectiveDialog"]);e!==void 0&&w!=null&&b(e,["setup","generationConfig","enableAffectiveDialog"],w);const A=x(i,["systemInstruction"]);e!==void 0&&A!=null&&b(e,["setup","systemInstruction"],$i(A));const C=x(i,["tools"]);if(e!==void 0&&C!=null){let U=Yp(C);Array.isArray(U)&&(U=U.map(M=>c8($p(M)))),b(e,["setup","tools"],U)}const T=x(i,["sessionResumption"]);e!==void 0&&T!=null&&b(e,["setup","sessionResumption"],T);const _=x(i,["inputAudioTranscription"]);e!==void 0&&_!=null&&b(e,["setup","inputAudioTranscription"],_);const D=x(i,["outputAudioTranscription"]);e!==void 0&&D!=null&&b(e,["setup","outputAudioTranscription"],D);const R=x(i,["realtimeInputConfig"]);e!==void 0&&R!=null&&b(e,["setup","realtimeInputConfig"],R);const L=x(i,["contextWindowCompression"]);e!==void 0&&L!=null&&b(e,["setup","contextWindowCompression"],L);const F=x(i,["proactivity"]);return e!==void 0&&F!=null&&b(e,["setup","proactivity"],F),t}function Zz(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["setup","model"],Rt(i,n));const s=x(e,["config"]);return s!=null&&b(t,["config"],Kz(s,t)),t}function e8(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["setup","model"],Rt(i,n));const s=x(e,["config"]);return s!=null&&b(t,["config"],Qz(s,t)),t}function t8(i){const e={},t=x(i,["musicGenerationConfig"]);return t!=null&&b(e,["musicGenerationConfig"],t),e}function n8(i){const e={},t=x(i,["weightedPrompts"]);if(t!=null){let n=t;Array.isArray(n)&&(n=n.map(s=>s)),b(e,["weightedPrompts"],n)}return e}function i8(i){const e={},t=x(i,["media"]);if(t!=null){let d=WP(t);Array.isArray(d)&&(d=d.map(p=>yx(p))),b(e,["mediaChunks"],d)}const n=x(i,["audio"]);n!=null&&b(e,["audio"],yx(JP(n)));const s=x(i,["audioStreamEnd"]);s!=null&&b(e,["audioStreamEnd"],s);const a=x(i,["video"]);a!=null&&b(e,["video"],yx(XP(a)));const o=x(i,["text"]);o!=null&&b(e,["text"],o);const c=x(i,["activityStart"]);c!=null&&b(e,["activityStart"],c);const u=x(i,["activityEnd"]);return u!=null&&b(e,["activityEnd"],u),e}function s8(i){const e={},t=x(i,["media"]);if(t!=null){let d=WP(t);Array.isArray(d)&&(d=d.map(p=>p)),b(e,["mediaChunks"],d)}const n=x(i,["audio"]);n!=null&&b(e,["audio"],JP(n));const s=x(i,["audioStreamEnd"]);s!=null&&b(e,["audioStreamEnd"],s);const a=x(i,["video"]);a!=null&&b(e,["video"],XP(a));const o=x(i,["text"]);o!=null&&b(e,["text"],o);const c=x(i,["activityStart"]);c!=null&&b(e,["activityStart"],c);const u=x(i,["activityEnd"]);return u!=null&&b(e,["activityEnd"],u),e}function r8(i){const e={},t=x(i,["setupComplete"]);t!=null&&b(e,["setupComplete"],t);const n=x(i,["serverContent"]);n!=null&&b(e,["serverContent"],n);const s=x(i,["toolCall"]);s!=null&&b(e,["toolCall"],s);const a=x(i,["toolCallCancellation"]);a!=null&&b(e,["toolCallCancellation"],a);const o=x(i,["usageMetadata"]);o!=null&&b(e,["usageMetadata"],u8(o));const c=x(i,["goAway"]);c!=null&&b(e,["goAway"],c);const u=x(i,["sessionResumptionUpdate"]);return u!=null&&b(e,["sessionResumptionUpdate"],u),e}function a8(i){const e={},t=x(i,["mediaResolution"]);t!=null&&b(e,["mediaResolution"],t);const n=x(i,["codeExecutionResult"]);n!=null&&b(e,["codeExecutionResult"],n);const s=x(i,["executableCode"]);s!=null&&b(e,["executableCode"],s);const a=x(i,["fileData"]);a!=null&&b(e,["fileData"],qz(a));const o=x(i,["functionCall"]);o!=null&&b(e,["functionCall"],$z(o));const c=x(i,["functionResponse"]);c!=null&&b(e,["functionResponse"],c);const u=x(i,["inlineData"]);u!=null&&b(e,["inlineData"],yx(u));const d=x(i,["text"]);d!=null&&b(e,["text"],d);const p=x(i,["thought"]);p!=null&&b(e,["thought"],p);const y=x(i,["thoughtSignature"]);y!=null&&b(e,["thoughtSignature"],y);const v=x(i,["videoMetadata"]);return v!=null&&b(e,["videoMetadata"],v),e}function o8(i){const e={},t=x(i,["handle"]);if(t!=null&&b(e,["handle"],t),x(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function oL(i){const e={},t=x(i,["languageCode"]);t!=null&&b(e,["languageCode"],t);const n=x(i,["voiceConfig"]);if(n!=null&&b(e,["voiceConfig"],n),x(i,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function l8(i){const e={},t=x(i,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(y=>y)),b(e,["functionDeclarations"],p)}if(x(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(i,["googleSearchRetrieval"]);n!=null&&b(e,["googleSearchRetrieval"],n);const s=x(i,["computerUse"]);s!=null&&b(e,["computerUse"],s);const a=x(i,["fileSearch"]);a!=null&&b(e,["fileSearch"],a);const o=x(i,["codeExecution"]);if(o!=null&&b(e,["codeExecution"],o),x(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=x(i,["googleMaps"]);c!=null&&b(e,["googleMaps"],Xz(c));const u=x(i,["googleSearch"]);u!=null&&b(e,["googleSearch"],Jz(u));const d=x(i,["urlContext"]);return d!=null&&b(e,["urlContext"],d),e}function c8(i){const e={},t=x(i,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(v=>Yz(v))),b(e,["functionDeclarations"],y)}const n=x(i,["retrieval"]);n!=null&&b(e,["retrieval"],n);const s=x(i,["googleSearchRetrieval"]);s!=null&&b(e,["googleSearchRetrieval"],s);const a=x(i,["computerUse"]);if(a!=null&&b(e,["computerUse"],a),x(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=x(i,["codeExecution"]);o!=null&&b(e,["codeExecution"],o);const c=x(i,["enterpriseWebSearch"]);c!=null&&b(e,["enterpriseWebSearch"],c);const u=x(i,["googleMaps"]);u!=null&&b(e,["googleMaps"],u);const d=x(i,["googleSearch"]);d!=null&&b(e,["googleSearch"],d);const p=x(i,["urlContext"]);return p!=null&&b(e,["urlContext"],p),e}function u8(i){const e={},t=x(i,["promptTokenCount"]);t!=null&&b(e,["promptTokenCount"],t);const n=x(i,["cachedContentTokenCount"]);n!=null&&b(e,["cachedContentTokenCount"],n);const s=x(i,["candidatesTokenCount"]);s!=null&&b(e,["responseTokenCount"],s);const a=x(i,["toolUsePromptTokenCount"]);a!=null&&b(e,["toolUsePromptTokenCount"],a);const o=x(i,["thoughtsTokenCount"]);o!=null&&b(e,["thoughtsTokenCount"],o);const c=x(i,["totalTokenCount"]);c!=null&&b(e,["totalTokenCount"],c);const u=x(i,["promptTokensDetails"]);if(u!=null){let w=u;Array.isArray(w)&&(w=w.map(A=>A)),b(e,["promptTokensDetails"],w)}const d=x(i,["cacheTokensDetails"]);if(d!=null){let w=d;Array.isArray(w)&&(w=w.map(A=>A)),b(e,["cacheTokensDetails"],w)}const p=x(i,["candidatesTokensDetails"]);if(p!=null){let w=p;Array.isArray(w)&&(w=w.map(A=>A)),b(e,["responseTokensDetails"],w)}const y=x(i,["toolUsePromptTokensDetails"]);if(y!=null){let w=y;Array.isArray(w)&&(w=w.map(A=>A)),b(e,["toolUsePromptTokensDetails"],w)}const v=x(i,["trafficType"]);return v!=null&&b(e,["trafficType"],v),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function d8(i){const e={},t=x(i,["data"]);if(t!=null&&b(e,["data"],t),x(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(i,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function h8(i){const e={},t=x(i,["content"]);t!=null&&b(e,["content"],t);const n=x(i,["citationMetadata"]);n!=null&&b(e,["citationMetadata"],f8(n));const s=x(i,["tokenCount"]);s!=null&&b(e,["tokenCount"],s);const a=x(i,["finishReason"]);a!=null&&b(e,["finishReason"],a);const o=x(i,["avgLogprobs"]);o!=null&&b(e,["avgLogprobs"],o);const c=x(i,["groundingMetadata"]);c!=null&&b(e,["groundingMetadata"],c);const u=x(i,["index"]);u!=null&&b(e,["index"],u);const d=x(i,["logprobsResult"]);d!=null&&b(e,["logprobsResult"],d);const p=x(i,["safetyRatings"]);if(p!=null){let v=p;Array.isArray(v)&&(v=v.map(w=>w)),b(e,["safetyRatings"],v)}const y=x(i,["urlContextMetadata"]);return y!=null&&b(e,["urlContextMetadata"],y),e}function f8(i){const e={},t=x(i,["citationSources"]);if(t!=null){let n=t;Array.isArray(n)&&(n=n.map(s=>s)),b(e,["citations"],n)}return e}function p8(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["_url","model"],Rt(i,n));const s=x(e,["contents"]);if(s!=null){let a=Lr(s);Array.isArray(a)&&(a=a.map(o=>o)),b(t,["contents"],a)}return t}function m8(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["tokensInfo"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),b(e,["tokensInfo"],s)}return e}function g8(i){const e={},t=x(i,["values"]);t!=null&&b(e,["values"],t);const n=x(i,["statistics"]);return n!=null&&b(e,["statistics"],y8(n)),e}function y8(i){const e={},t=x(i,["truncated"]);t!=null&&b(e,["truncated"],t);const n=x(i,["token_count"]);return n!=null&&b(e,["tokenCount"],n),e}function sw(i){const e={},t=x(i,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>TG(a))),b(e,["parts"],s)}const n=x(i,["role"]);return n!=null&&b(e,["role"],n),e}function v8(i){const e={},t=x(i,["controlType"]);t!=null&&b(e,["controlType"],t);const n=x(i,["enableControlImageComputation"]);return n!=null&&b(e,["computeControl"],n),e}function x8(i){const e={};if(x(i,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(x(i,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(x(i,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function b8(i,e){const t={},n=x(i,["systemInstruction"]);e!==void 0&&n!=null&&b(e,["systemInstruction"],$i(n));const s=x(i,["tools"]);if(e!==void 0&&s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>hL(c))),b(e,["tools"],o)}const a=x(i,["generationConfig"]);return e!==void 0&&a!=null&&b(e,["generationConfig"],dG(a)),t}function w8(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["_url","model"],Rt(i,n));const s=x(e,["contents"]);if(s!=null){let o=Lr(s);Array.isArray(o)&&(o=o.map(c=>sw(c))),b(t,["contents"],o)}const a=x(e,["config"]);return a!=null&&x8(a),t}function S8(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["_url","model"],Rt(i,n));const s=x(e,["contents"]);if(s!=null){let o=Lr(s);Array.isArray(o)&&(o=o.map(c=>c)),b(t,["contents"],o)}const a=x(e,["config"]);return a!=null&&b8(a,t),t}function E8(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["totalTokens"]);n!=null&&b(e,["totalTokens"],n);const s=x(i,["cachedContentTokenCount"]);return s!=null&&b(e,["cachedContentTokenCount"],s),e}function A8(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["totalTokens"]);return n!=null&&b(e,["totalTokens"],n),e}function C8(i,e){const t={},n=x(e,["model"]);return n!=null&&b(t,["_url","name"],Rt(i,n)),t}function T8(i,e){const t={},n=x(e,["model"]);return n!=null&&b(t,["_url","name"],Rt(i,n)),t}function _8(i){const e={},t=x(i,["sdkHttpResponse"]);return t!=null&&b(e,["sdkHttpResponse"],t),e}function N8(i){const e={},t=x(i,["sdkHttpResponse"]);return t!=null&&b(e,["sdkHttpResponse"],t),e}function R8(i,e){const t={},n=x(i,["outputGcsUri"]);e!==void 0&&n!=null&&b(e,["parameters","storageUri"],n);const s=x(i,["negativePrompt"]);e!==void 0&&s!=null&&b(e,["parameters","negativePrompt"],s);const a=x(i,["numberOfImages"]);e!==void 0&&a!=null&&b(e,["parameters","sampleCount"],a);const o=x(i,["aspectRatio"]);e!==void 0&&o!=null&&b(e,["parameters","aspectRatio"],o);const c=x(i,["guidanceScale"]);e!==void 0&&c!=null&&b(e,["parameters","guidanceScale"],c);const u=x(i,["seed"]);e!==void 0&&u!=null&&b(e,["parameters","seed"],u);const d=x(i,["safetyFilterLevel"]);e!==void 0&&d!=null&&b(e,["parameters","safetySetting"],d);const p=x(i,["personGeneration"]);e!==void 0&&p!=null&&b(e,["parameters","personGeneration"],p);const y=x(i,["includeSafetyAttributes"]);e!==void 0&&y!=null&&b(e,["parameters","includeSafetyAttributes"],y);const v=x(i,["includeRaiReason"]);e!==void 0&&v!=null&&b(e,["parameters","includeRaiReason"],v);const w=x(i,["language"]);e!==void 0&&w!=null&&b(e,["parameters","language"],w);const A=x(i,["outputMimeType"]);e!==void 0&&A!=null&&b(e,["parameters","outputOptions","mimeType"],A);const C=x(i,["outputCompressionQuality"]);e!==void 0&&C!=null&&b(e,["parameters","outputOptions","compressionQuality"],C);const T=x(i,["addWatermark"]);e!==void 0&&T!=null&&b(e,["parameters","addWatermark"],T);const _=x(i,["labels"]);e!==void 0&&_!=null&&b(e,["labels"],_);const D=x(i,["editMode"]);e!==void 0&&D!=null&&b(e,["parameters","editMode"],D);const R=x(i,["baseSteps"]);return e!==void 0&&R!=null&&b(e,["parameters","editConfig","baseSteps"],R),t}function M8(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["_url","model"],Rt(i,n));const s=x(e,["prompt"]);s!=null&&b(t,["instances[0]","prompt"],s);const a=x(e,["referenceImages"]);if(a!=null){let c=a;Array.isArray(c)&&(c=c.map(u=>DG(u))),b(t,["instances[0]","referenceImages"],c)}const o=x(e,["config"]);return o!=null&&R8(o,t),t}function k8(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>rw(a))),b(e,["generatedImages"],s)}return e}function D8(i,e){const t={},n=x(i,["taskType"]);e!==void 0&&n!=null&&b(e,["requests[]","taskType"],n);const s=x(i,["title"]);e!==void 0&&s!=null&&b(e,["requests[]","title"],s);const a=x(i,["outputDimensionality"]);if(e!==void 0&&a!=null&&b(e,["requests[]","outputDimensionality"],a),x(i,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(i,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return t}function I8(i,e){const t={},n=x(i,["taskType"]);e!==void 0&&n!=null&&b(e,["instances[]","task_type"],n);const s=x(i,["title"]);e!==void 0&&s!=null&&b(e,["instances[]","title"],s);const a=x(i,["outputDimensionality"]);e!==void 0&&a!=null&&b(e,["parameters","outputDimensionality"],a);const o=x(i,["mimeType"]);e!==void 0&&o!=null&&b(e,["instances[]","mimeType"],o);const c=x(i,["autoTruncate"]);return e!==void 0&&c!=null&&b(e,["parameters","autoTruncate"],c),t}function P8(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["_url","model"],Rt(i,n));const s=x(e,["contents"]);if(s!=null){let c=zC(i,s);Array.isArray(c)&&(c=c.map(u=>u)),b(t,["requests[]","content"],c)}const a=x(e,["config"]);a!=null&&D8(a,t);const o=x(e,["model"]);return o!==void 0&&b(t,["requests[]","model"],Rt(i,o)),t}function L8(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["_url","model"],Rt(i,n));const s=x(e,["contents"]);if(s!=null){let o=zC(i,s);Array.isArray(o)&&(o=o.map(c=>c)),b(t,["instances[]","content"],o)}const a=x(e,["config"]);return a!=null&&I8(a,t),t}function F8(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["embeddings"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>o)),b(e,["embeddings"],a)}const s=x(i,["metadata"]);return s!=null&&b(e,["metadata"],s),e}function U8(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["predictions[]","embeddings"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>g8(o))),b(e,["embeddings"],a)}const s=x(i,["metadata"]);return s!=null&&b(e,["metadata"],s),e}function j8(i){const e={},t=x(i,["endpoint"]);t!=null&&b(e,["name"],t);const n=x(i,["deployedModelId"]);return n!=null&&b(e,["deployedModelId"],n),e}function B8(i){const e={};if(x(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=x(i,["fileUri"]);t!=null&&b(e,["fileUri"],t);const n=x(i,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function O8(i){const e={},t=x(i,["id"]);t!=null&&b(e,["id"],t);const n=x(i,["args"]);n!=null&&b(e,["args"],n);const s=x(i,["name"]);if(s!=null&&b(e,["name"],s),x(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function H8(i){const e={},t=x(i,["mode"]);t!=null&&b(e,["mode"],t);const n=x(i,["allowedFunctionNames"]);if(n!=null&&b(e,["allowedFunctionNames"],n),x(i,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function z8(i){const e={};if(x(i,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const t=x(i,["description"]);t!=null&&b(e,["description"],t);const n=x(i,["name"]);n!=null&&b(e,["name"],n);const s=x(i,["parameters"]);s!=null&&b(e,["parameters"],s);const a=x(i,["parametersJsonSchema"]);a!=null&&b(e,["parametersJsonSchema"],a);const o=x(i,["response"]);o!=null&&b(e,["response"],o);const c=x(i,["responseJsonSchema"]);return c!=null&&b(e,["responseJsonSchema"],c),e}function G8(i,e,t){const n={},s=x(e,["systemInstruction"]);t!==void 0&&s!=null&&b(t,["systemInstruction"],sw($i(s)));const a=x(e,["temperature"]);a!=null&&b(n,["temperature"],a);const o=x(e,["topP"]);o!=null&&b(n,["topP"],o);const c=x(e,["topK"]);c!=null&&b(n,["topK"],c);const u=x(e,["candidateCount"]);u!=null&&b(n,["candidateCount"],u);const d=x(e,["maxOutputTokens"]);d!=null&&b(n,["maxOutputTokens"],d);const p=x(e,["stopSequences"]);p!=null&&b(n,["stopSequences"],p);const y=x(e,["responseLogprobs"]);y!=null&&b(n,["responseLogprobs"],y);const v=x(e,["logprobs"]);v!=null&&b(n,["logprobs"],v);const w=x(e,["presencePenalty"]);w!=null&&b(n,["presencePenalty"],w);const A=x(e,["frequencyPenalty"]);A!=null&&b(n,["frequencyPenalty"],A);const C=x(e,["seed"]);C!=null&&b(n,["seed"],C);const T=x(e,["responseMimeType"]);T!=null&&b(n,["responseMimeType"],T);const _=x(e,["responseSchema"]);_!=null&&b(n,["responseSchema"],GC(_));const D=x(e,["responseJsonSchema"]);if(D!=null&&b(n,["responseJsonSchema"],D),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const R=x(e,["safetySettings"]);if(t!==void 0&&R!=null){let X=R;Array.isArray(X)&&(X=X.map(ie=>IG(ie))),b(t,["safetySettings"],X)}const L=x(e,["tools"]);if(t!==void 0&&L!=null){let X=Yp(L);Array.isArray(X)&&(X=X.map(ie=>OG($p(ie)))),b(t,["tools"],X)}const F=x(e,["toolConfig"]);if(t!==void 0&&F!=null&&b(t,["toolConfig"],BG(F)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const U=x(e,["cachedContent"]);t!==void 0&&U!=null&&b(t,["cachedContent"],vl(i,U));const M=x(e,["responseModalities"]);M!=null&&b(n,["responseModalities"],M);const O=x(e,["mediaResolution"]);O!=null&&b(n,["mediaResolution"],O);const z=x(e,["speechConfig"]);if(z!=null&&b(n,["speechConfig"],VC(z)),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const J=x(e,["thinkingConfig"]);J!=null&&b(n,["thinkingConfig"],J);const G=x(e,["imageConfig"]);return G!=null&&b(n,["imageConfig"],gG(G)),n}function V8(i,e,t){const n={},s=x(e,["systemInstruction"]);t!==void 0&&s!=null&&b(t,["systemInstruction"],$i(s));const a=x(e,["temperature"]);a!=null&&b(n,["temperature"],a);const o=x(e,["topP"]);o!=null&&b(n,["topP"],o);const c=x(e,["topK"]);c!=null&&b(n,["topK"],c);const u=x(e,["candidateCount"]);u!=null&&b(n,["candidateCount"],u);const d=x(e,["maxOutputTokens"]);d!=null&&b(n,["maxOutputTokens"],d);const p=x(e,["stopSequences"]);p!=null&&b(n,["stopSequences"],p);const y=x(e,["responseLogprobs"]);y!=null&&b(n,["responseLogprobs"],y);const v=x(e,["logprobs"]);v!=null&&b(n,["logprobs"],v);const w=x(e,["presencePenalty"]);w!=null&&b(n,["presencePenalty"],w);const A=x(e,["frequencyPenalty"]);A!=null&&b(n,["frequencyPenalty"],A);const C=x(e,["seed"]);C!=null&&b(n,["seed"],C);const T=x(e,["responseMimeType"]);T!=null&&b(n,["responseMimeType"],T);const _=x(e,["responseSchema"]);_!=null&&b(n,["responseSchema"],GC(_));const D=x(e,["responseJsonSchema"]);D!=null&&b(n,["responseJsonSchema"],D);const R=x(e,["routingConfig"]);R!=null&&b(n,["routingConfig"],R);const L=x(e,["modelSelectionConfig"]);L!=null&&b(n,["modelConfig"],L);const F=x(e,["safetySettings"]);if(t!==void 0&&F!=null){let H=F;Array.isArray(H)&&(H=H.map(V=>V)),b(t,["safetySettings"],H)}const U=x(e,["tools"]);if(t!==void 0&&U!=null){let H=Yp(U);Array.isArray(H)&&(H=H.map(V=>hL($p(V)))),b(t,["tools"],H)}const M=x(e,["toolConfig"]);t!==void 0&&M!=null&&b(t,["toolConfig"],M);const O=x(e,["labels"]);t!==void 0&&O!=null&&b(t,["labels"],O);const z=x(e,["cachedContent"]);t!==void 0&&z!=null&&b(t,["cachedContent"],vl(i,z));const J=x(e,["responseModalities"]);J!=null&&b(n,["responseModalities"],J);const G=x(e,["mediaResolution"]);G!=null&&b(n,["mediaResolution"],G);const X=x(e,["speechConfig"]);X!=null&&b(n,["speechConfig"],dL(VC(X)));const ie=x(e,["audioTimestamp"]);ie!=null&&b(n,["audioTimestamp"],ie);const $=x(e,["thinkingConfig"]);$!=null&&b(n,["thinkingConfig"],$);const ee=x(e,["imageConfig"]);return ee!=null&&b(n,["imageConfig"],yG(ee)),n}function xk(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["_url","model"],Rt(i,n));const s=x(e,["contents"]);if(s!=null){let o=Lr(s);Array.isArray(o)&&(o=o.map(c=>sw(c))),b(t,["contents"],o)}const a=x(e,["config"]);return a!=null&&b(t,["generationConfig"],G8(i,a,t)),t}function bk(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["_url","model"],Rt(i,n));const s=x(e,["contents"]);if(s!=null){let o=Lr(s);Array.isArray(o)&&(o=o.map(c=>c)),b(t,["contents"],o)}const a=x(e,["config"]);return a!=null&&b(t,["generationConfig"],V8(i,a,t)),t}function wk(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["candidates"]);if(n!=null){let u=n;Array.isArray(u)&&(u=u.map(d=>h8(d))),b(e,["candidates"],u)}const s=x(i,["modelVersion"]);s!=null&&b(e,["modelVersion"],s);const a=x(i,["promptFeedback"]);a!=null&&b(e,["promptFeedback"],a);const o=x(i,["responseId"]);o!=null&&b(e,["responseId"],o);const c=x(i,["usageMetadata"]);return c!=null&&b(e,["usageMetadata"],c),e}function Sk(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["candidates"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(p=>p)),b(e,["candidates"],d)}const s=x(i,["createTime"]);s!=null&&b(e,["createTime"],s);const a=x(i,["modelVersion"]);a!=null&&b(e,["modelVersion"],a);const o=x(i,["promptFeedback"]);o!=null&&b(e,["promptFeedback"],o);const c=x(i,["responseId"]);c!=null&&b(e,["responseId"],c);const u=x(i,["usageMetadata"]);return u!=null&&b(e,["usageMetadata"],u),e}function q8(i,e){const t={};if(x(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(i,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const n=x(i,["numberOfImages"]);e!==void 0&&n!=null&&b(e,["parameters","sampleCount"],n);const s=x(i,["aspectRatio"]);e!==void 0&&s!=null&&b(e,["parameters","aspectRatio"],s);const a=x(i,["guidanceScale"]);if(e!==void 0&&a!=null&&b(e,["parameters","guidanceScale"],a),x(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=x(i,["safetyFilterLevel"]);e!==void 0&&o!=null&&b(e,["parameters","safetySetting"],o);const c=x(i,["personGeneration"]);e!==void 0&&c!=null&&b(e,["parameters","personGeneration"],c);const u=x(i,["includeSafetyAttributes"]);e!==void 0&&u!=null&&b(e,["parameters","includeSafetyAttributes"],u);const d=x(i,["includeRaiReason"]);e!==void 0&&d!=null&&b(e,["parameters","includeRaiReason"],d);const p=x(i,["language"]);e!==void 0&&p!=null&&b(e,["parameters","language"],p);const y=x(i,["outputMimeType"]);e!==void 0&&y!=null&&b(e,["parameters","outputOptions","mimeType"],y);const v=x(i,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&b(e,["parameters","outputOptions","compressionQuality"],v),x(i,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(x(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const w=x(i,["imageSize"]);if(e!==void 0&&w!=null&&b(e,["parameters","sampleImageSize"],w),x(i,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return t}function $8(i,e){const t={},n=x(i,["outputGcsUri"]);e!==void 0&&n!=null&&b(e,["parameters","storageUri"],n);const s=x(i,["negativePrompt"]);e!==void 0&&s!=null&&b(e,["parameters","negativePrompt"],s);const a=x(i,["numberOfImages"]);e!==void 0&&a!=null&&b(e,["parameters","sampleCount"],a);const o=x(i,["aspectRatio"]);e!==void 0&&o!=null&&b(e,["parameters","aspectRatio"],o);const c=x(i,["guidanceScale"]);e!==void 0&&c!=null&&b(e,["parameters","guidanceScale"],c);const u=x(i,["seed"]);e!==void 0&&u!=null&&b(e,["parameters","seed"],u);const d=x(i,["safetyFilterLevel"]);e!==void 0&&d!=null&&b(e,["parameters","safetySetting"],d);const p=x(i,["personGeneration"]);e!==void 0&&p!=null&&b(e,["parameters","personGeneration"],p);const y=x(i,["includeSafetyAttributes"]);e!==void 0&&y!=null&&b(e,["parameters","includeSafetyAttributes"],y);const v=x(i,["includeRaiReason"]);e!==void 0&&v!=null&&b(e,["parameters","includeRaiReason"],v);const w=x(i,["language"]);e!==void 0&&w!=null&&b(e,["parameters","language"],w);const A=x(i,["outputMimeType"]);e!==void 0&&A!=null&&b(e,["parameters","outputOptions","mimeType"],A);const C=x(i,["outputCompressionQuality"]);e!==void 0&&C!=null&&b(e,["parameters","outputOptions","compressionQuality"],C);const T=x(i,["addWatermark"]);e!==void 0&&T!=null&&b(e,["parameters","addWatermark"],T);const _=x(i,["labels"]);e!==void 0&&_!=null&&b(e,["labels"],_);const D=x(i,["imageSize"]);e!==void 0&&D!=null&&b(e,["parameters","sampleImageSize"],D);const R=x(i,["enhancePrompt"]);return e!==void 0&&R!=null&&b(e,["parameters","enhancePrompt"],R),t}function Y8(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["_url","model"],Rt(i,n));const s=x(e,["prompt"]);s!=null&&b(t,["instances[0]","prompt"],s);const a=x(e,["config"]);return a!=null&&q8(a,t),t}function W8(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["_url","model"],Rt(i,n));const s=x(e,["prompt"]);s!=null&&b(t,["instances[0]","prompt"],s);const a=x(e,["config"]);return a!=null&&$8(a,t),t}function X8(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>oG(o))),b(e,["generatedImages"],a)}const s=x(i,["positivePromptSafetyAttributes"]);return s!=null&&b(e,["positivePromptSafetyAttributes"],cL(s)),e}function J8(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["predictions"]);if(n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>rw(o))),b(e,["generatedImages"],a)}const s=x(i,["positivePromptSafetyAttributes"]);return s!=null&&b(e,["positivePromptSafetyAttributes"],uL(s)),e}function K8(i,e){const t={},n=x(i,["numberOfVideos"]);if(e!==void 0&&n!=null&&b(e,["parameters","sampleCount"],n),x(i,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(i,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=x(i,["durationSeconds"]);if(e!==void 0&&s!=null&&b(e,["parameters","durationSeconds"],s),x(i,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=x(i,["aspectRatio"]);e!==void 0&&a!=null&&b(e,["parameters","aspectRatio"],a);const o=x(i,["resolution"]);e!==void 0&&o!=null&&b(e,["parameters","resolution"],o);const c=x(i,["personGeneration"]);if(e!==void 0&&c!=null&&b(e,["parameters","personGeneration"],c),x(i,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const u=x(i,["negativePrompt"]);e!==void 0&&u!=null&&b(e,["parameters","negativePrompt"],u);const d=x(i,["enhancePrompt"]);if(e!==void 0&&d!=null&&b(e,["parameters","enhancePrompt"],d),x(i,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const p=x(i,["lastFrame"]);e!==void 0&&p!=null&&b(e,["instances[0]","lastFrame"],aw(p));const y=x(i,["referenceImages"]);if(e!==void 0&&y!=null){let v=y;Array.isArray(v)&&(v=v.map(w=>ZG(w))),b(e,["instances[0]","referenceImages"],v)}if(x(i,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(x(i,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return t}function Q8(i,e){const t={},n=x(i,["numberOfVideos"]);e!==void 0&&n!=null&&b(e,["parameters","sampleCount"],n);const s=x(i,["outputGcsUri"]);e!==void 0&&s!=null&&b(e,["parameters","storageUri"],s);const a=x(i,["fps"]);e!==void 0&&a!=null&&b(e,["parameters","fps"],a);const o=x(i,["durationSeconds"]);e!==void 0&&o!=null&&b(e,["parameters","durationSeconds"],o);const c=x(i,["seed"]);e!==void 0&&c!=null&&b(e,["parameters","seed"],c);const u=x(i,["aspectRatio"]);e!==void 0&&u!=null&&b(e,["parameters","aspectRatio"],u);const d=x(i,["resolution"]);e!==void 0&&d!=null&&b(e,["parameters","resolution"],d);const p=x(i,["personGeneration"]);e!==void 0&&p!=null&&b(e,["parameters","personGeneration"],p);const y=x(i,["pubsubTopic"]);e!==void 0&&y!=null&&b(e,["parameters","pubsubTopic"],y);const v=x(i,["negativePrompt"]);e!==void 0&&v!=null&&b(e,["parameters","negativePrompt"],v);const w=x(i,["enhancePrompt"]);e!==void 0&&w!=null&&b(e,["parameters","enhancePrompt"],w);const A=x(i,["generateAudio"]);e!==void 0&&A!=null&&b(e,["parameters","generateAudio"],A);const C=x(i,["lastFrame"]);e!==void 0&&C!=null&&b(e,["instances[0]","lastFrame"],ua(C));const T=x(i,["referenceImages"]);if(e!==void 0&&T!=null){let R=T;Array.isArray(R)&&(R=R.map(L=>eV(L))),b(e,["instances[0]","referenceImages"],R)}const _=x(i,["mask"]);e!==void 0&&_!=null&&b(e,["instances[0]","mask"],QG(_));const D=x(i,["compressionQuality"]);return e!==void 0&&D!=null&&b(e,["parameters","compressionQuality"],D),t}function Z8(i){const e={},t=x(i,["name"]);t!=null&&b(e,["name"],t);const n=x(i,["metadata"]);n!=null&&b(e,["metadata"],n);const s=x(i,["done"]);s!=null&&b(e,["done"],s);const a=x(i,["error"]);a!=null&&b(e,["error"],a);const o=x(i,["response","generateVideoResponse"]);return o!=null&&b(e,["response"],iG(o)),e}function eG(i){const e={},t=x(i,["name"]);t!=null&&b(e,["name"],t);const n=x(i,["metadata"]);n!=null&&b(e,["metadata"],n);const s=x(i,["done"]);s!=null&&b(e,["done"],s);const a=x(i,["error"]);a!=null&&b(e,["error"],a);const o=x(i,["response"]);return o!=null&&b(e,["response"],sG(o)),e}function tG(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["_url","model"],Rt(i,n));const s=x(e,["prompt"]);s!=null&&b(t,["instances[0]","prompt"],s);const a=x(e,["image"]);a!=null&&b(t,["instances[0]","image"],aw(a));const o=x(e,["video"]);o!=null&&b(t,["instances[0]","video"],fL(o));const c=x(e,["source"]);c!=null&&rG(c,t);const u=x(e,["config"]);return u!=null&&K8(u,t),t}function nG(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["_url","model"],Rt(i,n));const s=x(e,["prompt"]);s!=null&&b(t,["instances[0]","prompt"],s);const a=x(e,["image"]);a!=null&&b(t,["instances[0]","image"],ua(a));const o=x(e,["video"]);o!=null&&b(t,["instances[0]","video"],pL(o));const c=x(e,["source"]);c!=null&&aG(c,t);const u=x(e,["config"]);return u!=null&&Q8(u,t),t}function iG(i){const e={},t=x(i,["generatedSamples"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(o=>cG(o))),b(e,["generatedVideos"],a)}const n=x(i,["raiMediaFilteredCount"]);n!=null&&b(e,["raiMediaFilteredCount"],n);const s=x(i,["raiMediaFilteredReasons"]);return s!=null&&b(e,["raiMediaFilteredReasons"],s),e}function sG(i){const e={},t=x(i,["videos"]);if(t!=null){let a=t;Array.isArray(a)&&(a=a.map(o=>uG(o))),b(e,["generatedVideos"],a)}const n=x(i,["raiMediaFilteredCount"]);n!=null&&b(e,["raiMediaFilteredCount"],n);const s=x(i,["raiMediaFilteredReasons"]);return s!=null&&b(e,["raiMediaFilteredReasons"],s),e}function rG(i,e){const t={},n=x(i,["prompt"]);e!==void 0&&n!=null&&b(e,["instances[0]","prompt"],n);const s=x(i,["image"]);e!==void 0&&s!=null&&b(e,["instances[0]","image"],aw(s));const a=x(i,["video"]);return e!==void 0&&a!=null&&b(e,["instances[0]","video"],fL(a)),t}function aG(i,e){const t={},n=x(i,["prompt"]);e!==void 0&&n!=null&&b(e,["instances[0]","prompt"],n);const s=x(i,["image"]);e!==void 0&&s!=null&&b(e,["instances[0]","image"],ua(s));const a=x(i,["video"]);return e!==void 0&&a!=null&&b(e,["instances[0]","video"],pL(a)),t}function oG(i){const e={},t=x(i,["_self"]);t!=null&&b(e,["image"],vG(t));const n=x(i,["raiFilteredReason"]);n!=null&&b(e,["raiFilteredReason"],n);const s=x(i,["_self"]);return s!=null&&b(e,["safetyAttributes"],cL(s)),e}function rw(i){const e={},t=x(i,["_self"]);t!=null&&b(e,["image"],lL(t));const n=x(i,["raiFilteredReason"]);n!=null&&b(e,["raiFilteredReason"],n);const s=x(i,["_self"]);s!=null&&b(e,["safetyAttributes"],uL(s));const a=x(i,["prompt"]);return a!=null&&b(e,["enhancedPrompt"],a),e}function lG(i){const e={},t=x(i,["_self"]);t!=null&&b(e,["mask"],lL(t));const n=x(i,["labels"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),b(e,["labels"],s)}return e}function cG(i){const e={},t=x(i,["video"]);return t!=null&&b(e,["video"],JG(t)),e}function uG(i){const e={},t=x(i,["_self"]);return t!=null&&b(e,["video"],KG(t)),e}function dG(i){const e={},t=x(i,["modelSelectionConfig"]);t!=null&&b(e,["modelConfig"],t);const n=x(i,["responseJsonSchema"]);n!=null&&b(e,["responseJsonSchema"],n);const s=x(i,["audioTimestamp"]);s!=null&&b(e,["audioTimestamp"],s);const a=x(i,["candidateCount"]);a!=null&&b(e,["candidateCount"],a);const o=x(i,["enableAffectiveDialog"]);o!=null&&b(e,["enableAffectiveDialog"],o);const c=x(i,["frequencyPenalty"]);c!=null&&b(e,["frequencyPenalty"],c);const u=x(i,["logprobs"]);u!=null&&b(e,["logprobs"],u);const d=x(i,["maxOutputTokens"]);d!=null&&b(e,["maxOutputTokens"],d);const p=x(i,["mediaResolution"]);p!=null&&b(e,["mediaResolution"],p);const y=x(i,["presencePenalty"]);y!=null&&b(e,["presencePenalty"],y);const v=x(i,["responseLogprobs"]);v!=null&&b(e,["responseLogprobs"],v);const w=x(i,["responseMimeType"]);w!=null&&b(e,["responseMimeType"],w);const A=x(i,["responseModalities"]);A!=null&&b(e,["responseModalities"],A);const C=x(i,["responseSchema"]);C!=null&&b(e,["responseSchema"],C);const T=x(i,["routingConfig"]);T!=null&&b(e,["routingConfig"],T);const _=x(i,["seed"]);_!=null&&b(e,["seed"],_);const D=x(i,["speechConfig"]);D!=null&&b(e,["speechConfig"],dL(D));const R=x(i,["stopSequences"]);R!=null&&b(e,["stopSequences"],R);const L=x(i,["temperature"]);L!=null&&b(e,["temperature"],L);const F=x(i,["thinkingConfig"]);F!=null&&b(e,["thinkingConfig"],F);const U=x(i,["topK"]);U!=null&&b(e,["topK"],U);const M=x(i,["topP"]);if(M!=null&&b(e,["topP"],M),x(i,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function hG(i,e){const t={},n=x(e,["model"]);return n!=null&&b(t,["_url","name"],Rt(i,n)),t}function fG(i,e){const t={},n=x(e,["model"]);return n!=null&&b(t,["_url","name"],Rt(i,n)),t}function pG(i){const e={};if(x(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=x(i,["enableWidget"]);return t!=null&&b(e,["enableWidget"],t),e}function mG(i){const e={};if(x(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=x(i,["timeRangeFilter"]);return t!=null&&b(e,["timeRangeFilter"],t),e}function gG(i){const e={},t=x(i,["aspectRatio"]);t!=null&&b(e,["aspectRatio"],t);const n=x(i,["imageSize"]);if(n!=null&&b(e,["imageSize"],n),x(i,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(x(i,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function yG(i){const e={},t=x(i,["aspectRatio"]);t!=null&&b(e,["aspectRatio"],t);const n=x(i,["imageSize"]);n!=null&&b(e,["imageSize"],n);const s=x(i,["outputMimeType"]);s!=null&&b(e,["imageOutputOptions","mimeType"],s);const a=x(i,["outputCompressionQuality"]);return a!=null&&b(e,["imageOutputOptions","compressionQuality"],a),e}function vG(i){const e={},t=x(i,["bytesBase64Encoded"]);t!=null&&b(e,["imageBytes"],eu(t));const n=x(i,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function lL(i){const e={},t=x(i,["gcsUri"]);t!=null&&b(e,["gcsUri"],t);const n=x(i,["bytesBase64Encoded"]);n!=null&&b(e,["imageBytes"],eu(n));const s=x(i,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}function aw(i){const e={};if(x(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const t=x(i,["imageBytes"]);t!=null&&b(e,["bytesBase64Encoded"],eu(t));const n=x(i,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function ua(i){const e={},t=x(i,["gcsUri"]);t!=null&&b(e,["gcsUri"],t);const n=x(i,["imageBytes"]);n!=null&&b(e,["bytesBase64Encoded"],eu(n));const s=x(i,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}function xG(i,e,t){const n={},s=x(e,["pageSize"]);t!==void 0&&s!=null&&b(t,["_query","pageSize"],s);const a=x(e,["pageToken"]);t!==void 0&&a!=null&&b(t,["_query","pageToken"],a);const o=x(e,["filter"]);t!==void 0&&o!=null&&b(t,["_query","filter"],o);const c=x(e,["queryBase"]);return t!==void 0&&c!=null&&b(t,["_url","models_url"],eL(i,c)),n}function bG(i,e,t){const n={},s=x(e,["pageSize"]);t!==void 0&&s!=null&&b(t,["_query","pageSize"],s);const a=x(e,["pageToken"]);t!==void 0&&a!=null&&b(t,["_query","pageToken"],a);const o=x(e,["filter"]);t!==void 0&&o!=null&&b(t,["_query","filter"],o);const c=x(e,["queryBase"]);return t!==void 0&&c!=null&&b(t,["_url","models_url"],eL(i,c)),n}function wG(i,e){const t={},n=x(e,["config"]);return n!=null&&xG(i,n,t),t}function SG(i,e){const t={},n=x(e,["config"]);return n!=null&&bG(i,n,t),t}function EG(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);const s=x(i,["_self"]);if(s!=null){let a=tL(s);Array.isArray(a)&&(a=a.map(o=>_A(o))),b(e,["models"],a)}return e}function AG(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);const s=x(i,["_self"]);if(s!=null){let a=tL(s);Array.isArray(a)&&(a=a.map(o=>NA(o))),b(e,["models"],a)}return e}function CG(i){const e={},t=x(i,["maskMode"]);t!=null&&b(e,["maskMode"],t);const n=x(i,["segmentationClasses"]);n!=null&&b(e,["maskClasses"],n);const s=x(i,["maskDilation"]);return s!=null&&b(e,["dilation"],s),e}function _A(i){const e={},t=x(i,["name"]);t!=null&&b(e,["name"],t);const n=x(i,["displayName"]);n!=null&&b(e,["displayName"],n);const s=x(i,["description"]);s!=null&&b(e,["description"],s);const a=x(i,["version"]);a!=null&&b(e,["version"],a);const o=x(i,["_self"]);o!=null&&b(e,["tunedModelInfo"],HG(o));const c=x(i,["inputTokenLimit"]);c!=null&&b(e,["inputTokenLimit"],c);const u=x(i,["outputTokenLimit"]);u!=null&&b(e,["outputTokenLimit"],u);const d=x(i,["supportedGenerationMethods"]);d!=null&&b(e,["supportedActions"],d);const p=x(i,["temperature"]);p!=null&&b(e,["temperature"],p);const y=x(i,["maxTemperature"]);y!=null&&b(e,["maxTemperature"],y);const v=x(i,["topP"]);v!=null&&b(e,["topP"],v);const w=x(i,["topK"]);w!=null&&b(e,["topK"],w);const A=x(i,["thinking"]);return A!=null&&b(e,["thinking"],A),e}function NA(i){const e={},t=x(i,["name"]);t!=null&&b(e,["name"],t);const n=x(i,["displayName"]);n!=null&&b(e,["displayName"],n);const s=x(i,["description"]);s!=null&&b(e,["description"],s);const a=x(i,["versionId"]);a!=null&&b(e,["version"],a);const o=x(i,["deployedModels"]);if(o!=null){let y=o;Array.isArray(y)&&(y=y.map(v=>j8(v))),b(e,["endpoints"],y)}const c=x(i,["labels"]);c!=null&&b(e,["labels"],c);const u=x(i,["_self"]);u!=null&&b(e,["tunedModelInfo"],zG(u));const d=x(i,["defaultCheckpointId"]);d!=null&&b(e,["defaultCheckpointId"],d);const p=x(i,["checkpoints"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(v=>v)),b(e,["checkpoints"],y)}return e}function TG(i){const e={},t=x(i,["mediaResolution"]);t!=null&&b(e,["mediaResolution"],t);const n=x(i,["codeExecutionResult"]);n!=null&&b(e,["codeExecutionResult"],n);const s=x(i,["executableCode"]);s!=null&&b(e,["executableCode"],s);const a=x(i,["fileData"]);a!=null&&b(e,["fileData"],B8(a));const o=x(i,["functionCall"]);o!=null&&b(e,["functionCall"],O8(o));const c=x(i,["functionResponse"]);c!=null&&b(e,["functionResponse"],c);const u=x(i,["inlineData"]);u!=null&&b(e,["inlineData"],d8(u));const d=x(i,["text"]);d!=null&&b(e,["text"],d);const p=x(i,["thought"]);p!=null&&b(e,["thought"],p);const y=x(i,["thoughtSignature"]);y!=null&&b(e,["thoughtSignature"],y);const v=x(i,["videoMetadata"]);return v!=null&&b(e,["videoMetadata"],v),e}function _G(i){const e={},t=x(i,["productImage"]);return t!=null&&b(e,["image"],ua(t)),e}function NG(i,e){const t={},n=x(i,["numberOfImages"]);e!==void 0&&n!=null&&b(e,["parameters","sampleCount"],n);const s=x(i,["baseSteps"]);e!==void 0&&s!=null&&b(e,["parameters","baseSteps"],s);const a=x(i,["outputGcsUri"]);e!==void 0&&a!=null&&b(e,["parameters","storageUri"],a);const o=x(i,["seed"]);e!==void 0&&o!=null&&b(e,["parameters","seed"],o);const c=x(i,["safetyFilterLevel"]);e!==void 0&&c!=null&&b(e,["parameters","safetySetting"],c);const u=x(i,["personGeneration"]);e!==void 0&&u!=null&&b(e,["parameters","personGeneration"],u);const d=x(i,["addWatermark"]);e!==void 0&&d!=null&&b(e,["parameters","addWatermark"],d);const p=x(i,["outputMimeType"]);e!==void 0&&p!=null&&b(e,["parameters","outputOptions","mimeType"],p);const y=x(i,["outputCompressionQuality"]);e!==void 0&&y!=null&&b(e,["parameters","outputOptions","compressionQuality"],y);const v=x(i,["enhancePrompt"]);e!==void 0&&v!=null&&b(e,["parameters","enhancePrompt"],v);const w=x(i,["labels"]);return e!==void 0&&w!=null&&b(e,["labels"],w),t}function RG(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["_url","model"],Rt(i,n));const s=x(e,["source"]);s!=null&&kG(s,t);const a=x(e,["config"]);return a!=null&&NG(a,t),t}function MG(i){const e={},t=x(i,["predictions"]);if(t!=null){let n=t;Array.isArray(n)&&(n=n.map(s=>rw(s))),b(e,["generatedImages"],n)}return e}function kG(i,e){const t={},n=x(i,["prompt"]);e!==void 0&&n!=null&&b(e,["instances[0]","prompt"],n);const s=x(i,["personImage"]);e!==void 0&&s!=null&&b(e,["instances[0]","personImage","image"],ua(s));const a=x(i,["productImages"]);if(e!==void 0&&a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>_G(c))),b(e,["instances[0]","productImages"],o)}return t}function DG(i){const e={},t=x(i,["referenceImage"]);t!=null&&b(e,["referenceImage"],ua(t));const n=x(i,["referenceId"]);n!=null&&b(e,["referenceId"],n);const s=x(i,["referenceType"]);s!=null&&b(e,["referenceType"],s);const a=x(i,["maskImageConfig"]);a!=null&&b(e,["maskImageConfig"],CG(a));const o=x(i,["controlImageConfig"]);o!=null&&b(e,["controlImageConfig"],v8(o));const c=x(i,["styleImageConfig"]);c!=null&&b(e,["styleImageConfig"],c);const u=x(i,["subjectImageConfig"]);return u!=null&&b(e,["subjectImageConfig"],u),e}function cL(i){const e={},t=x(i,["safetyAttributes","categories"]);t!=null&&b(e,["categories"],t);const n=x(i,["safetyAttributes","scores"]);n!=null&&b(e,["scores"],n);const s=x(i,["contentType"]);return s!=null&&b(e,["contentType"],s),e}function uL(i){const e={},t=x(i,["safetyAttributes","categories"]);t!=null&&b(e,["categories"],t);const n=x(i,["safetyAttributes","scores"]);n!=null&&b(e,["scores"],n);const s=x(i,["contentType"]);return s!=null&&b(e,["contentType"],s),e}function IG(i){const e={},t=x(i,["category"]);if(t!=null&&b(e,["category"],t),x(i,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=x(i,["threshold"]);return n!=null&&b(e,["threshold"],n),e}function PG(i){const e={},t=x(i,["image"]);return t!=null&&b(e,["image"],ua(t)),e}function LG(i,e){const t={},n=x(i,["mode"]);e!==void 0&&n!=null&&b(e,["parameters","mode"],n);const s=x(i,["maxPredictions"]);e!==void 0&&s!=null&&b(e,["parameters","maxPredictions"],s);const a=x(i,["confidenceThreshold"]);e!==void 0&&a!=null&&b(e,["parameters","confidenceThreshold"],a);const o=x(i,["maskDilation"]);e!==void 0&&o!=null&&b(e,["parameters","maskDilation"],o);const c=x(i,["binaryColorThreshold"]);e!==void 0&&c!=null&&b(e,["parameters","binaryColorThreshold"],c);const u=x(i,["labels"]);return e!==void 0&&u!=null&&b(e,["labels"],u),t}function FG(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["_url","model"],Rt(i,n));const s=x(e,["source"]);s!=null&&jG(s,t);const a=x(e,["config"]);return a!=null&&LG(a,t),t}function UG(i){const e={},t=x(i,["predictions"]);if(t!=null){let n=t;Array.isArray(n)&&(n=n.map(s=>lG(s))),b(e,["generatedMasks"],n)}return e}function jG(i,e){const t={},n=x(i,["prompt"]);e!==void 0&&n!=null&&b(e,["instances[0]","prompt"],n);const s=x(i,["image"]);e!==void 0&&s!=null&&b(e,["instances[0]","image"],ua(s));const a=x(i,["scribbleImage"]);return e!==void 0&&a!=null&&b(e,["instances[0]","scribble"],PG(a)),t}function dL(i){const e={},t=x(i,["languageCode"]);t!=null&&b(e,["languageCode"],t);const n=x(i,["voiceConfig"]);if(n!=null&&b(e,["voiceConfig"],n),x(i,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");return e}function BG(i){const e={},t=x(i,["functionCallingConfig"]);t!=null&&b(e,["functionCallingConfig"],H8(t));const n=x(i,["retrievalConfig"]);return n!=null&&b(e,["retrievalConfig"],n),e}function OG(i){const e={},t=x(i,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(y=>y)),b(e,["functionDeclarations"],p)}if(x(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(i,["googleSearchRetrieval"]);n!=null&&b(e,["googleSearchRetrieval"],n);const s=x(i,["computerUse"]);s!=null&&b(e,["computerUse"],s);const a=x(i,["fileSearch"]);a!=null&&b(e,["fileSearch"],a);const o=x(i,["codeExecution"]);if(o!=null&&b(e,["codeExecution"],o),x(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=x(i,["googleMaps"]);c!=null&&b(e,["googleMaps"],pG(c));const u=x(i,["googleSearch"]);u!=null&&b(e,["googleSearch"],mG(u));const d=x(i,["urlContext"]);return d!=null&&b(e,["urlContext"],d),e}function hL(i){const e={},t=x(i,["functionDeclarations"]);if(t!=null){let y=t;Array.isArray(y)&&(y=y.map(v=>z8(v))),b(e,["functionDeclarations"],y)}const n=x(i,["retrieval"]);n!=null&&b(e,["retrieval"],n);const s=x(i,["googleSearchRetrieval"]);s!=null&&b(e,["googleSearchRetrieval"],s);const a=x(i,["computerUse"]);if(a!=null&&b(e,["computerUse"],a),x(i,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const o=x(i,["codeExecution"]);o!=null&&b(e,["codeExecution"],o);const c=x(i,["enterpriseWebSearch"]);c!=null&&b(e,["enterpriseWebSearch"],c);const u=x(i,["googleMaps"]);u!=null&&b(e,["googleMaps"],u);const d=x(i,["googleSearch"]);d!=null&&b(e,["googleSearch"],d);const p=x(i,["urlContext"]);return p!=null&&b(e,["urlContext"],p),e}function HG(i){const e={},t=x(i,["baseModel"]);t!=null&&b(e,["baseModel"],t);const n=x(i,["createTime"]);n!=null&&b(e,["createTime"],n);const s=x(i,["updateTime"]);return s!=null&&b(e,["updateTime"],s),e}function zG(i){const e={},t=x(i,["labels","google-vertex-llm-tuning-base-model-id"]);t!=null&&b(e,["baseModel"],t);const n=x(i,["createTime"]);n!=null&&b(e,["createTime"],n);const s=x(i,["updateTime"]);return s!=null&&b(e,["updateTime"],s),e}function GG(i,e){const t={},n=x(i,["displayName"]);e!==void 0&&n!=null&&b(e,["displayName"],n);const s=x(i,["description"]);e!==void 0&&s!=null&&b(e,["description"],s);const a=x(i,["defaultCheckpointId"]);return e!==void 0&&a!=null&&b(e,["defaultCheckpointId"],a),t}function VG(i,e){const t={},n=x(i,["displayName"]);e!==void 0&&n!=null&&b(e,["displayName"],n);const s=x(i,["description"]);e!==void 0&&s!=null&&b(e,["description"],s);const a=x(i,["defaultCheckpointId"]);return e!==void 0&&a!=null&&b(e,["defaultCheckpointId"],a),t}function qG(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["_url","name"],Rt(i,n));const s=x(e,["config"]);return s!=null&&GG(s,t),t}function $G(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["_url","model"],Rt(i,n));const s=x(e,["config"]);return s!=null&&VG(s,t),t}function YG(i,e){const t={},n=x(i,["outputGcsUri"]);e!==void 0&&n!=null&&b(e,["parameters","storageUri"],n);const s=x(i,["safetyFilterLevel"]);e!==void 0&&s!=null&&b(e,["parameters","safetySetting"],s);const a=x(i,["personGeneration"]);e!==void 0&&a!=null&&b(e,["parameters","personGeneration"],a);const o=x(i,["includeRaiReason"]);e!==void 0&&o!=null&&b(e,["parameters","includeRaiReason"],o);const c=x(i,["outputMimeType"]);e!==void 0&&c!=null&&b(e,["parameters","outputOptions","mimeType"],c);const u=x(i,["outputCompressionQuality"]);e!==void 0&&u!=null&&b(e,["parameters","outputOptions","compressionQuality"],u);const d=x(i,["enhanceInputImage"]);e!==void 0&&d!=null&&b(e,["parameters","upscaleConfig","enhanceInputImage"],d);const p=x(i,["imagePreservationFactor"]);e!==void 0&&p!=null&&b(e,["parameters","upscaleConfig","imagePreservationFactor"],p);const y=x(i,["labels"]);e!==void 0&&y!=null&&b(e,["labels"],y);const v=x(i,["numberOfImages"]);e!==void 0&&v!=null&&b(e,["parameters","sampleCount"],v);const w=x(i,["mode"]);return e!==void 0&&w!=null&&b(e,["parameters","mode"],w),t}function WG(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["_url","model"],Rt(i,n));const s=x(e,["image"]);s!=null&&b(t,["instances[0]","image"],ua(s));const a=x(e,["upscaleFactor"]);a!=null&&b(t,["parameters","upscaleConfig","upscaleFactor"],a);const o=x(e,["config"]);return o!=null&&YG(o,t),t}function XG(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["predictions"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>rw(a))),b(e,["generatedImages"],s)}return e}function JG(i){const e={},t=x(i,["uri"]);t!=null&&b(e,["uri"],t);const n=x(i,["encodedVideo"]);n!=null&&b(e,["videoBytes"],eu(n));const s=x(i,["encoding"]);return s!=null&&b(e,["mimeType"],s),e}function KG(i){const e={},t=x(i,["gcsUri"]);t!=null&&b(e,["uri"],t);const n=x(i,["bytesBase64Encoded"]);n!=null&&b(e,["videoBytes"],eu(n));const s=x(i,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}function QG(i){const e={},t=x(i,["image"]);t!=null&&b(e,["_self"],ua(t));const n=x(i,["maskMode"]);return n!=null&&b(e,["maskMode"],n),e}function ZG(i){const e={},t=x(i,["image"]);t!=null&&b(e,["image"],aw(t));const n=x(i,["referenceType"]);return n!=null&&b(e,["referenceType"],n),e}function eV(i){const e={},t=x(i,["image"]);t!=null&&b(e,["image"],ua(t));const n=x(i,["referenceType"]);return n!=null&&b(e,["referenceType"],n),e}function fL(i){const e={},t=x(i,["uri"]);t!=null&&b(e,["uri"],t);const n=x(i,["videoBytes"]);n!=null&&b(e,["encodedVideo"],eu(n));const s=x(i,["mimeType"]);return s!=null&&b(e,["encoding"],s),e}function pL(i){const e={},t=x(i,["uri"]);t!=null&&b(e,["gcsUri"],t);const n=x(i,["videoBytes"]);n!=null&&b(e,["bytesBase64Encoded"],eu(n));const s=x(i,["mimeType"]);return s!=null&&b(e,["mimeType"],s),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function tV(i,e){const t={},n=x(i,["displayName"]);return e!==void 0&&n!=null&&b(e,["displayName"],n),t}function nV(i){const e={},t=x(i,["config"]);return t!=null&&tV(t,e),e}function iV(i,e){const t={},n=x(i,["force"]);return e!==void 0&&n!=null&&b(e,["_query","force"],n),t}function sV(i){const e={},t=x(i,["name"]);t!=null&&b(e,["_url","name"],t);const n=x(i,["config"]);return n!=null&&iV(n,e),e}function rV(i){const e={},t=x(i,["name"]);return t!=null&&b(e,["_url","name"],t),e}function aV(i,e){const t={},n=x(i,["customMetadata"]);if(e!==void 0&&n!=null){let a=n;Array.isArray(a)&&(a=a.map(o=>o)),b(e,["customMetadata"],a)}const s=x(i,["chunkingConfig"]);return e!==void 0&&s!=null&&b(e,["chunkingConfig"],s),t}function oV(i){const e={},t=x(i,["name"]);t!=null&&b(e,["name"],t);const n=x(i,["metadata"]);n!=null&&b(e,["metadata"],n);const s=x(i,["done"]);s!=null&&b(e,["done"],s);const a=x(i,["error"]);a!=null&&b(e,["error"],a);const o=x(i,["response"]);return o!=null&&b(e,["response"],cV(o)),e}function lV(i){const e={},t=x(i,["fileSearchStoreName"]);t!=null&&b(e,["_url","file_search_store_name"],t);const n=x(i,["fileName"]);n!=null&&b(e,["fileName"],n);const s=x(i,["config"]);return s!=null&&aV(s,e),e}function cV(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["parent"]);n!=null&&b(e,["parent"],n);const s=x(i,["documentName"]);return s!=null&&b(e,["documentName"],s),e}function uV(i,e){const t={},n=x(i,["pageSize"]);e!==void 0&&n!=null&&b(e,["_query","pageSize"],n);const s=x(i,["pageToken"]);return e!==void 0&&s!=null&&b(e,["_query","pageToken"],s),t}function dV(i){const e={},t=x(i,["config"]);return t!=null&&uV(t,e),e}function hV(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);const s=x(i,["fileSearchStores"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),b(e,["fileSearchStores"],a)}return e}function mL(i,e){const t={},n=x(i,["mimeType"]);e!==void 0&&n!=null&&b(e,["mimeType"],n);const s=x(i,["displayName"]);e!==void 0&&s!=null&&b(e,["displayName"],s);const a=x(i,["customMetadata"]);if(e!==void 0&&a!=null){let c=a;Array.isArray(c)&&(c=c.map(u=>u)),b(e,["customMetadata"],c)}const o=x(i,["chunkingConfig"]);return e!==void 0&&o!=null&&b(e,["chunkingConfig"],o),t}function fV(i){const e={},t=x(i,["fileSearchStoreName"]);t!=null&&b(e,["_url","file_search_store_name"],t);const n=x(i,["config"]);return n!=null&&mL(n,e),e}function pV(i){const e={},t=x(i,["sdkHttpResponse"]);return t!=null&&b(e,["sdkHttpResponse"],t),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mV="Content-Type",gV="X-Server-Timeout",yV="User-Agent",RA="x-goog-api-client",vV="1.31.0",xV=`google-genai-sdk/${vV}`,bV="v1beta1",wV="v1beta",Ek=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class SV{constructor(e){var t,n;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:bV,s.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(s.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:wV,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const n=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&n.push(e.apiVersion),n.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol=t.protocol=="http:"?"ws":"wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,n){const s=[this.getRequestUrlInternal(t)];return n&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,n);if(e.queryParams)for(const[o,c]of Object.entries(e.queryParams))s.searchParams.append(o,String(c));let a={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else a.body=e.body;return a=await this.includeExtraHttpOptionsToRequestInit(a,t,s.toString(),e.abortSignal),this.unaryApiCall(s,a,e.httpMethod)}patchHttpOptions(e,t){const n=JSON.parse(JSON.stringify(e));for(const[s,a]of Object.entries(t))typeof a=="object"?n[s]=Object.assign(Object.assign({},n[s]),a):a!==void 0&&(n[s]=a);return n}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const n=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,n);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let a={};return a.body=e.body,a=await this.includeExtraHttpOptionsToRequestInit(a,t,s.toString(),e.abortSignal),this.streamApiCall(s,a,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t,n,s){if(t&&t.timeout||s){const a=new AbortController,o=a.signal;if(t.timeout&&(t==null?void 0:t.timeout)>0){const c=setTimeout(()=>a.abort(),t.timeout);c&&typeof c.unref=="function"&&c.unref()}s&&s.addEventListener("abort",()=>{a.abort()}),e.signal=o}return t&&t.extraBody!==null&&EV(e,t.extraBody),e.headers=await this.getHeadersInternal(t,n),e}async unaryApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async s=>(await Ak(s),new AA(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,t,n){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:n})).then(async s=>(await Ak(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var t;return af(this,arguments,function*(){const s=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),a=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let o="";for(;;){const{done:c,value:u}=yield dn(s.read());if(c){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=a.decode(u,{stream:!0});try{const y=JSON.parse(d);if("error"in y){const v=JSON.parse(JSON.stringify(y.error)),w=v.status,A=v.code,C=`got status: ${w}. ${JSON.stringify(y)}`;if(A>=400&&A<600)throw new iw({message:C,status:A})}}catch(y){if(y.name==="ApiError")throw y}o+=d;let p=o.match(Ek);for(;p;){const y=p[1];try{const v=new Response(y,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield dn(new AA(v)),o=o.slice(p[0].length),p=o.match(Ek)}catch(v){throw new Error(`exception parsing stream chunk ${y}. ${v}`)}}}}finally{s.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(n=>{throw new Error(`exception ${n} sending request`)})}getDefaultHeaders(){const e={},t=xV+" "+this.clientOptions.userAgentExtra;return e[yV]=t,e[RA]=t,e[mV]="application/json",e}async getHeadersInternal(e,t){const n=new Headers;if(e&&e.headers){for(const[s,a]of Object.entries(e.headers))n.append(s,a);e.timeout&&e.timeout>0&&n.append(gV,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n,t),n}getFileName(e){var t;let n="";return typeof e=="string"&&(n=e.replace(/[/\\]+$/,""),n=(t=n.split(/[/\\]/).pop())!==null&&t!==void 0?t:""),n}async uploadFile(e,t){var n;const s={};t!=null&&(s.mimeType=t.mimeType,s.name=t.name,s.displayName=t.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const a=this.clientOptions.uploader,o=await a.stat(e);s.sizeBytes=String(o.size);const c=(n=t==null?void 0:t.mimeType)!==null&&n!==void 0?n:o.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=c;const u={file:s},d=this.getFileName(e),p=Ae("upload/v1beta/files",u._url),y=await this.fetchUploadUrl(p,s.sizeBytes,s.mimeType,d,u,t==null?void 0:t.httpOptions);return a.upload(e,y,this)}async uploadFileToFileSearchStore(e,t,n){var s;const a=this.clientOptions.uploader,o=await a.stat(t),c=String(o.size),u=(s=n==null?void 0:n.mimeType)!==null&&s!==void 0?s:o.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,p=this.getFileName(t),y={};n!=null&&mL(n,y);const v=await this.fetchUploadUrl(d,c,u,p,y,n==null?void 0:n.httpOptions);return a.uploadToFileSearchStore(t,v,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,t,n,s,a,o){var c;let u={};o?u=o:u={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${t}`,"X-Goog-Upload-Header-Content-Type":`${n}`},s?{"X-Goog-Upload-File-Name":s}:{})};const d=await this.request({path:e,body:JSON.stringify(a),httpMethod:"POST",httpOptions:u});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const p=(c=d==null?void 0:d.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(p===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return p}}async function Ak(i){var e;if(i===void 0)throw new Error("response is undefined");if(!i.ok){const t=i.status;let n;!((e=i.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?n=await i.json():n={error:{message:await i.text(),code:i.status,status:i.statusText}};const s=JSON.stringify(n);throw t>=400&&t<600?new iw({message:s,status:t}):new Error(s)}}function EV(i,e){if(!e||Object.keys(e).length===0)return;if(i.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let t={};if(typeof i.body=="string"&&i.body.length>0)try{const a=JSON.parse(i.body);if(typeof a=="object"&&a!==null&&!Array.isArray(a))t=a;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function n(a,o){const c=Object.assign({},a);for(const u in o)if(Object.prototype.hasOwnProperty.call(o,u)){const d=o[u],p=c[u];d&&typeof d=="object"&&!Array.isArray(d)&&p&&typeof p=="object"&&!Array.isArray(p)?c[u]=n(p,d):(p&&d&&typeof p!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${u}". Original type: ${typeof p}, New type: ${typeof d}. Overwriting.`),c[u]=d)}return c}const s=n(t,e);i.body=JSON.stringify(s)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const AV="mcp_used/unknown";let CV=!1;function gL(i){for(const e of i)if(TV(e)||typeof e=="object"&&"inputSchema"in e)return!0;return CV}function yL(i){var e;const t=(e=i[RA])!==null&&e!==void 0?e:"";i[RA]=(t+` ${AV}`).trimStart()}function TV(i){return i!==null&&typeof i=="object"&&i instanceof $C}function _V(i,e=100){return af(this,arguments,function*(){let n,s=0;for(;s<e;){const a=yield dn(i.listTools({cursor:n}));for(const o of a.tools)yield yield dn(o),s++;if(!a.nextCursor)break;n=a.nextCursor}})}class $C{constructor(e=[],t){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=t}static create(e,t){return new $C(e,t)}async initialize(){var e,t,n,s;if(this.mcpTools.length>0)return;const a={},o=[];for(const p of this.mcpClients)try{for(var c=!0,u=(t=void 0,Eg(_V(p))),d;d=await u.next(),e=d.done,!e;c=!0){s=d.value,c=!1;const y=s;o.push(y);const v=y.name;if(a[v])throw new Error(`Duplicate function name ${v} found in MCP tools. Please ensure function names are unique.`);a[v]=p}}catch(y){t={error:y}}finally{try{!c&&!e&&(n=u.return)&&await n.call(u)}finally{if(t)throw t.error}}this.mcpTools=o,this.functionNameToMcpClient=a}async tool(){return await this.initialize(),r6(this.mcpTools,this.config)}async callTool(e){await this.initialize();const t=[];for(const n of e)if(n.name in this.functionNameToMcpClient){const s=this.functionNameToMcpClient[n.name];let a;this.config.timeout&&(a={timeout:this.config.timeout});const o=await s.callTool({name:n.name,arguments:n.args},void 0,a);t.push({functionResponse:{name:n.name,response:o.isError?{error:o}:o}})}return t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function NV(i,e,t){const n=new KH;let s;t.data instanceof Blob?s=JSON.parse(await t.data.text()):s=JSON.parse(t.data),Object.assign(n,s),e(n)}class RV{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n}async connect(e){var t,n;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const s=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion(),o=DV(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),u=`${s}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateMusic?key=${c}`;let d=()=>{};const p=new Promise(R=>{d=R}),y=e.callbacks,v=function(){d({})},w=this.apiClient,A={onopen:v,onmessage:R=>{NV(w,y.onmessage,R)},onerror:(t=y==null?void 0:y.onerror)!==null&&t!==void 0?t:function(R){},onclose:(n=y==null?void 0:y.onclose)!==null&&n!==void 0?n:function(R){}},C=this.webSocketFactory.create(u,kV(o),A);C.connect(),await p;const D={setup:{model:Rt(this.apiClient,e.model)}};return C.send(JSON.stringify(D)),new MV(C,this.apiClient)}}class MV{constructor(e,t){this.conn=e,this.apiClient=t}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const t=n8(e);this.conn.send(JSON.stringify({clientContent:t}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const t=t8(e);this.conn.send(JSON.stringify(t))}sendPlaybackControl(e){const t={playbackControl:e};this.conn.send(JSON.stringify(t))}play(){this.sendPlaybackControl(Xh.PLAY)}pause(){this.sendPlaybackControl(Xh.PAUSE)}stop(){this.sendPlaybackControl(Xh.STOP)}resetContext(){this.sendPlaybackControl(Xh.RESET_CONTEXT)}close(){this.conn.close()}}function kV(i){const e={};return i.forEach((t,n)=>{e[n]=t}),e}function DV(i){const e=new Headers;for(const[t,n]of Object.entries(i))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IV="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function PV(i,e,t){const n=new JH;let s;t.data instanceof Blob?s=await t.data.text():t.data instanceof ArrayBuffer?s=new TextDecoder().decode(t.data):s=t.data;const a=JSON.parse(s);if(i.isVertexAI()){const o=r8(a);Object.assign(n,o)}else Object.assign(n,a);e(n)}class LV{constructor(e,t,n){this.apiClient=e,this.auth=t,this.webSocketFactory=n,this.music=new RV(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var t,n,s,a,o,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const u=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let p;const y=this.apiClient.getHeaders();e.config&&e.config.tools&&gL(e.config.tools)&&yL(y);const v=BV(y);if(this.apiClient.isVertexAI())p=`${u}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(v,p);else{const z=this.apiClient.getApiKey();let J="BidiGenerateContent",G="key";z!=null&&z.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),J="BidiGenerateContentConstrained",G="access_token"),p=`${u}/ws/google.ai.generativelanguage.${d}.GenerativeService.${J}?${G}=${z}`}let w=()=>{};const A=new Promise(z=>{w=z}),C=e.callbacks,T=function(){var z;(z=C==null?void 0:C.onopen)===null||z===void 0||z.call(C),w({})},_=this.apiClient,D={onopen:T,onmessage:z=>{PV(_,C.onmessage,z)},onerror:(t=C==null?void 0:C.onerror)!==null&&t!==void 0?t:function(z){},onclose:(n=C==null?void 0:C.onclose)!==null&&n!==void 0?n:function(z){}},R=this.webSocketFactory.create(p,jV(v),D);R.connect(),await A;let L=Rt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&L.startsWith("publishers/")){const z=this.apiClient.getProject(),J=this.apiClient.getLocation();L=`projects/${z}/locations/${J}/`+L}let F={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[sb.AUDIO]}:e.config.responseModalities=[sb.AUDIO]),!((a=e.config)===null||a===void 0)&&a.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const U=(c=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&c!==void 0?c:[],M=[];for(const z of U)if(this.isCallableTool(z)){const J=z;M.push(await J.tool())}else M.push(z);M.length>0&&(e.config.tools=M);const O={model:L,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?F=e8(this.apiClient,O):F=Zz(this.apiClient,O),delete F.config,R.send(JSON.stringify(F)),new UV(R,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const FV={turnComplete:!0};class UV{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let n=[];try{n=Lr(t.turns),e.isVertexAI()||(n=n.map(s=>sw(s)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:n,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClienttToolResponse(e,t){let n=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?n=t.functionResponses:n=[t.functionResponses],n.length===0)throw new Error("functionResponses is required.");for(const a of n){if(typeof a!="object"||a===null||!("name"in a)||!("response"in a))throw new Error(`Could not parse function response, type '${typeof a}'.`);if(!e.isVertexAI()&&!("id"in a))throw new Error(IV)}return{toolResponse:{functionResponses:n}}}sendClientContent(e){e=Object.assign(Object.assign({},FV),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){let t={};this.apiClient.isVertexAI()?t={realtimeInput:s8(e)}:t={realtimeInput:i8(e)},this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function jV(i){const e={};return i.forEach((t,n)=>{e[n]=t}),e}function BV(i){const e=new Headers;for(const[t,n]of Object.entries(i))e.append(t,n);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Ck=10;function Tk(i){var e,t,n;if(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let s=!1;for(const o of(t=i==null?void 0:i.tools)!==null&&t!==void 0?t:[])if(of(o)){s=!0;break}if(!s)return!0;const a=(n=i==null?void 0:i.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls;return a&&(a<0||!Number.isInteger(a))||a==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",a),!0):!1}function of(i){return"callTool"in i&&typeof i.callTool=="function"}function OV(i){var e,t,n;return(n=(t=(e=i.config)===null||e===void 0?void 0:e.tools)===null||t===void 0?void 0:t.some(s=>of(s)))!==null&&n!==void 0?n:!1}function _k(i){var e;const t=[];return!((e=i==null?void 0:i.config)===null||e===void 0)&&e.tools&&i.config.tools.forEach((n,s)=>{if(of(n))return;const a=n;a.functionDeclarations&&a.functionDeclarations.length>0&&t.push(s)}),t}function Nk(i){var e;return!(!((e=i==null?void 0:i.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class HV extends yl{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>{var n,s,a,o,c;const u=await this.processParamsMaybeAddMcpUsage(t);if(this.maybeMoveToResponseJsonSchem(t),!OV(t)||Tk(t.config))return await this.generateContentInternal(u);const d=_k(t);if(d.length>0){const C=d.map(T=>`tools[${T}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${C}.`)}let p,y;const v=Lr(u.contents),w=(a=(s=(n=u.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||s===void 0?void 0:s.maximumRemoteCalls)!==null&&a!==void 0?a:Ck;let A=0;for(;A<w&&(p=await this.generateContentInternal(u),!(!p.functionCalls||p.functionCalls.length===0));){const C=p.candidates[0].content,T=[];for(const _ of(c=(o=t.config)===null||o===void 0?void 0:o.tools)!==null&&c!==void 0?c:[])if(of(_)){const R=await _.callTool(p.functionCalls);T.push(...R)}A++,y={role:"user",parts:T},u.contents=Lr(u.contents),u.contents.push(C),u.contents.push(y),Nk(u.config)&&(v.push(C),v.push(y))}return Nk(u.config)&&(p.automaticFunctionCallingHistory=v),p},this.generateContentStream=async t=>{var n,s,a,o,c;if(this.maybeMoveToResponseJsonSchem(t),Tk(t.config)){const y=await this.processParamsMaybeAddMcpUsage(t);return await this.generateContentStreamInternal(y)}const u=_k(t);if(u.length>0){const y=u.map(v=>`tools[${v}]`).join(", ");throw new Error(`Incompatible tools found at ${y}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(a=(s=(n=t==null?void 0:t.config)===null||n===void 0?void 0:n.toolConfig)===null||s===void 0?void 0:s.functionCallingConfig)===null||a===void 0?void 0:a.streamFunctionCallArguments,p=(c=(o=t==null?void 0:t.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(d&&!p)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(t)},this.generateImages=async t=>await this.generateImagesInternal(t).then(n=>{var s;let a;const o=[];if(n!=null&&n.generatedImages)for(const u of n.generatedImages)u&&(u!=null&&u.safetyAttributes)&&((s=u==null?void 0:u.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?a=u==null?void 0:u.safetyAttributes:o.push(u);let c;return a?c={generatedImages:o,positivePromptSafetyAttributes:a,sdkHttpResponse:n.sdkHttpResponse}:c={generatedImages:o,sdkHttpResponse:n.sdkHttpResponse},c}),this.list=async t=>{var n;const o={config:Object.assign(Object.assign({},{queryBase:!0}),t==null?void 0:t.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((n=o.config)===null||n===void 0)&&n.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Jd(cl.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(o),o)},this.editImage=async t=>{const n={model:t.model,prompt:t.prompt,referenceImages:[],config:t.config};return t.referenceImages&&t.referenceImages&&(n.referenceImages=t.referenceImages.map(s=>s.toReferenceImageAPI())),await this.editImageInternal(n)},this.upscaleImage=async t=>{let n={numberOfImages:1,mode:"upscale"};t.config&&(n=Object.assign(Object.assign({},n),t.config));const s={model:t.model,image:t.image,upscaleFactor:t.upscaleFactor,config:n};return await this.upscaleImageInternal(s)},this.generateVideos=async t=>{var n,s,a,o,c,u;if((t.prompt||t.image||t.video)&&t.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((n=t.video)===null||n===void 0)&&n.uri&&(!((s=t.video)===null||s===void 0)&&s.videoBytes)?t.video={uri:t.video.uri,mimeType:t.video.mimeType}:!((o=(a=t.source)===null||a===void 0?void 0:a.video)===null||o===void 0)&&o.uri&&(!((u=(c=t.source)===null||c===void 0?void 0:c.video)===null||u===void 0)&&u.videoBytes)&&(t.source.video={uri:t.source.video.uri,mimeType:t.source.video.mimeType})),await this.generateVideosInternal(t)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var t,n,s;const a=(t=e.config)===null||t===void 0?void 0:t.tools;if(!a)return e;const o=await Promise.all(a.map(async u=>of(u)?await u.tool():u)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(c.config.tools=o,e.config&&e.config.tools&&gL(e.config.tools)){const u=(s=(n=e.config.httpOptions)===null||n===void 0?void 0:n.headers)!==null&&s!==void 0?s:{};let d=Object.assign({},u);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),yL(d),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return c}async initAfcToolsMap(e){var t,n,s;const a=new Map;for(const o of(n=(t=e.config)===null||t===void 0?void 0:t.tools)!==null&&n!==void 0?n:[])if(of(o)){const c=o,u=await c.tool();for(const d of(s=u.functionDeclarations)!==null&&s!==void 0?s:[]){if(!d.name)throw new Error("Function declaration name is required.");if(a.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);a.set(d.name,c)}}return a}async processAfcStream(e){var t,n,s;const a=(s=(n=(t=e.config)===null||t===void 0?void 0:t.automaticFunctionCalling)===null||n===void 0?void 0:n.maximumRemoteCalls)!==null&&s!==void 0?s:Ck;let o=!1,c=0;const u=await this.initAfcToolsMap(e);return(function(d,p,y){var v,w;return af(this,arguments,function*(){for(var A,C,T,_;c<a;){o&&(c++,o=!1);const F=yield dn(d.processParamsMaybeAddMcpUsage(y)),U=yield dn(d.generateContentStreamInternal(F)),M=[],O=[];try{for(var D=!0,R=(C=void 0,Eg(U)),L;L=yield dn(R.next()),A=L.done,!A;D=!0){_=L.value,D=!1;const z=_;if(yield yield dn(z),z.candidates&&(!((v=z.candidates[0])===null||v===void 0)&&v.content)){O.push(z.candidates[0].content);for(const J of(w=z.candidates[0].content.parts)!==null&&w!==void 0?w:[])if(c<a&&J.functionCall){if(!J.functionCall.name)throw new Error("Function call name was not returned by the model.");if(p.has(J.functionCall.name)){const G=yield dn(p.get(J.functionCall.name).callTool([J.functionCall]));M.push(...G)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${p.keys()}, mising tool: ${J.functionCall.name}`)}}}}catch(z){C={error:z}}finally{try{!D&&!A&&(T=R.return)&&(yield dn(T.call(R)))}finally{if(C)throw C.error}}if(M.length>0){o=!0;const z=new Vm;z.candidates=[{content:{role:"user",parts:M}}],yield yield dn(z);const J=[];J.push(...O),J.push({role:"user",parts:M});const G=Lr(y.contents).concat(J);y.contents=G}else break}})})(this,u,e)}async generateContentInternal(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=bk(this.apiClient,e);return c=Ae("{model}:generateContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const y=Sk(p),v=new Vm;return Object.assign(v,y),v})}else{const d=xk(this.apiClient,e);return c=Ae("{model}:generateContent",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const y=wk(p),v=new Vm;return Object.assign(v,y),v})}}async generateContentStreamInternal(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=bk(this.apiClient,e);return c=Ae("{model}:streamGenerateContent?alt=sse",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.requestStream({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}),o.then(function(y){return af(this,arguments,function*(){var v,w,A,C;try{for(var T=!0,_=Eg(y),D;D=yield dn(_.next()),v=D.done,!v;T=!0){C=D.value,T=!1;const R=C,L=Sk(yield dn(R.json()));L.sdkHttpResponse={headers:R.headers};const F=new Vm;Object.assign(F,L),yield yield dn(F)}}catch(R){w={error:R}}finally{try{!T&&!v&&(A=_.return)&&(yield dn(A.call(_)))}finally{if(w)throw w.error}}})})}else{const d=xk(this.apiClient,e);return c=Ae("{model}:streamGenerateContent?alt=sse",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.requestStream({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}),o.then(function(y){return af(this,arguments,function*(){var v,w,A,C;try{for(var T=!0,_=Eg(y),D;D=yield dn(_.next()),v=D.done,!v;T=!0){C=D.value,T=!1;const R=C,L=wk(yield dn(R.json()));L.sdkHttpResponse={headers:R.headers};const F=new Vm;Object.assign(F,L),yield yield dn(F)}}catch(R){w={error:R}}finally{try{!T&&!v&&(A=_.return)&&(yield dn(A.call(_)))}finally{if(w)throw w.error}}})})}}async embedContent(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=L8(this.apiClient,e);return c=Ae("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const y=U8(p),v=new nk;return Object.assign(v,y),v})}else{const d=P8(this.apiClient,e);return c=Ae("{model}:batchEmbedContents",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const y=F8(p),v=new nk;return Object.assign(v,y),v})}}async generateImagesInternal(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=W8(this.apiClient,e);return c=Ae("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const y=J8(p),v=new ik;return Object.assign(v,y),v})}else{const d=Y8(this.apiClient,e);return c=Ae("{model}:predict",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const y=X8(p),v=new ik;return Object.assign(v,y),v})}}async editImageInternal(e){var t,n;let s,a="",o={};if(this.apiClient.isVertexAI()){const c=M8(this.apiClient,e);return a=Ae("{model}:predict",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:u.headers},p})),s.then(u=>{const d=k8(u),p=new BH;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var t,n;let s,a="",o={};if(this.apiClient.isVertexAI()){const c=WG(this.apiClient,e);return a=Ae("{model}:predict",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:u.headers},p})),s.then(u=>{const d=XG(u),p=new OH;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var t,n;let s,a="",o={};if(this.apiClient.isVertexAI()){const c=RG(this.apiClient,e);return a=Ae("{model}:predict",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>{const d=MG(u),p=new HH;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var t,n;let s,a="",o={};if(this.apiClient.isVertexAI()){const c=FG(this.apiClient,e);return a=Ae("{model}:predict",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>{const d=UG(u),p=new zH;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=fG(this.apiClient,e);return c=Ae("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),o.then(p=>NA(p))}else{const d=hG(this.apiClient,e);return c=Ae("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),o.then(p=>_A(p))}}async listInternal(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=SG(this.apiClient,e);return c=Ae("{models_url}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const y=AG(p),v=new sk;return Object.assign(v,y),v})}else{const d=wG(this.apiClient,e);return c=Ae("{models_url}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const y=EG(p),v=new sk;return Object.assign(v,y),v})}}async update(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=$G(this.apiClient,e);return c=Ae("{model}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),o.then(p=>NA(p))}else{const d=qG(this.apiClient,e);return c=Ae("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),o.then(p=>_A(p))}}async delete(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=T8(this.apiClient,e);return c=Ae("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const y=N8(p),v=new rk;return Object.assign(v,y),v})}else{const d=C8(this.apiClient,e);return c=Ae("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const y=_8(p),v=new rk;return Object.assign(v,y),v})}}async countTokens(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=S8(this.apiClient,e);return c=Ae("{model}:countTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const y=A8(p),v=new ak;return Object.assign(v,y),v})}else{const d=w8(this.apiClient,e);return c=Ae("{model}:countTokens",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const y=E8(p),v=new ak;return Object.assign(v,y),v})}}async computeTokens(e){var t,n;let s,a="",o={};if(this.apiClient.isVertexAI()){const c=p8(this.apiClient,e);return a=Ae("{model}:computeTokens",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:u.headers},p})),s.then(u=>{const d=m8(u),p=new GH;return Object.assign(p,d),p})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=nG(this.apiClient,e);return c=Ae("{model}:predictLongRunning",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),o.then(p=>{const y=eG(p),v=new rb;return Object.assign(v,y),v})}else{const d=tG(this.apiClient,e);return c=Ae("{model}:predictLongRunning",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),o.then(p=>{const y=Z8(p),v=new rb;return Object.assign(v,y),v})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class zV extends yl{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,n=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let a;n&&"httpOptions"in n&&(a=n.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async get(e){const t=e.operation,n=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let a;n&&"httpOptions"in n&&(a=n.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:a}});return t._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const s=await this.getVideosOperationInternal({operationName:t.name,config:n});return t._fromAPIResponse({apiResponse:s,_isVertexAI:!1})}}async getVideosOperationInternal(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=IH(e);return c=Ae("{operationName}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json()),o}else{const d=DH(e);return c=Ae("{operationName}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json()),o}}async fetchPredictVideosOperationInternal(e){var t,n;let s,a="",o={};if(this.apiClient.isVertexAI()){const c=CH(e);return a=Ae("{resourceName}:fetchPredictOperation",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function GV(i){const e={},t=x(i,["data"]);if(t!=null&&b(e,["data"],t),x(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(i,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function VV(i){const e={},t=x(i,["parts"]);if(t!=null){let s=t;Array.isArray(s)&&(s=s.map(a=>ZV(a))),b(e,["parts"],s)}const n=x(i,["role"]);return n!=null&&b(e,["role"],n),e}function qV(i,e,t){const n={},s=x(e,["expireTime"]);t!==void 0&&s!=null&&b(t,["expireTime"],s);const a=x(e,["newSessionExpireTime"]);t!==void 0&&a!=null&&b(t,["newSessionExpireTime"],a);const o=x(e,["uses"]);t!==void 0&&o!=null&&b(t,["uses"],o);const c=x(e,["liveConnectConstraints"]);t!==void 0&&c!=null&&b(t,["bidiGenerateContentSetup"],QV(i,c));const u=x(e,["lockAdditionalFields"]);return t!==void 0&&u!=null&&b(t,["fieldMask"],u),n}function $V(i,e){const t={},n=x(e,["config"]);return n!=null&&b(t,["config"],qV(i,n,t)),t}function YV(i){const e={};if(x(i,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const t=x(i,["fileUri"]);t!=null&&b(e,["fileUri"],t);const n=x(i,["mimeType"]);return n!=null&&b(e,["mimeType"],n),e}function WV(i){const e={},t=x(i,["id"]);t!=null&&b(e,["id"],t);const n=x(i,["args"]);n!=null&&b(e,["args"],n);const s=x(i,["name"]);if(s!=null&&b(e,["name"],s),x(i,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(i,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function XV(i){const e={};if(x(i,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const t=x(i,["enableWidget"]);return t!=null&&b(e,["enableWidget"],t),e}function JV(i){const e={};if(x(i,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(i,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const t=x(i,["timeRangeFilter"]);return t!=null&&b(e,["timeRangeFilter"],t),e}function KV(i,e){const t={},n=x(i,["generationConfig"]);e!==void 0&&n!=null&&b(e,["setup","generationConfig"],n);const s=x(i,["responseModalities"]);e!==void 0&&s!=null&&b(e,["setup","generationConfig","responseModalities"],s);const a=x(i,["temperature"]);e!==void 0&&a!=null&&b(e,["setup","generationConfig","temperature"],a);const o=x(i,["topP"]);e!==void 0&&o!=null&&b(e,["setup","generationConfig","topP"],o);const c=x(i,["topK"]);e!==void 0&&c!=null&&b(e,["setup","generationConfig","topK"],c);const u=x(i,["maxOutputTokens"]);e!==void 0&&u!=null&&b(e,["setup","generationConfig","maxOutputTokens"],u);const d=x(i,["mediaResolution"]);e!==void 0&&d!=null&&b(e,["setup","generationConfig","mediaResolution"],d);const p=x(i,["seed"]);e!==void 0&&p!=null&&b(e,["setup","generationConfig","seed"],p);const y=x(i,["speechConfig"]);e!==void 0&&y!=null&&b(e,["setup","generationConfig","speechConfig"],qC(y));const v=x(i,["thinkingConfig"]);e!==void 0&&v!=null&&b(e,["setup","generationConfig","thinkingConfig"],v);const w=x(i,["enableAffectiveDialog"]);e!==void 0&&w!=null&&b(e,["setup","generationConfig","enableAffectiveDialog"],w);const A=x(i,["systemInstruction"]);e!==void 0&&A!=null&&b(e,["setup","systemInstruction"],VV($i(A)));const C=x(i,["tools"]);if(e!==void 0&&C!=null){let U=Yp(C);Array.isArray(U)&&(U=U.map(M=>tq($p(M)))),b(e,["setup","tools"],U)}const T=x(i,["sessionResumption"]);e!==void 0&&T!=null&&b(e,["setup","sessionResumption"],eq(T));const _=x(i,["inputAudioTranscription"]);e!==void 0&&_!=null&&b(e,["setup","inputAudioTranscription"],_);const D=x(i,["outputAudioTranscription"]);e!==void 0&&D!=null&&b(e,["setup","outputAudioTranscription"],D);const R=x(i,["realtimeInputConfig"]);e!==void 0&&R!=null&&b(e,["setup","realtimeInputConfig"],R);const L=x(i,["contextWindowCompression"]);e!==void 0&&L!=null&&b(e,["setup","contextWindowCompression"],L);const F=x(i,["proactivity"]);return e!==void 0&&F!=null&&b(e,["setup","proactivity"],F),t}function QV(i,e){const t={},n=x(e,["model"]);n!=null&&b(t,["setup","model"],Rt(i,n));const s=x(e,["config"]);return s!=null&&b(t,["config"],KV(s,t)),t}function ZV(i){const e={},t=x(i,["mediaResolution"]);t!=null&&b(e,["mediaResolution"],t);const n=x(i,["codeExecutionResult"]);n!=null&&b(e,["codeExecutionResult"],n);const s=x(i,["executableCode"]);s!=null&&b(e,["executableCode"],s);const a=x(i,["fileData"]);a!=null&&b(e,["fileData"],YV(a));const o=x(i,["functionCall"]);o!=null&&b(e,["functionCall"],WV(o));const c=x(i,["functionResponse"]);c!=null&&b(e,["functionResponse"],c);const u=x(i,["inlineData"]);u!=null&&b(e,["inlineData"],GV(u));const d=x(i,["text"]);d!=null&&b(e,["text"],d);const p=x(i,["thought"]);p!=null&&b(e,["thought"],p);const y=x(i,["thoughtSignature"]);y!=null&&b(e,["thoughtSignature"],y);const v=x(i,["videoMetadata"]);return v!=null&&b(e,["videoMetadata"],v),e}function eq(i){const e={},t=x(i,["handle"]);if(t!=null&&b(e,["handle"],t),x(i,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function tq(i){const e={},t=x(i,["functionDeclarations"]);if(t!=null){let p=t;Array.isArray(p)&&(p=p.map(y=>y)),b(e,["functionDeclarations"],p)}if(x(i,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(i,["googleSearchRetrieval"]);n!=null&&b(e,["googleSearchRetrieval"],n);const s=x(i,["computerUse"]);s!=null&&b(e,["computerUse"],s);const a=x(i,["fileSearch"]);a!=null&&b(e,["fileSearch"],a);const o=x(i,["codeExecution"]);if(o!=null&&b(e,["codeExecution"],o),x(i,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=x(i,["googleMaps"]);c!=null&&b(e,["googleMaps"],XV(c));const u=x(i,["googleSearch"]);u!=null&&b(e,["googleSearch"],JV(u));const d=x(i,["urlContext"]);return d!=null&&b(e,["urlContext"],d),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function nq(i){const e=[];for(const t in i)if(Object.prototype.hasOwnProperty.call(i,t)){const n=i[t];if(typeof n=="object"&&n!=null&&Object.keys(n).length>0){const s=Object.keys(n).map(a=>`${t}.${a}`);e.push(...s)}else e.push(t)}return e.join(",")}function iq(i,e){let t=null;const n=i.bidiGenerateContentSetup;if(typeof n=="object"&&n!==null&&"setup"in n){const a=n.setup;typeof a=="object"&&a!==null?(i.bidiGenerateContentSetup=a,t=a):delete i.bidiGenerateContentSetup}else n!==void 0&&delete i.bidiGenerateContentSetup;const s=i.fieldMask;if(t){const a=nq(t);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)a?i.fieldMask=a:delete i.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&s!==null&&Array.isArray(s)&&s.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];s.length>0&&(c=s.map(d=>o.includes(d)?`generationConfig.${d}`:d));const u=[];a&&u.push(a),c.length>0&&u.push(...c),u.length>0?i.fieldMask=u.join(","):delete i.fieldMask}else delete i.fieldMask}else s!==null&&Array.isArray(s)&&s.length>0?i.fieldMask=s.join(","):delete i.fieldMask;return i}class sq extends yl{constructor(e){super(),this.apiClient=e}async create(e){var t,n;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=$V(this.apiClient,e);a=Ae("auth_tokens",c._url),o=c._query,delete c.config,delete c._url,delete c._query;const u=iq(c,e.config);return s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(d=>d.json()),s.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function rq(i,e){const t={},n=x(i,["force"]);return e!==void 0&&n!=null&&b(e,["_query","force"],n),t}function aq(i){const e={},t=x(i,["name"]);t!=null&&b(e,["_url","name"],t);const n=x(i,["config"]);return n!=null&&rq(n,e),e}function oq(i){const e={},t=x(i,["name"]);return t!=null&&b(e,["_url","name"],t),e}function lq(i,e){const t={},n=x(i,["pageSize"]);e!==void 0&&n!=null&&b(e,["_query","pageSize"],n);const s=x(i,["pageToken"]);return e!==void 0&&s!=null&&b(e,["_query","pageToken"],s),t}function cq(i){const e={},t=x(i,["parent"]);t!=null&&b(e,["_url","parent"],t);const n=x(i,["config"]);return n!=null&&lq(n,e),e}function uq(i){const e={},t=x(i,["sdkHttpResponse"]);t!=null&&b(e,["sdkHttpResponse"],t);const n=x(i,["nextPageToken"]);n!=null&&b(e,["nextPageToken"],n);const s=x(i,["documents"]);if(s!=null){let a=s;Array.isArray(a)&&(a=a.map(o=>o)),b(e,["documents"],a)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dq extends yl{constructor(e){super(),this.apiClient=e,this.list=async t=>new Jd(cl.PAGED_ITEM_DOCUMENTS,n=>this.listInternal({parent:t.parent,config:n.config}),await this.listInternal(t),t)}async get(e){var t,n;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=oq(e);return a=Ae("{name}",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>u)}}async delete(e){var t,n;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=aq(e);s=Ae("{name}",o._url),a=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(e){var t,n;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=cq(e);return a=Ae("{parent}/documents",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>{const d=uq(u),p=new VH;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hq extends yl{constructor(e,t=new dq(e)){super(),this.apiClient=e,this.documents=t,this.list=async(n={})=>new Jd(cl.PAGED_ITEM_FILE_SEARCH_STORES,s=>this.listInternal(s),await this.listInternal(n),n)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var t,n;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=nV(e);return a=Ae("fileSearchStores",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>u)}}async get(e){var t,n;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=rV(e);return a=Ae("{name}",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>u)}}async delete(e){var t,n;let s="",a={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=sV(e);s=Ae("{name}",o._url),a=o._query,delete o._url,delete o._query,await this.apiClient.request({path:s,queryParams:a,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal})}}async listInternal(e){var t,n;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=dV(e);return a=Ae("fileSearchStores",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>{const d=hV(u),p=new qH;return Object.assign(p,d),p})}}async uploadToFileSearchStoreInternal(e){var t,n;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=fV(e);return a=Ae("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>{const d=pV(u),p=new $H;return Object.assign(p,d),p})}}async importFile(e){var t,n;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=lV(e);return a=Ae("{file_search_store_name}:importFile",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json()),s.then(u=>{const d=oV(u),p=new OC;return Object.assign(p,d),p})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function fq(i,e){const t={},n=x(i,["name"]);return n!=null&&b(t,["_url","name"],n),t}function pq(i,e){const t={},n=x(i,["name"]);return n!=null&&b(t,["_url","name"],n),t}function mq(i,e){const t={},n=x(i,["sdkHttpResponse"]);return n!=null&&b(t,["sdkHttpResponse"],n),t}function gq(i,e){const t={},n=x(i,["sdkHttpResponse"]);return n!=null&&b(t,["sdkHttpResponse"],n),t}function yq(i,e,t){const n={};if(x(i,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const s=x(i,["tunedModelDisplayName"]);if(e!==void 0&&s!=null&&b(e,["displayName"],s),x(i,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const a=x(i,["epochCount"]);e!==void 0&&a!=null&&b(e,["tuningTask","hyperparameters","epochCount"],a);const o=x(i,["learningRateMultiplier"]);if(o!=null&&b(n,["tuningTask","hyperparameters","learningRateMultiplier"],o),x(i,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(x(i,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(x(i,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const c=x(i,["batchSize"]);e!==void 0&&c!=null&&b(e,["tuningTask","hyperparameters","batchSize"],c);const u=x(i,["learningRate"]);if(e!==void 0&&u!=null&&b(e,["tuningTask","hyperparameters","learningRate"],u),x(i,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(x(i,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");return n}function vq(i,e,t){const n={};let s=x(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const w=x(i,["validationDataset"]);e!==void 0&&w!=null&&b(e,["supervisedTuningSpec"],Rk(w))}else if(s==="PREFERENCE_TUNING"){const w=x(i,["validationDataset"]);e!==void 0&&w!=null&&b(e,["preferenceOptimizationSpec"],Rk(w))}const a=x(i,["tunedModelDisplayName"]);e!==void 0&&a!=null&&b(e,["tunedModelDisplayName"],a);const o=x(i,["description"]);e!==void 0&&o!=null&&b(e,["description"],o);let c=x(t,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const w=x(i,["epochCount"]);e!==void 0&&w!=null&&b(e,["supervisedTuningSpec","hyperParameters","epochCount"],w)}else if(c==="PREFERENCE_TUNING"){const w=x(i,["epochCount"]);e!==void 0&&w!=null&&b(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],w)}let u=x(t,["config","method"]);if(u===void 0&&(u="SUPERVISED_FINE_TUNING"),u==="SUPERVISED_FINE_TUNING"){const w=x(i,["learningRateMultiplier"]);e!==void 0&&w!=null&&b(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],w)}else if(u==="PREFERENCE_TUNING"){const w=x(i,["learningRateMultiplier"]);e!==void 0&&w!=null&&b(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],w)}let d=x(t,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const w=x(i,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&b(e,["supervisedTuningSpec","exportLastCheckpointOnly"],w)}else if(d==="PREFERENCE_TUNING"){const w=x(i,["exportLastCheckpointOnly"]);e!==void 0&&w!=null&&b(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],w)}let p=x(t,["config","method"]);if(p===void 0&&(p="SUPERVISED_FINE_TUNING"),p==="SUPERVISED_FINE_TUNING"){const w=x(i,["adapterSize"]);e!==void 0&&w!=null&&b(e,["supervisedTuningSpec","hyperParameters","adapterSize"],w)}else if(p==="PREFERENCE_TUNING"){const w=x(i,["adapterSize"]);e!==void 0&&w!=null&&b(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],w)}if(x(i,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(x(i,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const y=x(i,["labels"]);e!==void 0&&y!=null&&b(e,["labels"],y);const v=x(i,["beta"]);return e!==void 0&&v!=null&&b(e,["preferenceOptimizationSpec","hyperParameters","beta"],v),n}function xq(i,e){const t={},n=x(i,["baseModel"]);n!=null&&b(t,["baseModel"],n);const s=x(i,["preTunedModel"]);s!=null&&b(t,["preTunedModel"],s);const a=x(i,["trainingDataset"]);a!=null&&Mq(a);const o=x(i,["config"]);return o!=null&&yq(o,t),t}function bq(i,e){const t={},n=x(i,["baseModel"]);n!=null&&b(t,["baseModel"],n);const s=x(i,["preTunedModel"]);s!=null&&b(t,["preTunedModel"],s);const a=x(i,["trainingDataset"]);a!=null&&kq(a,t,e);const o=x(i,["config"]);return o!=null&&vq(o,t,e),t}function wq(i,e){const t={},n=x(i,["name"]);return n!=null&&b(t,["_url","name"],n),t}function Sq(i,e){const t={},n=x(i,["name"]);return n!=null&&b(t,["_url","name"],n),t}function Eq(i,e,t){const n={},s=x(i,["pageSize"]);e!==void 0&&s!=null&&b(e,["_query","pageSize"],s);const a=x(i,["pageToken"]);e!==void 0&&a!=null&&b(e,["_query","pageToken"],a);const o=x(i,["filter"]);return e!==void 0&&o!=null&&b(e,["_query","filter"],o),n}function Aq(i,e,t){const n={},s=x(i,["pageSize"]);e!==void 0&&s!=null&&b(e,["_query","pageSize"],s);const a=x(i,["pageToken"]);e!==void 0&&a!=null&&b(e,["_query","pageToken"],a);const o=x(i,["filter"]);return e!==void 0&&o!=null&&b(e,["_query","filter"],o),n}function Cq(i,e){const t={},n=x(i,["config"]);return n!=null&&Eq(n,t),t}function Tq(i,e){const t={},n=x(i,["config"]);return n!=null&&Aq(n,t),t}function _q(i,e){const t={},n=x(i,["sdkHttpResponse"]);n!=null&&b(t,["sdkHttpResponse"],n);const s=x(i,["nextPageToken"]);s!=null&&b(t,["nextPageToken"],s);const a=x(i,["tunedModels"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>vL(c))),b(t,["tuningJobs"],o)}return t}function Nq(i,e){const t={},n=x(i,["sdkHttpResponse"]);n!=null&&b(t,["sdkHttpResponse"],n);const s=x(i,["nextPageToken"]);s!=null&&b(t,["nextPageToken"],s);const a=x(i,["tuningJobs"]);if(a!=null){let o=a;Array.isArray(o)&&(o=o.map(c=>MA(c))),b(t,["tuningJobs"],o)}return t}function Rq(i,e){const t={},n=x(i,["name"]);n!=null&&b(t,["model"],n);const s=x(i,["name"]);return s!=null&&b(t,["endpoint"],s),t}function Mq(i,e){const t={};if(x(i,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(i,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=x(i,["examples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(a=>a)),b(t,["examples","examples"],s)}return t}function kq(i,e,t){const n={};let s=x(t,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=x(i,["gcsUri"]);e!==void 0&&o!=null&&b(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=x(i,["gcsUri"]);e!==void 0&&o!=null&&b(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}let a=x(t,["config","method"]);if(a===void 0&&(a="SUPERVISED_FINE_TUNING"),a==="SUPERVISED_FINE_TUNING"){const o=x(i,["vertexDatasetResource"]);e!==void 0&&o!=null&&b(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(a==="PREFERENCE_TUNING"){const o=x(i,["vertexDatasetResource"]);e!==void 0&&o!=null&&b(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}if(x(i,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function vL(i,e){const t={},n=x(i,["sdkHttpResponse"]);n!=null&&b(t,["sdkHttpResponse"],n);const s=x(i,["name"]);s!=null&&b(t,["name"],s);const a=x(i,["state"]);a!=null&&b(t,["state"],QP(a));const o=x(i,["createTime"]);o!=null&&b(t,["createTime"],o);const c=x(i,["tuningTask","startTime"]);c!=null&&b(t,["startTime"],c);const u=x(i,["tuningTask","completeTime"]);u!=null&&b(t,["endTime"],u);const d=x(i,["updateTime"]);d!=null&&b(t,["updateTime"],d);const p=x(i,["description"]);p!=null&&b(t,["description"],p);const y=x(i,["baseModel"]);y!=null&&b(t,["baseModel"],y);const v=x(i,["_self"]);return v!=null&&b(t,["tunedModel"],Rq(v)),t}function MA(i,e){const t={},n=x(i,["sdkHttpResponse"]);n!=null&&b(t,["sdkHttpResponse"],n);const s=x(i,["name"]);s!=null&&b(t,["name"],s);const a=x(i,["state"]);a!=null&&b(t,["state"],QP(a));const o=x(i,["createTime"]);o!=null&&b(t,["createTime"],o);const c=x(i,["startTime"]);c!=null&&b(t,["startTime"],c);const u=x(i,["endTime"]);u!=null&&b(t,["endTime"],u);const d=x(i,["updateTime"]);d!=null&&b(t,["updateTime"],d);const p=x(i,["error"]);p!=null&&b(t,["error"],p);const y=x(i,["description"]);y!=null&&b(t,["description"],y);const v=x(i,["baseModel"]);v!=null&&b(t,["baseModel"],v);const w=x(i,["tunedModel"]);w!=null&&b(t,["tunedModel"],w);const A=x(i,["preTunedModel"]);A!=null&&b(t,["preTunedModel"],A);const C=x(i,["supervisedTuningSpec"]);C!=null&&b(t,["supervisedTuningSpec"],C);const T=x(i,["preferenceOptimizationSpec"]);T!=null&&b(t,["preferenceOptimizationSpec"],T);const _=x(i,["tuningDataStats"]);_!=null&&b(t,["tuningDataStats"],_);const D=x(i,["encryptionSpec"]);D!=null&&b(t,["encryptionSpec"],D);const R=x(i,["partnerModelTuningSpec"]);R!=null&&b(t,["partnerModelTuningSpec"],R);const L=x(i,["customBaseModel"]);L!=null&&b(t,["customBaseModel"],L);const F=x(i,["experiment"]);F!=null&&b(t,["experiment"],F);const U=x(i,["labels"]);U!=null&&b(t,["labels"],U);const M=x(i,["outputUri"]);M!=null&&b(t,["outputUri"],M);const O=x(i,["pipelineJob"]);O!=null&&b(t,["pipelineJob"],O);const z=x(i,["serviceAccount"]);z!=null&&b(t,["serviceAccount"],z);const J=x(i,["tunedModelDisplayName"]);J!=null&&b(t,["tunedModelDisplayName"],J);const G=x(i,["veoTuningSpec"]);return G!=null&&b(t,["veoTuningSpec"],G),t}function Dq(i,e){const t={},n=x(i,["sdkHttpResponse"]);n!=null&&b(t,["sdkHttpResponse"],n);const s=x(i,["name"]);s!=null&&b(t,["name"],s);const a=x(i,["metadata"]);a!=null&&b(t,["metadata"],a);const o=x(i,["done"]);o!=null&&b(t,["done"],o);const c=x(i,["error"]);return c!=null&&b(t,["error"],c),t}function Rk(i,e){const t={},n=x(i,["gcsUri"]);n!=null&&b(t,["validationDatasetUri"],n);const s=x(i,["vertexDatasetResource"]);return s!=null&&b(t,["validationDatasetUri"],s),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Iq extends yl{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new Jd(cl.PAGED_ITEM_TUNING_JOBS,n=>this.listInternal(n),await this.listInternal(t),t),this.get=async t=>await this.getInternal(t),this.tune=async t=>{var n;if(this.apiClient.isVertexAI())if(t.baseModel.startsWith("projects/")){const s={tunedModelName:t.baseModel};!((n=t.config)===null||n===void 0)&&n.preTunedModelCheckpointId&&(s.checkpointId=t.config.preTunedModelCheckpointId);const a=Object.assign(Object.assign({},t),{preTunedModel:s});return a.baseModel=void 0,await this.tuneInternal(a)}else{const s=Object.assign({},t);return await this.tuneInternal(s)}else{const s=Object.assign({},t),a=await this.tuneMldevInternal(s);let o="";return a.metadata!==void 0&&a.metadata.tunedModel!==void 0?o=a.metadata.tunedModel:a.name!==void 0&&a.name.includes("/operations/")&&(o=a.name.split("/operations/")[0]),{name:o,state:EA.JOB_STATE_QUEUED}}}}async getInternal(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=Sq(e);return c=Ae("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>MA(p))}else{const d=wq(e);return c=Ae("{name}",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>vL(p))}}async listInternal(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=Tq(e);return c=Ae("tuningJobs",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const y=Nq(p),v=new ok;return Object.assign(v,y),v})}else{const d=Cq(e);return c=Ae("tunedModels",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const y=_q(p),v=new ok;return Object.assign(v,y),v})}}async cancel(e){var t,n,s,a;let o,c="",u={};if(this.apiClient.isVertexAI()){const d=pq(e);return c=Ae("{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const y=gq(p),v=new lk;return Object.assign(v,y),v})}else{const d=fq(e);return c=Ae("{name}:cancel",d._url),u=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:u,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(s=e.config)===null||s===void 0?void 0:s.httpOptions,abortSignal:(a=e.config)===null||a===void 0?void 0:a.abortSignal}).then(p=>p.json().then(y=>{const v=y;return v.sdkHttpResponse={headers:p.headers},v})),o.then(p=>{const y=mq(p),v=new lk;return Object.assign(v,y),v})}}async tuneInternal(e){var t,n;let s,a="",o={};if(this.apiClient.isVertexAI()){const c=bq(e,e);return a=Ae("tuningJobs",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:u.headers},p})),s.then(u=>MA(u))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var t,n;let s,a="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=xq(e);return a=Ae("tunedModels",c._url),o=c._query,delete c._url,delete c._query,s=this.apiClient.request({path:a,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions,abortSignal:(n=e.config)===null||n===void 0?void 0:n.abortSignal}).then(u=>u.json().then(d=>{const p=d;return p.sdkHttpResponse={headers:u.headers},p})),s.then(u=>Dq(u))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pq{async download(e,t){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Lq=1024*1024*8,Fq=3,Uq=1e3,jq=2,ob="x-goog-upload-status";async function Bq(i,e,t){var n;const s=await xL(i,e,t),a=await(s==null?void 0:s.json());if(((n=s==null?void 0:s.headers)===null||n===void 0?void 0:n[ob])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return a.file}async function Oq(i,e,t){var n;const s=await xL(i,e,t),a=await(s==null?void 0:s.json());if(((n=s==null?void 0:s.headers)===null||n===void 0?void 0:n[ob])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=$P(a),c=new HC;return Object.assign(c,o),c}async function xL(i,e,t){var n,s;let a=0,o=0,c=new AA(new Response),u="upload";for(a=i.size;o<a;){const d=Math.min(Lq,a-o),p=i.slice(o,o+d);o+d>=a&&(u+=", finalize");let y=0,v=Uq;for(;y<Fq&&(c=await t.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":u,"X-Goog-Upload-Offset":String(o),"Content-Length":String(d)}}}),!(!((n=c==null?void 0:c.headers)===null||n===void 0)&&n[ob]));)y++,await zq(v),v=v*jq;if(o+=d,((s=c==null?void 0:c.headers)===null||s===void 0?void 0:s[ob])!=="active")break;if(a<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function Hq(i){return{size:i.size,type:i.type}}function zq(i){return new Promise(e=>setTimeout(e,i))}class Gq{async upload(e,t,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Bq(e,t,n)}async uploadToFileSearchStore(e,t,n){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Oq(e,t,n)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Hq(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Vq{create(e,t,n){return new qq(e,t,n)}}class qq{constructor(e,t,n){this.url=e,this.headers=t,this.callbacks=n}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Mk="x-goog-api-key";class $q{constructor(e){this.apiKey=e}async addAuthHeaders(e,t){if(e.get(Mk)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Mk,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Yq="gl-node/";class Wq{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey;const n=EH(e.httpOptions,e.vertexai,void 0,void 0);n&&(e.httpOptions?e.httpOptions.baseUrl=n:e.httpOptions={baseUrl:n}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const s=new $q(this.apiKey);this.apiClient=new SV({auth:s,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:Yq+"web",uploader:new Gq,downloader:new Pq}),this.models=new HV(this.apiClient),this.live=new LV(this.apiClient,s,new Vq),this.batches=new Q6(this.apiClient),this.chats=new Iz(this.models,this.apiClient),this.caches=new Mz(this.apiClient),this.files=new Gz(this.apiClient),this.operations=new zV(this.apiClient),this.authTokens=new sq(this.apiClient),this.tunings=new Iq(this.apiClient),this.fileSearchStores=new hq(this.apiClient)}}const Fr="co-writter",Xq="Co-Author",ow="gemini-2.5-flash",Jq="gemini-2.5-flash-image",bL="rzp_live_RR5721D6h6BMt4",ki=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M3 19a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),m.jsx("path",{d:"M3 6a9 9 0 0 1 9 0a9 9 0 0 1 9 0"}),m.jsx("path",{d:"M3 6l0 13"}),m.jsx("path",{d:"M12 6l0 13"}),m.jsx("path",{d:"M21 6l0 13"})]}),$a=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M4 13a8 8 0 0 1 7 7a6 6 0 0 0 3 -5a9 9 0 0 0 6 -8a3 3 0 0 0 -3 -3a9 9 0 0 0 -8 6a6 6 0 0 0 -5 3"}),m.jsx("path",{d:"M7 14a6 6 0 0 0 -3 6a6 6 0 0 0 6 -3"}),m.jsx("path",{d:"M15 9m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]}),vx=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("circle",{cx:"12",cy:"7",r:"4"}),m.jsx("path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2"})]}),YC=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M6 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),m.jsx("path",{d:"M17 19m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0"}),m.jsx("path",{d:"M17 17h-11v-14h-2"}),m.jsx("path",{d:"M6 5l14 1l-1 7h-13"})]}),kk=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),m.jsx("line",{x1:"3",y1:"9",x2:"21",y2:"9"}),m.jsx("line",{x1:"9",y1:"21",x2:"9",y2:"9"})]}),kA=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M3 6l2 -2h14l2 2"}),m.jsx("path",{d:"M5 6v13a1 1 0 0 0 1 1h12a1 1 0 0 0 1 -1v-13"}),m.jsx("path",{d:"M9 6v-2"}),m.jsx("path",{d:"M15 6v-2"}),m.jsx("path",{d:"M9 13h6"})]}),Kq=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M5 12l-2 0l9 -9l9 9l-2 0"}),m.jsx("path",{d:"M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7"}),m.jsx("path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6"})]}),$c=i=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:m.jsx("path",{d:"M12 3l1.912 5.813a2 2 0 0 0 1.275 1.275L21 12l-5.813 1.912a2 2 0 0 0 -1.275 1.275L12 21l-1.912-5.813a2 2 0 0 0 -1.275-1.275L3 12l5.813-1.912a2 2 0 0 0 1.275-1.275L12 3Z"})}),Dk=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"}),m.jsx("polyline",{points:"7 9 12 4 17 9"}),m.jsx("line",{x1:"12",y1:"4",x2:"12",y2:"16"})]}),lf=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z"}),m.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Qq=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"}),m.jsx("path",{d:"M9 12h12l-3 -3"}),m.jsx("path",{d:"M18 15l3 -3"})]}),wL=i=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:m.jsx("polyline",{points:"6 9 12 15 18 9"})}),DA=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M5 12l14 0"}),m.jsx("path",{d:"M5 12l6 6"}),m.jsx("path",{d:"M5 12l6 -6"})]}),Zq=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M5 12l14 0"}),m.jsx("path",{d:"M13 18l6 -6"}),m.jsx("path",{d:"M13 6l6 6"})]}),e$=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),m.jsx("polyline",{points:"17 6 23 6 23 12"})]}),Yc=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M18 6 6 18"}),m.jsx("path",{d:"m6 6 12 12"})]}),t$=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),m.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"})]}),SL=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("line",{x1:"4",y1:"8",x2:"20",y2:"8"}),m.jsx("line",{x1:"4",y1:"16",x2:"20",y2:"16"})]}),n$=i=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",...i,children:m.jsx("path",{d:"M11.275 4.01L7.26 15.225H2.015L6.03 4.01h5.245zm1.53 0L8.79 12.65h10.41L15.175 4.01h-2.37zm-.263 10.372l3.412-9.15h4.15l-3.412 9.15h-4.15zM24 19.99h-4.015l2.008-5.265H24v5.265zm-6.265 0H2.015L0 22h17.735l2.007-5.265H17.735v3.255z"})}),i$=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("line",{x1:"22",y1:"2",x2:"11",y2:"13"}),m.jsx("polygon",{points:"22 2 15 22 11 13 2 9 22 2"})]}),Ik=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),m.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),WC=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M19 7V6a2 2 0 00-2-2H7a2 2 0 00-2 2v1"}),m.jsx("path",{d:"M3 10h18v9a2 2 0 01-2 2H5a2 2 0 01-2-2v-9z"}),m.jsx("line",{x1:"12",y1:"14",x2:"12.01",y2:"14"})]}),IA=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),m.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"})]}),PA=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("circle",{cx:"10",cy:"10",r:"7"}),m.jsx("line",{x1:"21",y1:"21",x2:"15",y2:"15"})]}),XC=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("circle",{cx:"12",cy:"12",r:"9"}),m.jsx("line",{x1:"2",y1:"12",x2:"22",y2:"12"}),m.jsx("path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"})]}),s$=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),m.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),m.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),m.jsx("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]}),r$=i=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:m.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"2"})}),lw=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z"}),m.jsx("path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z"}),m.jsx("path",{d:"M15 13a4.5 4.5 0 0 1-3-1.4 4.5 4.5 0 0 1-3 1.4"}),m.jsx("path",{d:"M12 13v5"}),m.jsx("path",{d:"M9 9h6"})]}),a$=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M3 3v18h18"}),m.jsx("path",{d:"m19 9-5 5-4-4-3 3"})]}),o$=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2"}),m.jsx("circle",{cx:"9",cy:"9",r:"2"}),m.jsx("path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"})]}),lb=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M12 5l0 14"}),m.jsx("path",{d:"M5 12l14 0"})]}),EL=i=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:m.jsx("path",{d:"M5 12l14 0"})}),pi=i=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:m.jsx("path",{d:"M5 12l5 5l10 -10"})}),JC=i=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",...i,children:m.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),Pk=i=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:m.jsx("path",{d:"M19.5 12.572l-7.5 7.428l-7.5 -7.428a5 5 0 1 1 7.5 -6.566a5 5 0 1 1 7.5 6.572"})}),eg=i=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:m.jsx("path",{d:"M22 12h-4l-3 9L9 3l-3 9H2"})}),l$=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("circle",{cx:"12",cy:"12",r:"9"}),m.jsx("polyline",{points:"12 6 12 12 16 14"})]}),AL=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M4 20l4-1.5 14-14a2 2 0 0 0-2.83-2.83l-14 14L4 20"}),m.jsx("line",{x1:"13.5",y1:"6.5",x2:"17.5",y2:"10.5"})]}),c$=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),m.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Lk=i=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:m.jsx("polyline",{points:"15 18 9 12 15 6"})}),Fk=i=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:m.jsx("polyline",{points:"9 18 15 12 9 6"})}),u$=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("circle",{cx:"12",cy:"12",r:"4"}),m.jsx("path",{d:"M3 12h1m8 -9v1m8 8h1m-9 8v1m-6.4 -15.4l.7 .7m12.1 -.7l-.7 .7m0 11.4l.7 .7m-12.1 -.7l-.7 .7"})]}),d$=i=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:m.jsx("path",{d:"M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z"})}),LA=i=>m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",stroke:"none",...i,children:m.jsx("path",{d:"M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"})}),YE=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M7 18a4.6 4.6 0 0 1 0 -9a5 5 0 0 1 11 2h1a3.5 3.5 0 0 1 0 7h-1"}),m.jsx("polyline",{points:"9 15 12 12 15 15"}),m.jsx("line",{x1:"12",y1:"12",x2:"12",y2:"21"})]}),Uk=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("rect",{x:"4",y:"4",width:"16",height:"16",rx:"4"}),m.jsx("circle",{cx:"12",cy:"12",r:"3"}),m.jsx("line",{x1:"16.5",y1:"7.5",x2:"16.5",y2:"7.501"})]}),h$=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("line",{x1:"9",y1:"6",x2:"20",y2:"6"}),m.jsx("line",{x1:"9",y1:"12",x2:"20",y2:"12"}),m.jsx("line",{x1:"9",y1:"18",x2:"20",y2:"18"}),m.jsx("line",{x1:"5",y1:"6",x2:"5",y2:"6.01"}),m.jsx("line",{x1:"5",y1:"12",x2:"5",y2:"12.01"}),m.jsx("line",{x1:"5",y1:"18",x2:"5",y2:"18.01"})]}),f$=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M10 11h-4a1 1 0 0 1 -1 -1v-3a1 1 0 0 1 1 -1h3a1 1 0 0 1 1 1v6c0 2.667 -1.333 4.333 -4 5"}),m.jsx("path",{d:"M19 11h-4a1 1 0 0 1 -1 -1v-3a1 1 0 0 1 1 -1h3a1 1 0 0 1 1 1v6c0 2.667 -1.333 4.333 -4 5"})]}),p$=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M19 18v-8l-2 2"}),m.jsx("path",{d:"M4 6v12"}),m.jsx("path",{d:"M12 6v12"}),m.jsx("path",{d:"M11 18h2"}),m.jsx("path",{d:"M3 18h2"}),m.jsx("path",{d:"M4 12h8"}),m.jsx("path",{d:"M3 6h2"}),m.jsx("path",{d:"M11 6h2"})]}),m$=i=>m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...i,children:[m.jsx("path",{d:"M17 12a2 2 0 1 1 4 0c0 .591 -.601 1.46 -1 2l-3 3h4"}),m.jsx("path",{d:"M4 6v12"}),m.jsx("path",{d:"M12 6v12"}),m.jsx("path",{d:"M11 18h2"}),m.jsx("path",{d:"M3 18h2"}),m.jsx("path",{d:"M4 12h8"}),m.jsx("path",{d:"M3 6h2"}),m.jsx("path",{d:"M11 6h2"})]}),_0=new Wq({apiKey:"AIzaSyDigiZpeb7pvEN6gA_0p6Va0OK5yk88QjE"}),g$=i=>{let e=i.trim();const t=e.match(/```(?:json)?\s*([\s\S]*?)\s*```/);t&&(e=t[1]);const n=e.search(/[{[]/);let s=-1;for(let a=e.length-1;a>=0;a--)if(e[a]==="}"||e[a]==="]"){s=a;break}return n!==-1&&s!==-1&&s>n&&(e=e.substring(n,s+1)),e},y$={name:"write_content",description:"Writes content directly into the book editor. Use this to WRITE new prose, FIX existing text, or APPEND text. The content argument will completely replace the current editor content, so be sure to include the full text if you are just making a small edit. DO NOT use this to insert images directly as base64.",parameters:{type:ti.OBJECT,properties:{content:{type:ti.STRING,description:"The FULL markdown content to put into the editor."},summary:{type:ti.STRING,description:"A very brief 1-word status (e.g. 'Writing', 'Fixing', 'Analyzing')."}},required:["content"]}},v$={name:"propose_blueprint",description:"Propose a book title and chapter outline to the user for approval. Use this when the user asks to start a new book, create a plan, or brainstorm a structure.",parameters:{type:ti.OBJECT,properties:{title:{type:ti.STRING,description:"The proposed title of the book."},outline:{type:ti.ARRAY,items:{type:ti.OBJECT,properties:{title:{type:ti.STRING,description:"Chapter title"},summary:{type:ti.STRING,description:"Brief summary of chapter"}}},description:"List of chapters with summaries."}},required:["title","outline"]}},x$={name:"generate_image",description:"Generates a high-quality visual asset. REQUIRED for any image request. The AI must create a detailed visual description prompt based on the surrounding text context if the user does not provide one.",parameters:{type:ti.OBJECT,properties:{prompt:{type:ti.STRING,description:"The detailed visual description of the image or diagram to generate."}},required:["prompt"]}},b$=async i=>{try{const e=i.replace(/^data:application\/pdf;base64,/,""),n=await _0.models.generateContent({model:ow,contents:{parts:[{inlineData:{mimeType:"application/pdf",data:e}},{text:"Analyze this PDF. Extract Title, Author, Genre, and a Description (100 words). Return JSON."}]},config:{responseMimeType:"application/json"}});return JSON.parse(g$(n.text||"{}"))}catch(e){return console.error("PDF Analysis failed",e),null}},CL=i=>{try{return _0.chats.create({model:ow,config:{systemInstruction:`IDENTITY: You are Co-Author, the advanced neural engine for co-writter by OpenDev Labs.
                
MISSION: Write immersive, deeply intelligent, and market-ready books.
Blend spirituality, science, and narrative clarity into a seamless flow.

CORE BEHAVIORS:
1. **Context-Aware**: You always know the previous chapter content and the full book outline. Never contradict established facts.
2. **Chapter Continuity**: If the user says "Continue", write the next logical section or the next chapter in the sequence.
3. **High-Quality Prose**: Avoid generic AI cliches. Use varying sentence structures, sensory details, and deep philosophical or technical insight depending on the genre.
4. **Structural Integrity**: Ensure chapter titles and numbers in your internal logic match the user's provided context exactly.
5. **Auto-Correction**: If a chapter is missing or numbered incorrectly, fix it automatically without asking. Never produce empty pages or misaligned titles.

IMAGE GENERATION RULES (CRITICAL):
- **NEVER** output raw base64 image strings (e.g. "![img](data:image...)") directly in your text response or write_content tool. This crashes the editor.
- **ALWAYS** use the \`generate_image\` tool when the user asks for an image.
- **Contextual Intelligence**: If the user says "add an image" or "visualize this", you must ANALYZE the current paragraph or scene and write a HIGHLY DETAILED prompt for the tool yourself. Do not ask the user "what kind of image?". Just generate it based on the story.

TOOLS:
- **write_content**: REQUIRED for any long-form writing. Do not dump text in chat.
- **propose_blueprint**: For creating or restructuring the book.
- **generate_image**: The ONLY way to create images.

RESPONSE STYLE:
- Chat: Ultra-concise, robotic but polite (1-2 sentences). e.g., "Executing drafting sequence for Chapter 3."
- Writing: Lush, expansive, professional.

CONTEXT:
${i}`,tools:[{functionDeclarations:[y$,v$,x$]}]}})}catch(e){return console.error("Failed to create studio session",e),null}},w$=async i=>{var e;try{const t=`Suggest a competitive market price in INR (Indian Rupees) for an eBook: "${i.title}" (${i.genre}). 
    CRITICAL: The price MUST be a "sacred" or numerologically significant number (e.g., 111, 222, 333, 444, 555, 777, 888, 999, 1111).
    Return ONLY the number.`;return((e=(await _0.models.generateContent({model:ow,contents:t})).text)==null?void 0:e.replace(/[^0-9.]/g,"").trim())||"444"}catch{return"444"}},TL=async(i,e="Cinematic",t="",n="")=>{var s,a,o,c,u;try{const d=`Professional Book Visual. Context: ${t} by ${n}. Request: ${i}. Mode: ${e}. Create a high-quality, clear, and relevant image/diagram. For diagrams, ensure clear labels and structure.`,y=(c=(o=(a=(s=(await _0.models.generateContent({model:Jq,contents:{parts:[{text:d}]},config:{imageConfig:{aspectRatio:"3:4"}}})).candidates)==null?void 0:s[0])==null?void 0:a.content)==null?void 0:o.parts)==null?void 0:c.find(v=>v.inlineData);return(u=y==null?void 0:y.inlineData)!=null&&u.data?{imageBytes:y.inlineData.data,prompt:i}:{error:"Generation failed."}}catch{return{error:"Service unavailable."}}},S$=async()=>CL("Global Chat Context"),E$=async(i,e)=>{try{return(await _0.models.generateContent({model:ow,contents:{parts:[{inlineData:{mimeType:e,data:i}},{text:"Transcribe the spoken audio into text. Return only the transcription, no intro/outro."}]}})).text||null}catch(t){return console.error("Transcription failed",t),null}},A$={currentUser:null,userType:It.GUEST,setCurrentUser:()=>{},cart:[],addToCart:()=>{},removeFromCart:()=>{},clearCart:()=>{},theme:"dark",geminiChat:null,initializeChat:async()=>{},isChatbotOpen:!1,toggleChatbot:()=>{},updateSellerCreatorSite:()=>{},allBooks:[],addCreatedBook:()=>{},updateEBook:()=>{},handleGoogleLogin:()=>{},handleEmailLogin:async()=>({success:!1}),upgradeToSeller:()=>{},verifyUser:()=>{}},_L=k.createContext(A$),qm="ebook_engine_production_live_v1",C$=({children:i})=>{const[e,t]=k.useState(()=>{if(typeof window<"u"&&window.location.hostname.includes("github.io"))return null;try{const G=localStorage.getItem(qm);return G?JSON.parse(G).currentUser:null}catch{return null}}),[n,s]=k.useState(()=>{if(typeof window<"u"&&window.location.hostname.includes("github.io"))return It.GUEST;try{const G=localStorage.getItem(qm);return G?JSON.parse(G).userType:It.GUEST}catch{return It.GUEST}}),[a,o]=k.useState(()=>{try{const G=localStorage.getItem(qm);return G?JSON.parse(G).cart:[]}catch{return[]}}),[c,u]=k.useState(()=>{try{const G=localStorage.getItem(qm);if(!G)return qd;const X=JSON.parse(G);return X.allBooks&&X.allBooks.length>0?X.allBooks:qd}catch{return qd}}),d="dark",[p,y]=k.useState(null),[v,w]=k.useState(!1);k.useEffect(()=>{if(window.location.hostname.includes("github.io"))return;const G={currentUser:e,userType:n,cart:a,allBooks:c};localStorage.setItem(qm,JSON.stringify(G))},[e,n,a,c]);const A=(G,X)=>{t(G),s(X),G||o([])},C=G=>{o(X=>X.find($=>$.id===G.id)?X.map($=>$.id===G.id?{...$,quantity:$.quantity+1}:$):[...X,{...G,quantity:1}])},T=G=>{o(X=>X.filter(ie=>ie.id!==G))},_=()=>{o([])},D=k.useCallback(async()=>{if(!p){console.log("Initializing Gemini Chat from AppContext...");const G=await S$();y(G)}},[p]),R=()=>{w(G=>{const X=!G;return X&&!p&&D(),X})},L=G=>{t(X=>{if(X&&(X.id.startsWith("seller")||X.id.startsWith("google")||n===It.SELLER)){const ie={...X,creatorSite:G};return va[ie.id]&&(va[ie.id].creatorSite=G),ie}return X})},F=G=>{u(X=>X.some(ie=>ie.id===G.id)?X:[G,...X]),e&&n===It.SELLER&&t(X=>{const ie=X,$=ie.uploadedBooks||[];return{...ie,uploadedBooks:[G,...$]}})},U=G=>{u(X=>X.map(ie=>ie.id===G.id?G:ie)),e&&e.id===G.sellerId&&n===It.SELLER&&t(X=>{const ie=X;return{...ie,uploadedBooks:ie.uploadedBooks.map($=>$.id===G.id?G:$)}})},M=G=>{try{const X=G.credential;if(!X)return;const $=X.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),ee=decodeURIComponent(window.atob($).split("").map(function(ce){return"%"+("00"+ce.charCodeAt(0).toString(16)).slice(-2)}).join("")),H=JSON.parse(ee),V={id:`google_${H.sub}`,name:H.name,email:H.email,purchaseHistory:[],wishlist:[],isVerified:!1,profileImageUrl:H.picture},Q=va[V.id];if(Q&&"uploadedBooks"in Q){A(Q,It.SELLER);return}A(V,It.USER),va[V.id]=V,console.log("Logged in with Google:",V.name)}catch(X){console.error("Google Login Failed",X)}},O=async(G,X)=>{const ie=G.trim(),$=X.trim();let ee="opendev-labs",H="co-pass-access";try{const Q=import.meta;Q.env&&(ee=Q.env.VITE_ADMIN_USER||ee,H=Q.env.VITE_ADMIN_PASS||H)}catch{console.warn("Could not access env vars, using defaults.")}if(ie===ee&&$===H){const Q=va.seller_opendev;return Q?(A(Q,It.SELLER),{success:!0}):{success:!1,message:"Admin profile configuration missing."}}const V=Object.values(va).find(Q=>Q.email===ie);return V?"uploadedBooks"in V?(A(V,It.SELLER),{success:!0}):{success:!1,message:"This email is not registered as a Writer account."}:{success:!1,message:"Invalid credentials."}},z=()=>{if(e&&n===It.USER){const G=e,X={id:G.id,name:G.name,email:G.email,payoutEmail:G.email,uploadedBooks:[],isVerified:G.isVerified||!1,username:G.username||`@${G.name.replace(/\s+/g,"").toLowerCase()}`,profileImageUrl:G.profileImageUrl,creatorSite:{isEnabled:!1,slug:G.name.toLowerCase().replace(/\s+/g,"-"),theme:"dark-minimal",profileImageUrl:G.profileImageUrl,displayName:G.name,tagline:"Digital Creator",showcasedBookIds:[]}};A(X,It.SELLER),va[G.id]=X,console.log("Upgraded to Seller:",X.name)}},J=()=>{if(e){const G={...e,isVerified:!0};t(G)}};return m.jsx(_L.Provider,{value:{currentUser:e,userType:n,setCurrentUser:A,cart:a,addToCart:C,removeFromCart:T,clearCart:_,theme:d,geminiChat:p,initializeChat:D,isChatbotOpen:v,toggleChatbot:R,updateSellerCreatorSite:L,allBooks:c,addCreatedBook:F,updateEBook:U,handleGoogleLogin:M,handleEmailLogin:O,upgradeToSeller:z,verifyUser:J},children:i})},Yi=()=>k.useContext(_L),Ya=({className:i="w-14 h-14",isActive:e=!0})=>{const t=k.useRef(null),[n,s]=k.useState({x:0,y:0}),[a,o]=k.useState(!1);return k.useEffect(()=>{if(!e){s({x:0,y:0});return}const c=(p,y)=>{if(!t.current)return;const v=t.current.getBoundingClientRect(),w=v.left+v.width/2,A=v.top+v.height/2,C=p-w,T=y-A,_=v.width*.15,D=Math.atan2(T,C),R=Math.sqrt(C*C+T*T),L=Math.min(R/5,_),F=Math.cos(D)*L,U=Math.sin(D)*L;s({x:F,y:U})},u=p=>{c(p.clientX,p.clientY)},d=p=>{p.touches.length>0&&c(p.touches[0].clientX,p.touches[0].clientY)};return window.addEventListener("mousemove",u),window.addEventListener("touchmove",d),window.addEventListener("touchstart",d),()=>{window.removeEventListener("mousemove",u),window.removeEventListener("touchmove",d),window.removeEventListener("touchstart",d)}},[e]),k.useEffect(()=>{let c;const u=()=>{o(!0),setTimeout(()=>{o(!1);const d=2e3+Math.random()*4e3;c=setTimeout(u,d)},150)};return c=setTimeout(u,1e3),()=>clearTimeout(c)},[]),m.jsx("div",{ref:t,className:`rounded-full aspect-square bg-[#1a1a1a] flex items-center justify-center relative shadow-2xl border border-white/5 overflow-hidden flex-shrink-0 group ${i}`,children:m.jsxs("div",{className:"w-full h-full flex items-center justify-center gap-[10%] transition-transform duration-100 ease-out will-change-transform",style:{transform:`translate(${n.x}px, ${n.y}px)`},children:[m.jsx("div",{className:"relative w-[24%] h-[32%]",children:m.jsx("div",{className:`w-full bg-white rounded-full shadow-[0_0_8px_rgba(255,255,255,0.6)] transition-all duration-150 ease-in-out absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 ${a?"h-[10%] scale-x-125 mt-[10%]":"h-full"}`})}),m.jsx("div",{className:"relative w-[24%] h-[32%]",children:m.jsx("div",{className:`w-full bg-white rounded-full shadow-[0_0_8px_rgba(255,255,255,0.6)] transition-all duration-150 ease-in-out absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 ${a?"h-[10%] scale-x-125 mt-[10%]":"h-full"}`})})]})})},{Link:$r,useNavigate:T$,useLocation:_$}=gi,N$=()=>{const{currentUser:i,userType:e,setCurrentUser:t,cart:n}=Yi(),s=T$(),a=_$(),[o,c]=k.useState(!1),[u,d]=k.useState(!1);if(k.useEffect(()=>{u?document.body.style.overflow="hidden":document.body.style.overflow="unset"},[u]),a.pathname==="/ebook-studio"||a.pathname==="/login"||a.pathname.startsWith("/site/"))return null;const p=()=>{t(null,It.GUEST),c(!1),d(!1),s("/")},y=n.reduce((A,C)=>A+C.quantity,0),v=[{label:"Store",path:"/store",icon:m.jsx(kA,{className:"w-5 h-5"})},{label:"Plans",path:"/pricing",icon:m.jsx(ki,{className:"w-5 h-5"})}],w=a.pathname==="/";return m.jsxs(m.Fragment,{children:[m.jsx("nav",{className:"fixed top-0 left-0 right-0 w-full z-50 h-16 border-b border-white/5 bg-[#000000]/60 backdrop-blur-xl shadow-[0_4px_30px_rgba(0,0,0,0.1)] transition-all duration-300 ease-obsidian animate-slide-down will-change-transform",children:m.jsxs("div",{className:"max-w-[1400px] mx-auto px-6 h-full flex items-center justify-between",children:[m.jsxs($r,{to:"/",className:"flex items-center gap-3 group z-50 relative",children:[m.jsx(Ya,{className:"w-9 h-9 border border-white/20 bg-[#111] shadow-[0_0_10px_rgba(255,255,255,0.1)] rounded-full transition-transform duration-300 ease-obsidian group-hover:scale-110 will-change-transform"}),m.jsx("span",{className:"font-bold tracking-tighter text-lg text-white group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-white group-hover:via-neutral-300 group-hover:to-white group-hover:animate-shine transition-all",children:"co-writter"})]}),m.jsx("div",{className:"hidden md:flex items-center gap-8 absolute left-1/2 -translate-x-1/2",children:v.map(A=>m.jsxs($r,{to:A.path,className:`text-sm font-medium transition-all duration-300 ease-obsidian flex items-center gap-2 hover:scale-105 ${a.pathname===A.path?"text-white drop-shadow-[0_0_8px_rgba(255,255,255,0.5)]":"text-neutral-400 hover:text-white"}`,children:[A.icon,A.label]},A.path))}),m.jsxs("div",{className:"flex items-center gap-4 z-50",children:[w&&m.jsx($r,{to:"/store",className:"relative w-10 h-10 flex md:hidden items-center justify-center text-neutral-400 hover:text-white transition-all hover:scale-110 active:scale-95 duration-200 ease-obsidian flex-shrink-0 overflow-visible group","aria-label":"Go to Store",children:m.jsx(kA,{className:"w-5 h-5 group-hover:drop-shadow-[0_0_5px_rgba(255,255,255,0.5)] transition-all"})}),m.jsxs($r,{to:"/checkout",className:`relative w-10 h-10 items-center justify-center text-neutral-400 hover:text-white transition-all hover:scale-110 active:scale-95 duration-200 ease-obsidian flex-shrink-0 overflow-visible group ${w?"hidden md:flex":"flex"}`,"aria-label":"View Cart",children:[m.jsx(YC,{className:"w-5 h-5 group-hover:drop-shadow-[0_0_5px_rgba(255,255,255,0.5)] transition-all"}),y>0&&m.jsx("span",{className:"absolute -top-1 -right-1 flex h-4 w-4 items-center justify-center rounded-full bg-white text-black text-[9px] font-bold border border-black animate-pulse-square shadow-sm z-10",children:y})]}),m.jsx("div",{className:"h-6 w-px bg-white/10 mx-2 hidden sm:block"}),m.jsx("div",{className:"relative hidden md:block",children:i&&e!==It.GUEST?m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs($r,{to:"/ebook-studio",className:"hidden lg:flex px-4 py-1.5 bg-white text-black hover:bg-neutral-200 text-xs font-bold uppercase tracking-widest rounded-full transition-all duration-300 ease-obsidian hover:scale-105 active:scale-95 items-center gap-2 shadow-[0_0_15px_rgba(255,255,255,0.3)]",children:[m.jsx($a,{className:"w-3 h-3"})," Write"]}),m.jsx("button",{onClick:()=>c(!o),className:"flex items-center gap-2",children:m.jsx("div",{className:"w-8 h-8 rounded-full bg-neutral-900 border border-white/20 flex items-center justify-center text-xs font-bold text-white hover:border-white transition-all duration-300 hover:shadow-[0_0_10px_rgba(255,255,255,0.2)]",children:i.profileImageUrl?m.jsx("img",{src:i.profileImageUrl,alt:"",className:"w-full h-full object-cover rounded-full"}):i.name.charAt(0)})}),o&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>c(!1)}),m.jsxs("div",{className:"absolute right-0 top-12 mt-2 w-56 bg-[#0a0a0a] border border-white/10 shadow-2xl py-1 z-20 origin-top-right rounded-lg animate-slide-up-stagger",children:[m.jsxs("div",{className:"px-4 py-3 border-b border-white/5 mb-1",children:[m.jsx("p",{className:"text-sm font-bold text-white truncate",children:i.name}),m.jsx("p",{className:"text-[10px] text-neutral-500 uppercase font-mono",children:e==="seller"?"Writer Account":"Reader Account"})]}),m.jsx($r,{to:"/dashboard",onClick:()=>c(!1),className:"block px-4 py-2 text-sm text-neutral-300 hover:bg-white/5 hover:text-white transition-colors",children:"My Profile"}),m.jsx($r,{to:"/ebook-studio",onClick:()=>c(!1),className:"block px-4 py-2 text-sm text-neutral-300 hover:bg-white/5 hover:text-white transition-colors lg:hidden",children:"Write Book"}),m.jsx("button",{onClick:p,className:"w-full text-left px-4 py-2 text-sm text-red-400 hover:bg-white/5 transition-colors",children:"Sign out"})]})]})]}):m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("a",{href:"https://co-writter-studio.web.app/login",className:"px-4 py-2 text-xs font-bold uppercase tracking-widest text-neutral-400 hover:text-white transition-colors hover:scale-105 duration-200",children:"Login"}),m.jsx("a",{href:"https://co-writter-studio.web.app/pricing",className:"px-5 py-2 text-xs font-bold uppercase tracking-widest text-black bg-white hover:bg-neutral-200 transition-all duration-300 ease-obsidian rounded-full hover:shadow-[0_0_15px_rgba(255,255,255,0.3)] hover:scale-105",children:"Start Free"})]})}),m.jsx("button",{className:"md:hidden p-2 text-neutral-400 hover:text-white relative z-50 transition-transform active:scale-90",onClick:()=>d(!u),children:u?m.jsx(Yc,{className:"w-6 h-6"}):m.jsx(SL,{className:"w-6 h-6"})})]})]})}),u&&m.jsx("div",{className:"fixed inset-0 z-40 bg-black/95 backdrop-blur-xl md:hidden flex flex-col pt-24 pb-8 px-6 animate-fade-in",children:m.jsxs("div",{className:"flex flex-col gap-6",children:[m.jsxs($r,{to:"/",onClick:()=>d(!1),className:"text-3xl font-bold text-white flex items-center gap-4 py-2 border-b border-white/10 animate-slide-up-stagger delay-100",children:[m.jsx(Kq,{className:"w-6 h-6 text-neutral-500"})," Home"]}),v.map((A,C)=>m.jsxs($r,{to:A.path,onClick:()=>d(!1),className:`text-3xl font-bold text-white flex items-center gap-4 py-2 border-b border-white/10 animate-slide-up-stagger delay-${(C+2)*100}`,children:[m.jsx("span",{className:"text-neutral-500",children:A.icon}),A.label]},A.path)),i?m.jsxs(m.Fragment,{children:[m.jsxs($r,{to:"/dashboard",onClick:()=>d(!1),className:"text-3xl font-bold text-white flex items-center gap-4 py-2 border-b border-white/10 animate-slide-up-stagger delay-300",children:[m.jsx(Ya,{className:"w-6 h-6 rounded-full border border-white/20",isActive:!1})," My Profile"]}),m.jsxs($r,{to:"/ebook-studio",onClick:()=>d(!1),className:"text-3xl font-bold text-white flex items-center gap-4 py-2 border-b border-white/10 animate-slide-up-stagger delay-400",children:[m.jsx($a,{className:"w-6 h-6 text-neutral-500"})," Write Book"]}),m.jsx("button",{onClick:p,className:"text-left text-xl font-bold text-red-500 py-4 mt-4 animate-slide-up-stagger delay-400",children:"Sign Out"})]}):m.jsxs("div",{className:"mt-8 flex flex-col gap-4 animate-slide-up-stagger delay-400",children:[m.jsx("a",{href:"https://co-writter-studio.web.app/login",className:"w-full py-4 bg-white/5 border border-white/10 text-white font-bold text-center rounded-full",children:"Login"}),m.jsx("a",{href:"https://co-writter-studio.web.app/pricing",className:"w-full py-4 bg-white text-black font-bold text-center rounded-full shadow-glow-white",children:"Start Free"})]})]})})]})},{Link:$m,useLocation:R$}=gi,M$=()=>{const i=R$(),e=k.useRef(null);return k.useEffect(()=>{e.current&&window.anime&&(window.anime.remove(".wave-path-1"),window.anime.remove(".wave-path-2"),window.anime.remove(".wave-path-3"),window.anime({targets:".wave-path-1",translateX:[0,-1440],duration:2e4,easing:"linear",loop:!0}),window.anime({targets:".wave-path-2",translateX:[0,-1440],duration:15e3,easing:"linear",loop:!0}),window.anime({targets:".wave-path-3",translateX:[0,-1440],duration:8e3,easing:"linear",loop:!0}))},[i.pathname]),i.pathname==="/ebook-studio"||i.pathname.startsWith("/site/")||i.pathname==="/dashboard"||i.pathname.startsWith("/read/")?null:m.jsxs("div",{className:"relative mt-48",children:[m.jsx("div",{className:"absolute top-0 left-0 w-full overflow-hidden leading-[0] transform -translate-y-[99%] z-0",style:{height:"200px"},children:m.jsxs("svg",{ref:e,className:"relative block w-full h-full",viewBox:"0 0 1440 320",preserveAspectRatio:"none",children:[m.jsx("path",{className:"wave-path-1 fill-[#1a1a1a] opacity-100",d:"M0,160 Q360,240 720,160 T1440,160 T2160,160 T2880,160 V320 H0 Z"}),m.jsx("path",{className:"wave-path-2 fill-[#0d0d0d] opacity-100",d:"M0,192 Q360,112 720,192 T1440,192 T2160,192 T2880,192 V320 H0 Z"}),m.jsx("path",{className:"wave-path-3 fill-[#000000]",d:"M0,224 Q360,284 720,224 T1440,224 T2160,224 T2880,224 V320 H0 Z"})]})}),m.jsx("footer",{className:"bg-[#000000] text-neutral-500 py-12 relative z-10 border-t-0",children:m.jsx("div",{className:"container mx-auto px-6",children:m.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center text-center md:text-left gap-8",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-white font-black text-3xl mb-3 tracking-tighter lowercase flex items-center justify-center md:justify-start gap-2",children:Fr}),m.jsxs("p",{className:"font-mono text-sm opacity-60 max-w-xs mx-auto md:mx-0",children:[" ",new Date().getFullYear()," All rights reserved."]}),m.jsxs("div",{className:"mt-6 space-y-2",children:[m.jsx("p",{className:"text-xs text-neutral-400 font-medium uppercase tracking-widest",children:"Where Thought Becomes Literature"}),m.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 opacity-80 hover:opacity-100 transition-opacity mt-2",children:[m.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 animate-pulse shadow-[0_0_10px_rgba(99,102,241,0.5)]"}),m.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest text-neutral-500",children:["Neural Engine: ",Xq]})]})]})]}),m.jsxs("div",{className:"flex flex-wrap justify-center gap-x-8 gap-y-4",children:[m.jsx($m,{to:"/contact",className:"hover:text-white transition-colors duration-300 text-xs font-bold uppercase tracking-widest",children:"Contact"}),m.jsx($m,{to:"/terms-and-conditions",className:"hover:text-white transition-colors duration-300 text-xs font-bold uppercase tracking-widest",children:"Terms"}),m.jsx($m,{to:"/privacy-policy",className:"hover:text-white transition-colors duration-300 text-xs font-bold uppercase tracking-widest",children:"Privacy"}),m.jsx($m,{to:"/refund-policy",className:"hover:text-white transition-colors duration-300 text-xs font-bold uppercase tracking-widest",children:"Refunds"}),m.jsx($m,{to:"/shipping-policy",className:"hover:text-white transition-colors duration-300 text-xs font-bold uppercase tracking-widest",children:"Shipping"})]})]})})})]})},k$="modulepreload",D$=function(i){return"/"+i},jk={},sl=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){let o=function(d){return Promise.all(d.map(p=>Promise.resolve(p).then(y=>({status:"fulfilled",value:y}),y=>({status:"rejected",reason:y}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),u=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=o(t.map(d=>{if(d=D$(d),d in jk)return;jk[d]=!0;const p=d.endsWith(".css"),y=p?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${y}`))return;const v=document.createElement("link");if(v.rel=p?"stylesheet":k$,p||(v.as="script"),v.crossOrigin="",v.href=d,u&&v.setAttribute("nonce",u),document.head.appendChild(v),p)return new Promise((w,A)=>{v.addEventListener("load",w),v.addEventListener("error",()=>A(new Error(`Unable to preload CSS for ${d}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return e().catch(a)})},{Link:I$,useNavigate:P$}=gi,Ym=({icon:i,label:e})=>m.jsxs("div",{className:"flex flex-col items-center gap-4 group cursor-default transition-all duration-300 hover:-translate-y-2",children:[m.jsxs("div",{className:"w-24 h-24 md:w-32 md:h-32 rounded-3xl bg-white/5 border border-white/10 flex items-center justify-center text-neutral-500 group-hover:text-white group-hover:bg-white/10 group-hover:border-white/30 group-hover:shadow-[0_0_30px_rgba(255,255,255,0.1)] transition-all duration-300 shadow-2xl relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),m.jsx("div",{className:"relative z-10 transform transition-transform duration-300 group-hover:scale-110",children:i})]}),m.jsx("span",{className:"text-xs md:text-sm font-bold uppercase tracking-widest text-neutral-600 group-hover:text-neutral-300 transition-colors",children:e})]}),L$=()=>m.jsxs("svg",{viewBox:"-10.5 -9.45 21 18.9",className:"w-12 h-12 md:w-16 md:h-16 fill-current text-[#61DAFB]",children:[m.jsx("circle",{cx:"0",cy:"0",r:"2",fill:"currentColor"}),m.jsxs("g",{stroke:"currentColor",strokeWidth:"1",fill:"none",children:[m.jsx("ellipse",{rx:"10",ry:"4.5"}),m.jsx("ellipse",{rx:"10",ry:"4.5",transform:"rotate(60)"}),m.jsx("ellipse",{rx:"10",ry:"4.5",transform:"rotate(120)"})]})]}),F$=()=>m.jsxs("svg",{viewBox:"0 0 32 32",className:"w-12 h-12 md:w-16 md:h-16 text-[#646CFF]",children:[m.jsx("path",{d:"M30.3 5.4L16.6 29.5 2.8 5.4h27.5z",fill:"currentColor",fillOpacity:"0.2"}),m.jsx("path",{d:"M16.6 29.5L2.8 5.4h11l2.8 17.5 2.8-17.5h10.9L16.6 29.5z",stroke:"currentColor",strokeWidth:"2",fill:"none"}),m.jsx("path",{d:"M2.8 5.4h11L16.6 29.5 2.8 5.4z",fill:"currentColor",fillOpacity:"0.1"})]}),U$=()=>m.jsxs("svg",{viewBox:"0 0 128 128",className:"w-12 h-12 md:w-16 md:h-16 text-[#3178C6]",children:[m.jsx("rect",{width:"128",height:"128",rx:"20",fill:"currentColor",fillOpacity:"0.1"}),m.jsx("path",{d:"M29.1 56.1h21.9v10.4h-7.9v35.1h-11v-35.1h-7.9v-10.4h4.9zm41.6 34.6c2.4 1.7 6.4 3.7 10.4 3.7 4.2 0 6.2-2.1 6.2-5.1 0-8.6-24.6-9-24.6-25.1 0-9.8 8.1-16.7 21.6-16.7 6.5 0 10.9 1.6 13.9 3l-2.6 10.4c-2.6-1.3-6.4-2.7-10.7-2.7-4.1 0-6.1 2.2-6.1 4.7 0 8.3 24.6 9.3 24.6 25 0 10.5-9.1 17.1-22.1 17.1-6.8 0-12.7-2.1-15.6-3.8l3-10.5z",fill:"currentColor"})]}),j$=()=>m.jsx("svg",{viewBox:"0 0 24 24",className:"w-12 h-12 md:w-16 md:h-16 fill-current text-[#38B2AC]",children:m.jsx("path",{d:"M12.001,4.8c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 C13.666,10.618,15.027,12,18.001,12c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C16.337,6.182,14.976,4.8,12.001,4.8z M6.001,12c-3.2,0-5.2,1.6-6,4.8c1.2-1.6,2.6-2.2,4.2-1.8c0.913,0.228,1.565,0.89,2.288,1.624 c1.177,1.194,2.538,2.576,5.512,2.576c3.2,0,5.2-1.6,6-4.8c-1.2,1.6-2.6,2.2-4.2,1.8c-0.913-0.228-1.565-0.89-2.288-1.624 C10.337,13.382,8.976,12,6.001,12z"})}),B$=()=>m.jsxs("svg",{viewBox:"0 0 24 24",className:"w-12 h-12 md:w-16 md:h-16",children:[m.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),m.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),m.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),m.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),O$=()=>{const[i,e]=wn.useState(""),[t,n]=wn.useState("idle"),s=async a=>{if(a.preventDefault(),!!i){n("loading");try{const{db:o}=await sl(async()=>{const{db:p}=await import("./firebase-DZ3l171S.js");return{db:p}},__vite__mapDeps([0,1])),{collection:c,addDoc:u,serverTimestamp:d}=await sl(async()=>{const{collection:p,addDoc:y,serverTimestamp:v}=await import("./index.esm-CtTi9zbD.js").then(w=>w.G);return{collection:p,addDoc:y,serverTimestamp:v}},[]);await u(c(o,"leads"),{email:i,source:"landing_page",createdAt:d()}),n("success"),e("")}catch(o){console.error("Error capturing lead:",o),n("error")}}};return t==="success"?m.jsx("div",{className:"p-4 bg-green-500/20 border border-green-500/50 rounded-xl text-green-400 font-medium animate-fade-in",children:"Success! You've joined the list. "}):m.jsxs("form",{onSubmit:s,className:"flex flex-col sm:flex-row gap-4 max-w-md mx-auto relative z-20",children:[m.jsx("input",{type:"email",placeholder:"Enter your email",value:i,onChange:a=>e(a.target.value),className:"flex-1 bg-white/5 border border-white/10 rounded-full px-6 py-4 text-white placeholder-neutral-500 focus:outline-none focus:border-white/30 transition-colors",required:!0}),m.jsx("button",{type:"submit",disabled:t==="loading",className:"px-8 py-4 bg-white text-black font-bold rounded-full hover:bg-neutral-200 transition-colors disabled:opacity-50",children:t==="loading"?"Joining...":"Join Now"})]})},H$=()=>{P$();const{currentUser:i}=Yi();return m.jsxs("div",{className:"min-h-screen bg-transparent text-white selection:bg-google-blue/30 overflow-x-hidden",children:[m.jsxs("section",{className:"relative min-h-[90vh] flex flex-col items-center justify-center px-6 text-center pt-32 pb-20 z-10",children:[m.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[600px] h-[600px] bg-google-blue/10 rounded-full blur-[100px] pointer-events-none"}),m.jsxs("div",{className:"relative z-10 animate-slide-up flex flex-col items-center max-w-5xl mx-auto",children:[m.jsx("div",{className:"mb-8 md:mb-10 scale-100 hover:scale-105 transition-transform duration-500",children:m.jsx(Ya,{className:"w-24 h-24 md:w-40 md:h-40 bg-[#050505] shadow-[0_0_80px_rgba(255,255,255,0.15)] border border-white/30 rounded-full"})}),m.jsxs("h1",{className:"text-4xl sm:text-6xl md:text-8xl font-black tracking-tighter mb-6 leading-[0.95] md:leading-[0.9] drop-shadow-2xl",children:["Turn Your Ideas",m.jsx("br",{}),m.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-white via-neutral-200 to-neutral-500",children:"Into Books."})]}),m.jsxs("p",{className:"text-base md:text-xl text-neutral-300 max-w-2xl mb-10 leading-relaxed px-4 drop-shadow-md",children:["The easiest way to write, read, and sell books with AI.",m.jsx("br",{className:"my-2 block"}),m.jsxs("span",{className:"inline-block mt-1",children:["Powered by ",m.jsx("span",{className:"text-white font-mono font-bold border-b border-white/20 pb-0.5",children:"GOOGLE"}),"."]})]}),m.jsx("div",{className:"flex flex-col sm:flex-row items-center gap-4 w-full sm:w-auto px-4",children:i?m.jsxs("a",{href:"https://co-writter-studio.web.app/ebook-studio",className:"w-full sm:w-auto px-10 py-4 bg-white text-black font-bold text-lg rounded-full hover:scale-105 transition-all shadow-[0_0_30px_rgba(255,255,255,0.4)] flex items-center justify-center gap-2 group",children:[m.jsx($a,{className:"w-5 h-5 group-hover:-translate-y-1 transition-transform"}),"Start Writing"]}):m.jsxs(m.Fragment,{children:[m.jsx("a",{href:"https://co-writter-studio.web.app/login",className:"px-8 py-4 rounded-full font-bold text-black bg-white hover:bg-neutral-200 transition-all shadow-[0_0_30px_rgba(255,255,255,0.3)] hover:shadow-[0_0_50px_rgba(255,255,255,0.5)] transform hover:-translate-y-1 relative overflow-hidden group",children:m.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Start Creating ",m.jsx(IconArrowRight,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})}),m.jsx("a",{href:"https://co-writter-studio.web.app/login",className:"px-8 py-4 rounded-full font-bold text-white border border-white/20 hover:bg-white/10 transition-all backdrop-blur-md",children:"Sign In"})]})}),m.jsxs("div",{className:"mt-12 flex flex-col md:flex-row items-center gap-4 md:gap-8 text-neutral-400 text-xs font-mono uppercase tracking-widest",children:[m.jsxs("span",{className:"flex items-center gap-2",children:[m.jsx(pi,{className:"w-3 h-3 text-google-green"})," Easy to Use"]}),m.jsxs("span",{className:"flex items-center gap-2",children:[m.jsx(pi,{className:"w-3 h-3 text-google-green"})," Free to Start"]}),m.jsxs("span",{className:"flex items-center gap-2",children:[m.jsx(pi,{className:"w-3 h-3 text-google-green"})," Instant Publishing"]})]})]})]}),m.jsx("section",{className:"py-24 px-6 border-b border-white/5 relative z-10",children:m.jsx("div",{className:"max-w-7xl mx-auto",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[m.jsxs("div",{className:"p-8 rounded-[32px] bg-black/40 backdrop-blur-xl border border-white/10 shadow-[0_0_40px_rgba(0,0,0,0.5)] hover:border-white/20 hover:scale-105 transition-all duration-300 group relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-indigo-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),m.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center mb-6 text-white group-hover:scale-110 transition-transform border border-indigo-500/30 bg-gradient-to-br from-indigo-500/20 to-purple-500/20 shadow-[0_0_20px_rgba(99,102,241,0.2)]",children:m.jsx(lw,{className:"w-7 h-7 text-indigo-400 drop-shadow-[0_0_8px_rgba(129,140,248,0.5)]"})}),m.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:"AI Co-Author"}),m.jsx("p",{className:"text-neutral-400 leading-relaxed text-sm",children:"Write with AI. Plan your chapters, write full pages, and fix grammar easily with our writing tools."})]}),m.jsxs("div",{className:"p-8 rounded-[32px] bg-black/40 backdrop-blur-xl border border-white/10 shadow-[0_0_40px_rgba(0,0,0,0.5)] hover:border-white/20 hover:scale-110 transition-all duration-300 group relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),m.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center mb-6 text-white group-hover:scale-110 transition-transform border border-emerald-500/30 bg-gradient-to-br from-emerald-500/20 to-teal-500/20 shadow-[0_0_20px_rgba(16,185,129,0.2)]",children:m.jsx($a,{className:"w-7 h-7 text-emerald-400 drop-shadow-[0_0_8px_rgba(52,211,153,0.5)]"})}),m.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:"Sell Your Books"}),m.jsx("p",{className:"text-neutral-400 leading-relaxed text-sm",children:"Publish your book instantly. Get your own profile link and keep 70% of every sale you make."})]}),m.jsxs("div",{className:"p-8 rounded-[32px] bg-black/40 backdrop-blur-xl border border-white/10 shadow-[0_0_40px_rgba(0,0,0,0.5)] hover:border-white/20 hover:scale-110 transition-all duration-300 group relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-amber-500/10 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),m.jsx("div",{className:"w-14 h-14 rounded-2xl flex items-center justify-center mb-6 text-white group-hover:scale-110 transition-transform border border-amber-500/30 bg-gradient-to-br from-amber-500/20 to-orange-500/20 shadow-[0_0_20px_rgba(245,158,11,0.2)]",children:m.jsx(ki,{className:"w-7 h-7 text-amber-400 drop-shadow-[0_0_8px_rgba(251,191,36,0.5)]"})}),m.jsx("h3",{className:"text-2xl font-bold text-white mb-3",children:"Easy Reading"}),m.jsx("p",{className:"text-neutral-400 leading-relaxed text-sm",children:"Read comfortably on any device. Support for PDF uploads and a distraction-free reading mode."})]})]})})}),m.jsx("section",{className:"py-24 px-6 relative overflow-hidden z-10",children:m.jsxs("div",{className:"max-w-4xl mx-auto text-center bg-black/30 backdrop-blur-lg border border-white/5 p-12 rounded-[40px] shadow-2xl relative",children:[m.jsx("div",{className:"absolute top-0 left-1/2 -translate-x-1/2 w-1/2 h-1 bg-gradient-to-r from-transparent via-white/20 to-transparent"}),m.jsx("h2",{className:"text-4xl md:text-5xl font-black text-white mb-8 tracking-tight",children:"Built for Everyone"}),m.jsx("p",{className:"text-lg md:text-xl text-neutral-400 leading-relaxed mb-12 font-light",children:"Co-Writter isn't just a tool; it's a partner. We believe that everyone has a story worth telling, and with the right help, anyone can become an author."}),m.jsx(I$,{to:"/store",className:"inline-flex items-center gap-2 text-white font-bold border-b border-white pb-1 hover:opacity-70 transition-opacity tracking-widest uppercase text-sm",children:"Browse the Library "})]})}),m.jsx("section",{className:"py-20 px-6 relative z-10",children:m.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[m.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:"Join the Future of Publishing"}),m.jsx("p",{className:"text-neutral-400 mb-8",children:"Get updates on new AI features and writing tools. Only valuable content, no spam."}),m.jsx(O$,{})]})}),m.jsx("section",{className:"py-20 border-t border-b border-white/5 bg-black/40 backdrop-blur relative z-20",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-6",children:[m.jsx("p",{className:"text-center text-xs font-bold uppercase tracking-[0.3em] text-neutral-500 mb-12",children:"Built With Modern Architecture"}),m.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-8 md:gap-16",children:[m.jsx(Ym,{label:"Google Gemini",icon:m.jsx(B$,{})}),m.jsx(Ym,{label:"React 18",icon:m.jsx(L$,{})}),m.jsx(Ym,{label:"TypeScript",icon:m.jsx(U$,{})}),m.jsx(Ym,{label:"Tailwind CSS",icon:m.jsx(j$,{})}),m.jsx(Ym,{label:"Vite",icon:m.jsx(F$,{})})]})]})})]})},{useNavigate:z$}=gi,NL=({book:i,onViewDetails:e})=>{const{addToCart:t}=Yi(),n=z$(),s=i.price===0,a=c=>{c.stopPropagation(),s?n(`/read/${i.id}`):t(i)},o=()=>{e&&e(i.id)};return m.jsxs("div",{className:"group relative bg-black/40 backdrop-blur-sm rounded-[20px] overflow-hidden border border-white/10 hover:border-white/30 transition-all duration-500 ease-obsidian cursor-pointer flex flex-col h-full hover:-translate-y-2 hover:shadow-[0_20px_40px_-10px_rgba(0,0,0,0.5)] will-change-transform",onClick:o,children:[m.jsxs("div",{className:"w-full aspect-[3/4] relative overflow-hidden bg-[#050505] border-b border-white/5",children:[m.jsx("img",{src:i.coverImageUrl||"https://picsum.photos/400/600",alt:`Cover of ${i.title}`,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700 ease-obsidian opacity-90 group-hover:opacity-100 will-change-transform",loading:"lazy"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-60 group-hover:opacity-40 transition-opacity duration-500"}),m.jsx("div",{className:"absolute top-3 left-3 flex flex-col gap-2",children:s&&m.jsx("div",{className:"bg-white text-black text-[9px] font-bold px-3 py-1 uppercase tracking-widest rounded-full shadow-lg",children:"Free"})})]}),m.jsxs("div",{className:"p-5 flex flex-col flex-grow relative",children:[m.jsxs("div",{className:"mb-4",children:[m.jsx("div",{className:"flex items-center justify-between mb-2",children:m.jsx("span",{className:"text-[9px] font-bold text-neutral-500 uppercase tracking-widest border border-white/10 px-2 py-0.5 rounded-full",children:i.genre})}),m.jsx("h3",{className:"text-lg font-bold text-white leading-tight line-clamp-2 mb-1 group-hover:text-neutral-200 transition-colors",title:i.title,children:i.title}),m.jsx("p",{className:"text-xs text-neutral-500 uppercase tracking-widest line-clamp-1",children:i.author})]}),m.jsxs("div",{className:"mt-auto pt-4 border-t border-white/5 flex items-center justify-between",children:[m.jsx("span",{className:"text-lg font-light text-white font-mono",children:s?"FREE":`${i.price.toFixed(0)}`}),m.jsx("button",{onClick:a,className:`px-4 py-2 rounded-full text-[10px] font-bold uppercase tracking-widest flex items-center gap-2 transition-all duration-300 ease-obsidian hover:scale-105 active:scale-95 ${s?"bg-white/10 text-white hover:bg-white hover:text-black border border-white/20":"bg-white text-black hover:bg-neutral-200 shadow-[0_0_15px_rgba(255,255,255,0.2)]"}`,children:s?m.jsxs(m.Fragment,{children:["Read ",m.jsx(ki,{className:"w-3 h-3"})]}):m.jsxs(m.Fragment,{children:["Add ",m.jsx(YC,{className:"w-3 h-3"})]})})]})]})]})},G$=({isOpen:i,onClose:e,title:t,children:n,size:s="md"})=>{const a=k.useRef(null);if(k.useLayoutEffect(()=>{i&&a.current&&(a.current.scrollTop=0)},[i]),!i)return null;const o={sm:"max-w-sm",md:"max-w-md",lg:"max-w-4xl",xl:"max-w-6xl",full:"max-w-[95vw] h-[95vh]"};return fH.createPortal(m.jsx("div",{className:"fixed inset-0 bg-black/90 backdrop-blur-xl flex items-center justify-center z-[100] p-4 transition-opacity duration-300 ease-in-out animate-fade-in",onClick:e,role:"dialog","aria-modal":"true",children:m.jsxs("div",{className:`bg-black rounded-[32px] shadow-[0_0_100px_rgba(0,0,0,1)] relative w-full ${o[s]} border border-white/15 flex flex-col max-h-[90vh] overflow-hidden animate-slide-up ring-1 ring-white/5`,onClick:c=>c.stopPropagation(),children:[m.jsx("button",{onClick:e,className:"absolute top-5 right-5 z-20 w-10 h-10 flex items-center justify-center rounded-full bg-black/50 border border-white/10 text-neutral-400 hover:text-white hover:bg-white/10 hover:border-white/30 transition-all hover:rotate-90 backdrop-blur-md","aria-label":"Close modal",children:m.jsx(Yc,{className:"w-5 h-5"})}),t&&m.jsx("div",{className:"px-8 py-6 border-b border-white/5 bg-white/[0.02] flex-shrink-0",children:m.jsx("h2",{className:"text-xl font-bold text-white tracking-tight",children:t})}),m.jsx("div",{ref:a,className:"p-0 overflow-y-auto custom-scrollbar flex-1",children:n})]})}),document.body)},WE=({options:i,value:e,onChange:t,icon:n,className:s="",placeholder:a})=>{const[o,c]=k.useState(!1),u=k.useRef(null),d=i.find(p=>p.value===e);return k.useEffect(()=>{const p=y=>{u.current&&!u.current.contains(y.target)&&c(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]),m.jsxs("div",{className:`relative ${s}`,ref:u,children:[m.jsxs("button",{type:"button",onClick:()=>c(!o),className:`flex items-center justify-between gap-3 w-full px-4 py-3 rounded-full border transition-all duration-200 h-full ${o?"bg-white text-black border-white":"bg-white/5 text-white border-transparent hover:bg-white/10 hover:border-white/10"}`,children:[m.jsxs("div",{className:"flex items-center gap-2 truncate min-w-0",children:[n&&m.jsx("span",{className:o?"text-black":"text-neutral-400",children:n}),m.jsx("span",{className:"text-sm font-bold truncate",children:d?d.label:a||"Select"})]}),m.jsx(wL,{className:`w-3 h-3 transition-transform duration-300 flex-shrink-0 ${o?"rotate-180 text-black":"text-neutral-500"}`})]}),o&&m.jsx("div",{className:"absolute top-full mt-2 left-0 w-full min-w-[180px] bg-[#1a1a1a] border border-white/10 rounded-2xl shadow-[0_10px_40px_rgba(0,0,0,0.5)] overflow-hidden z-[60] animate-slide-down origin-top p-1",children:m.jsx("div",{className:"max-h-[300px] overflow-y-auto custom-scrollbar",children:i.map(p=>m.jsx("button",{onClick:()=>{t(p.value),c(!1)},className:`w-full text-left px-4 py-2.5 text-sm rounded-xl transition-all mb-0.5 last:mb-0 ${e===p.value?"bg-white text-black font-bold":"text-neutral-400 hover:bg-white/5 hover:text-white font-medium"}`,children:p.label},p.value))})})]})},{useNavigate:V$}=gi,q$=()=>{const{addToCart:i,allBooks:e}=Yi(),t=V$(),[n,s]=k.useState(""),[a,o]=k.useState("All"),[c,u]=k.useState("All"),[d,p]=k.useState("publicationDate"),[y,v]=k.useState(!1),[w,A]=k.useState(null),T=k.useMemo(()=>["All",...new Set(e.map(M=>M.genre))],[e]).map(M=>({label:M==="All"?"All Genres":M,value:M})),_=[{label:"All Prices",value:"All"},{label:"Free Only",value:"Free"},{label:"Paid Only",value:"Paid"}],D=[{label:"Newest First",value:"publicationDate"},{label:"Title (A-Z)",value:"title"},{label:"Price (Low-High)",value:"price"}],R=k.useMemo(()=>{let M=e.filter(O=>O.title.toLowerCase().includes(n.toLowerCase())||O.author.toLowerCase().includes(n.toLowerCase()));return a!=="All"&&(M=M.filter(O=>O.genre===a)),c==="Free"?M=M.filter(O=>O.price===0):c==="Paid"&&(M=M.filter(O=>O.price>0)),M.sort((O,z)=>d==="title"?O.title.localeCompare(z.title):d==="price"?O.price-z.price:d==="publicationDate"?new Date(z.publicationDate).getTime()-new Date(O.publicationDate).getTime():0)},[n,a,c,d,e]),L=k.useMemo(()=>e.find(M=>M.title.includes("Manual"))||e.find(M=>M.price>0)||e[0],[e]),F=M=>{const O=e.find(z=>z.id===M);O&&(A(O),v(!0))},U=()=>{w&&(w.price===0?t(`/read/${w.id}`):i(w),v(!1))};return m.jsxs("div",{className:"container mx-auto px-4 sm:px-6 pt-24 pb-safe md:pb-24 overflow-x-hidden",children:[L&&!n&&a==="All"&&m.jsxs("div",{className:"relative w-full rounded-[32px] overflow-hidden mb-12 md:mb-16 group border border-white/10 shadow-2xl animate-fade-in flex flex-col md:block h-auto md:h-[500px]",children:[m.jsx("div",{className:"absolute inset-0 bg-cover bg-center transition-transform duration-[2s] group-hover:scale-105",style:{backgroundImage:`url(${L.coverImageUrl})`}}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/80 to-transparent md:bg-gradient-to-r md:from-black md:via-black/80 md:to-transparent"}),m.jsxs("div",{className:"relative z-10 p-8 md:p-16 flex flex-col justify-end md:justify-center min-h-[400px] md:h-full max-w-2xl",children:[m.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-brand-accent/20 border border-brand-accent/30 w-fit mb-4 md:mb-6 backdrop-blur-md rounded-full animate-slide-up",children:[m.jsx(JC,{className:"w-3 h-3 text-brand-accent fill-current"}),m.jsx("span",{className:"text-[10px] md:text-xs font-bold text-brand-accent uppercase tracking-widest",children:"Featured Release"})]}),m.jsx("h1",{className:"text-3xl md:text-6xl font-black text-white mb-3 md:mb-4 leading-tight tracking-tight drop-shadow-lg",children:L.title}),m.jsx("p",{className:"text-sm md:text-xl text-neutral-300 mb-6 md:mb-8 line-clamp-3 leading-relaxed drop-shadow-md",children:L.description}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[m.jsx("button",{onClick:()=>F(L.id),className:"bg-white/10 backdrop-blur-md border border-white/20 text-white font-bold py-3.5 px-8 rounded-full hover:bg-white hover:text-black transition-all text-xs uppercase tracking-widest",children:"View Details"}),m.jsx("button",{onClick:()=>{L.price===0?t(`/read/${L.id}`):i(L)},className:"px-8 py-3.5 rounded-full bg-white text-black font-bold transition-all hover:scale-105 flex items-center justify-center gap-2 text-xs uppercase tracking-widest",children:L.price===0?m.jsxs(m.Fragment,{children:[m.jsx(ki,{className:"w-4 h-4"})," Read Now"]}):m.jsxs(m.Fragment,{children:[m.jsx(YC,{className:"w-4 h-4"})," Add to Cart"]})})]})]})]}),m.jsx("div",{className:"sticky top-20 z-30 mx-auto w-full mb-8 transition-all duration-300",children:m.jsxs("div",{className:"bg-black/90 backdrop-blur-xl border border-white/10 shadow-xl rounded-[24px] p-2 md:p-3 flex flex-col md:flex-row gap-2 md:gap-3 items-stretch",children:[m.jsxs("div",{className:"relative group w-full flex-grow",children:[m.jsx(PA,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-neutral-500 group-focus-within:text-white transition-colors"}),m.jsx("input",{type:"text",placeholder:"Search books, authors...",className:"w-full h-full bg-white/5 border border-transparent focus:border-white/10 rounded-full py-3 pl-10 pr-4 text-white placeholder-neutral-500 focus:outline-none focus:bg-white/10 transition-all text-sm font-bold min-h-[48px]",value:n,onChange:M=>s(M.target.value)})]}),m.jsxs("div",{className:"grid grid-cols-2 md:flex gap-2 w-full md:w-auto",children:[m.jsx(WE,{options:T,value:a,onChange:o,className:"w-full md:w-auto md:min-w-[160px]",placeholder:"Genres"}),m.jsx(WE,{options:_,value:c,onChange:M=>u(M),className:"w-full md:w-auto md:min-w-[130px]",placeholder:"Price"}),m.jsx(WE,{options:D,value:d,onChange:p,className:"col-span-2 md:col-span-1 w-full md:w-auto md:min-w-[150px]",placeholder:"Sort By"})]})]})}),R.length>0?m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6 pb-20",children:R.map(M=>m.jsx(NL,{book:M,onViewDetails:F},M.id))}):m.jsxs("div",{className:"flex flex-col items-center justify-center py-20 border border-dashed border-white/10 rounded-3xl bg-white/5 text-center px-4",children:[m.jsx(PA,{className:"w-12 h-12 text-neutral-600 mb-4"}),m.jsx("p",{className:"text-xl text-white font-bold",children:"No books found"}),m.jsx("p",{className:"text-neutral-500 mt-2 text-sm",children:"Try adjusting your filters."})]}),w&&m.jsx(G$,{isOpen:y,onClose:()=>v(!1),title:"",size:"lg",children:m.jsxs("div",{className:"flex flex-col md:flex-row h-full max-h-[85vh] overflow-y-auto md:overflow-hidden bg-black",children:[m.jsxs("div",{className:"w-full md:w-5/12 bg-neutral-900 relative",children:[m.jsx("img",{src:w.coverImageUrl,alt:w.title,className:"w-full h-full object-cover opacity-90"}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent"})]}),m.jsxs("div",{className:"w-full md:w-7/12 flex flex-col p-6 md:p-10",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-brand-accent mb-2 block",children:w.genre}),m.jsx("h2",{className:"text-2xl md:text-4xl font-black text-white leading-none mb-2",children:w.title}),m.jsxs("p",{className:"text-base text-neutral-400",children:["by ",w.author]})]}),m.jsx("div",{className:"flex-grow overflow-y-auto custom-scrollbar pr-2 mb-6",children:m.jsx("p",{className:"text-neutral-300 text-sm leading-relaxed font-light",children:w.description})}),m.jsxs("div",{className:"mt-auto pt-6 border-t border-white/10 flex items-center justify-between",children:[m.jsx("span",{className:"text-3xl font-bold text-white",children:w.price===0?"Free":`${w.price}`}),m.jsx("button",{onClick:U,className:"bg-white text-black px-8 py-3 rounded-full font-bold text-xs uppercase tracking-widest hover:bg-neutral-200",children:w.price===0?"Read Now":"Add to Cart"})]})]})]})})]})},{useNavigate:$$}=gi,Y$=()=>{const{currentUser:i,setCurrentUser:e,userType:t,upgradeToSeller:n}=Yi(),s=i,a=$$(),[o,c]=k.useState("library"),[u,d]=k.useState(""),p=k.useRef(null);if(!s)return null;const y=()=>{e(null,t),a("/")},v=_=>{var R;const D=(R=_.target.files)==null?void 0:R[0];if(D){const L=new FileReader;L.onloadend=()=>{const F=L.result,U={...s,profileImageUrl:F};e(U,t)},L.readAsDataURL(D)}},w=({id:_,label:D,icon:R})=>m.jsxs("button",{onClick:()=>c(_),className:`w-full flex items-center gap-4 px-6 py-3.5 text-sm font-medium rounded-r-full transition-all duration-200 group ${o===_?"bg-[#4285f4]/15 text-[#a8c7fa] border-l-4 border-[#4285f4]":"text-neutral-400 hover:bg-white/5 hover:text-white border-l-4 border-transparent"}`,children:[m.jsx(R,{className:`w-5 h-5 ${o===_?"text-[#a8c7fa]":"text-neutral-500 group-hover:text-white"}`}),D]}),A=({id:_,label:D,icon:R})=>m.jsxs("button",{onClick:()=>c(_),className:`flex flex-col items-center justify-center py-2 px-4 flex-1 transition-colors ${o===_?"text-white":"text-neutral-500 hover:text-neutral-300"}`,children:[m.jsx(R,{className:`w-6 h-6 mb-1 ${o===_?"text-[#a8c7fa]":"text-current"}`}),m.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide",children:D})]}),C=o==="wishlist"?s.wishlist:s.purchaseHistory,T=C==null?void 0:C.filter(_=>_.title.toLowerCase().includes(u.toLowerCase()));return m.jsxs("div",{className:"h-screen w-full bg-[#0b0b0b] font-sans text-white pt-16 flex overflow-hidden",children:[m.jsxs("aside",{className:"w-64 flex-shrink-0 border-r border-white/5 hidden md:flex flex-col bg-[#0b0b0b] z-20 h-full overflow-y-auto",children:[m.jsx("div",{className:"p-6",children:m.jsxs("button",{onClick:()=>a("/store"),className:"w-full py-4 bg-white text-black font-bold rounded-2xl shadow-lg hover:shadow-xl hover:bg-neutral-200 transition-all flex items-center justify-center gap-2",children:[m.jsx(ki,{className:"w-5 h-5"})," Store"]})}),m.jsxs("nav",{className:"flex-1 space-y-1 pr-4",children:[m.jsx(w,{id:"library",label:"My Library",icon:ki}),m.jsx(w,{id:"wishlist",label:"Wishlist",icon:Pk}),m.jsx("div",{className:"my-4 border-t border-white/5 mx-6"}),m.jsx(w,{id:"settings",label:"Profile Settings",icon:lf})]}),m.jsxs("div",{className:"p-6 border-t border-white/5",children:[m.jsx("button",{onClick:n,className:"text-xs font-medium text-neutral-500 hover:text-white transition-colors mb-4 block",children:"Switch to Writer Mode"}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-neutral-800 overflow-hidden border border-white/10",children:s.profileImageUrl?m.jsx("img",{src:s.profileImageUrl,alt:"",className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center text-neutral-500 font-bold",children:s.name[0]})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("p",{className:"text-sm font-bold truncate",children:s.name}),m.jsx("p",{className:"text-xs text-neutral-500 truncate",children:s.email})]})]})]})]}),m.jsx("main",{className:"flex-1 h-full overflow-y-auto bg-[#0b0b0b] relative scroll-smooth",children:m.jsxs("div",{className:"p-4 md:p-8 pb-32",children:[" ",m.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8",children:[m.jsxs("h1",{className:"text-2xl font-normal text-white",children:[o==="library"&&"My Library",o==="wishlist"&&"My Wishlist",o==="settings"&&"Settings"]}),(o==="library"||o==="wishlist")&&m.jsxs("div",{className:"relative w-full md:w-96 group",children:[m.jsx(PA,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-neutral-500 group-focus-within:text-white transition-colors"}),m.jsx("input",{type:"text",placeholder:"Search your books...",value:u,onChange:_=>d(_.target.value),className:"w-full bg-[#1e1e1e] border-none rounded-full py-3 pl-12 pr-6 text-sm text-white placeholder-neutral-500 focus:ring-2 focus:ring-[#4285f4]/50 focus:bg-[#252525] transition-all outline-none"})]})]}),o==="settings"?m.jsx("div",{className:"max-w-2xl animate-fade-in mx-auto md:mx-0",children:m.jsxs("div",{className:"bg-[#1e1e1e] rounded-3xl p-6 md:p-8 mb-6",children:[m.jsx("h2",{className:"text-lg font-medium mb-6",children:"Profile Details"}),m.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-start gap-6 mb-8 text-center md:text-left",children:[m.jsxs("div",{className:"relative group",children:[m.jsx("div",{className:"w-24 h-24 rounded-full bg-neutral-800 border-4 border-[#0b0b0b] overflow-hidden",children:s.profileImageUrl?m.jsx("img",{src:s.profileImageUrl,alt:"",className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center text-3xl text-neutral-600",children:m.jsx(vx,{className:"w-10 h-10"})})}),m.jsx("button",{onClick:()=>{var _;return(_=p.current)==null?void 0:_.click()},className:"absolute bottom-0 right-0 p-2 bg-[#4285f4] rounded-full text-white shadow-lg hover:scale-110 transition-transform",children:m.jsx(lf,{className:"w-4 h-4"})}),m.jsx("input",{type:"file",ref:p,className:"hidden",accept:"image/*",onChange:v})]}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-bold",children:s.name}),m.jsx("p",{className:"text-neutral-400",children:s.email}),m.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-[#4285f4]/10 text-[#a8c7fa] text-xs font-bold rounded-full",children:"Reader Account"})]})]}),m.jsxs("div",{className:"flex flex-col gap-3",children:[m.jsx("button",{onClick:n,className:"w-full py-3 border border-white/10 rounded-xl hover:bg-white/5 transition-colors text-sm font-medium",children:"Become a Writer"}),m.jsxs("button",{onClick:y,className:"w-full py-3 flex items-center justify-center gap-2 text-red-400 hover:bg-red-500/10 rounded-xl transition-colors font-medium text-sm",children:[m.jsx(Qq,{className:"w-4 h-4"})," Sign Out"]})]})]})}):m.jsx("div",{className:"animate-fade-in",children:T&&T.length>0?m.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4 md:gap-6",children:T.map(_=>m.jsx("div",{className:"group",children:m.jsx(NL,{book:_})},_.id))}):m.jsxs("div",{className:"flex flex-col items-center justify-center py-20 md:py-32 text-center",children:[m.jsx("div",{className:"w-20 h-20 md:w-24 md:h-24 bg-[#1e1e1e] rounded-full flex items-center justify-center mb-6",children:m.jsx(ki,{className:"w-8 h-8 text-neutral-600"})}),m.jsx("h3",{className:"text-lg md:text-xl font-medium text-white mb-2",children:o==="wishlist"?"Your wishlist is empty":"No books in library"}),m.jsx("p",{className:"text-neutral-500 mb-8 max-w-xs mx-auto text-sm",children:o==="wishlist"?"Save books you want to read later.":"Start your reading journey by exploring the store."}),m.jsx("button",{onClick:()=>a("/store"),className:"px-8 py-3 bg-[#4285f4] text-black font-bold rounded-full hover:bg-[#5b96f5] transition-colors",children:"Explore Books"})]})})]})}),m.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 right-0 h-20 bg-[#0b0b0b]/90 backdrop-blur-xl border-t border-white/10 flex items-center justify-around z-50 pb-safe",children:[m.jsx(A,{id:"library",label:"Library",icon:ki}),m.jsx(A,{id:"wishlist",label:"Wishlist",icon:Pk}),m.jsx(A,{id:"settings",label:"Profile",icon:lf})]})]})},Mg=({size:i="md",color:e="bg-white"})=>{const t={sm:"w-4 h-4",md:"w-8 h-8",lg:"w-12 h-12"};return m.jsxs("div",{className:"flex justify-center items-center gap-1",children:[m.jsx("div",{className:`${t[i]} ${e} opacity-20 animate-[pulse-square_1s_ease-in-out_infinite] rounded-sm`}),m.jsx("div",{className:`${t[i]} ${e} opacity-60 animate-[pulse-square_1s_ease-in-out_0.2s_infinite] rounded-sm`}),m.jsx("div",{className:`${t[i]} ${e} animate-[pulse-square_1s_ease-in-out_0.4s_infinite] rounded-sm`})]})},RL=({bookDetails:i,onPriceSuggested:e})=>{const[t,n]=k.useState(null),[s,a]=k.useState(!1),[o,c]=k.useState(null),u=async()=>{if(!i.title){c("Enter a title first.");return}a(!0),c(null);try{const d=await w$(i);d.match(/^\d+(\.\d{1,2})?$/)?(n(d),e(d)):c("Could not calculate.")}catch{c("Service unavailable.")}finally{a(!1)}};return m.jsxs("div",{className:"bg-[#151515] border border-white/5 rounded-2xl p-5 mt-4 flex flex-col md:flex-row items-center justify-between gap-4 group hover:border-white/10 transition-colors",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-emerald-500/20 to-teal-900/20 border border-emerald-500/30 flex items-center justify-center text-emerald-400 shadow-[0_0_20px_rgba(16,185,129,0.15)] group-hover:shadow-[0_0_30px_rgba(16,185,129,0.25)] transition-shadow duration-500",children:m.jsx(e$,{className:"w-6 h-6"})}),m.jsxs("div",{className:"absolute -top-1 -right-1 bg-white text-black text-[8px] font-black px-1.5 py-0.5 rounded-full flex items-center gap-0.5 border border-white shadow-sm",children:["AI ",m.jsx($c,{className:"w-2 h-2"})]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-sm font-bold text-white flex items-center gap-2",children:"Smart Pricing Model"}),m.jsx("p",{className:"text-[10px] text-neutral-500 max-w-[200px]",children:"Analyze market trends & genre data to predict the optimal revenue point."})]})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[t&&m.jsxs("div",{className:"flex flex-col items-end mr-2 animate-fade-in",children:[m.jsx("span",{className:"text-[10px] text-neutral-500 uppercase tracking-widest font-bold",children:"Target Price"}),m.jsxs("div",{className:"flex items-center gap-2 text-emerald-400",children:[m.jsxs("span",{className:"text-xl font-black tracking-tighter",children:["",parseFloat(t).toFixed(0)]}),m.jsx(pi,{className:"w-4 h-4 bg-emerald-500/20 rounded-full p-0.5"})]})]}),m.jsx("button",{onClick:u,disabled:s,className:"px-6 py-3 rounded-full bg-white text-black hover:bg-neutral-200 border border-transparent hover:border-white/50 transition-all font-bold text-[10px] uppercase tracking-widest disabled:opacity-50 shadow-glow-white hover:scale-105 active:scale-95 flex items-center gap-2",children:s?m.jsx(Mg,{size:"sm",color:"text-black"}):"Optimize"})]}),o&&m.jsx("span",{className:"text-red-400 text-xs font-bold bg-red-500/10 px-3 py-1 rounded-full border border-red-500/20",children:o})]})},W$=["Cinematic","Minimalist","Fantasy","Sci-Fi","Cyberpunk","Oil Painting","Watercolor","3D Render","Photorealistic","Abstract","Noir","Vintage"],ML=({onCoverGenerated:i,currentTitle:e,currentAuthor:t})=>{const[n,s]=k.useState(""),[a,o]=k.useState("Cinematic"),[c,u]=k.useState(null),[d,p]=k.useState(!1),[y,v]=k.useState(null),w=async T=>{if(T.preventDefault(),!n.trim()){v("Please describe your vision.");return}p(!0),v(null);try{const _=await TL(n,a,e,t);"error"in _?(v(_.error),u(null)):(u(_),i(_))}catch{v("Generation failed. Please try again."),u(null)}finally{p(!1)}},A="w-full bg-[#0b0b0b] border border-white/10 rounded-xl p-4 text-sm text-white focus:outline-none focus:border-white/30 transition-all duration-200 placeholder-neutral-600 font-sans",C="block text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2";return m.jsxs("div",{className:"bg-[#151515] border border-white/5 rounded-2xl p-6 md:p-8",children:[m.jsxs("div",{className:"mb-6",children:[m.jsx("h4",{className:"text-base font-bold text-white",children:"AI Cover Designer"}),m.jsx("p",{className:"text-xs text-neutral-500",children:"Generate professional cover art instantly."})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:C,children:"Art Direction"}),m.jsxs("div",{className:"relative",children:[m.jsx("select",{value:a,onChange:T=>o(T.target.value),className:`${A} appearance-none cursor-pointer`,children:W$.map(T=>m.jsx("option",{value:T,children:T},T))}),m.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-neutral-500",children:m.jsx(wL,{className:"w-4 h-4"})})]})]}),m.jsxs("div",{children:[m.jsx("label",{className:C,children:"Visual Concept"}),m.jsx("input",{value:n,onChange:T=>s(T.target.value),placeholder:"e.g. A lone astronaut...",className:A})]})]}),m.jsx("div",{className:"flex justify-end",children:m.jsx("button",{type:"button",onClick:w,disabled:d||!n.trim(),className:"px-8 py-3 rounded-full bg-white text-black font-bold text-xs uppercase tracking-widest hover:bg-neutral-200 transition-all flex items-center justify-center disabled:opacity-50 shadow-[0_0_20px_rgba(255,255,255,0.2)] hover:scale-105 active:scale-95 min-w-[140px]",children:d?m.jsx(Mg,{size:"sm",color:"text-black"}):"Generate Art"})}),y&&m.jsx("p",{className:"text-red-400 mt-4 text-xs bg-red-500/10 p-3 rounded-lg border border-red-500/20",children:y}),c&&!y&&m.jsx("div",{className:"mt-8 pt-8 border-t border-white/5 animate-fade-in",children:m.jsxs("div",{className:"flex flex-col md:flex-row gap-6 items-center",children:[m.jsx("div",{className:"relative w-32 h-48 rounded-lg overflow-hidden shadow-2xl border border-white/10 group",children:m.jsx("img",{src:`data:image/jpeg;base64,${c.imageBytes}`,alt:"Generated Cover",className:"w-full h-full object-cover"})}),m.jsxs("div",{className:"flex-1 text-center md:text-left",children:[m.jsxs("h5",{className:"text-sm font-bold text-white mb-2 flex items-center justify-center md:justify-start gap-2",children:[m.jsx(pi,{className:"w-4 h-4 text-green-500"})," Cover Applied"]}),m.jsx("p",{className:"text-xs text-neutral-500 mb-1",children:"The image has been automatically attached to your book."}),c.revisedPrompt&&m.jsxs("p",{className:"text-[10px] text-neutral-600 italic mt-2",children:['"',c.revisedPrompt.substring(0,80),'..."']})]})]})})]})},Lh="w-full bg-[#0b0b0b] border border-white/10 rounded-xl p-4 text-white placeholder-neutral-600 text-sm focus:outline-none focus:border-white/30 transition-all duration-200 font-sans",Au="block text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",X$=({onBookUploaded:i})=>{const{currentUser:e,userType:t}=Yi(),[n,s]=k.useState(""),[a,o]=k.useState(""),[c,u]=k.useState(""),[d,p]=k.useState(""),[y,v]=k.useState("paid"),[w,A]=k.useState(""),[C,T]=k.useState(""),[_,D]=k.useState(null),[R,L]=k.useState(!1),[F,U]=k.useState(!1),[M,O]=k.useState(null),[z,J]=k.useState(null),G=async H=>{U(!0);try{const V=new FileReader;V.onload=async()=>{const Q=V.result,ce=await b$(Q);ce&&(ce.title&&s(ce.title),ce.author&&o(ce.author),ce.description&&u(ce.description),ce.genre&&p(ce.genre)),U(!1)},V.onerror=()=>{J("Error reading file."),U(!1)},V.readAsDataURL(H)}catch(V){console.error(V),J("Failed to analyze PDF."),U(!1)}},X=async H=>{const V=H.target.files?H.target.files[0]:null;D(V),J(null),V&&V.type==="application/pdf"&&await G(V)},ie=async H=>{if(H.preventDefault(),J(null),!n||!a||!c||!d){J("Missing required fields.");return}let V=0;if(y==="paid"){if(!w||isNaN(parseFloat(w))||parseFloat(w)<=0){J("Invalid Price.");return}V=parseFloat(w)}L(!0);const Q=e&&t===It.SELLER?e.id:"unknown_seller_id";let ce;if(_)try{ce=await new Promise((Z,ue)=>{const me=new FileReader;me.onload=()=>Z(me.result),me.onerror=ue,me.readAsDataURL(_)})}catch{J("Failed to process file."),L(!1);return}const ve=ce?[]:[{id:"1",title:"Chapter 1",pageNumber:1,content:`Welcome to ${n}.

Placeholder content.`}],q={id:`book-${Date.now()}-${Math.random().toString(36).substring(2,7)}`,title:n,author:a,description:c,genre:d,price:V,coverImageUrl:M?`data:image/jpeg;base64,${M.imageBytes}`:C||`https://picsum.photos/seed/${encodeURIComponent(n)}/400/600`,sellerId:Q,publicationDate:new Date().toISOString().split("T")[0],pages:ve,pdfUrl:ce};i(q),s(""),o(""),u(""),p(""),A(""),T(""),D(null),O(null),L(!1)},$=H=>{y==="paid"&&A(H)},ee=H=>{O(H),T("")};return m.jsxs("form",{onSubmit:ie,className:"bg-[#1e1e1e] border border-white/5 p-8 md:p-10 shadow-2xl relative overflow-hidden rounded-[32px] animate-fade-in",children:[m.jsxs("div",{className:"relative z-10 mb-8 border-b border-white/5 pb-8",children:[m.jsx("h2",{className:"text-3xl font-normal text-white mb-2",children:"Publish New Book"}),m.jsx("p",{className:"text-neutral-400 text-sm",children:"Upload a PDF or start a fresh manuscript."})]}),z&&m.jsxs("div",{className:"p-4 mb-8 text-red-400 bg-red-900/10 border border-red-500/20 text-sm font-medium rounded-xl flex items-center gap-2",children:[m.jsx(pi,{className:"w-4 h-4 text-red-500"}),z]}),m.jsxs("div",{className:`relative h-48 border border-dashed transition-all duration-300 mb-10 flex flex-col items-center justify-center gap-4 group rounded-3xl ${F?"bg-white/5 border-white/30":"bg-[#0b0b0b] border-white/10 hover:border-white/30"}`,children:[F?m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsx(Mg,{size:"md",color:"text-white"}),m.jsx("p",{className:"mt-4 text-white font-bold text-xs uppercase tracking-widest animate-pulse",children:"Analyzing Content..."})]}):m.jsxs("label",{htmlFor:"ebookFile",className:"flex flex-col items-center justify-center cursor-pointer w-full h-full",children:[m.jsx("div",{className:"w-12 h-12 bg-[#1e1e1e] border border-white/10 flex items-center justify-center mb-3 group-hover:scale-110 transition-transform rounded-full shadow-lg",children:m.jsx(Dk,{className:"w-5 h-5 text-white"})}),m.jsx("span",{className:"text-sm font-bold text-white mb-1",children:_?_.name:"Upload PDF Document"}),m.jsx("span",{className:"text-xs text-neutral-500",children:_?"Click to change file":"Drag & drop or click to browse"}),m.jsx("input",{type:"file",id:"ebookFile",accept:"application/pdf",onChange:X,className:"hidden"})]}),_&&!F&&m.jsxs("button",{type:"button",onClick:()=>G(_),className:"absolute bottom-4 right-4 text-[10px] font-bold uppercase tracking-widest text-neutral-400 hover:text-white flex items-center gap-1 bg-[#1e1e1e] px-3 py-1.5 rounded-full border border-white/10",children:[m.jsx($c,{className:"w-3 h-3"})," Re-Analyze"]})]}),m.jsxs("div",{className:`space-y-8 ${F?"opacity-50 pointer-events-none blur-sm":""}`,children:[m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"title",className:Au,children:"Book Title"}),m.jsx("input",{type:"text",id:"title",value:n,onChange:H=>s(H.target.value),required:!0,className:Lh,placeholder:"Enter Title..."})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"author",className:Au,children:"Author"}),m.jsx("input",{type:"text",id:"author",value:a,onChange:H=>o(H.target.value),required:!0,className:Lh,placeholder:"Enter Author..."})]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"description",className:Au,children:"Description"}),m.jsx("textarea",{id:"description",value:c,onChange:H=>u(H.target.value),rows:4,required:!0,className:`${Lh} min-h-[120px] resize-none`})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"genre",className:Au,children:"Genre"}),m.jsx("input",{type:"text",id:"genre",value:d,onChange:H=>p(H.target.value),required:!0,className:Lh,placeholder:"Sci-Fi, Thriller..."})]}),m.jsxs("div",{children:[m.jsx("label",{className:Au,children:"Monetization"}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsx("button",{type:"button",onClick:()=>v("paid"),className:`p-4 border text-left transition-all rounded-xl relative overflow-hidden group ${y==="paid"?"bg-white text-black border-white":"bg-[#0b0b0b] text-neutral-400 border-white/10 hover:border-white/20"}`,children:m.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center gap-2",children:[m.jsx(WC,{className:`w-5 h-5 ${y==="paid"?"text-black":"text-neutral-500"}`}),m.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Paid"})]})}),m.jsx("button",{type:"button",onClick:()=>v("free"),className:`p-4 border text-left transition-all rounded-xl relative overflow-hidden group ${y==="free"?"bg-white text-black border-white":"bg-[#0b0b0b] text-neutral-400 border-white/10 hover:border-white/20"}`,children:m.jsxs("div",{className:"relative z-10 flex flex-col items-center justify-center gap-2",children:[m.jsx($a,{className:`w-5 h-5 ${y==="free"?"text-black":"text-neutral-500"}`}),m.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Free"})]})})]})]})]}),y==="paid"&&m.jsxs("div",{className:"animate-fade-in space-y-6 bg-[#0b0b0b] p-6 rounded-2xl border border-white/5",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"price",className:Au,children:"List Price ()"}),m.jsx("input",{type:"number",id:"price",value:w,onChange:H=>A(H.target.value),className:Lh,placeholder:"499"})]}),m.jsx(RL,{bookDetails:{title:n,genre:d,description:c},onPriceSuggested:$})]}),m.jsxs("div",{className:"p-6 bg-[#0b0b0b] border border-white/5 rounded-2xl",children:[m.jsx(ML,{onCoverGenerated:ee,currentTitle:n,currentAuthor:a}),M&&m.jsxs("div",{className:"mt-6 p-4 bg-white/5 border border-white/10 flex items-center gap-4 rounded-xl",children:[m.jsx("img",{src:`data:image/jpeg;base64,${M.imageBytes}`,alt:"AI Cover",className:"w-12 h-16 object-cover bg-black rounded"}),m.jsxs("span",{className:"text-white text-[10px] font-bold uppercase tracking-widest flex items-center gap-2",children:[m.jsx(pi,{className:"w-3 h-3 text-green-500"})," Cover Attached"]})]}),!M&&m.jsxs("div",{className:"mt-6",children:[m.jsx("label",{className:Au,children:"Manual Cover URL"}),m.jsx("input",{type:"url",value:C,onChange:H=>T(H.target.value),className:Lh,placeholder:"https://..."})]})]}),m.jsx("div",{className:"pt-4 flex justify-end",children:m.jsx("button",{type:"submit",disabled:R||F,className:"px-10 py-4 bg-white text-black font-bold hover:bg-neutral-200 transition-all text-xs uppercase tracking-widest flex items-center justify-center gap-2 disabled:opacity-50 rounded-full shadow-glow-white hover:scale-105 active:scale-95",children:R?m.jsx(m.Fragment,{children:"Publishing..."}):m.jsxs(m.Fragment,{children:[m.jsx(Dk,{className:"w-4 h-4"})," Publish to Store"]})})})]})]})},J$=({className:i=""})=>m.jsxs("div",{className:`flex flex-col h-full w-full items-center justify-center bg-brand-card-dark rounded-lg p-8 text-center ${i}`,children:[m.jsx(a$,{className:"w-16 h-16 text-brand-accent mb-4"}),m.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Analytics Connected"}),m.jsxs("p",{className:"text-muted-foreground",children:["Your dashboard is now connected to Google Analytics. ",m.jsx("br",{}),"Real-time data will be displayed here soon."]})]}),K$="cowritter",Q$="user-data",Z$=async(i,e)=>(await new Promise(t=>setTimeout(t,800)),{success:!0,message:"Site is live!",url:`https://co-writter.github.io/s/${i}`}),e9=async i=>{try{const e=localStorage.getItem(`cowritter_site_${i}`);if(e)return JSON.parse(e)}catch{console.warn("Failed to load from local storage simulation")}try{const e=await fetch(`https://raw.githubusercontent.com/${K$}/${Q$}/main/users/${i}.json`);return e.ok?await e.json():null}catch(e){return console.error("Failed to load profile from GitHub:",e),null}},{useNavigate:t9}=gi,n9=[{id:1,name:"Alice Freeman",email:"alice.f...@gmail.com",location:"Mumbai, IN",time:"2 mins ago",status:"Signed In",action:"Viewed 'The Void Start'",avatar:"A"},{id:2,name:"Bob Script",email:"bob.script...@outlook.com",location:"London, UK",time:"15 mins ago",status:"Signed In",action:"Purchased 'Neural Architectures'",avatar:"B"},{id:3,name:"Guest User",email:"",location:"New York, US",time:"42 mins ago",status:"Guest",action:"Browsing Store",avatar:"?"},{id:4,name:"Diana Prince",email:"diana.p...@gmail.com",location:"Toronto, CA",time:"1 hour ago",status:"Signed In",action:"Added to Cart",avatar:"D"},{id:5,name:"Evan Wright",email:"evan.w...@yahoo.com",location:"Sydney, AU",time:"3 hours ago",status:"Signed In",action:"Viewed Profile",avatar:"E"},{id:6,name:"Guest User",email:"",location:"Berlin, DE",time:"5 hours ago",status:"Guest",action:"Read Preview",avatar:"?"}],i9=()=>{const{currentUser:i,updateSellerCreatorSite:e,addCreatedBook:t,setCurrentUser:n}=Yi(),s=i,[a,o]=k.useState("overview"),c=t9(),[u,d]=k.useState(!1),[p,y]=k.useState(null),[v,w]=k.useState(0);k.useEffect(()=>{let O=()=>{};return(async()=>{try{const{db:J}=await sl(async()=>{const{db:ee}=await import("./firebase-DZ3l171S.js");return{db:ee}},__vite__mapDeps([0,1])),{collection:G,onSnapshot:X,query:ie}=await sl(async()=>{const{collection:ee,onSnapshot:H,query:V}=await import("./index.esm-CtTi9zbD.js").then(Q=>Q.G);return{collection:ee,onSnapshot:H,query:V}},[]),$=ie(G(J,"leads"));O=X($,ee=>{w(ee.size)})}catch{console.log("Dashboard running in offline/demo mode")}})(),()=>O()},[]);const A=(s==null?void 0:s.uploadedBooks)||[],C=[{label:"Total Sales",value:"$12,450",change:"+12%",icon:m.jsx(eg,{className:"w-5 h-5 text-indigo-400"})},{label:"Active Readers",value:"450",change:"+5%",icon:m.jsx(ki,{className:"w-5 h-5 text-emerald-400"})},{label:"Newsletter Leads",value:v>0?v.toString():"0",change:"NEW",icon:m.jsx(vx,{className:"w-5 h-5 text-amber-400"})},{label:"Avg. Rating",value:"4.8",change:"+0.2",icon:m.jsx(JC,{className:"w-5 h-5 text-purple-400"})}],[T,_]=k.useState((s==null?void 0:s.creatorSite)||{isEnabled:!1,slug:s==null?void 0:s.name.toLowerCase().replace(/\s+/g,"-"),theme:"dark-minimal",profileImageUrl:(s==null?void 0:s.profileImageUrl)||"",displayName:(s==null?void 0:s.name)||"",tagline:"Author & Digital Creator",showcasedBookIds:[]});if(k.useEffect(()=>{s!=null&&s.creatorSite&&_(s.creatorSite)},[s]),!s)return null;const D=O=>{t(O),o("overview")},R=async()=>{if(!T.slug)return;d(!0),e(T);const O=await Z$(T.slug);O.success&&y(O.url||null),d(!1)},L=O=>{const{name:z,value:J,type:G}=O.target;if(G==="checkbox"){const{checked:X}=O.target;_(ie=>({...ie,[z]:X}))}else _(X=>({...X,[z]:J}))},F=({id:O,label:z,icon:J})=>m.jsxs("button",{onClick:()=>o(O),className:`w-full flex items-center gap-4 px-6 py-3.5 text-sm font-medium rounded-r-full transition-all duration-200 group ${a===O?"bg-[#34a853]/15 text-[#81c995] border-l-4 border-[#34a853]":"text-neutral-400 hover:bg-white/5 hover:text-white border-l-4 border-transparent"}`,children:[m.jsx(J,{className:`w-5 h-5 ${a===O?"text-[#81c995]":"text-neutral-500 group-hover:text-white"}`}),z]}),U=({id:O,label:z,icon:J})=>m.jsxs("button",{onClick:()=>o(O),className:`flex flex-col items-center justify-center py-2 px-4 flex-1 transition-colors ${a===O?"text-white":"text-neutral-500 hover:text-neutral-300"}`,children:[m.jsx(J,{className:`w-6 h-6 mb-1 ${a===O?"text-[#81c995]":"text-current"}`}),m.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wide",children:z})]}),M=s.isAdmin===!0||s.email==="subatomicerror@gmail.com";return m.jsxs("div",{className:"h-screen w-full bg-[#0b0b0b] font-sans text-white pt-16 flex overflow-hidden",children:[m.jsxs("aside",{className:"w-64 flex-shrink-0 border-r border-white/5 hidden md:flex flex-col bg-[#0b0b0b] z-20 h-full overflow-y-auto",children:[m.jsxs("nav",{className:"flex-1 space-y-1 pr-4 mt-6",children:[m.jsx(F,{id:"overview",label:"Overview",icon:eg}),m.jsx(F,{id:"audience",label:"Audience",icon:vx}),m.jsx(F,{id:"studio",label:"Content Manager",icon:YE}),m.jsx("div",{className:"my-4 border-t border-white/5 mx-6"}),m.jsx(F,{id:"settings",label:"Site Settings",icon:lf}),M&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"my-4 border-t border-white/5 mx-6"}),m.jsx(F,{id:"admin",label:"System Admin",icon:kk})]})]}),m.jsxs("div",{className:"p-6 border-t border-white/5",children:[m.jsx("button",{onClick:()=>n(i,It.USER),className:"text-xs font-medium text-neutral-500 hover:text-white transition-colors mb-4 block",children:"Switch to Reading Mode"}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-neutral-800 overflow-hidden border border-white/10",children:s.profileImageUrl?m.jsx("img",{src:s.profileImageUrl,alt:"",className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center text-neutral-500 font-bold",children:s.name[0]})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("p",{className:"text-sm font-bold truncate flex items-center gap-2",children:[s.name,s.isVerified&&m.jsx(pi,{className:"w-3 h-3 text-[#34a853]"})]}),m.jsx("p",{className:"text-xs text-neutral-500 truncate",children:M?"System Owner":"Writer Account"})]})]})]})]}),m.jsx("main",{className:"flex-1 h-full overflow-y-auto bg-[#0b0b0b] relative scroll-smooth",children:m.jsxs("div",{className:"p-4 md:p-8 pb-32",children:[" ",m.jsxs("div",{className:"mb-8 flex justify-between items-center",children:[m.jsxs("h1",{className:"text-xl md:text-2xl font-normal text-white",children:[a==="overview"&&(M?"Global Overview":"Dashboard Overview"),a==="audience"&&"Live Audience",a==="studio"&&"Content Manager",a==="settings"&&"Site Configuration",a==="admin"&&"System Administration"]}),a==="overview"&&m.jsx("button",{onClick:()=>c("/ebook-studio"),className:"md:hidden p-3 bg-white rounded-full text-black shadow-lg",children:m.jsx(lb,{className:"w-5 h-5"})})]}),a==="overview"&&m.jsxs("div",{className:"space-y-6 animate-fade-in",children:[m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:C.map((O,z)=>m.jsxs("div",{className:"bg-[#1e1e1e] p-6 rounded-3xl border border-white/5",children:[m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsx("div",{className:"p-3 rounded-full bg-white/5 text-white",children:O.icon}),m.jsx("span",{className:"text-xs font-bold bg-green-900/30 text-green-400 px-2 py-1 rounded-full",children:O.change})]}),m.jsx("h3",{className:"text-3xl font-normal text-white mb-1",children:O.value}),m.jsx("p",{className:"text-sm text-neutral-500",children:O.label})]},z))}),m.jsxs("div",{className:"bg-[#1e1e1e] rounded-3xl p-8 border border-white/5 h-[300px] md:h-[400px] relative group",children:[m.jsx("div",{className:"absolute top-6 right-8 z-10 opacity-0 group-hover:opacity-100 transition-opacity",children:m.jsxs("a",{href:"https://analytics.google.com/",target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 text-xs font-bold text-neutral-500 hover:text-[#81c995] bg-[#0b0b0b]/50 backdrop-blur px-3 py-1.5 rounded-full border border-white/5 hover:border-[#81c995]/30 transition-all",children:[m.jsx("span",{children:"Open Analytics"}),m.jsx(IA,{className:"w-3 h-3"})]})}),m.jsx(J$,{className:"w-full h-full",title:M?"Platform Revenue":"Revenue Trend"})]}),!M&&m.jsxs("div",{className:"bg-[#1e1e1e] rounded-3xl overflow-hidden border border-white/5",children:[m.jsxs("div",{className:"px-6 md:px-8 py-6 border-b border-white/5 flex justify-between items-center",children:[m.jsx("h3",{className:"text-lg font-medium",children:"Recent Uploads"}),m.jsx("button",{onClick:()=>o("studio"),className:"text-sm text-[#81c995] font-bold hover:underline",children:"View All"})]}),m.jsxs("div",{className:"divide-y divide-white/5",children:[A.slice(0,5).map(O=>m.jsxs("div",{className:"px-6 md:px-8 py-4 flex items-center justify-between hover:bg-white/5 transition-colors group",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("img",{src:O.coverImageUrl,className:"w-10 h-14 object-cover rounded bg-black",alt:""}),m.jsxs("div",{children:[m.jsx("p",{className:"font-bold text-sm text-white group-hover:text-[#a8c7fa] transition-colors line-clamp-1",children:O.title}),m.jsxs("p",{className:"text-xs text-neutral-500",children:["",O.price]})]})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("span",{className:"text-xs text-neutral-500 hidden sm:block",children:new Date(O.publicationDate).toLocaleDateString()}),m.jsx("button",{onClick:()=>c(`/edit-ebook/${O.id}`),className:"p-2 hover:bg-white/10 rounded-full text-neutral-400 hover:text-white",children:m.jsx(Ik,{className:"w-4 h-4"})})]})]},O.id)),A.length===0&&m.jsx("p",{className:"p-8 text-center text-neutral-500 text-sm",children:"No books uploaded yet."})]})]})]}),a==="audience"&&m.jsxs("div",{className:"animate-fade-in max-w-5xl mx-auto",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-sm font-bold uppercase tracking-widest text-neutral-500 mb-1",children:"Live Feed"}),m.jsx("p",{className:"text-neutral-400 text-xs",children:"Real-time visitor tracking"})]}),m.jsxs("div",{className:"flex items-center gap-2 bg-[#34a853]/10 px-3 py-1.5 rounded-full border border-[#34a853]/20",children:[m.jsxs("span",{className:"relative flex h-2 w-2",children:[m.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-[#34a853] opacity-75"}),m.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-[#34a853]"})]}),m.jsx("span",{className:"text-[10px] font-bold text-[#81c995] uppercase tracking-widest",children:"Active"})]})]}),m.jsx("div",{className:"space-y-3",children:n9.map(O=>m.jsxs("div",{className:"group bg-[#1e1e1e] hover:bg-[#252525] border border-white/5 hover:border-white/10 rounded-2xl p-4 flex flex-col md:flex-row md:items-center gap-4 transition-all duration-300",children:[m.jsxs("div",{className:"flex items-center gap-4 flex-1 min-w-[200px]",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-neutral-800 to-neutral-900 border border-white/10 flex items-center justify-center font-bold text-sm text-white shadow-inner",children:O.avatar}),m.jsxs("div",{children:[m.jsx("div",{className:"font-medium text-white text-sm",children:O.name}),m.jsx("div",{className:"text-xs text-neutral-500",children:O.email})]})]}),m.jsxs("div",{className:"flex items-center gap-2 md:w-[150px] text-neutral-400 text-sm",children:[m.jsx(XC,{className:"w-4 h-4 text-neutral-600"}),m.jsx("span",{children:O.location})]}),m.jsxs("div",{className:"flex-1 md:w-[250px]",children:[m.jsxs("div",{className:"flex items-center gap-2 text-white text-sm mb-0.5",children:[m.jsx(eg,{className:"w-3 h-3 text-[#a8c7fa]"}),m.jsx("span",{className:"truncate",children:O.action})]}),m.jsxs("div",{className:"text-[10px] text-neutral-500 font-mono flex items-center gap-1",children:[m.jsx(l$,{className:"w-3 h-3"})," ",O.time]})]}),m.jsx("div",{className:"md:w-[120px] flex justify-end",children:m.jsxs("span",{className:`px-2.5 py-1 rounded-full text-[10px] font-bold uppercase tracking-widest flex items-center gap-1.5 ${O.status==="Signed In"?"bg-[#34a853]/10 text-[#81c995] border border-[#34a853]/20":"bg-white/5 text-neutral-500 border border-white/5"}`,children:[m.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${O.status==="Signed In"?"bg-[#34a853]":"bg-neutral-500"}`}),O.status==="Signed In"?"User":"Guest"]})})]},O.id))})]}),a==="studio"&&m.jsxs("div",{className:"animate-fade-in max-w-5xl mx-auto space-y-12",children:[m.jsxs("div",{className:"bg-[#1e1e1e] border border-white/5 rounded-3xl overflow-hidden",children:[m.jsxs("div",{className:"p-8 border-b border-white/5 bg-white/[0.02]",children:[m.jsx("h2",{className:"text-xl font-bold text-white mb-1",children:"Your Manuscripts"}),m.jsx("p",{className:"text-sm text-neutral-500",children:"Edit content, update pricing, or manage visual assets."})]}),m.jsx("div",{className:"divide-y divide-white/5 max-h-[400px] overflow-y-auto custom-scrollbar",children:A.length>0?A.map(O=>m.jsxs("div",{className:"p-6 flex flex-col sm:flex-row items-center gap-6 hover:bg-white/[0.02] transition-colors group",children:[m.jsx("img",{src:O.coverImageUrl,alt:O.title,className:"w-16 h-24 object-cover rounded-lg shadow-lg bg-[#0b0b0b] border border-white/10"}),m.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[m.jsx("h3",{className:"font-bold text-white text-lg mb-1 group-hover:text-blue-400 transition-colors",children:O.title}),m.jsxs("div",{className:"flex items-center justify-center sm:justify-start gap-3 text-xs text-neutral-500 mb-2",children:[m.jsx("span",{className:"uppercase tracking-wider font-bold",children:O.genre}),m.jsx("span",{children:""}),m.jsxs("span",{className:"font-mono",children:["",O.price]})]}),m.jsx("p",{className:"text-xs text-neutral-600 line-clamp-1 max-w-md",children:O.description})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("button",{onClick:()=>c(`/read/${O.id}`),className:"p-3 rounded-full border border-white/10 text-neutral-400 hover:text-white hover:bg-white/10 transition-all",title:"Read Preview",children:m.jsx(c$,{className:"w-5 h-5"})}),m.jsxs("button",{onClick:()=>c(`/edit-ebook/${O.id}`),className:"px-6 py-3 rounded-full bg-white text-black font-bold text-xs uppercase tracking-widest hover:bg-neutral-200 transition-all flex items-center gap-2 shadow-lg hover:shadow-xl hover:scale-105 active:scale-95",children:[m.jsx(Ik,{className:"w-4 h-4"})," Edit"]})]})]},O.id)):m.jsxs("div",{className:"p-12 text-center text-neutral-500",children:[m.jsx(ki,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),m.jsx("p",{children:"You haven't uploaded any books yet."})]})})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[m.jsx("div",{className:"h-px flex-1 bg-white/10"}),m.jsx("span",{className:"text-xs font-bold text-neutral-500 uppercase tracking-widest",children:"Create New"}),m.jsx("div",{className:"h-px flex-1 bg-white/10"})]}),m.jsx(X$,{onBookUploaded:D})]})]}),a==="settings"&&m.jsxs("div",{className:"animate-fade-in grid grid-cols-1 lg:grid-cols-2 gap-8",children:[m.jsxs("div",{className:"bg-[#1e1e1e] rounded-3xl p-6 md:p-8 border border-white/5",children:[m.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[m.jsx("h2",{className:"text-xl font-medium",children:"Public Profile"}),p&&m.jsxs("a",{href:p,target:"_blank",rel:"noreferrer",className:"flex items-center gap-2 text-xs font-bold text-[#81c995] bg-[#34a853]/10 px-3 py-1 rounded-full",children:[m.jsx("span",{className:"w-2 h-2 rounded-full bg-[#34a853] animate-pulse"})," Live"]})]}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Display Name"}),m.jsx("input",{name:"displayName",value:T.displayName,onChange:L,className:"w-full bg-[#0b0b0b] border border-white/10 rounded-lg p-3 text-sm focus:outline-none focus:border-white/30 text-white"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Tagline"}),m.jsx("textarea",{name:"tagline",value:T.tagline,onChange:L,rows:3,className:"w-full bg-[#0b0b0b] border border-white/10 rounded-lg p-3 text-sm focus:outline-none focus:border-white/30 text-white resize-none"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Username (Slug)"}),m.jsxs("div",{className:"flex",children:[m.jsx("span",{className:"bg-[#151515] border border-r-0 border-white/10 text-neutral-500 px-3 py-3 text-sm rounded-l-lg hidden sm:block",children:"co-writter.github.io/"}),m.jsx("input",{name:"slug",value:T.slug,onChange:L,className:"flex-1 bg-[#0b0b0b] border border-white/10 rounded-lg sm:rounded-l-none p-3 text-sm focus:outline-none focus:border-white/30 text-white"})]})]}),m.jsx("button",{onClick:R,disabled:u,className:"w-full py-4 bg-white text-black font-bold rounded-xl hover:bg-neutral-200 transition-colors flex items-center justify-center gap-2 mt-4",children:u?"Deploying...":m.jsxs(m.Fragment,{children:[m.jsx(YE,{className:"w-5 h-5"})," Publish Site"]})})]})]}),m.jsxs("div",{className:"flex flex-col gap-6",children:[m.jsxs("div",{className:"bg-[#1e1e1e] rounded-3xl p-8 border border-white/5 flex flex-col items-center justify-center text-center",children:[m.jsx("div",{className:"w-20 h-20 bg-white/5 rounded-full flex items-center justify-center mb-4",children:m.jsx(LA,{className:"w-10 h-10 text-white"})}),m.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"GitHub Integration"}),m.jsx("p",{className:"text-sm text-neutral-400 max-w-xs mb-6",children:"Your creator site is hosted for free on GitHub Pages. Changes may take up to 2 minutes to propagate globally."}),p?m.jsxs("div",{className:"bg-[#0b0b0b] p-4 rounded-xl border border-white/10 w-full flex justify-between items-center",children:[m.jsx("span",{className:"text-xs text-neutral-500 truncate",children:p}),m.jsx("a",{href:p,target:"_blank",className:"text-[#81c995] hover:text-white",children:m.jsx(IA,{className:"w-4 h-4"})})]}):m.jsx("div",{className:"bg-[#0b0b0b] p-4 rounded-xl border border-white/10 w-full text-xs text-neutral-600",children:"Not deployed yet."})]}),m.jsx("div",{className:"bg-[#1e1e1e] rounded-3xl p-6 border border-white/5",children:m.jsx("button",{onClick:()=>n(i,It.USER),className:"w-full py-3 bg-white/5 hover:bg-white/10 text-white font-medium rounded-xl transition-colors text-sm",children:"Switch to Reader Mode"})})]})]}),a==="admin"&&M&&m.jsx("div",{className:"animate-fade-in space-y-6",children:m.jsxs("div",{className:"bg-[#1e1e1e] border border-white/5 rounded-3xl p-8",children:[m.jsx("h2",{className:"text-xl font-bold text-white mb-6",children:"Registered Users"}),m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full text-left border-collapse",children:[m.jsx("thead",{children:m.jsxs("tr",{className:"border-b border-white/10 text-neutral-500 text-xs uppercase tracking-widest",children:[m.jsx("th",{className:"py-4 px-2 font-bold",children:"User"}),m.jsx("th",{className:"py-4 px-2 font-bold",children:"Email"}),m.jsx("th",{className:"py-4 px-2 font-bold",children:"Role"}),m.jsx("th",{className:"py-4 px-2 font-bold text-right",children:"Action"})]})}),m.jsx("tbody",{className:"text-sm",children:Object.values(va).filter(O=>O.id!=="guest").map(O=>m.jsxs("tr",{className:"border-b border-white/5 last:border-0 hover:bg-white/5 transition-colors",children:[m.jsxs("td",{className:"py-4 px-2 font-medium text-white flex items-center gap-3",children:[m.jsx("div",{className:"w-8 h-8 rounded-full bg-neutral-800 flex items-center justify-center text-xs",children:O.profileImageUrl?m.jsx("img",{src:O.profileImageUrl,alt:"",className:"w-full h-full rounded-full"}):O.name[0]}),O.name]}),m.jsx("td",{className:"py-4 px-2 text-neutral-400",children:O.email}),m.jsx("td",{className:"py-4 px-2",children:m.jsx("span",{className:`px-2 py-1 rounded-full text-[10px] uppercase font-bold ${O.isAdmin?"bg-purple-900/30 text-purple-400 border border-purple-500/20":"uploadedBooks"in O?"bg-blue-900/30 text-blue-400 border border-blue-500/20":"bg-white/5 text-neutral-500"}`,children:O.isAdmin?"Admin":"uploadedBooks"in O?"Writer":"Reader"})}),m.jsx("td",{className:"py-4 px-2 text-right",children:m.jsx("button",{className:"text-xs text-neutral-500 hover:text-white underline",children:"Manage"})})]},O.id))})]})})]})})]})}),m.jsxs("div",{className:"md:hidden fixed bottom-0 left-0 right-0 h-20 bg-[#0b0b0b]/90 backdrop-blur-xl border-t border-white/10 flex items-center justify-around z-50 pb-safe",children:[m.jsx(U,{id:"overview",label:"Stats",icon:eg}),m.jsx(U,{id:"audience",label:"Visitors",icon:vx}),m.jsx(U,{id:"studio",label:"Content",icon:YE}),m.jsx(U,{id:"settings",label:"Config",icon:lf}),M&&m.jsx(U,{id:"admin",label:"Admin",icon:kk})]})]})},s9=()=>{const i="G-XXXXXXXXXX";{const e=document.createElement("script");e.async=!0,e.src=`https://www.googletagmanager.com/gtag/js?id=${i}`,document.head.appendChild(e),window.gtag("config",i,{send_page_view:!1})}},r9=i=>{window.gtag("event","page_view",{page_path:i})},{useNavigate:a9,useLocation:o9}=gi,kL=()=>{const{currentUser:i,userType:e}=Yi(),t=a9(),n=o9();return k.useEffect(()=>{r9(n.pathname)},[n]),k.useEffect(()=>{(e===It.GUEST||!i)&&t("/login")},[e,i,t]),e===It.GUEST||!i?null:m.jsx(m.Fragment,{children:e===It.USER?m.jsx(Y$,{}):m.jsx(i9,{})})},{useNavigate:l9}=gi,c9=()=>{const{cart:i,removeFromCart:e,clearCart:t,currentUser:n}=Yi(),s=l9(),[a,o]=k.useState(!1),c=n&&n.id!=="guest",u=i.reduce((A,C)=>A+C.price*C.quantity,0),p=u*.07,y=u+p,v=()=>new Promise(A=>{if(document.getElementById("razorpay-checkout-js")){A(!0);return}const C=document.createElement("script");C.id="razorpay-checkout-js",C.src="https://checkout.razorpay.com/v1/checkout.js",C.onload=()=>{A(!0)},C.onerror=()=>{A(!1)},document.body.appendChild(C)});k.useEffect(()=>{v()},[]);const w=async()=>{if(!c){s("/login");return}if(!await v()||!window.Razorpay){alert("Payment Gateway failed to load. Please check your connection."),o(!1);return}o(!0);const C={key:bL,amount:Math.round(y*100),currency:"INR",name:"Co-Writter Inc.",description:"Book Purchase",image:"https://raw.githubusercontent.com/atherosai/OpenStore.io/main/vite.svg",handler:function(T){console.log("Razorpay Response:",T),alert(`Payment Successful! Transaction ID: ${T.razorpay_payment_id}`),t(),s("/dashboard"),o(!1)},prefill:{name:(n==null?void 0:n.name)||"",email:(n==null?void 0:n.email)||"",contact:""},readonly:{email:!0,name:!0},notes:{items:i.map(T=>`${T.title} (Qty: ${T.quantity})`).join(", "),userId:n==null?void 0:n.id},theme:{color:"#000000"}};try{const T=new window.Razorpay(C);T.on("payment.failed",function(_){alert(`Payment Failed: ${_.error.description}`),o(!1)}),T.open()}catch(T){console.error("Error initializing Razorpay:",T),alert("Could not initiate payment."),o(!1)}};return i.length===0?m.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center relative overflow-hidden bg-transparent",children:[m.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-white/5 rounded-full blur-[100px] pointer-events-none"}),m.jsxs("div",{className:"relative z-10 flex flex-col items-center text-center animate-slide-up",children:[m.jsx("div",{className:"mb-8 opacity-50 grayscale hover:grayscale-0 transition-all duration-700 hover:opacity-100 hover:scale-110",children:m.jsx(Ya,{className:"w-32 h-32 bg-black border border-white/10 rounded-full",isActive:!1})}),m.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white tracking-tighter mb-4",children:"Cart is Empty"}),m.jsx("p",{className:"text-neutral-500 font-mono text-xs uppercase tracking-widest mb-10",children:"You haven't added any books yet."}),m.jsxs("button",{onClick:()=>s("/store"),className:"group relative px-8 py-4 bg-white text-black font-bold text-xs uppercase tracking-widest rounded-full hover:scale-105 transition-all shadow-[0_0_30px_rgba(255,255,255,0.3)] flex items-center gap-3 overflow-hidden",children:[m.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:[m.jsx(kA,{className:"w-4 h-4"})," Browse Books"]}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/50 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-700"})]})]})]}):m.jsxs("div",{className:"container mx-auto px-4 sm:px-6 pt-32 pb-20",children:[m.jsxs("header",{className:"mb-12 flex flex-col md:flex-row md:items-end justify-between gap-6 animate-slide-down",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[m.jsx("span",{className:"w-2 h-2 bg-google-green rounded-full animate-pulse"}),m.jsx("span",{className:"text-[10px] font-bold text-neutral-500 uppercase tracking-widest",children:"Secure Checkout"})]}),m.jsx("h1",{className:"text-4xl md:text-6xl font-black text-white tracking-tighter",children:"Your Cart"})]}),m.jsxs("p",{className:"text-neutral-400 text-sm font-mono text-right hidden md:block",children:["Order ID: ",Math.random().toString(36).substring(2,9).toUpperCase()]})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[m.jsx("div",{className:"lg:col-span-2 space-y-4",children:i.map((A,C)=>m.jsxs("div",{className:`group flex flex-col sm:flex-row items-center gap-6 p-6 bg-black/40 backdrop-blur-md border border-white/10 rounded-[24px] hover:border-white/30 hover:bg-white/5 transition-all duration-300 animate-slide-up-stagger delay-${C*100}`,children:[m.jsxs("div",{className:"shrink-0 relative",children:[m.jsx("img",{src:A.coverImageUrl,alt:A.title,className:"w-24 h-36 object-cover rounded-lg shadow-2xl border border-white/10 group-hover:scale-105 transition-transform duration-500"}),m.jsx("div",{className:"absolute inset-0 rounded-lg ring-1 ring-inset ring-white/10 group-hover:ring-white/30"})]}),m.jsxs("div",{className:"flex-1 text-center sm:text-left",children:[m.jsx("div",{className:"flex items-center justify-center sm:justify-start gap-2 mb-2",children:m.jsx("span",{className:"px-2 py-0.5 rounded-full bg-white/10 border border-white/5 text-[9px] font-bold text-neutral-300 uppercase tracking-widest",children:A.genre})}),m.jsx("h3",{className:"text-xl font-bold text-white mb-1 leading-tight",children:A.title}),m.jsxs("p",{className:"text-xs text-neutral-500 font-mono uppercase tracking-wide mb-4",children:["By ",A.author]}),m.jsx("div",{className:"flex items-center justify-center sm:justify-start gap-4",children:m.jsxs("button",{onClick:()=>e(A.id),className:"text-[10px] font-bold text-red-500 hover:text-red-400 uppercase tracking-widest flex items-center gap-1 transition-colors",children:[m.jsx(t$,{className:"w-3 h-3"})," Remove"]})})]}),m.jsxs("div",{className:"text-right",children:[m.jsxs("p",{className:"text-3xl font-light text-white tracking-tighter",children:["",(A.price*A.quantity).toFixed(0)]}),m.jsx("p",{className:"text-[10px] text-neutral-600 font-mono uppercase mt-1",children:"Price"})]})]},A.id))}),m.jsx("div",{className:"lg:col-span-1 h-fit sticky top-24 animate-slide-up-stagger delay-300",children:m.jsxs("div",{className:"bg-black/60 backdrop-blur-xl border border-white/10 p-8 rounded-[32px] shadow-[0_0_50px_rgba(0,0,0,0.5)] relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/2 pointer-events-none"}),m.jsx("h2",{className:"text-lg font-bold text-white uppercase tracking-widest mb-8 border-b border-white/10 pb-4",children:"Summary"}),m.jsxs("div",{className:"space-y-4 mb-8",children:[m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-neutral-400",children:"Subtotal"}),m.jsxs("span",{className:"text-white font-mono",children:["",u.toFixed(2)]})]}),m.jsxs("div",{className:"flex justify-between text-sm",children:[m.jsx("span",{className:"text-neutral-400",children:"Tax"}),m.jsxs("span",{className:"text-white font-mono",children:["",p.toFixed(2)]})]}),m.jsx("div",{className:"w-full h-px bg-white/10 my-2"}),m.jsxs("div",{className:"flex justify-between items-end",children:[m.jsx("span",{className:"text-white font-bold",children:"Total"}),m.jsxs("span",{className:"text-4xl font-black text-white tracking-tighter",children:["",y.toFixed(0)]})]})]}),c?m.jsx("button",{onClick:w,disabled:a,className:"w-full py-4 bg-white text-black font-black text-xs uppercase tracking-widest rounded-full hover:bg-neutral-200 hover:scale-[1.02] active:scale-[0.98] transition-all shadow-[0_0_20px_rgba(255,255,255,0.2)] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:a?"Processing...":m.jsxs(m.Fragment,{children:[m.jsx(n$,{className:"w-4 h-4"})," Pay Now"]})}):m.jsx("button",{onClick:()=>s("/login"),className:"w-full py-4 bg-white/10 text-white border border-white/20 font-bold text-xs uppercase tracking-widest rounded-full hover:bg-white hover:text-black transition-all",children:"Login to Purchase"}),m.jsxs("div",{className:"mt-6 flex items-center justify-center gap-2 text-[9px] text-neutral-600 font-mono uppercase tracking-widest",children:[m.jsx($a,{className:"w-3 h-3"})," Instant Download"]})]})})]})]})},{useNavigate:u9,Link:d9}=gi,Bk=()=>m.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[m.jsx("path",{d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z",fill:"#4285F4"}),m.jsx("path",{d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z",fill:"#34A853"}),m.jsx("path",{d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z",fill:"#FBBC05"}),m.jsx("path",{d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z",fill:"#EA4335"})]}),DL=()=>{const{currentUser:i,userType:e,setCurrentUser:t,handleEmailLogin:n}=Yi(),s=u9(),[a,o]=k.useState(!1),[c,u]=k.useState("social"),[d,p]=k.useState(""),[y,v]=k.useState(""),[w,A]=k.useState("");wn.useEffect(()=>{i&&e!==It.GUEST&&s("/dashboard")},[i,e,s]);const C=async()=>{if(window.location.hostname.includes("github.io")){const _=lC();window.location.href=`${_}/login`;return}o(!0);try{const{auth:_,googleProvider:D,signInWithPopup:R}=await sl(async()=>{const{auth:G,googleProvider:X,signInWithPopup:ie}=await import("./firebase-DZ3l171S.js");return{auth:G,googleProvider:X,signInWithPopup:ie}},__vite__mapDeps([0,1])),F=(await R(_,D)).user,U={id:`google_${F.uid}`,name:F.displayName||"Unknown User",email:F.email||"",purchaseHistory:[],wishlist:[],isVerified:F.emailVerified,profileImageUrl:F.photoURL||""},{db:M}=await sl(async()=>{const{db:G}=await import("./firebase-DZ3l171S.js");return{db:G}},__vite__mapDeps([0,1])),{doc:O,setDoc:z,serverTimestamp:J}=await sl(async()=>{const{doc:G,setDoc:X,serverTimestamp:ie}=await import("./index.esm-CtTi9zbD.js").then($=>$.G);return{doc:G,setDoc:X,serverTimestamp:ie}},[]);await z(O(M,"users",U.id),{...U,lastLogin:J(),userType:"user"},{merge:!0}),t(U,It.USER),s("/dashboard")}catch(_){console.error("Firebase Login Error",_),alert(_.message||"Authentication failed.")}finally{o(!1)}},T=async _=>{_.preventDefault(),A(""),o(!0);try{const D=await n(d.trim(),y.trim());D.success?s("/dashboard"):A(D.message||"Login failed.")}catch(D){console.error("Login Error:",D),A("System error. Check console for details.")}finally{o(!1)}};return m.jsx("div",{className:"min-h-screen w-full flex items-center justify-center p-4 relative font-sans selection:bg-white/20",children:m.jsxs("div",{className:"relative z-10 w-full max-w-sm flex flex-col items-center",children:[m.jsx("div",{className:"mb-10 scale-125 animate-float-delayed",children:m.jsx(Ya,{className:"w-24 h-24 border border-white/30 bg-black shadow-[0_0_50px_rgba(255,255,255,0.1)] rounded-full"})}),m.jsxs("div",{className:"w-full bg-black/40 backdrop-blur-2xl border border-white/10 p-8 shadow-[0_0_40px_rgba(0,0,0,0.8)] rounded-[32px] relative overflow-hidden transition-all duration-500 hover:border-white/20 hover:shadow-[0_0_60px_rgba(255,255,255,0.05)]",children:[m.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-white/30 to-transparent"}),m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("h1",{className:"text-2xl font-black tracking-tighter text-white mb-2",children:Fr}),m.jsx("p",{className:"text-[10px] text-neutral-500 font-mono uppercase tracking-[0.2em]",children:"Writing Platform"})]}),m.jsxs("div",{className:"flex bg-white/5 p-1 rounded-full mb-8 border border-white/5",children:[m.jsx("button",{onClick:()=>u("social"),className:`flex-1 py-2 rounded-full text-[10px] font-bold uppercase tracking-widest transition-all ${c==="social"?"bg-white text-black shadow-lg":"text-neutral-500 hover:text-white"}`,children:"Reader"}),m.jsx("button",{onClick:()=>u("email"),className:`flex-1 py-2 rounded-full text-[10px] font-bold uppercase tracking-widest transition-all ${c==="email"?"bg-white text-black shadow-lg":"text-neutral-500 hover:text-white"}`,children:"Admin / Writer"})]}),c==="social"&&m.jsxs("div",{className:"animate-fade-in",children:[m.jsxs("div",{className:"mb-6 relative group",children:[m.jsx("div",{className:"absolute -inset-0.5 bg-gradient-to-r from-white/10 to-neutral-700/30 rounded-full blur opacity-0 group-hover:opacity-100 transition duration-700"}),window.location.hostname.includes("github.io")?m.jsxs("a",{href:`${lC()}/login`,className:"relative w-full py-4 rounded-full bg-white/5 border border-white/10 text-white font-bold uppercase tracking-widest text-xs flex items-center justify-center gap-4 hover:bg-white/10 hover:border-white/30 transition-all duration-300 shadow-[0_0_20px_rgba(255,255,255,0.02)] hover:shadow-[0_0_30px_rgba(255,255,255,0.05)] hover:scale-[1.02] active:scale-[0.98]",children:[m.jsx(Bk,{}),m.jsx("span",{children:"Login to Studio"})]}):m.jsxs("button",{onClick:C,disabled:a,className:"relative w-full py-4 rounded-full bg-white/5 border border-white/10 text-white font-bold uppercase tracking-widest text-xs flex items-center justify-center gap-4 hover:bg-white/10 hover:border-white/30 transition-all duration-300 shadow-[0_0_20px_rgba(255,255,255,0.02)] hover:shadow-[0_0_30px_rgba(255,255,255,0.05)] hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed",children:[a?m.jsx("span",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):m.jsx(Bk,{}),m.jsx("span",{children:"Continue with Google"})]})]}),m.jsx("p",{className:"text-center text-[10px] text-neutral-500 px-4 leading-relaxed",children:"By continuing, you agree to our Terms of Service and confirm you have read our Privacy Policy."})]}),c==="email"&&m.jsxs("form",{onSubmit:T,className:"animate-fade-in space-y-4",children:[m.jsx("div",{children:m.jsx("input",{type:"text",placeholder:"Email or Username",value:d,onChange:_=>p(_.target.value),className:"w-full bg-[#0b0b0b] border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-white/40 placeholder-neutral-600 transition-colors",required:!0})}),m.jsx("div",{children:m.jsx("input",{type:"password",placeholder:"Password",value:y,onChange:_=>v(_.target.value),className:"w-full bg-[#0b0b0b] border border-white/10 rounded-xl px-4 py-3 text-sm text-white focus:outline-none focus:border-white/40 placeholder-neutral-600 transition-colors",required:!0})}),w&&m.jsx("div",{className:"text-red-400 text-xs bg-red-500/10 p-2 rounded-lg border border-red-500/20 text-center",children:w}),m.jsx("button",{type:"submit",disabled:a,className:"w-full py-4 rounded-full bg-white text-black font-bold uppercase tracking-widest text-xs hover:bg-neutral-200 transition-all shadow-[0_0_20px_rgba(255,255,255,0.1)] hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed mt-2",children:a?"Authenticating...":"Access Dashboard"}),m.jsx("div",{className:"text-center pt-2",children:m.jsx("p",{className:"text-[10px] text-neutral-600",children:"Restricted access for Owners & Paid Writers."})})]}),m.jsx("div",{className:"mt-6 pt-6 border-t border-white/5 text-center",children:m.jsx(d9,{to:"/",className:"text-neutral-600 hover:text-white text-[10px] font-bold uppercase tracking-widest transition-colors",children:"Cancel"})})]}),m.jsx("div",{className:"mt-8 text-center opacity-40 hover:opacity-100 transition-opacity duration-500",children:m.jsx("p",{className:"text-[9px] text-neutral-500 font-mono tracking-widest",children:"POWERED BY AI"})})]})})},{useNavigate:h9}=gi,f9=()=>{const{currentUser:i,userType:e,upgradeToSeller:t}=Yi(),n=h9(),[s,a]=k.useState(!1),[o,c]=k.useState("monthly"),u=async()=>{if(!i){n("/login");return}if(!await new Promise(w=>{if(window.Razorpay){w(!0);return}const A=document.createElement("script");A.src="https://checkout.razorpay.com/v1/checkout.js",A.onload=()=>w(!0),A.onerror=()=>w(!1),document.body.appendChild(A)})){alert("Could not load payment gateway. Please try again.");return}a(!0);const v={key:bL,amount:(o==="monthly"?444:4444)*100,currency:"INR",name:"My Ebook Store",description:`Pro Creator Subscription (${o})`,image:"https://raw.githubusercontent.com/atherosai/OpenStore.io/main/vite.svg",handler:function(w){console.log("Subscription Successful",w),t(),alert(`Welcome to the Writer Dashboard! Payment ID: ${w.razorpay_payment_id}`),n("/dashboard"),a(!1)},prefill:{name:i.name,email:i.email},theme:{color:"#000000"}};try{const w=new window.Razorpay(v);w.on("payment.failed",function(A){alert(`Payment Failed: ${A.error.description}`),a(!1)}),w.open()}catch(w){console.error("Payment initialization failed",w),a(!1)}};return m.jsxs("div",{className:"min-h-screen w-full relative bg-black selection:bg-white/20 font-sans",children:[m.jsxs("div",{className:"absolute inset-0 z-0 overflow-hidden pointer-events-none",children:[m.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[800px] h-[800px] bg-white/5 rounded-full blur-[120px]"}),m.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20"})]}),m.jsxs("div",{className:"container mx-auto px-4 sm:px-6 pt-24 pb-20 animate-fade-in max-w-7xl relative z-10",children:[m.jsxs("div",{className:"text-center mb-16 relative",children:[m.jsx("h1",{className:"text-4xl md:text-6xl font-black text-white mb-6 relative z-10 tracking-tighter",children:"Choose a Plan"}),m.jsx("p",{className:"text-neutral-400 text-lg max-w-2xl mx-auto relative z-10",children:"Start for free or upgrade to sell your own books and use AI tools."}),m.jsx("div",{className:"flex items-center justify-center mt-8 relative z-10",children:m.jsxs("div",{className:"bg-white/5 p-1 rounded-full border border-white/10 flex relative",children:[m.jsx("button",{onClick:()=>c("monthly"),className:`px-6 py-2 rounded-full text-sm font-bold transition-all duration-300 ${o==="monthly"?"bg-white text-black shadow-glow-white":"text-neutral-500 hover:text-white"}`,children:"Monthly"}),m.jsxs("button",{onClick:()=>c("yearly"),className:`px-6 py-2 rounded-full text-sm font-bold transition-all duration-300 ${o==="yearly"?"bg-white text-black shadow-glow-white":"text-neutral-500 hover:text-white"}`,children:["Yearly ",m.jsx("span",{className:"text-[9px] bg-google-green text-black px-1.5 py-0.5 rounded ml-1",children:"-15%"})]})]})})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[m.jsxs("div",{className:"bg-black border border-white/10 p-8 md:p-10 rounded-[32px] relative group shadow-2xl overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-white/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),m.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-white border border-white/10",children:m.jsx(ki,{className:"w-5 h-5"})}),m.jsx("h3",{className:"text-xl font-bold text-white",children:"Reader"})]}),m.jsxs("div",{className:"mb-6",children:[m.jsx("span",{className:"text-4xl font-black text-white",children:"Free"}),m.jsx("span",{className:"text-neutral-500 ml-2",children:"/ forever"})]}),m.jsx("p",{className:"text-neutral-400 text-sm mb-8 min-h-[40px]",children:"Read free books and build your personal collection."}),m.jsx("button",{onClick:()=>n("/store"),className:"w-full py-4 rounded-full border border-white/20 text-white font-bold hover:bg-white/10 transition-colors mb-8 uppercase tracking-widest text-xs",children:"Browse Books"}),m.jsx("div",{className:"space-y-4",children:["Read Unlimited Books","Saved Books List","Works on All Devices","Community Reviews","Personal Library"].map((d,p)=>m.jsxs("div",{className:"flex items-center gap-3 text-sm text-neutral-300",children:[m.jsx(pi,{className:"w-4 h-4 text-google-green flex-shrink-0"}),m.jsx("span",{children:d})]},p))})]}),m.jsxs("div",{className:"bg-black border border-white/10 p-8 md:p-10 rounded-[32px] relative shadow-2xl overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-google-blue to-transparent opacity-50"}),m.jsx("div",{className:"absolute top-6 right-6 px-3 py-1 bg-white text-black text-[10px] font-bold uppercase tracking-widest rounded-full shadow-glow-white",children:"Recommended"}),m.jsxs("div",{className:"flex items-center gap-3 mb-4 relative z-10",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-white text-black flex items-center justify-center shadow-lg",children:m.jsx(AL,{className:"w-5 h-5"})}),m.jsx("h3",{className:"text-xl font-bold text-white",children:"Writer"})]}),m.jsxs("div",{className:"mb-6 relative z-10",children:[m.jsxs("span",{className:"text-4xl font-black text-white",children:["",o==="monthly"?"444":"4,444"]}),m.jsxs("span",{className:"text-neutral-500 ml-2",children:["/ ",o==="monthly"?"mo":"yr"]})]}),m.jsx("p",{className:"text-neutral-400 text-sm mb-8 min-h-[40px] relative z-10",children:"Write with AI, publish your books, and sell them online."}),e===It.SELLER?m.jsxs("button",{disabled:!0,className:"w-full py-4 rounded-full bg-green-500/10 text-green-400 font-bold border border-green-500/50 mb-8 cursor-default flex items-center justify-center gap-2 uppercase tracking-widest text-xs",children:[m.jsx(pi,{className:"w-5 h-5"})," Current Plan"]}):m.jsx("button",{onClick:u,disabled:s,className:"w-full py-4 rounded-full bg-white text-black font-bold hover:bg-neutral-200 transition-colors shadow-glow-white mb-8 flex items-center justify-center gap-2 relative z-10 uppercase tracking-widest text-xs",children:s?"Processing...":m.jsxs(m.Fragment,{children:[m.jsx($a,{className:"w-4 h-4"})," Upgrade to Writer"]})}),m.jsx("div",{className:"space-y-4 relative z-10",children:["Everything in Reader","Publish Unlimited Books","Co-Author Assistant","AI Cover Creator","Your Own Profile Page","See Sales Stats","Keep 70% of Sales","Priority Support"].map((d,p)=>m.jsxs("div",{className:"flex items-center gap-3 text-sm text-white font-medium",children:[m.jsx("div",{className:"p-0.5 bg-white rounded-full",children:m.jsx(pi,{className:"w-3 h-3 text-black flex-shrink-0"})}),m.jsx("span",{children:d})]},p))})]})]}),m.jsx("div",{className:"mt-20 text-center border-t border-white/10 pt-10",children:m.jsxs("div",{className:"flex flex-col md:flex-row justify-center gap-8 md:gap-16 text-neutral-400 text-sm",children:[m.jsxs("div",{className:"flex items-center justify-center gap-3",children:[m.jsx(JC,{className:"w-5 h-5 text-yellow-500"}),m.jsx("span",{children:"Trusted by 10,000+ Creators"})]}),m.jsxs("div",{className:"flex items-center justify-center gap-3",children:[m.jsx("svg",{className:"w-5 h-5 text-google-green",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),m.jsx("span",{children:"Secure Payments"})]}),m.jsxs("div",{className:"flex items-center justify-center gap-3",children:[m.jsx("svg",{className:"w-5 h-5 text-google-blue",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),m.jsx("span",{children:"Cancel Anytime"})]})]})})]})]})},{useParams:p9,Link:XE}=gi,m9=()=>{const{slug:i}=p9(),[e,t]=k.useState(null),[n,s]=k.useState(null),[a,o]=k.useState([]),[c,u]=k.useState(!0);if(k.useEffect(()=>{i&&(async()=>{u(!0);try{const{db:y}=await sl(async()=>{const{db:D}=await import("./firebase-DZ3l171S.js");return{db:D}},__vite__mapDeps([0,1])),{collection:v,query:w,where:A,getDocs:C}=await sl(async()=>{const{collection:D,query:R,where:L,getDocs:F}=await import("./index.esm-CtTi9zbD.js").then(U=>U.G);return{collection:D,query:R,where:L,getDocs:F}},[]),T=w(v(y,"users"),A("creatorSite.slug","==",i)),_=await C(T);if(_.empty){const D=Object.values(va).find(R=>{var L;return((L=R.creatorSite)==null?void 0:L.slug)===i});if(D&&D.creatorSite&&D.creatorSite.isEnabled){t(D),s(D.creatorSite);const R=qd.filter(L=>D.creatorSite.showcasedBookIds.includes(L.id)&&L.sellerId===D.id);o(R)}else t(null),s(null),o([])}else{const R=_.docs[0].data();if(R.creatorSite&&R.creatorSite.isEnabled){t(R),s(R.creatorSite);const L=R.uploadedBooks||[];o(L)}else t(null)}}catch(y){console.error("Error fetching creator site:",y),t(null)}finally{u(!1)}})()},[i]),k.useEffect(()=>(n!=null&&n.theme&&(document.body.className="",document.body.classList.add(`theme-${n.theme}`,"creator-site-body","font-sans")),()=>{document.body.className="font-sans",document.body.style.backgroundColor="#080808"}),[n==null?void 0:n.theme]),c)return m.jsx("div",{className:"flex justify-center items-center min-h-screen bg-brand-bg-dark text-white",children:"Loading Creator Page..."});if(!e||!n)return m.jsxs("div",{className:"flex flex-col justify-center items-center min-h-screen bg-brand-bg-dark text-white p-6 text-center",children:[m.jsx(ki,{className:"w-20 h-20 text-brand-accent opacity-50 mb-6"}),m.jsx("h1",{className:"text-4xl font-bold mb-3",children:"Creator Page Not Found"}),m.jsx("p",{className:"text-neutral-400 mb-6",children:"The page you're looking for doesn't exist or hasn't been configured by the seller."}),m.jsxs(XE,{to:"/",className:"px-6 py-2.5 rounded-sm font-semibold transition-all duration-200 bg-brand-accent text-black hover:bg-brand-accent-darker",children:["Back to ",Fr]})]});const d=`theme-${n.theme}`;return m.jsxs("div",{className:`${d} pt-20`,children:[" ",m.jsxs("header",{className:"creator-site-header",children:[n.profileImageUrl&&m.jsx("img",{src:n.profileImageUrl,alt:n.displayName||e.name,className:"creator-site-profile-img"}),m.jsx("h1",{className:"creator-site-display-name",children:n.displayName||e.name}),n.tagline&&m.jsx("p",{className:"creator-site-tagline",children:n.tagline})]}),m.jsx("main",{className:"container mx-auto px-4 py-8",children:a.length>0?m.jsx("div",{className:"creator-site-books-grid",children:a.map(p=>m.jsxs("div",{className:"creator-site-book-card",children:[m.jsx("img",{src:p.coverImageUrl,alt:p.title,className:"creator-site-book-cover"}),m.jsxs("div",{className:"creator-site-book-info",children:[m.jsx("h2",{className:"creator-site-book-title",title:p.title,children:p.title}),m.jsxs("p",{className:"creator-site-book-author",children:["By ",p.author]}),m.jsxs("p",{className:"creator-site-book-price",children:["",p.price.toFixed(2)]}),m.jsxs(XE,{to:`/store?bookId=${p.id}`,className:"creator-site-book-button",target:"_blank",rel:"noopener noreferrer",children:["View on ",Fr]})]})]},p.id))}):m.jsx("p",{className:"text-center text-lg col-span-full py-10",children:"This creator hasn't showcased any eBooks yet."})}),m.jsx("footer",{className:"creator-site-footer",children:m.jsxs("p",{children:[" ",new Date().getFullYear()," ",n.displayName||e.name,". Powered by ",m.jsx(XE,{to:"/",target:"_blank",rel:"noopener noreferrer",children:Fr}),"."]})})]})},{useParams:g9,useNavigate:y9}=gi,Fh="w-full bg-[#0b0b0b] border border-white/10 rounded-xl p-4 text-sm text-white focus:outline-none focus:border-white/30 transition-all duration-200 placeholder-neutral-600 font-sans",Uh="block text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",v9=()=>{const{bookId:i}=g9(),e=y9(),t=Yi(),{allBooks:n,updateEBook:s,currentUser:a,userType:o}=t,[c,u]=k.useState(null),[d,p]=k.useState(""),[y,v]=k.useState(""),[w,A]=k.useState(""),[C,T]=k.useState(""),[_,D]=k.useState(""),[R,L]=k.useState("paid"),[F,U]=k.useState(""),[M,O]=k.useState(null),[z,J]=k.useState(!0),[G,X]=k.useState(!1),[ie,$]=k.useState(null);k.useEffect(()=>{if(!i){e("/dashboard");return}const ce=n.find(ve=>ve.id===i);ce?a&&o===It.SELLER&&ce.sellerId===a.id?(u(ce),p(ce.title),v(ce.author),A(ce.description),T(ce.genre),D(ce.price.toString()),L(ce.price===0?"free":"paid"),U(ce.coverImageUrl)):($("You do not have permission to edit this eBook."),setTimeout(()=>e("/dashboard"),3e3)):($("eBook not found."),setTimeout(()=>e("/dashboard"),3e3)),J(!1)},[i,n,e,a,o]);const ee=ce=>{R==="paid"&&D(ce)},H=ce=>{O(ce),U(`data:image/jpeg;base64,${ce.imageBytes}`)},V=ce=>{if(ce.preventDefault(),$(null),!c){$("No book selected for editing.");return}if(!d||!y||!w||!C){$("Please fill in all required fields.");return}let ve=0;if(R==="paid"){if(!_||isNaN(parseFloat(_))||parseFloat(_)<=0){$("Please enter a valid price.");return}ve=parseFloat(_)}else ve=0;X(!0);const q=M?`data:image/jpeg;base64,${M.imageBytes}`:F,Z={...c,title:d,author:y,description:w,genre:C,price:ve,coverImageUrl:q,publicationDate:c.publicationDate};s(Z),X(!1),e("/dashboard")};if(z)return m.jsx("div",{className:"min-h-screen bg-[#0b0b0b] flex items-center justify-center",children:m.jsx(Mg,{size:"lg",color:"text-white"})});if(ie&&!c)return m.jsxs("div",{className:"min-h-screen bg-[#0b0b0b] flex flex-col items-center justify-center text-center px-6",children:[m.jsx(ki,{className:"w-16 h-16 text-neutral-700 mb-6"}),m.jsx("h1",{className:"text-2xl font-bold text-white mb-2",children:"Access Denied"}),m.jsx("p",{className:"text-neutral-500 mb-8",children:ie}),m.jsx("button",{onClick:()=>e("/dashboard"),className:"bg-white text-black font-bold py-3 px-8 rounded-full hover:bg-neutral-200 transition-colors",children:"Back to Dashboard"})]});if(!c)return null;const Q={title:d,genre:C,description:w};return m.jsx("div",{className:"min-h-screen bg-[#0b0b0b] pt-24 pb-20 px-4 md:px-8 font-sans",children:m.jsxs("div",{className:"max-w-4xl mx-auto",children:[m.jsxs("div",{className:"flex items-center justify-between mb-8",children:[m.jsxs("button",{onClick:()=>e("/dashboard"),className:"flex items-center gap-2 text-neutral-400 hover:text-white transition-colors group",children:[m.jsx("div",{className:"w-8 h-8 rounded-full border border-white/10 flex items-center justify-center group-hover:bg-white group-hover:text-black transition-all",children:m.jsx(DA,{className:"w-4 h-4"})}),m.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Back"})]}),m.jsxs("h1",{className:"text-xl font-normal text-white flex items-center gap-3",children:["Edit ",m.jsx("span",{className:"text-neutral-500",children:"/"})," ",c.title]})]}),m.jsxs("form",{onSubmit:V,className:"bg-[#1e1e1e] border border-white/5 rounded-3xl p-8 md:p-10 shadow-2xl space-y-8 animate-slide-up",children:[m.jsxs("div",{className:"flex items-center gap-4 border-b border-white/5 pb-8 mb-8",children:[m.jsx("div",{className:"w-12 h-12 bg-white/5 rounded-2xl flex items-center justify-center text-white border border-white/10",children:m.jsx($c,{className:"w-6 h-6"})}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-normal text-white",children:"Book Configuration"}),m.jsx("p",{className:"text-neutral-500 text-sm",children:"Update metadata, pricing, and visual assets."})]})]}),ie&&m.jsx("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-xl text-red-400 text-sm font-medium",children:ie}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{htmlFor:"title",className:Uh,children:"Book Title"}),m.jsx("input",{type:"text",id:"title",value:d,onChange:ce=>p(ce.target.value),required:!0,className:Fh})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"author",className:Uh,children:"Author Name"}),m.jsx("input",{type:"text",id:"author",value:y,onChange:ce=>v(ce.target.value),required:!0,className:Fh})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"genre",className:Uh,children:"Genre"}),m.jsx("input",{type:"text",id:"genre",value:C,onChange:ce=>T(ce.target.value),required:!0,placeholder:"e.g. Sci-Fi",className:Fh})]}),m.jsxs("div",{className:"md:col-span-2",children:[m.jsx("label",{htmlFor:"description",className:Uh,children:"Description"}),m.jsx("textarea",{id:"description",value:w,onChange:ce=>A(ce.target.value),rows:4,required:!0,className:`${Fh} min-h-[120px] resize-none`})]})]}),m.jsxs("div",{className:"p-6 bg-[#0b0b0b] border border-white/5 rounded-2xl",children:[m.jsx("h3",{className:"text-lg font-medium text-white mb-6",children:"Monetization Strategy"}),m.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:[m.jsxs("button",{type:"button",onClick:()=>L("paid"),className:`p-5 rounded-2xl border text-left transition-all group ${R==="paid"?"bg-white text-black border-white":"bg-transparent border-white/10 hover:border-white/20"}`,children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${R==="paid"?"bg-black text-white":"bg-white/10 text-neutral-400"}`,children:m.jsx(WC,{className:"w-4 h-4"})}),R==="paid"&&m.jsx(pi,{className:"w-5 h-5 text-black"})]}),m.jsx("h4",{className:`font-bold mb-1 ${R==="paid"?"text-black":"text-white"}`,children:"Premium Asset"}),m.jsx("p",{className:`text-xs ${R==="paid"?"text-neutral-600":"text-neutral-500"}`,children:"Set a price and earn royalties."})]}),m.jsxs("button",{type:"button",onClick:()=>L("free"),className:`p-5 rounded-2xl border text-left transition-all group ${R==="free"?"bg-white text-black border-white":"bg-transparent border-white/10 hover:border-white/20"}`,children:[m.jsxs("div",{className:"flex items-center justify-between mb-3",children:[m.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${R==="free"?"bg-black text-white":"bg-white/10 text-neutral-400"}`,children:m.jsx($a,{className:"w-4 h-4"})}),R==="free"&&m.jsx(pi,{className:"w-5 h-5 text-black"})]}),m.jsx("h4",{className:`font-bold mb-1 ${R==="free"?"text-black":"text-white"}`,children:"Growth Magnet"}),m.jsx("p",{className:`text-xs ${R==="free"?"text-neutral-600":"text-neutral-500"}`,children:"Free distribution for readers."})]})]}),R==="paid"&&m.jsxs("div",{className:"animate-fade-in space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"price",className:Uh,children:"List Price (INR)"}),m.jsx("input",{type:"number",id:"price",value:_,onChange:ce=>D(ce.target.value),step:"0.01",min:"1",required:R==="paid",className:Fh,placeholder:"499"})]}),m.jsx(RL,{bookDetails:Q,onPriceSuggested:ee})]})]}),m.jsxs("div",{className:"p-6 bg-[#0b0b0b] border border-white/5 rounded-2xl",children:[m.jsx("h3",{className:"text-lg font-medium text-white mb-6",children:"Cover Art"}),m.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[m.jsxs("div",{className:"w-full md:w-1/3 shrink-0",children:[m.jsx("div",{className:"aspect-[3/4] bg-[#1e1e1e] rounded-xl overflow-hidden border border-white/10 relative group",children:F?m.jsx("img",{src:F,alt:"Preview",className:"w-full h-full object-cover"}):m.jsxs("div",{className:"w-full h-full flex flex-col items-center justify-center text-neutral-600",children:[m.jsx(ki,{className:"w-12 h-12 mb-2 opacity-50"}),m.jsx("span",{className:"text-xs uppercase tracking-widest",children:"No Cover"})]})}),m.jsxs("div",{className:"mt-4",children:[m.jsx("label",{htmlFor:"manualCover",className:Uh,children:"Manual URL"}),m.jsx("input",{type:"url",id:"manualCover",value:M?"":F,onChange:ce=>{U(ce.target.value),O(null)},className:Fh,placeholder:"https://..."})]})]}),m.jsx("div",{className:"w-full md:w-2/3",children:m.jsx(ML,{onCoverGenerated:H,currentTitle:d,currentAuthor:y})})]})]}),m.jsxs("div",{className:"pt-6 border-t border-white/5 flex items-center justify-end gap-4",children:[m.jsx("button",{type:"button",onClick:()=>e("/dashboard"),className:"px-8 py-4 rounded-full border border-white/10 text-white font-bold text-xs uppercase tracking-widest hover:bg-white/5 transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:G,className:"px-8 py-4 rounded-full bg-white text-black font-bold text-xs uppercase tracking-widest hover:bg-neutral-200 transition-all shadow-glow-white disabled:opacity-50 flex items-center gap-2",children:G?m.jsx(Mg,{size:"sm",color:"text-black"}):m.jsxs(m.Fragment,{children:[m.jsx(pi,{className:"w-4 h-4"})," Save Changes"]})})]})]})]})})},x9=({title:i,onTitleChange:e,content:t,onContentChange:n,onTriggerAI:s,onTriggerImageGen:a})=>{const o=$=>{if(!$)return[{id:Date.now().toString(),type:"p",content:""}];const ee=$.split(`
`),H=[];for(const V of ee)if(V.startsWith("# "))H.push({id:Math.random().toString(),type:"h1",content:V.replace("# ","")});else if(V.startsWith("## "))H.push({id:Math.random().toString(),type:"h2",content:V.replace("## ","")});else if(V.startsWith("- "))H.push({id:Math.random().toString(),type:"ul",content:V.replace("- ","")});else if(V.startsWith("> "))H.push({id:Math.random().toString(),type:"blockquote",content:V.replace("> ","")});else if(V.startsWith("![")){const Q=V.match(/\((.*?)\)/);Q&&H.push({id:Math.random().toString(),type:"image",content:Q[1]})}else H.push({id:Math.random().toString(),type:"p",content:V});return H.length===0&&H.push({id:Date.now().toString(),type:"p",content:""}),H},c=$=>$.map(ee=>ee.type==="h1"?`# ${ee.content}`:ee.type==="h2"?`## ${ee.content}`:ee.type==="ul"?`- ${ee.content}`:ee.type==="blockquote"?`> ${ee.content}`:ee.type==="image"?`![Image](${ee.content})`:ee.type==="image-prompt"?"":ee.content).join(`

`),[u,d]=k.useState(()=>o(t)),[p,y]=k.useState(0),[v,w]=k.useState(!1),[A,C]=k.useState({top:0,left:0}),[T,_]=k.useState(""),[D,R]=k.useState(0),L=k.useRef([]);k.useEffect(()=>{const $=c(u);$!==t&&!u.some(ee=>ee.type==="image-prompt")&&n($)},[u]),k.useEffect(()=>{const $=c(u);t!==$&&d(o(t))},[t]);const U=[{label:"Heading 1",type:"h1",icon:p$,desc:"Big section header"},{label:"Heading 2",type:"h2",icon:m$,desc:"Medium subsection header"},{label:"Bullet List",type:"ul",icon:h$,desc:"Simple bulleted list"},{label:"Quote",type:"blockquote",icon:f$,desc:"Capture a quote"},{label:"Text",type:"p",icon:EL,desc:"Plain text paragraph"},{label:"Ask Co-Author",action:"ai",icon:$c,desc:"Generate text with AI",highlight:!0},{label:"Generate Image",action:"img",icon:o$,desc:"Create art from description",highlight:!0}].filter($=>$.label.toLowerCase().includes(T.toLowerCase())||$.desc.toLowerCase().includes(T.toLowerCase())),M=()=>{var H;const $=window.getSelection();if($&&$.rangeCount>0){const Q=$.getRangeAt(0).getBoundingClientRect(),ce=(H=L.current[p])==null?void 0:H.closest(".editor-container");if(ce){const ve=ce.getBoundingClientRect();C({top:Q.bottom-ve.top+8,left:Q.left-ve.left}),w(!0),_(""),R(0);return}}const ee=L.current[p];ee&&(C({top:ee.offsetTop+ee.clientHeight+8,left:ee.offsetLeft}),w(!0),_(""),R(0))},O=()=>{w(!1),_(""),R(0)},z=$=>{const ee=[...u];if(ee[p].content="",$.action)if($.action==="img")ee[p].type="image-prompt",d(ee),O();else{d(ee),O();const H=window.prompt("Instruction for Co-Author:");H&&s(H)}else ee[p].type=$.type,d(ee),O(),setTimeout(()=>{var H;return(H=L.current[p])==null?void 0:H.focus()},0)},J=($,ee)=>{var H,V;if(v){if($.key==="ArrowDown"){$.preventDefault(),R(Q=>(Q+1)%U.length);return}if($.key==="ArrowUp"){$.preventDefault(),R(Q=>(Q-1+U.length)%U.length);return}if($.key==="Enter"){$.preventDefault(),U[D]&&z(U[D]);return}if($.key==="Escape"){$.preventDefault(),O();return}}if($.key==="Enter"&&!$.shiftKey){$.preventDefault();const Q={id:Date.now().toString(),type:"p",content:""},ce=[...u];ce.splice(ee+1,0,Q),d(ce),y(ee+1),setTimeout(()=>{var ve;return(ve=L.current[ee+1])==null?void 0:ve.focus()},0)}else if($.key==="Backspace"&&u[ee].content===""){if($.preventDefault(),u.length>1){const Q=[...u];Q.splice(ee,1),d(Q),y(Math.max(0,ee-1)),setTimeout(()=>{var ce;return(ce=L.current[Math.max(0,ee-1)])==null?void 0:ce.focus()},0)}}else $.key==="ArrowUp"&&!v?ee>0&&($.preventDefault(),y(ee-1),(H=L.current[ee-1])==null||H.focus()):$.key==="ArrowDown"&&!v&&ee<u.length-1&&($.preventDefault(),y(ee+1),(V=L.current[ee+1])==null||V.focus())},G=($,ee)=>{const H=$.currentTarget.innerText,V=[...u];V[ee].content=H,d(V),H.startsWith("/")?(v||M(),_(H.substring(1)),R(0)):v&&O()},X=($,ee)=>{if(!ee.trim())return;a(ee);const H=[...u];H[$]={...H[$],type:"p",content:`*Creating visual: "${ee}"...*`};const V={id:Date.now().toString(),type:"p",content:""};H.splice($+1,0,V),d(H),y($+1),setTimeout(()=>{var Q;return(Q=L.current[$+1])==null?void 0:Q.focus()},0)},ie=$=>{const ee=[...u];ee[$]={...ee[$],type:"p",content:""},d(ee),setTimeout(()=>{var H;return(H=L.current[$])==null?void 0:H.focus()},0)};return m.jsxs("div",{className:"editor-container w-full max-w-4xl mx-auto min-h-screen relative font-sans flex flex-col pt-10 pb-32",children:[m.jsx("div",{className:"px-12 mb-8 group",children:m.jsx("input",{type:"text",value:i,onChange:$=>e($.target.value),className:"w-full bg-transparent text-5xl font-bold text-white border-none outline-none placeholder-neutral-700 leading-tight",placeholder:"Untitled"})}),m.jsx("div",{className:"px-12 relative flex-1",children:u.map(($,ee)=>m.jsxs("div",{className:"group relative mb-2",children:[$.type!=="image-prompt"&&m.jsx("div",{className:"absolute -left-8 top-1 opacity-0 group-hover:opacity-100 cursor-grab text-neutral-600 hover:text-white transition-opacity select-none",children:m.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:"::"})}),$.type==="image"?m.jsx("div",{className:"rounded-lg overflow-hidden border border-white/10 my-4 bg-black/20",children:m.jsx("img",{src:$.content,alt:"Generated",className:"w-full h-auto"})}):$.type==="image-prompt"?m.jsxs("div",{className:"my-4 p-1.5 pl-3 bg-[#151515] border border-white/20 rounded-full flex items-center gap-3 w-full max-w-xl shadow-2xl animate-fade-in focus-within:border-white/40 focus-within:ring-1 focus-within:ring-white/20 transition-all",children:[m.jsx($c,{className:"w-4 h-4 text-purple-400 flex-shrink-0"}),m.jsx("input",{autoFocus:!0,type:"text",placeholder:"Describe the image (e.g. A cyberpunk city in rain)...",className:"flex-1 bg-transparent border-none outline-none text-sm text-white placeholder-neutral-500 h-8 min-w-0",value:$.content,onChange:H=>{const V=[...u];V[ee].content=H.target.value,d(V)},onKeyDown:H=>{var V,Q;H.key==="Enter"&&(H.preventDefault(),X(ee,$.content)),H.key==="Escape"&&(H.preventDefault(),ie(ee)),H.key==="ArrowUp"&&ee>0&&(H.preventDefault(),(V=L.current[ee-1])==null||V.focus()),H.key==="ArrowDown"&&ee<u.length-1&&(H.preventDefault(),(Q=L.current[ee+1])==null||Q.focus())}}),m.jsxs("div",{className:"flex items-center gap-2 pr-1",children:[m.jsx("button",{onClick:()=>X(ee,$.content),className:"px-6 py-2 bg-white text-black rounded-full text-[10px] font-bold uppercase tracking-widest hover:bg-neutral-200 transition-all shadow-[0_0_15px_rgba(255,255,255,0.3)] hover:scale-105 active:scale-95 flex-shrink-0",title:"Generate Visual",children:"ENTER"}),m.jsx("button",{onClick:()=>ie(ee),className:"w-8 h-8 rounded-full text-neutral-500 hover:text-white flex items-center justify-center transition-colors hover:bg-white/10",title:"Cancel",children:m.jsx(Yc,{className:"w-4 h-4"})})]})]}):m.jsx("div",{ref:H=>{L.current[ee]=H},contentEditable:!0,suppressContentEditableWarning:!0,onKeyDown:H=>J(H,ee),onInput:H=>G(H,ee),onFocus:()=>y(ee),className:`w-full outline-none empty:before:content-[attr(data-placeholder)] empty:before:text-neutral-700
                                ${$.type==="h1"?"text-4xl font-bold text-white mb-4 mt-6":$.type==="h2"?"text-2xl font-bold text-neutral-200 mb-3 mt-4":$.type==="ul"?"list-disc list-inside text-lg text-neutral-300 pl-4 border-l-2 border-transparent":$.type==="blockquote"?"text-xl italic text-neutral-400 border-l-4 border-white/20 pl-4 py-2 my-4":"text-lg text-neutral-300 leading-relaxed"}
                            `,"data-placeholder":$.type==="p"&&ee===0&&u.length===1?"Start writing or type '/' for commands...":"Type '/' for commands",children:$.content})]},$.id))}),v&&m.jsxs("div",{className:"absolute z-50 w-72 bg-[#121212]/95 backdrop-blur-xl border border-white/10 rounded-xl shadow-[0_10px_40px_rgba(0,0,0,0.8)] overflow-hidden animate-slide-up origin-top-left flex flex-col ring-1 ring-white/10",style:{top:A.top,left:A.left},children:[m.jsxs("div",{className:"px-3 py-2 text-[10px] font-bold text-neutral-500 uppercase tracking-widest border-b border-white/5 flex justify-between items-center bg-white/[0.02]",children:[m.jsx("span",{children:"Blocks"}),m.jsx("button",{onClick:O,className:"hover:text-white transition-colors",children:m.jsx(Yc,{className:"w-3 h-3"})})]}),m.jsx("div",{className:"p-1 max-h-[320px] overflow-y-auto custom-scrollbar",children:U.length>0?U.map(($,ee)=>m.jsxs("button",{onMouseDown:H=>{H.preventDefault(),z($)},onMouseEnter:()=>R(ee),className:`w-full flex items-center gap-3 p-2 rounded-lg text-left transition-colors group cursor-pointer ${ee===D?"bg-white/10":"hover:bg-white/5"}`,children:[m.jsx("div",{className:`w-10 h-10 rounded border flex items-center justify-center transition-colors shadow-sm ${$.highlight?"bg-indigo-500/20 border-indigo-500/30 text-indigo-400":"bg-white/5 border-white/10 text-white"}`,children:m.jsx($.icon,{className:"w-5 h-5"})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("div",{className:`text-sm font-bold truncate ${$.highlight?"text-indigo-300":"text-white"}`,children:$.label}),m.jsx("div",{className:"text-[10px] text-neutral-500 truncate",children:$.desc})]})]},$.label)):m.jsx("div",{className:"p-4 text-center text-neutral-500 text-xs",children:"No matching commands"})})]})]})},b9=({isOpen:i,onClose:e,content:t,isStreaming:n,chapterTitle:s})=>{const a=k.useRef(null),[o,c]=k.useState(""),[u,d]=k.useState({tps:0,stability:100,sync:0}),[p,y]=k.useState(null),[v,w]=k.useState(!1);if(k.useEffect(()=>{if(a.current){const C=a.current;C.scrollHeight-C.scrollTop-C.clientHeight<300&&C.scrollTo({top:C.scrollHeight,behavior:"smooth"})}},[o]),k.useEffect(()=>{if(!i)return;c(t);const C=t.match(/!\[.*?\]\((.*?)\)/g);if(C){const _=C[C.length-1].match(/\((.*?)\)/);_&&_[1]!==p&&(w(!0),setTimeout(()=>{y(_[1]),w(!1)},2e3))}if(n){const T=setInterval(()=>{d({tps:Math.floor(Math.random()*40)+90,stability:98+Math.random()*2,sync:Math.min(100,u.sync+2)})},800);return()=>clearInterval(T)}else d(T=>({...T,sync:100,tps:0}))},[t,i,n]),!i)return null;const A=()=>o.split(/(!\[.*?\]\(.*?\))/g).map((T,_)=>{var D,R;if(T.match(/!\[.*?\]\(.*?\)/)){const L=(D=T.match(/\((.*?)\)/))==null?void 0:D[1],F=((R=T.match(/!\[(.*?)\]/))==null?void 0:R[1])||"Visual Asset";if(!L)return null;const U=L===p&&v;return m.jsxs("div",{className:"my-12 w-full flex flex-col items-center",children:[m.jsxs("div",{className:`
                          relative w-full max-w-3xl aspect-video rounded-lg overflow-hidden transition-all duration-1000
                          ${U?"scale-95 opacity-80 blur-sm":"scale-100 opacity-100 blur-0 shadow-2xl shadow-indigo-500/10"}
                      `,children:[U&&m.jsx("div",{className:"absolute inset-0 z-10 bg-white/5 backdrop-blur-md flex items-center justify-center border border-white/10",children:m.jsxs("div",{className:"flex flex-col items-center gap-3",children:[m.jsx($c,{className:"w-6 h-6 text-white animate-spin-slow"}),m.jsx("span",{className:"text-[10px] uppercase tracking-[0.3em] text-white/70",children:"Materializing Visual..."})]})}),m.jsx("img",{src:L,alt:F,className:"w-full h-full object-cover animate-fade-in"}),m.jsx("div",{className:"absolute top-0 left-0 right-0 h-12 bg-gradient-to-b from-black/60 to-transparent pointer-events-none"}),m.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-12 bg-gradient-to-t from-black/60 to-transparent pointer-events-none"})]}),m.jsxs("span",{className:"mt-4 text-[10px] uppercase tracking-widest text-neutral-600 font-medium",children:["Fig. ",_+1,"  ",F]})]},_)}return m.jsx("div",{className:"animate-slide-up",children:T.split(`
`).map((L,F)=>L.trim()?L.startsWith("# ")?m.jsx("h1",{className:"text-4xl md:text-5xl font-serif text-white font-medium mb-8 mt-12 leading-tight tracking-tight",children:L.replace("# ","")},F):L.startsWith("## ")?m.jsx("h2",{className:"text-2xl md:text-3xl font-serif text-white/90 mb-6 mt-10 leading-snug",children:L.replace("## ","")},F):m.jsx("p",{className:"mb-6 text-lg md:text-xl leading-relaxed text-neutral-300 font-serif font-light tracking-wide mix-blend-screen",children:L.replace(/\*\*(.*?)\*\*/g,(U,M)=>M)},F):m.jsx("div",{className:"h-6"},F))},_)});return m.jsxs("div",{className:"fixed inset-0 z-[100] bg-black text-white overflow-hidden flex flex-col font-sans",children:[m.jsxs("div",{className:"absolute inset-0 pointer-events-none z-0",children:[m.jsx("div",{className:`
                absolute top-[-20%] left-[-10%] w-[50%] h-[50%] bg-indigo-900/20 rounded-full blur-[120px] transition-all duration-[2000ms]
                ${n?"opacity-60 scale-110 translate-y-10":"opacity-30 scale-100"}
            `}),m.jsx("div",{className:`
                absolute bottom-[-10%] right-[-10%] w-[60%] h-[60%] bg-violet-900/10 rounded-full blur-[150px] transition-all duration-[3000ms]
                ${n?"opacity-50 scale-105 -translate-y-10":"opacity-20 scale-100"}
            `}),m.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-[0.03]"})]}),m.jsxs("header",{className:"relative z-20 h-20 px-8 flex items-center justify-between backdrop-blur-sm",children:[m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("div",{className:"relative group",children:[m.jsx("div",{className:`absolute -inset-2 bg-white/5 rounded-full blur-md transition-opacity duration-500 ${n?"opacity-100":"opacity-0"}`}),m.jsx(Ya,{className:"w-10 h-10 border border-white/10 bg-black/50 shadow-2xl",isActive:n})]}),m.jsxs("div",{children:[m.jsx("h2",{className:"text-sm font-bold tracking-[0.2em] text-white uppercase",children:"Co-Author"}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${n?"bg-green-500 animate-pulse":"bg-neutral-600"}`}),m.jsx("p",{className:"text-[10px] text-neutral-500 font-medium uppercase tracking-widest",children:n?"Neural Engine Active":"Standby"})]})]})]}),m.jsxs("button",{onClick:e,className:"group flex items-center gap-3 px-6 py-2.5 rounded-full bg-white/5 hover:bg-white/10 border border-white/5 transition-all hover:scale-105 active:scale-95 backdrop-blur-md",children:[m.jsx("span",{className:"text-xs font-bold tracking-widest text-neutral-400 group-hover:text-white transition-colors",children:"EXIT STUDIO"}),m.jsx(Yc,{className:"w-4 h-4 text-neutral-500 group-hover:text-white transition-colors"})]})]}),m.jsx("main",{className:"relative z-10 flex-1 overflow-hidden flex justify-center",children:m.jsxs("div",{ref:a,className:"w-full max-w-4xl h-full overflow-y-auto custom-scrollbar px-6 md:px-12 py-12 scroll-smooth",children:[m.jsx("div",{className:"flex justify-center mb-16 opacity-0 animate-fade-in",style:{animationDelay:"0.2s"},children:m.jsx("div",{className:"px-4 py-1.5 rounded-full border border-white/10 bg-white/[0.02] backdrop-blur-md",children:m.jsxs("span",{className:"text-[10px] font-bold text-neutral-500 uppercase tracking-[0.2em]",children:["Drafting: ",s]})})}),m.jsxs("article",{className:"prose prose-invert max-w-none",children:[A(),n&&m.jsx("div",{className:"inline-block w-1 h-6 ml-1 bg-gradient-to-t from-transparent via-white to-transparent opacity-80 animate-pulse align-middle shadow-[0_0_10px_rgba(255,255,255,0.5)]"})]}),m.jsx("div",{className:"h-32"})]})}),m.jsx("div",{className:"absolute bottom-8 left-0 right-0 z-30 flex justify-center pointer-events-none",children:m.jsxs("div",{className:"flex items-center gap-6 px-8 py-3 bg-[#0a0a0a]/80 backdrop-blur-xl border border-white/10 rounded-full shadow-[0_20px_50px_rgba(0,0,0,0.5)] pointer-events-auto transition-transform duration-500 hover:scale-105",children:[m.jsxs("div",{className:"flex items-center gap-3 border-r border-white/5 pr-6",children:[m.jsx(AL,{className:"w-4 h-4 text-neutral-500"}),m.jsxs("div",{className:"flex flex-col",children:[m.jsx("span",{className:"text-sm font-bold text-white tabular-nums leading-none",children:u.tps}),m.jsx("span",{className:"text-[8px] uppercase tracking-widest text-neutral-600 font-bold",children:"Tokens/s"})]})]}),m.jsxs("div",{className:"flex items-center gap-3 border-r border-white/5 pr-6",children:[m.jsx(lw,{className:"w-4 h-4 text-neutral-500"}),m.jsxs("div",{className:"flex flex-col",children:[m.jsxs("span",{className:"text-sm font-bold text-white tabular-nums leading-none",children:[u.stability.toFixed(0),"%"]}),m.jsx("span",{className:"text-[8px] uppercase tracking-widest text-neutral-600 font-bold",children:"Coherence"})]})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(eg,{className:`w-4 h-4 transition-colors ${n?"text-green-500":"text-neutral-500"}`}),m.jsx("div",{className:"w-24 h-1 bg-white/10 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-white transition-all duration-300 ease-out shadow-[0_0_10px_white]",style:{width:`${u.sync}%`}})})]})]})})]})},{useNavigate:w9,useLocation:S9}=gi,JE=()=>{var at;const{currentUser:i,addCreatedBook:e}=Yi(),t=w9(),s=((at=S9().state)==null?void 0:at.initialPrompt)||"",[a,o]=k.useState("editor"),[c,u]=k.useState("chat"),[d,p]=k.useState(!1),[y,v]=k.useState([{id:"1",title:"Chapter 1: The Beginning",content:"",pageNumber:1}]),[w,A]=k.useState("1"),C=k.useMemo(()=>y.find(pe=>pe.id===w)||y[0],[y,w]),[T,_]=k.useState([]),[D,R]=k.useState(""),[L,F]=k.useState(!1),[U,M]=k.useState(!1),[O,z]=k.useState("idle"),[J,G]=k.useState([]),[X,ie]=k.useState([]),[$,ee]=k.useState([]),H=k.useRef(null),V=k.useRef([]),Q=k.useRef(null),ce=k.useRef(null),ve=k.useRef(null),q=k.useRef(null);k.useEffect(()=>{if(!Q.current){const pe=`You are the Co-Author engine (v3.0) for co-writter.
        Current User: ${(i==null?void 0:i.name)||"Author"}.
        Project Context: Active Chapter "${C.title}".

        Your Goal: Assist in writing a high-quality book.
        - If asked to write, use the 'write_content' tool.
        - If asked for an image, use 'generate_image'.
        - If asked to plan, use 'propose_blueprint'.

        Be concise in chat, verbose in writing.`,Se=CL(pe);Se&&(Q.current=Se,_([{id:"sys-init",role:"ai",text:"Engine Online. Ready to create."}]),s&&setTimeout(()=>Te(void 0,s),500))}},[]),k.useEffect(()=>{var pe;(pe=ce.current)==null||pe.scrollIntoView({behavior:"smooth"})},[T,c]),k.useEffect(()=>{ve.current&&(ve.current.style.height="auto",ve.current.style.height=Math.min(ve.current.scrollHeight,120)+"px")},[D]),k.useEffect(()=>{if(!L)if(O==="planning")if(y.length>1){const pe=y.map(Se=>Se.id);G(pe),z("writing_sequence"),Z(pe)}else z("idle");else O==="writing_sequence"&&(J.length>0?Z(J):(z("idle"),_(pe=>[...pe,{id:Date.now().toString(),role:"system",text:"Auto-Pilot Sequence Complete. Book Generated."}])))},[L,O,y]);const Z=pe=>{if(pe.length===0)return;const Se=pe[0],ze=pe.slice(1);G(ze),A(Se);const $e=y.find(gt=>gt.id===Se);$e&&setTimeout(()=>{const gt=`You are the Lead Writer. Write the COMPLETE content for Chapter ${$e.pageNumber}: "${$e.title}".
              Context Summary: ${$e.content.substring(0,200)}...
              
              Requirements:
              1. Write extensive, immersive content (approx 800-1000 words).
              2. Use 'write_content' tool to save it.
              3. IF the scene has visual potential, use 'generate_image' to create 1 illustration.`;Te(void 0,gt)},1e3)},ue=async pe=>new Promise((Se,ze)=>{const $e=new FileReader;$e.onloadend=()=>{const gt=$e.result.split(",")[1];Se({inlineData:{data:gt,mimeType:pe.type}})},$e.onerror=ze,$e.readAsDataURL(pe)}),me=pe=>{if(pe.target.files){const Se=Array.from(pe.target.files);ie($e=>[...$e,...Se]);const ze=Se.map($e=>URL.createObjectURL($e));ee($e=>[...$e,...ze])}},be=pe=>{ie(Se=>Se.filter((ze,$e)=>$e!==pe)),ee(Se=>(URL.revokeObjectURL(Se[pe]),Se.filter((ze,$e)=>$e!==pe)))},_e=async(pe,Se)=>{console.log(`[Studio] Executing Tool: ${pe}`,Se);try{if(pe==="write_content"){const ze=Se.content;return v($e=>$e.map(gt=>gt.id===w?{...gt,content:ze}:gt)),"Content updated successfully in the editor."}if(pe==="generate_image"){const ze=Se.prompt;_(gt=>[...gt,{id:Date.now().toString(),role:"system",text:`Generating visual: ${ze}...`}]);const $e=await TL(ze,"Cinematic",C.title,i==null?void 0:i.name);if("imageBytes"in $e){const gt=`data:image/jpeg;base64,${$e.imageBytes}`,Xn=`

![${ze}](${gt})

`;return v(rn=>rn.map(On=>On.id===w?{...On,content:On.content+Xn}:On)),"Image generated and inserted into the document."}return"Image generation failed."}if(pe==="propose_blueprint"){const ze=Se.outline,$e=Se.title,gt=ze.map((Xn,rn)=>({id:Date.now().toString()+rn,title:Xn.title,content:`> **Summary**: ${Xn.summary}

Start writing here...`,pageNumber:rn+1}));return v(gt),gt.length>0&&A(gt[0].id),`Blueprint applied. Book title set to "${$e}" with ${gt.length} chapters.`}return"Tool executed."}catch(ze){return console.error("Tool Execution Error",ze),`Error executing tool: ${ze.message}`}},Te=async(pe,Se)=>{const ze=Se||D;if(!ze.trim()&&X.length===0)return;const $e=[...X],gt=[...$];R(""),ie([]),ee([]),ve.current&&(ve.current.style.height="auto");const Xn=Date.now().toString();(!O||O==="idle")&&_(On=>[...On,{id:Xn,role:"user",text:ze,attachments:gt}]),F(!0);const rn=(Date.now()+1).toString();_(On=>[...On,{id:rn,role:"ai",text:"",isStreaming:!0}]);try{if(!Q.current)throw new Error("Session lost");const On=[];ze.trim()&&On.push({text:ze});for(const Bt of $e){const Et=await ue(Bt);On.push(Et)}const Ja=await Q.current.sendMessageStream({message:On});let St="",ar;for await(const Bt of Ja){const Et=Bt.text;Et&&(St+=Et,_(an=>an.map(In=>In.id===rn?{...In,text:St}:In))),Bt!=null&&Bt.functionCalls&&(ar=Bt.functionCalls)}const jr=ar;if(jr&&jr.length>0){_(In=>In.map(rs=>rs.id===rn?{...rs,isToolUse:!0,text:rs.text+(rs.text?`

`:"")+"*Executing Actions...*"}:rs));const Bt=[];for(const In of jr){const rs=await _e(In.name,In.args);Bt.push({functionResponse:{name:In.name,response:{result:rs}}})}const Et=await Q.current.sendMessageStream({message:Bt});let an="";for await(const In of Et){const rs=In.text;rs&&(an+=rs,_(tu=>tu.map(Br=>Br.id===rn?{...Br,text:St+(St?`

`:"")+an,isToolUse:!1}:Br)))}}_(Bt=>Bt.map(Et=>Et.id===rn?{...Et,isStreaming:!1}:Et))}catch(On){console.error(On),_(Ja=>Ja.map(St=>St.id===rn?{...St,text:"Connection interrupted. Please retry.",isStreaming:!1}:St))}finally{F(!1)}},mt=async()=>{try{const pe=await navigator.mediaDevices.getUserMedia({audio:!0}),Se=new MediaRecorder(pe);H.current=Se,V.current=[],Se.ondataavailable=ze=>{ze.data.size>0&&V.current.push(ze.data)},Se.onstop=async()=>{const ze=new Blob(V.current,{type:"audio/webm"}),$e=new FileReader;$e.readAsDataURL(ze),$e.onloadend=async()=>{const gt=$e.result.split(",")[1];F(!0);try{const Xn=await E$(gt,"audio/webm");Xn&&R(rn=>rn+(rn?" ":"")+Xn)}catch(Xn){console.error("Transcription failed",Xn)}F(!1)},pe.getTracks().forEach(gt=>gt.stop())},Se.start(),M(!0)}catch(pe){console.error("Mic access denied",pe),alert("Could not access microphone.")}},rt=()=>{H.current&&U&&(H.current.stop(),M(!1))},lt=()=>{if(p(!0),y.length<=1&&y[0].content.length<200){const Se=`You are the Lead Architect. Create a comprehensive, best-selling book outline for a book titled "${y[0].title}". 
          Use the 'propose_blueprint' tool to define the chapters. 
          The outline must have at least 5 chapters.`;z("planning"),Te(void 0,Se)}else{const Se=y.map(ze=>ze.id);G(Se),z("writing_sequence"),Z(Se)}},En=()=>{const pe={id:`gen-${Date.now()}`,title:y[0].title||"Untitled Draft",author:(i==null?void 0:i.name)||"Anonymous",description:"Created with co-writter.",price:0,coverImageUrl:"https://images.unsplash.com/photo-1543002588-bfa74002ed7e?auto=format&fit=crop&q=80&w=800",genre:"Draft",sellerId:(i==null?void 0:i.id)||"guest",publicationDate:new Date().toISOString().split("T")[0],pages:y};e(pe),t("/dashboard")},wt=C.content.trim().split(/\s+/).filter(pe=>pe.length>0).length,Ye=T.slice().reverse().find(pe=>pe.role==="ai");return m.jsxs("div",{className:"flex flex-col h-screen bg-black text-white overflow-hidden font-sans",children:[m.jsx(b9,{isOpen:d,onClose:()=>{p(!1),z("idle"),G([])},content:Ye?Ye.text:"Initializing Neural Link...",isStreaming:L,chapterTitle:C.title}),m.jsxs("header",{className:"h-14 border-b border-white/10 bg-[#050505] flex items-center justify-between px-4 z-50 shrink-0",children:[m.jsxs("button",{onClick:()=>t("/dashboard"),className:"flex items-center gap-2 text-neutral-400 hover:text-white uppercase text-[10px] font-bold tracking-widest transition-colors",children:[m.jsx(DA,{className:"w-4 h-4"})," Exit Studio"]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsxs("button",{onClick:lt,disabled:L||O!=="idle",className:"flex items-center gap-2 px-4 py-1.5 rounded-full bg-indigo-500/10 border border-indigo-500/20 text-[10px] font-bold uppercase hover:bg-indigo-500/20 transition-colors disabled:opacity-50 text-indigo-300",children:[L?m.jsx($c,{className:"w-3 h-3 animate-spin"}):m.jsx(lw,{className:"w-3 h-3"}),O!=="idle"?"Auto-Pilot Active":"Auto-Pilot"]}),m.jsx("div",{className:"h-4 w-px bg-white/10 mx-1"}),m.jsx("button",{onClick:En,className:"bg-white text-black px-6 py-1.5 rounded-full text-[10px] font-bold uppercase hover:bg-neutral-200 transition-colors shadow-[0_0_15px_rgba(255,255,255,0.15)]",children:"Save Draft"})]})]}),m.jsxs("div",{className:"flex flex-1 overflow-hidden relative",children:[m.jsxs("aside",{className:`
                ${a==="tools"?"flex":"hidden"} md:flex
                w-[360px] bg-[#09090b] border-r border-white/10 flex-col z-20 shadow-2xl
            `,children:[m.jsxs("div",{className:"flex border-b border-white/10",children:[m.jsx("button",{onClick:()=>u("chat"),className:`flex-1 py-4 text-[10px] font-bold uppercase tracking-widest transition-colors ${c==="chat"?"text-white bg-white/5 border-b-2 border-white":"text-neutral-500 hover:text-neutral-300"}`,children:"Co-Author"}),m.jsx("button",{onClick:()=>u("outline"),className:`flex-1 py-4 text-[10px] font-bold uppercase tracking-widest transition-colors ${c==="outline"?"text-white bg-white/5 border-b-2 border-white":"text-neutral-500 hover:text-neutral-300"}`,children:"Outline"})]}),m.jsxs("div",{className:"flex-1 overflow-hidden relative flex flex-col",children:[c==="chat"&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-0",children:[T.map((pe,Se)=>m.jsxs("div",{className:"py-6 px-5 border-b border-white/5 last:border-0 hover:bg-white/[0.02] transition-colors group",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-2 opacity-80 group-hover:opacity-100 transition-opacity",children:[pe.role==="user"?m.jsx("div",{className:"w-5 h-5 rounded-full bg-neutral-800 flex items-center justify-center border border-white/10",children:m.jsx("span",{className:"text-[10px] font-bold text-neutral-400",children:"U"})}):m.jsx("div",{className:"w-5 h-5 rounded-full bg-indigo-500/10 flex items-center justify-center border border-indigo-500/20",children:m.jsx($c,{className:"w-3 h-3 text-indigo-400"})}),m.jsx("span",{className:`text-[10px] font-bold uppercase tracking-widest ${pe.role==="user"?"text-neutral-500":"text-indigo-400"}`,children:pe.role==="user"?"User":"Co-Author"})]}),m.jsxs("div",{className:`pl-8 text-sm leading-7 font-medium whitespace-pre-wrap font-sans ${pe.role==="user"?"text-white":"text-neutral-300"}`,children:[pe.attachments&&pe.attachments.length>0&&m.jsx("div",{className:"flex gap-2 mb-3 overflow-x-auto",children:pe.attachments.map((ze,$e)=>m.jsx("img",{src:ze,alt:"attachment",className:"h-20 w-auto rounded-lg border border-white/10 shadow-sm"},$e))}),pe.text,pe.isToolUse&&m.jsxs("div",{className:"mt-3 inline-flex items-center gap-2 px-3 py-1.5 rounded bg-green-500/10 border border-green-500/20 text-[10px] text-green-400 font-mono uppercase tracking-wider",children:[m.jsx(pi,{className:"w-3 h-3"})," Execution Complete"]}),pe.role==="ai"&&pe.isStreaming&&Se===T.length-1&&m.jsx("span",{className:"inline-block w-2 h-4 ml-1 bg-indigo-500 animate-pulse align-middle"})]})]},pe.id)),m.jsx("div",{ref:ce})]}),m.jsxs("div",{className:"p-4 bg-[#09090b] border-t border-white/10",children:[$.length>0&&m.jsx("div",{className:"flex gap-2 mb-3 px-1 overflow-x-auto custom-scrollbar",children:$.map((pe,Se)=>m.jsxs("div",{className:"relative group flex-shrink-0",children:[m.jsx("img",{src:pe,alt:"preview",className:"h-14 w-14 object-cover rounded-lg border border-white/10 shadow-md"}),m.jsx("button",{onClick:()=>be(Se),className:"absolute -top-1.5 -right-1.5 w-5 h-5 flex items-center justify-center bg-black rounded-full text-white border border-white/20 hover:bg-red-500 transition-colors shadow-sm",children:m.jsx(Yc,{className:"w-3 h-3"})})]},Se))}),m.jsxs("div",{className:`bg-[#151515] border rounded-[28px] p-2 flex items-end gap-2 shadow-lg transition-colors ${L?"border-indigo-500/30 opacity-50":"border-white/10 focus-within:border-white/20"}`,children:[m.jsx("button",{onClick:()=>{var pe;return(pe=q.current)==null?void 0:pe.click()},disabled:L,className:"w-9 h-9 rounded-full bg-white/5 hover:bg-white/10 flex items-center justify-center text-neutral-400 hover:text-white transition-colors flex-shrink-0 mb-0.5",title:"Add Image/File",children:m.jsx(lb,{className:"w-4 h-4"})}),m.jsx("input",{type:"file",ref:q,className:"hidden",onChange:me,accept:"image/*,application/pdf",multiple:!0}),m.jsx("button",{onMouseDown:mt,onMouseUp:rt,onTouchStart:mt,onTouchEnd:rt,disabled:L,className:`w-9 h-9 rounded-full flex items-center justify-center transition-all flex-shrink-0 mb-0.5 ${U?"bg-red-500 text-white scale-110":"bg-white/5 text-neutral-400 hover:text-white hover:bg-white/10"}`,title:"Hold to Speak",children:U?m.jsx(r$,{className:"w-4 h-4"}):m.jsx(s$,{className:"w-4 h-4"})}),m.jsx("textarea",{ref:ve,value:D,onChange:pe=>R(pe.target.value),placeholder:U?"Listening...":X.length>0?"Describe this file...":"Ask Co-Author...",className:"flex-1 bg-transparent border-none outline-none text-white text-sm placeholder-neutral-600 py-2.5 max-h-32 resize-none custom-scrollbar font-medium",rows:1,onKeyDown:pe=>{pe.key==="Enter"&&!pe.shiftKey&&(pe.preventDefault(),Te())},disabled:L,style:{minHeight:"40px"}}),m.jsx("button",{onClick:()=>Te(),disabled:!D.trim()&&X.length===0&&!L,className:"w-9 h-9 rounded-full bg-white text-black flex items-center justify-center hover:scale-105 transition-transform flex-shrink-0 disabled:opacity-50 disabled:scale-100 mb-0.5",title:"Run",children:L?m.jsx("div",{className:"w-4 h-4 border-2 border-black/30 border-t-black rounded-full animate-spin"}):m.jsx(DA,{className:"w-4 h-4 rotate-180"})})]}),m.jsxs("div",{className:"flex justify-between items-center mt-2 px-2",children:[m.jsx("p",{className:"text-[9px] text-neutral-600 font-mono tracking-wide",children:"GEMINI 2.5 FLASH"}),m.jsxs("p",{className:"text-[9px] text-neutral-600 font-mono tracking-wide",children:[D.length," chars"]})]})]})]}),c==="outline"&&m.jsxs("div",{className:"p-4 space-y-2 overflow-y-auto custom-scrollbar flex-1",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[m.jsx("h3",{className:"text-xs font-bold text-neutral-500 uppercase tracking-widest",children:"Chapters"}),m.jsxs("span",{className:"text-[10px] text-neutral-600 font-mono",children:[y.length," Pages"]})]}),y.map((pe,Se)=>m.jsxs("button",{onClick:()=>A(pe.id),className:`w-full text-left p-4 rounded-xl border text-sm transition-all group ${w===pe.id?"bg-white/10 border-white/20 text-white shadow-lg":"border-transparent text-neutral-500 hover:bg-white/5 hover:text-neutral-300"}`,children:[m.jsxs("div",{className:"flex items-center justify-between mb-1",children:[m.jsxs("span",{className:"text-[9px] uppercase font-bold opacity-50 tracking-wider",children:["Chapter ",Se+1]}),w===pe.id&&m.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-green-500 shadow-[0_0_5px_rgba(34,197,94,0.8)]"})]}),m.jsx("span",{className:"font-bold truncate block",children:pe.title})]},pe.id)),m.jsxs("button",{onClick:()=>{const pe=Date.now().toString();v([...y,{id:pe,title:"New Chapter",content:"",pageNumber:y.length+1}]),A(pe)},className:"w-full py-4 border border-dashed border-white/10 text-neutral-500 text-xs font-bold uppercase rounded-xl hover:border-white/30 hover:text-white mt-4 transition-all flex items-center justify-center gap-2",children:[m.jsx(lb,{className:"w-3 h-3"})," Add Chapter"]})]})]})]}),m.jsxs("main",{className:"flex-1 flex flex-col relative bg-[#000000]",children:[m.jsxs("div",{className:"h-10 bg-[#050505] border-b border-white/5 flex items-center justify-between px-6 select-none shrink-0",children:[m.jsx("div",{className:"flex items-center gap-4",children:m.jsx("span",{className:"text-[10px] font-bold text-neutral-500 uppercase tracking-[0.2em] truncate max-w-[200px]",children:C.title})}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsxs("span",{className:"text-[9px] font-mono text-neutral-600 bg-white/5 px-2 py-0.5 rounded border border-white/5",children:[wt," WORDS"]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:`w-1.5 h-1.5 rounded-full ${L?"bg-indigo-500 animate-pulse":"bg-green-500"} shadow-glow`}),m.jsx("span",{className:"text-[10px] font-bold text-neutral-500 uppercase tracking-widest",children:L?"Syncing...":"Saved"})]})]})]}),m.jsx("div",{className:"flex-1 overflow-y-auto custom-scrollbar scroll-smooth",children:m.jsx(x9,{title:C.title,onTitleChange:pe=>v(Se=>Se.map(ze=>ze.id===w?{...ze,title:pe}:ze)),content:C.content,onContentChange:pe=>v(Se=>Se.map(ze=>ze.id===w?{...ze,content:pe}:ze)),onTriggerAI:pe=>Te(void 0,`Write content: ${pe}`),onTriggerImageGen:pe=>Te(void 0,`Generate an image: ${pe}`)})})]})]})]})},es=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),FA=[.001,0,0,.001,0,0],KE=1.35,er={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},za={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},kg="pdfjs_internal_editor_",Je={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},pt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},IL={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Si={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Ag={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Fn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Oh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},N0={ERRORS:0,WARNINGS:1,INFOS:5},Op={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},tx={moveTo:0,lineTo:1,curveTo:2,closePath:3},PL={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let cw=N0.WARNINGS;function E9(i){Number.isInteger(i)&&(cw=i)}function A9(){return cw}function uw(i){cw>=N0.INFOS&&console.info(`Info: ${i}`)}function Ke(i){cw>=N0.WARNINGS&&console.warn(`Warning: ${i}`)}function tn(i){throw new Error(i)}function vt(i,e){i||tn(e)}function C9(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function KC(i,e=null,t=null){if(!i)return null;if(t&&typeof i=="string"){if(t.addDefaultProtocol&&i.startsWith("www.")){const s=i.match(/\./g);(s==null?void 0:s.length)>=2&&(i=`http://${i}`)}if(t.tryConvertEncoding)try{i=M9(i)}catch{}}const n=e?URL.parse(i,e):URL.parse(i);return C9(n)?n:null}function QC(i,e,t=!1){const n=URL.parse(i);return n?(n.hash=e,n.href):t&&KC(i,"http://example.com")?i.split("#",1)[0]+`${e?`#${e}`:""}`:""}function nt(i,e,t,n=!1){return Object.defineProperty(i,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const Kd=(function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e})();class Ok extends Kd{constructor(e,t){super(e,"PasswordException"),this.code=t}}class QE extends Kd{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class cb extends Kd{constructor(e){super(e,"InvalidPDFException")}}class Dg extends Kd{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class T9 extends Kd{constructor(e){super(e,"FormatError")}}class ul extends Kd{constructor(e){super(e,"AbortException")}}function LL(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&tn("Invalid argument for bytesToString");const e=i.length,t=8192;if(e<t)return String.fromCharCode.apply(null,i);const n=[];for(let s=0;s<e;s+=t){const a=Math.min(s+t,e),o=i.subarray(s,a);n.push(String.fromCharCode.apply(null,o))}return n.join("")}function R0(i){typeof i!="string"&&tn("Invalid argument for stringToBytes");const e=i.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=i.charCodeAt(n)&255;return t}function _9(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function N9(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function R9(){try{return new Function(""),!0}catch{return!1}}class mi{static get isLittleEndian(){return nt(this,"isLittleEndian",N9())}static get isEvalSupported(){return nt(this,"isEvalSupported",R9())}static get isOffscreenCanvasSupported(){return nt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return nt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:e,userAgent:t}=navigator;return nt(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return nt(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const ZE=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var rl,xx,UA;class Me{static makeHexColor(e,t,n){return`#${ZE[e]}${ZE[t]}${ZE[n]}`}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t,n=0){const s=e[n],a=e[n+1];e[n]=s*t[0]+a*t[2]+t[4],e[n+1]=s*t[1]+a*t[3]+t[5]}static applyTransformToBezier(e,t,n=0){const s=t[0],a=t[1],o=t[2],c=t[3],u=t[4],d=t[5];for(let p=0;p<6;p+=2){const y=e[n+p],v=e[n+p+1];e[n+p]=y*s+v*o+u,e[n+p+1]=y*a+v*c+d}}static applyInverseTransform(e,t){const n=e[0],s=e[1],a=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-s*t[2]+t[2]*t[5]-t[4]*t[3])/a,e[1]=(-n*t[1]+s*t[0]+t[4]*t[1]-t[5]*t[0])/a}static axialAlignedBoundingBox(e,t,n){const s=t[0],a=t[1],o=t[2],c=t[3],u=t[4],d=t[5],p=e[0],y=e[1],v=e[2],w=e[3];let A=s*p+u,C=A,T=s*v+u,_=T,D=c*y+d,R=D,L=c*w+d,F=L;if(a!==0||o!==0){const U=a*p,M=a*v,O=o*y,z=o*w;A+=O,_+=O,T+=z,C+=z,D+=U,F+=U,L+=M,R+=M}n[0]=Math.min(n[0],A,T,C,_),n[1]=Math.min(n[1],D,L,R,F),n[2]=Math.max(n[2],A,T,C,_),n[3]=Math.max(n[3],D,L,R,F)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],s=e[1],a=e[2],o=e[3],c=n**2+s**2,u=n*a+s*o,d=a**2+o**2,p=(c+d)/2,y=Math.sqrt(p**2-(c*d-u**2));t[0]=Math.sqrt(p+y||1),t[1]=Math.sqrt(p-y||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),s=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>s)return null;const a=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),o=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return a>o?null:[n,a,s,o]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,s,a){a[0]=Math.min(a[0],e,n),a[1]=Math.min(a[1],t,s),a[2]=Math.max(a[2],e,n),a[3]=Math.max(a[3],t,s)}static bezierBoundingBox(e,t,n,s,a,o,c,u,d){d[0]=Math.min(d[0],e,c),d[1]=Math.min(d[1],t,u),d[2]=Math.max(d[2],e,c),d[3]=Math.max(d[3],t,u),j(this,rl,UA).call(this,e,n,a,c,t,s,o,u,3*(-e+3*(n-a)+c),6*(e-2*n+a),3*(n-e),d),j(this,rl,UA).call(this,e,n,a,c,t,s,o,u,3*(-t+3*(s-o)+u),6*(t-2*s+o),3*(s-t),d)}}rl=new WeakSet,xx=function(e,t,n,s,a,o,c,u,d,p){if(d<=0||d>=1)return;const y=1-d,v=d*d,w=v*d,A=y*(y*(y*e+3*d*t)+3*v*n)+w*s,C=y*(y*(y*a+3*d*o)+3*v*c)+w*u;p[0]=Math.min(p[0],A),p[1]=Math.min(p[1],C),p[2]=Math.max(p[2],A),p[3]=Math.max(p[3],C)},UA=function(e,t,n,s,a,o,c,u,d,p,y,v){if(Math.abs(d)<1e-12){Math.abs(p)>=1e-12&&j(this,rl,xx).call(this,e,t,n,s,a,o,c,u,-y/p,v);return}const w=p**2-4*y*d;if(w<0)return;const A=Math.sqrt(w),C=2*d;j(this,rl,xx).call(this,e,t,n,s,a,o,c,u,(-p+A)/C,v),j(this,rl,xx).call(this,e,t,n,s,a,o,c,u,(-p-A)/C,v)},P(Me,rl);function M9(i){return decodeURIComponent(escape(i))}let eA=null,Hk=null;function FL(i){return eA||(eA=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Hk=new Map([["","t"]])),i.replaceAll(eA,(e,t,n)=>t?t.normalize("NFKC"):Hk.get(n))}function ZC(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),LL(i)}const eT="pdfjs_internal_id_";function k9(i,e,t){if(!Array.isArray(t)||t.length<2)return!1;const[n,s,...a]=t;if(!i(n)&&!Number.isInteger(n)||!e(s))return!1;const o=a.length;let c=!0;switch(s.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;c=!1;break;default:return!1}for(const u of a)if(!(typeof u=="number"||c&&u===null))return!1;return!0}function zi(i,e,t){return Math.min(Math.max(i,e),t)}function UL(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(LL(i))}function D9(i){return Uint8Array.fromBase64?Uint8Array.fromBase64(i):R0(atob(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...e){return new Promise(t=>{t(i(...e))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((e,t)=>e+t,0)});class Ig{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function s(a){var u;if(!a)return;let o=null;const c=a.name;if(c==="#text")o=a.value;else if(Ig.shouldBuildText(c))(u=a==null?void 0:a.attributes)!=null&&u.textContent?o=a.attributes.textContent:a.value&&(o=a.value);else return;if(o!==null&&t.push({str:o}),!!a.children)for(const d of a.children)s(d)}return s(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}class tT{static setupStorage(e,t,n,s,a){const o=s.getValue(t,{value:null});switch(n.name){case"textarea":if(o.value!==null&&(e.textContent=o.value),a==="print")break;e.addEventListener("input",c=>{s.setValue(t,{value:c.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(o.value===n.attributes.xfaOn?e.setAttribute("checked",!0):o.value===n.attributes.xfaOff&&e.removeAttribute("checked"),a==="print")break;e.addEventListener("change",c=>{s.setValue(t,{value:c.target.checked?c.target.getAttribute("xfaOn"):c.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&e.setAttribute("value",o.value),a==="print")break;e.addEventListener("input",c=>{s.setValue(t,{value:c.target.value})})}break;case"select":if(o.value!==null){e.setAttribute("value",o.value);for(const c of n.children)c.attributes.value===o.value?c.attributes.selected=!0:c.attributes.hasOwnProperty("selected")&&delete c.attributes.selected}e.addEventListener("input",c=>{const u=c.target.options,d=u.selectedIndex===-1?"":u[u.selectedIndex].value;s.setValue(t,{value:d})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:s,linkService:a}){const{attributes:o}=t,c=e instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${s}`);for(const[u,d]of Object.entries(o))if(d!=null)switch(u){case"class":d.length&&e.setAttribute(u,d.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",d);break;case"style":Object.assign(e.style,d);break;case"textContent":e.textContent=d;break;default:(!c||u!=="href"&&u!=="newWindow")&&e.setAttribute(u,d)}c&&a.addLinkAttributes(e,o.href,o.newWindow),n&&o.dataId&&this.setupStorage(e,o.dataId,t,n)}static render(e){var y,v;const t=e.annotationStorage,n=e.linkService,s=e.xfaHtml,a=e.intent||"display",o=document.createElement(s.name);s.attributes&&this.setAttributes({html:o,element:s,intent:a,linkService:n});const c=a!=="richText",u=e.div;if(u.append(o),e.viewport){const w=`matrix(${e.viewport.transform.join(",")})`;u.style.transform=w}c&&u.setAttribute("class","xfaLayer xfaFont");const d=[];if(s.children.length===0){if(s.value){const w=document.createTextNode(s.value);o.append(w),c&&Ig.shouldBuildText(s.name)&&d.push(w)}return{textDivs:d}}const p=[[s,-1,o]];for(;p.length>0;){const[w,A,C]=p.at(-1);if(A+1===w.children.length){p.pop();continue}const T=w.children[++p.at(-1)[1]];if(T===null)continue;const{name:_}=T;if(_==="#text"){const R=document.createTextNode(T.value);d.push(R),C.append(R);continue}const D=(y=T==null?void 0:T.attributes)!=null&&y.xmlns?document.createElementNS(T.attributes.xmlns,_):document.createElement(_);if(C.append(D),T.attributes&&this.setAttributes({html:D,element:T,storage:t,intent:a,linkService:n}),((v=T.children)==null?void 0:v.length)>0)p.push([T,-1,D]);else if(T.value){const R=document.createTextNode(T.value);c&&Ig.shouldBuildText(_)&&d.push(R),D.append(R)}}for(const w of u.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))w.setAttribute("readOnly",!0);return{textDivs:d}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const vo="http://www.w3.org/2000/svg",Ru=class Ru{};ye(Ru,"CSS",96),ye(Ru,"PDF",72),ye(Ru,"PDF_TO_CSS_UNITS",Ru.CSS/Ru.PDF);let dl=Ru;async function Xp(i,e="text"){if(tg(i,document.baseURI)){const t=await fetch(i);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const s=new XMLHttpRequest;s.open("GET",i,!0),s.responseType=e,s.onreadystatechange=()=>{if(s.readyState===XMLHttpRequest.DONE){if(s.status===200||s.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(s.response);return}t(s.responseText);return}n(new Error(s.statusText))}},s.send(null)})}class M0{constructor({viewBox:e,userUnit:t,scale:n,rotation:s,offsetX:a=0,offsetY:o=0,dontFlip:c=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=s,this.offsetX=a,this.offsetY=o,n*=t;const u=(e[2]+e[0])/2,d=(e[3]+e[1])/2;let p,y,v,w;switch(s%=360,s<0&&(s+=360),s){case 180:p=-1,y=0,v=0,w=1;break;case 90:p=0,y=1,v=1,w=0;break;case 270:p=0,y=-1,v=-1,w=0;break;case 0:p=1,y=0,v=0,w=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}c&&(v=-v,w=-w);let A,C,T,_;p===0?(A=Math.abs(d-e[1])*n+a,C=Math.abs(u-e[0])*n+o,T=(e[3]-e[1])*n,_=(e[2]-e[0])*n):(A=Math.abs(u-e[0])*n+a,C=Math.abs(d-e[1])*n+o,T=(e[2]-e[0])*n,_=(e[3]-e[1])*n),this.transform=[p*n,y*n,v*n,w*n,A-p*n*u-v*n*d,C-y*n*u-w*n*d],this.width=T,this.height=_}get rawDims(){const e=this.viewBox;return nt(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:s=this.offsetY,dontFlip:a=!1}={}){return new M0({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:a})}convertToViewportPoint(e,t){const n=[e,t];return Me.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];Me.applyTransform(t,this.transform);const n=[e[2],e[3]];return Me.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return Me.applyInverseTransform(n,this.transform),n}}class dw extends Kd{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function k0(i){const e=i.length;let t=0;for(;t<e&&i[t].trim()==="";)t++;return i.substring(t,t+5).toLowerCase()==="data:"}function hw(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function jL(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function BL(i,e="document.pdf"){if(typeof i!="string")return e;if(k0(i))return Ke('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const n=(c=>{try{return new URL(c)}catch{try{return new URL(decodeURIComponent(c))}catch{try{return new URL(c,"https://foo.bar")}catch{try{return new URL(decodeURIComponent(c),"https://foo.bar")}catch{return null}}}}})(i);if(!n)return e;const s=c=>{try{let u=decodeURIComponent(c);return u.includes("/")?(u=u.split("/").at(-1),u.test(/^\.pdf$/i)?u:c):u}catch{return c}},a=/\.pdf$/i,o=n.pathname.split("/").at(-1);if(a.test(o))return s(o);if(n.searchParams.size>0){const c=Array.from(n.searchParams.values()).reverse();for(const d of c)if(a.test(d))return s(d);const u=Array.from(n.searchParams.keys()).reverse();for(const d of u)if(a.test(d))return s(d)}if(n.hash){const u=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(u)return s(u[0])}return e}class zk{constructor(){ye(this,"started",Object.create(null));ye(this,"times",[])}time(e){e in this.started&&Ke(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||Ke(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:s,end:a}of this.times)e.push(`${n.padEnd(t)} ${a-s}ms
`);return e.join("")}}function tg(i,e){const t=e?URL.parse(i,e):URL.parse(i);return(t==null?void 0:t.protocol)==="http:"||(t==null?void 0:t.protocol)==="https:"}function sr(i){i.preventDefault()}function bn(i){i.preventDefault(),i.stopPropagation()}function I9(i){console.log("Deprecated API usage: "+i)}var Bg;class Pg{static toDateObject(e){if(e instanceof Date)return e;if(!e||typeof e!="string")return null;f(this,Bg)||N(this,Bg,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=f(this,Bg).exec(e);if(!t)return null;const n=parseInt(t[1],10);let s=parseInt(t[2],10);s=s>=1&&s<=12?s-1:0;let a=parseInt(t[3],10);a=a>=1&&a<=31?a:1;let o=parseInt(t[4],10);o=o>=0&&o<=23?o:0;let c=parseInt(t[5],10);c=c>=0&&c<=59?c:0;let u=parseInt(t[6],10);u=u>=0&&u<=59?u:0;const d=t[7]||"Z";let p=parseInt(t[8],10);p=p>=0&&p<=23?p:0;let y=parseInt(t[9],10)||0;return y=y>=0&&y<=59?y:0,d==="-"?(o+=p,c+=y):d==="+"&&(o-=p,c-=y),new Date(Date.UTC(n,s,a,o,c,u))}}Bg=new WeakMap,P(Pg,Bg);function OL(i,{scale:e=1,rotation:t=0}){const{width:n,height:s}=i.attributes.style,a=[0,0,parseInt(n),parseInt(s)];return new M0({viewBox:a,userUnit:1,scale:e,rotation:t})}function Jp(i){if(i.startsWith("#")){const e=parseInt(i.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(e=>parseInt(e)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(Ke(`Not a valid color format: "${i}"`),[0,0,0])}function P9(i){const e=document.createElement("span");e.style.visibility="hidden",e.style.colorScheme="only light",document.body.append(e);for(const t of i.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;i.set(t,Jp(n))}e.remove()}function vn(i){const{a:e,b:t,c:n,d:s,e:a,f:o}=i.getTransform();return[e,t,n,s,a,o]}function ma(i){const{a:e,b:t,c:n,d:s,e:a,f:o}=i.getTransform().invertSelf();return[e,t,n,s,a,o]}function Wc(i,e,t=!1,n=!0){if(e instanceof M0){const{pageWidth:s,pageHeight:a}=e.rawDims,{style:o}=i,c=mi.isCSSRoundSupported,u=`var(--total-scale-factor) * ${s}px`,d=`var(--total-scale-factor) * ${a}px`,p=c?`round(down, ${u}, var(--scale-round-x))`:`calc(${u})`,y=c?`round(down, ${d}, var(--scale-round-y))`:`calc(${d})`;!t||e.rotation%180===0?(o.width=p,o.height=y):(o.width=y,o.height=p)}n&&i.setAttribute("data-main-rotation",e.rotation)}class la{constructor(){const{pixelRatio:e}=la;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,s,a=-1){let o=1/0,c=1/0,u=1/0;n=la.capPixels(n,a),n>0&&(o=Math.sqrt(n/(e*t))),s!==-1&&(c=s/e,u=s/t);const d=Math.min(o,c,u);return this.sx>d||this.sy>d?(this.sx=d,this.sy=d,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const ub=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class L9{static get isDarkMode(){var e;return nt(this,"isDarkMode",!!((e=window==null?void 0:window.matchMedia)!=null&&e.call(window,"(prefers-color-scheme: dark)").matches))}}class HL{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),nt(this,"commentForegroundColor",Jp(n))}}function zL(i,e,t,n){n=Math.min(Math.max(n??1,0),1);const s=255*(1-n);return i=Math.round(i*n+s),e=Math.round(e*n+s),t=Math.round(t*n+s),[i,e,t]}function Gk(i,e){const t=i[0]/255,n=i[1]/255,s=i[2]/255,a=Math.max(t,n,s),o=Math.min(t,n,s),c=(a+o)/2;if(a===o)e[0]=e[1]=0;else{const u=a-o;switch(e[1]=c<.5?u/(a+o):u/(2-a-o),a){case t:e[0]=((n-s)/u+(n<s?6:0))*60;break;case n:e[0]=((s-t)/u+2)*60;break;case s:e[0]=((t-n)/u+4)*60;break}}e[2]=c}function jA(i,e){const t=i[0],n=i[1],s=i[2],a=(1-Math.abs(2*s-1))*n,o=a*(1-Math.abs(t/60%2-1)),c=s-a/2;switch(Math.floor(t/60)){case 0:e[0]=a+c,e[1]=o+c,e[2]=c;break;case 1:e[0]=o+c,e[1]=a+c,e[2]=c;break;case 2:e[0]=c,e[1]=a+c,e[2]=o+c;break;case 3:e[0]=c,e[1]=o+c,e[2]=a+c;break;case 4:e[0]=o+c,e[1]=c,e[2]=a+c;break;case 5:case 6:e[0]=a+c,e[1]=c,e[2]=o+c;break}}function Vk(i){return i<=.03928?i/12.92:((i+.055)/1.055)**2.4}function qk(i,e,t){jA(i,t),t.map(Vk);const n=.2126*t[0]+.7152*t[1]+.0722*t[2];jA(e,t),t.map(Vk);const s=.2126*t[0]+.7152*t[1]+.0722*t[2];return n>s?(n+.05)/(s+.05):(s+.05)/(n+.05)}const $k=new Map;function GL(i,e){const t=i[0]+i[1]*256+i[2]*65536+e[0]*16777216+e[1]*4294967296+e[2]*1099511627776;let n=$k.get(t);if(n)return n;const s=new Float32Array(9),a=s.subarray(0,3),o=s.subarray(3,6);Gk(i,o);const c=s.subarray(6,9);Gk(e,c);const u=c[2]<.5,d=u?12:4.5;if(o[2]=u?Math.sqrt(o[2]):1-Math.sqrt(1-o[2]),qk(o,c,a)<d){let p,y;u?(p=o[2],y=1):(p=0,y=o[2]);const v=.005;for(;y-p>v;){const w=o[2]=(p+y)/2;u===qk(o,c,a)<d?p=w:y=w}o[2]=u?y:p}return jA(o,a),n=Me.makeHexColor(Math.round(a[0]*255),Math.round(a[1]*255),Math.round(a[2]*255)),$k.set(t,n),n}function nT({html:i,dir:e,className:t},n){const s=document.createDocumentFragment();if(typeof i=="string"){const a=document.createElement("p");a.dir=e||"auto";const o=i.split(/(?:\r\n?|\n)/);for(let c=0,u=o.length;c<u;++c){const d=o[c];a.append(document.createTextNode(d)),c<u-1&&a.append(document.createElement("br"))}s.append(a)}else tT.render({xfaHtml:i,div:s,intent:"richText"});s.firstChild.classList.add("richText",t),n.append(s)}var Yl,Wl,wr,Sr,Og,Xl,hf,ff,Hg,wb,VL,Mi,qL,$L,Hh,ng;const wo=class wo{constructor(e){P(this,Mi);P(this,Yl,null);P(this,Wl,null);P(this,wr);P(this,Sr,null);P(this,Og,null);P(this,Xl,null);P(this,hf,null);P(this,ff,null);N(this,wr,e),f(wo,Hg)||N(wo,Hg,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=N(this,Yl,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=f(this,wr)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",sr,{signal:t}),e.addEventListener("pointerdown",j(wo,wb,VL),{signal:t}));const n=N(this,Sr,document.createElement("div"));n.className="buttons",e.append(n);const s=f(this,wr).toolbarPosition;if(s){const{style:a}=e,o=f(this,wr)._uiManager.direction==="ltr"?1-s[0]:s[0];a.insetInlineEnd=`${100*o}%`,a.top=`calc(${100*s[1]}% + var(--editor-toolbar-vert-offset))`}return e}get div(){return f(this,Yl)}hide(){var e;f(this,Yl).classList.add("hidden"),(e=f(this,Wl))==null||e.hideDropdown()}show(){var e,t;f(this,Yl).classList.remove("hidden"),(e=f(this,Og))==null||e.shown(),(t=f(this,Xl))==null||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=f(this,wr),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",f(wo,Hg)[e]),j(this,Mi,Hh).call(this,n)&&n.addEventListener("click",s=>{t.delete()},{signal:t._signal}),f(this,Sr).append(n)}async addAltText(e){const t=await e.render();j(this,Mi,Hh).call(this,t),f(this,Sr).append(t,f(this,Mi,ng)),N(this,Og,e)}addComment(e,t=null){if(f(this,Xl))return;const n=e.renderForToolbar();if(!n)return;j(this,Mi,Hh).call(this,n);const s=N(this,hf,f(this,Mi,ng));t?(f(this,Sr).insertBefore(n,t),f(this,Sr).insertBefore(s,t)):f(this,Sr).append(n,s),N(this,Xl,e),e.toolbar=this}addColorPicker(e){if(f(this,Wl))return;N(this,Wl,e);const t=e.renderButton();j(this,Mi,Hh).call(this,t),f(this,Sr).append(t,f(this,Mi,ng))}async addEditSignatureButton(e){const t=N(this,ff,await e.renderEditButton(f(this,wr)));j(this,Mi,Hh).call(this,t),f(this,Sr).append(t,f(this,Mi,ng))}removeButton(e){var t,n;switch(e){case"comment":(t=f(this,Xl))==null||t.removeToolbarCommentButton(),N(this,Xl,null),(n=f(this,hf))==null||n.remove(),N(this,hf,null);break}}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t);break}}async addButtonBefore(e,t,n){const s=f(this,Sr).querySelector(n);s&&e==="comment"&&this.addComment(t,s)}updateEditSignatureButton(e){f(this,ff)&&(f(this,ff).title=e)}remove(){var e;f(this,Yl).remove(),(e=f(this,Wl))==null||e.destroy(),N(this,Wl,null)}};Yl=new WeakMap,Wl=new WeakMap,wr=new WeakMap,Sr=new WeakMap,Og=new WeakMap,Xl=new WeakMap,hf=new WeakMap,ff=new WeakMap,Hg=new WeakMap,wb=new WeakSet,VL=function(e){e.stopPropagation()},Mi=new WeakSet,qL=function(e){f(this,wr)._focusEventsAllowed=!1,bn(e)},$L=function(e){f(this,wr)._focusEventsAllowed=!0,bn(e)},Hh=function(e){const t=f(this,wr)._uiManager._signal;return!(t instanceof AbortSignal)||t.aborted?!1:(e.addEventListener("focusin",j(this,Mi,qL).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",j(this,Mi,$L).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",sr,{signal:t}),!0)},ng=function(){const e=document.createElement("div");return e.className="divider",e},P(wo,wb),P(wo,Hg,null);let BA=wo;var zg,Iu,Eo,hl,YL,WL,OA;class F9{constructor(e){P(this,hl);P(this,zg,null);P(this,Iu,null);P(this,Eo);N(this,Eo,e)}show(e,t,n){const[s,a]=j(this,hl,WL).call(this,t,n),{style:o}=f(this,Iu)||N(this,Iu,j(this,hl,YL).call(this));e.append(f(this,Iu)),o.insetInlineEnd=`${100*s}%`,o.top=`calc(${100*a}% + var(--editor-toolbar-vert-offset))`}hide(){f(this,Iu).remove()}}zg=new WeakMap,Iu=new WeakMap,Eo=new WeakMap,hl=new WeakSet,YL=function(){const e=N(this,Iu,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=f(this,Eo)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",sr,{signal:t});const n=N(this,zg,document.createElement("div"));return n.className="buttons",e.append(n),f(this,Eo).hasCommentManager()&&j(this,hl,OA).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{f(this,Eo).commentSelection("floating_button")}),j(this,hl,OA).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{f(this,Eo).highlightSelection("floating_button")}),e},WL=function(e,t){let n=0,s=0;for(const a of e){const o=a.y+a.height;if(o<n)continue;const c=a.x+(t?a.width:0);if(o>n){s=c,n=o;continue}t?c>s&&(s=c):c<s&&(s=c)}return[t?1-s:s,n]},OA=function(e,t,n,s){const a=document.createElement("button");a.classList.add("basic",e),a.tabIndex=0,a.setAttribute("data-l10n-id",t);const o=document.createElement("span");a.append(o),o.className="visuallyHidden",o.setAttribute("data-l10n-id",n);const c=f(this,Eo)._signal;c instanceof AbortSignal&&!c.aborted&&(a.addEventListener("contextmenu",sr,{signal:c}),a.addEventListener("click",s,{signal:c})),f(this,zg).append(a)};function XL(i,e,t){for(const n of t)e.addEventListener(n,i[n].bind(i))}var Sb;class U9{constructor(){P(this,Sb,0)}get id(){return`${kg}${Kn(this,Sb)._++}`}}Sb=new WeakMap;var pf,Gg,Fi,mf,bx;const fT=class fT{constructor(){P(this,mf);P(this,pf,ZC());P(this,Gg,0);P(this,Fi,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),s=new Image;s.src=e;const a=s.decode().then(()=>(n.drawImage(s,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return nt(this,"_isSVGFittingCanvas",a)}async getFromFile(e){const{lastModified:t,name:n,size:s,type:a}=e;return j(this,mf,bx).call(this,`${t}_${n}_${s}_${a}`,e)}async getFromUrl(e){return j(this,mf,bx).call(this,e,e)}async getFromBlob(e,t){const n=await t;return j(this,mf,bx).call(this,e,n)}async getFromId(e){f(this,Fi)||N(this,Fi,new Map);const t=f(this,Fi).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){f(this,Fi)||N(this,Fi,new Map);let n=f(this,Fi).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const s=new OffscreenCanvas(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),n={bitmap:s.transferToImageBitmap(),id:`image_${f(this,pf)}_${Kn(this,Gg)._++}`,refCounter:1,isSvg:!1},f(this,Fi).set(e,n),f(this,Fi).set(n.id,n),n}getSvgUrl(e){const t=f(this,Fi).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var s;f(this,Fi)||N(this,Fi,new Map);const t=f(this,Fi).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const a=new OffscreenCanvas(n.width,n.height);a.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=a.convertToBlob()}(s=n.close)==null||s.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${f(this,pf)}_`)}};pf=new WeakMap,Gg=new WeakMap,Fi=new WeakMap,mf=new WeakSet,bx=async function(e,t){f(this,Fi)||N(this,Fi,new Map);let n=f(this,Fi).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${f(this,pf)}_${Kn(this,Gg)._++}`,refCounter:0,isSvg:!1});let s;if(typeof t=="string"?(n.url=t,s=await Xp(t,"blob")):t instanceof File?s=n.file=t:t instanceof Blob&&(s=t),s.type==="image/svg+xml"){const a=fT._isSVGFittingCanvas,o=new FileReader,c=new Image,u=new Promise((d,p)=>{c.onload=()=>{n.bitmap=c,n.isSvg=!0,d()},o.onload=async()=>{const y=n.svgUrl=o.result;c.src=await a?`${y}#svgView(preserveAspectRatio(none))`:y},c.onerror=o.onerror=p});o.readAsDataURL(s),await u}else n.bitmap=await createImageBitmap(s);n.refCounter=1}catch(s){Ke(s),n=null}return f(this,Fi).set(e,n),n&&f(this,Fi).set(n.id,n),n};let HA=fT;var Un,Jl,Vg,yn;class j9{constructor(e=128){P(this,Un,[]);P(this,Jl,!1);P(this,Vg);P(this,yn,-1);N(this,Vg,e)}add({cmd:e,undo:t,post:n,mustExec:s,type:a=NaN,overwriteIfSameType:o=!1,keepUndo:c=!1}){if(s&&e(),f(this,Jl))return;const u={cmd:e,undo:t,post:n,type:a};if(f(this,yn)===-1){f(this,Un).length>0&&(f(this,Un).length=0),N(this,yn,0),f(this,Un).push(u);return}if(o&&f(this,Un)[f(this,yn)].type===a){c&&(u.undo=f(this,Un)[f(this,yn)].undo),f(this,Un)[f(this,yn)]=u;return}const d=f(this,yn)+1;d===f(this,Vg)?f(this,Un).splice(0,1):(N(this,yn,d),d<f(this,Un).length&&f(this,Un).splice(d)),f(this,Un).push(u)}undo(){if(f(this,yn)===-1)return;N(this,Jl,!0);const{undo:e,post:t}=f(this,Un)[f(this,yn)];e(),t==null||t(),N(this,Jl,!1),N(this,yn,f(this,yn)-1)}redo(){if(f(this,yn)<f(this,Un).length-1){N(this,yn,f(this,yn)+1),N(this,Jl,!0);const{cmd:e,post:t}=f(this,Un)[f(this,yn)];e(),t==null||t(),N(this,Jl,!1)}}hasSomethingToUndo(){return f(this,yn)!==-1}hasSomethingToRedo(){return f(this,yn)<f(this,Un).length-1}cleanType(e){if(f(this,yn)!==-1){for(let t=f(this,yn);t>=0;t--)if(f(this,Un)[t].type!==e){f(this,Un).splice(t+1,f(this,yn)-t),N(this,yn,t);return}f(this,Un).length=0,N(this,yn,-1)}}destroy(){N(this,Un,null)}}Un=new WeakMap,Jl=new WeakMap,Vg=new WeakMap,yn=new WeakMap;var Eb,JL;class D0{constructor(e){P(this,Eb);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=mi.platform;for(const[n,s,a={}]of e)for(const o of n){const c=o.startsWith("mac+");t&&c?(this.callbacks.set(o.slice(4),{callback:s,options:a}),this.allKeys.add(o.split("+").at(-1))):!t&&!c&&(this.callbacks.set(o,{callback:s,options:a}),this.allKeys.add(o.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(j(this,Eb,JL).call(this,t));if(!n)return;const{callback:s,options:{bubbles:a=!1,args:o=[],checker:c=null}}=n;c&&!c(e,t)||(s.bind(e,...o,t)(),a||bn(t))}}Eb=new WeakSet,JL=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Ab=class Ab{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return P9(e),nt(this,"_colors",e)}convert(e){const t=Jp(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,s]of this._colors)if(s.every((a,o)=>a===t[o]))return Ab._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Me.makeHexColor(...t):e}};ye(Ab,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let zA=Ab;var gf,Us,yf,_n,Zn,vf,Er,xf,Ar,Ui,Kl,Ql,bf,Zl,xa,Cr,Pu,qg,$g,wf,Yg,ba,ec,Sf,tc,wa,Cb,nc,Ef,Wg,ic,Lu,Af,sc,Xg,$n,Ut,Ao,rc,ac,Jg,Cf,Kg,oc,Sa,Co,Qg,Zg,Tr,we,wx,GA,KL,QL,ig,ZL,e5,t5,VA,n5,qA,$A,i5,Xi,xo,s5,r5,YA,a5,sg,WA;const Kh=class Kh{constructor(e,t,n,s,a,o,c,u,d,p,y,v,w,A,C,T){P(this,we);P(this,gf,new AbortController);P(this,Us,null);P(this,yf,null);P(this,_n,new Map);P(this,Zn,new Map);P(this,vf,null);P(this,Er,null);P(this,xf,null);P(this,Ar,new j9);P(this,Ui,null);P(this,Kl,null);P(this,Ql,null);P(this,bf,0);P(this,Zl,new Set);P(this,xa,null);P(this,Cr,null);P(this,Pu,new Set);ye(this,"_editorUndoBar",null);P(this,qg,!1);P(this,$g,!1);P(this,wf,!1);P(this,Yg,null);P(this,ba,null);P(this,ec,null);P(this,Sf,null);P(this,tc,!1);P(this,wa,null);P(this,Cb,new U9);P(this,nc,!1);P(this,Ef,!1);P(this,Wg,!1);P(this,ic,null);P(this,Lu,null);P(this,Af,null);P(this,sc,null);P(this,Xg,null);P(this,$n,Je.NONE);P(this,Ut,new Set);P(this,Ao,null);P(this,rc,null);P(this,ac,null);P(this,Jg,null);P(this,Cf,null);P(this,Kg,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});P(this,oc,[0,0]);P(this,Sa,null);P(this,Co,null);P(this,Qg,null);P(this,Zg,null);P(this,Tr,null);const _=this._signal=f(this,gf).signal;N(this,Co,e),N(this,Qg,t),N(this,Zg,n),N(this,vf,s),N(this,Ui,a),N(this,rc,o),N(this,Cf,u),this._eventBus=c,c._on("editingaction",this.onEditingAction.bind(this),{signal:_}),c._on("pagechanging",this.onPageChanging.bind(this),{signal:_}),c._on("scalechanging",this.onScaleChanging.bind(this),{signal:_}),c._on("rotationchanging",this.onRotationChanging.bind(this),{signal:_}),c._on("setpreference",this.onSetPreference.bind(this),{signal:_}),c._on("switchannotationeditorparams",D=>this.updateParams(D.type,D.value),{signal:_}),window.addEventListener("pointerdown",()=>{N(this,Ef,!0)},{capture:!0,signal:_}),window.addEventListener("pointerup",()=>{N(this,Ef,!1)},{capture:!0,signal:_}),j(this,we,ZL).call(this),j(this,we,i5).call(this),j(this,we,VA).call(this),N(this,Er,u.annotationStorage),N(this,Yg,u.filterFactory),N(this,ac,d),N(this,Sf,p||null),N(this,qg,y),N(this,$g,v),N(this,wf,w),N(this,Xg,A||null),this.viewParameters={realScale:dl.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=C||null,this._supportsPinchToZoom=T!==!1,a==null||a.setSidebarUiManager(this)}static get _keyboardManager(){const e=Kh.prototype,t=o=>f(o,Co).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),n=(o,{target:c})=>{if(c instanceof HTMLInputElement){const{type:u}=c;return u!=="text"&&u!=="number"}return!0},s=this.TRANSLATE_SMALL,a=this.TRANSLATE_BIG;return nt(this,"_keyboardManager",new D0([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&f(o,Co).contains(c)&&!o.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(o,{target:c})=>!(c instanceof HTMLButtonElement)&&f(o,Co).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-a,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[a,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-a],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,a],checker:t}]]))}destroy(){var e,t,n,s,a,o,c,u,d;(e=f(this,Tr))==null||e.resolve(),N(this,Tr,null),(t=f(this,gf))==null||t.abort(),N(this,gf,null),this._signal=null;for(const p of f(this,Zn).values())p.destroy();f(this,Zn).clear(),f(this,_n).clear(),f(this,Pu).clear(),(n=f(this,sc))==null||n.clear(),N(this,Us,null),f(this,Ut).clear(),f(this,Ar).destroy(),(s=f(this,vf))==null||s.destroy(),(a=f(this,Ui))==null||a.destroy(),(o=f(this,rc))==null||o.destroy(),(c=f(this,wa))==null||c.hide(),N(this,wa,null),(u=f(this,Af))==null||u.destroy(),N(this,Af,null),N(this,yf,null),f(this,ba)&&(clearTimeout(f(this,ba)),N(this,ba,null)),f(this,Sa)&&(clearTimeout(f(this,Sa)),N(this,Sa,null)),(d=this._editorUndoBar)==null||d.destroy(),N(this,Cf,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return f(this,Xg)}get useNewAltTextFlow(){return f(this,$g)}get useNewAltTextWhenAddingImage(){return f(this,wf)}get hcmFilter(){return nt(this,"hcmFilter",f(this,ac)?f(this,Yg).addHCMFilter(f(this,ac).foreground,f(this,ac).background):"none")}get direction(){return nt(this,"direction",getComputedStyle(f(this,Co)).direction)}get _highlightColors(){return nt(this,"_highlightColors",f(this,Sf)?new Map(f(this,Sf).split(",").map(e=>(e=e.split("=").map(t=>t.trim()),e[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return nt(this,"highlightColors",null);const t=new Map,n=!!f(this,ac);for(const[s,a]of e){const o=s.endsWith("_HCM");if(n&&o){t.set(s.replace("_HCM",""),a);continue}!n&&!o&&t.set(s,a)}return nt(this,"highlightColors",t)}get highlightColorNames(){return nt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),N(this,Ql,e)}setMainHighlightColorPicker(e){N(this,Af,e)}editAltText(e,t=!1){var n;(n=f(this,vf))==null||n.editAltText(this,e,t)}hasCommentManager(){return!!f(this,Ui)}editComment(e,t,n,s){var a;(a=f(this,Ui))==null||a.showDialog(this,e,t,n,s)}selectComment(e,t){const n=f(this,Zn).get(e),s=n==null?void 0:n.getEditorByUID(t);s==null||s.toggleComment(!0,!0)}updateComment(e){var t;(t=f(this,Ui))==null||t.updateComment(e.getData())}updatePopupColor(e){var t;(t=f(this,Ui))==null||t.updatePopupColor(e)}removeComment(e){var t;(t=f(this,Ui))==null||t.removeComments([e.uid])}toggleComment(e,t,n=void 0){var s;(s=f(this,Ui))==null||s.toggleCommentPopup(e,t,n)}makeCommentColor(e,t){var n;return e&&((n=f(this,Ui))==null?void 0:n.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return((e=f(this,Ui))==null?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(f(this,Zn).has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),s=a=>{a.pageNumber===e&&(this._eventBus._off("editorsrendered",s),t())};this._eventBus.on("editorsrendered",s),await n}getSignature(e){var t;(t=f(this,rc))==null||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return f(this,rc)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":N(this,wf,t);break}}onPageChanging({pageNumber:e}){N(this,bf,e-1)}focusMainContainer(){f(this,Co).focus()}findParent(e,t){for(const n of f(this,Zn).values()){const{x:s,y:a,width:o,height:c}=n.div.getBoundingClientRect();if(e>=s&&e<=s+o&&t>=a&&t<=a+c)return n}return null}disableUserSelect(e=!1){f(this,Qg).classList.toggle("noUserSelect",e)}addShouldRescale(e){f(this,Pu).add(e)}removeShouldRescale(e){f(this,Pu).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*dl.PDF_TO_CSS_UNITS;for(const n of f(this,Pu))n.onScaleChanging();(t=f(this,Ql))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e="",t=!1){const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:s,anchorOffset:a,focusNode:o,focusOffset:c}=n,u=n.toString(),p=j(this,we,wx).call(this,n).closest(".textLayer"),y=this.getSelectionBoxes(p);if(!y)return;n.empty();const v=j(this,we,GA).call(this,p),w=f(this,$n)===Je.NONE,A=()=>{const C=v==null?void 0:v.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:y,anchorNode:s,anchorOffset:a,focusNode:o,focusOffset:c,text:u});w&&this.showAllEditors("highlight",!0,!0),t&&(C==null||C.editComment())};if(w){this.switchToMode(Je.HIGHLIGHT,A);return}A()}commentSelection(e=""){this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!f(this,Er))return null;const t=`${kg}${e}`,n=f(this,Er).getRawValue(t);return n&&f(this,Er).remove(t),n}addToAnnotationStorage(e){!e.isEmpty()&&f(this,Er)&&!f(this,Er).has(e.id)&&f(this,Er).setValue(e.id,e)}a11yAlert(e,t=null){const n=f(this,Zg);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,f(this,tc)&&(N(this,tc,!1),j(this,we,ig).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of f(this,Ut))if(t.div.contains(e)){N(this,Lu,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!f(this,Lu))return;const[e,t]=f(this,Lu);N(this,Lu,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){j(this,we,VA).call(this),j(this,we,qA).call(this)}removeEditListeners(){j(this,we,n5).call(this),j(this,we,$A).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of f(this,Cr))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of f(this,Cr))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=f(this,Us))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const s of f(this,Ut)){const a=s.serialize(!0);a&&t.push(a)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const a of t.items)for(const o of f(this,Cr))if(o.isHandlingMimeForPasting(a.type)){o.paste(a,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(a){Ke(`paste: "${a.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const s=this.currentLayer;try{const a=[];for(const u of n){const d=await s.deserialize(u);if(!d)return;a.push(d)}const o=()=>{for(const u of a)j(this,we,YA).call(this,u);j(this,we,WA).call(this,a)},c=()=>{for(const u of a)u.remove()};this.addCommands({cmd:o,undo:c,mustExec:!0})}catch(a){Ke(`paste: "${a.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),f(this,$n)!==Je.NONE&&!this.isEditorHandlingKeyboard&&Kh._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,f(this,tc)&&(N(this,tc,!1),j(this,we,ig).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu");break}}setEditingState(e){e?(j(this,we,e5).call(this),j(this,we,qA).call(this),j(this,we,Xi).call(this,{isEditing:f(this,$n)!==Je.NONE,isEmpty:j(this,we,sg).call(this),hasSomethingToUndo:f(this,Ar).hasSomethingToUndo(),hasSomethingToRedo:f(this,Ar).hasSomethingToRedo(),hasSelectedEditor:!1})):(j(this,we,t5).call(this),j(this,we,$A).call(this),j(this,we,Xi).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!f(this,Cr)){N(this,Cr,e);for(const t of f(this,Cr))j(this,we,xo).call(this,t.defaultPropertiesToUpdate)}}getId(){return f(this,Cb).id}get currentLayer(){return f(this,Zn).get(f(this,bf))}getLayer(e){return f(this,Zn).get(e)}get currentPageIndex(){return f(this,bf)}addLayer(e){f(this,Zn).set(e.pageIndex,e),f(this,nc)?e.enable():e.disable()}removeLayer(e){f(this,Zn).delete(e.pageIndex)}async updateMode(e,t=null,n=!1,s=!1,a=!1){var o,c,u,d,p,y;if(f(this,$n)!==e&&!(f(this,Tr)&&(await f(this,Tr).promise,!f(this,Tr)))){if(N(this,Tr,Promise.withResolvers()),(o=f(this,Ql))==null||o.commitOrRemove(),f(this,$n)===Je.POPUP&&((c=f(this,Ui))==null||c.hideSidebar()),(u=f(this,Ui))==null||u.destroyPopup(),N(this,$n,e),e===Je.NONE){this.setEditingState(!1),j(this,we,r5).call(this);for(const v of f(this,_n).values())v.hideStandaloneCommentButton();(d=this._editorUndoBar)==null||d.hide(),this.toggleComment(null),f(this,Tr).resolve();return}for(const v of f(this,_n).values())v.addStandaloneCommentButton();e===Je.SIGNATURE&&await((p=f(this,rc))==null?void 0:p.loadSignatures()),this.setEditingState(!0),await j(this,we,s5).call(this),this.unselectAll();for(const v of f(this,Zn).values())v.updateMode(e);if(e===Je.POPUP){f(this,yf)||N(this,yf,await f(this,Cf).getAnnotationsByType(new Set(f(this,Cr).map(A=>A._editorType))));const v=new Set,w=[];for(const A of f(this,_n).values()){const{annotationElementId:C,hasComment:T,deleted:_}=A;C&&v.add(C),T&&!_&&w.push(A.getData())}for(const A of f(this,yf)){const{id:C,popupRef:T,contentsObj:_}=A;T&&(_!=null&&_.str)&&!v.has(C)&&!f(this,Zl).has(C)&&w.push(A)}(y=f(this,Ui))==null||y.showSidebar(w)}if(!t){n&&this.addNewEditorFromKeyboard(),f(this,Tr).resolve();return}for(const v of f(this,_n).values())v.uid===t?(this.setSelected(v),a?v.editComment():s?v.enterInEditMode():v.focus()):v.unselect();f(this,Tr).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==f(this,$n)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...e})}updateParams(e,t){if(f(this,Cr)){switch(e){case pt.CREATE:this.currentLayer.addNewEditor(t);return;case pt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(f(this,Jg)||N(this,Jg,new Map)).set(e,t),this.showAllEditors("highlight",t);break}if(this.hasSelection)for(const n of f(this,Ut))n.updateParams(e,t);else for(const n of f(this,Cr))n.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var a;for(const o of f(this,_n).values())o.editorType===e&&o.show(t);(((a=f(this,Jg))==null?void 0:a.get(pt.HIGHLIGHT_SHOW_ALL))??!0)!==t&&j(this,we,xo).call(this,[[pt.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(f(this,Wg)!==e){N(this,Wg,e);for(const t of f(this,Zn).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of f(this,_n).values())t.pageIndex===e&&(yield t)}getEditor(e){return f(this,_n).get(e)}addEditor(e){f(this,_n).set(e.id,e)}removeEditor(e){var t,n;e.div.contains(document.activeElement)&&(f(this,ba)&&clearTimeout(f(this,ba)),N(this,ba,setTimeout(()=>{this.focusMainContainer(),N(this,ba,null)},0))),f(this,_n).delete(e.id),e.annotationElementId&&((t=f(this,sc))==null||t.delete(e.annotationElementId)),this.unselect(e),(!e.annotationElementId||!f(this,Zl).has(e.annotationElementId))&&((n=f(this,Er))==null||n.remove(e.id))}addDeletedAnnotationElement(e){f(this,Zl).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return f(this,Zl).has(e)}removeDeletedAnnotationElement(e){f(this,Zl).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){f(this,Us)!==e&&(N(this,Us,e),e&&j(this,we,xo).call(this,e.propertiesToUpdate))}updateUI(e){f(this,we,a5)===e&&j(this,we,xo).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){j(this,we,xo).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(f(this,Ut).has(e)){f(this,Ut).delete(e),e.unselect(),j(this,we,Xi).call(this,{hasSelectedEditor:this.hasSelection});return}f(this,Ut).add(e),e.select(),j(this,we,xo).call(this,e.propertiesToUpdate),j(this,we,Xi).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),(t=f(this,Ql))==null||t.commitOrRemove();for(const n of f(this,Ut))n!==e&&n.unselect();f(this,Ut).clear(),f(this,Ut).add(e),e.select(),j(this,we,xo).call(this,e.propertiesToUpdate),j(this,we,Xi).call(this,{hasSelectedEditor:!0})}isSelected(e){return f(this,Ut).has(e)}get firstSelectedEditor(){return f(this,Ut).values().next().value}unselect(e){e.unselect(),f(this,Ut).delete(e),j(this,we,Xi).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return f(this,Ut).size!==0}get isEnterHandled(){return f(this,Ut).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;f(this,Ar).undo(),j(this,we,Xi).call(this,{hasSomethingToUndo:f(this,Ar).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:j(this,we,sg).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){f(this,Ar).redo(),j(this,we,Xi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:f(this,Ar).hasSomethingToRedo(),isEmpty:j(this,we,sg).call(this)})}addCommands(e){f(this,Ar).add(e),j(this,we,Xi).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:j(this,we,sg).call(this)})}cleanUndoStack(e){f(this,Ar).cleanType(e)}delete(){var a;this.commitOrRemove();const e=(a=this.currentLayer)==null?void 0:a.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...f(this,Ut)],n=()=>{var o;(o=this._editorUndoBar)==null||o.show(s,t.length===1?t[0].editorType:t.length);for(const c of t)c.remove()},s=()=>{for(const o of t)j(this,we,YA).call(this,o)};this.addCommands({cmd:n,undo:s,mustExec:!0})}commitOrRemove(){var e;(e=f(this,Us))==null||e.commitOrRemove()}hasSomethingToControl(){return f(this,Us)||this.hasSelection}selectAll(){for(const e of f(this,Ut))e.commit();j(this,we,WA).call(this,f(this,_n).values())}unselectAll(){var e;if(!(f(this,Us)&&(f(this,Us).commitOrRemove(),f(this,$n)!==Je.NONE))&&!((e=f(this,Ql))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of f(this,Ut))t.unselect();f(this,Ut).clear(),j(this,we,Xi).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;f(this,oc)[0]+=e,f(this,oc)[1]+=t;const[s,a]=f(this,oc),o=[...f(this,Ut)],c=1e3;f(this,Sa)&&clearTimeout(f(this,Sa)),N(this,Sa,setTimeout(()=>{N(this,Sa,null),f(this,oc)[0]=f(this,oc)[1]=0,this.addCommands({cmd:()=>{for(const u of o)f(this,_n).has(u.id)&&(u.translateInPage(s,a),u.translationDone())},undo:()=>{for(const u of o)f(this,_n).has(u.id)&&(u.translateInPage(-s,-a),u.translationDone())},mustExec:!1})},c));for(const u of o)u.translateInPage(e,t),u.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),N(this,xa,new Map);for(const e of f(this,Ut))f(this,xa).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!f(this,xa))return!1;this.disableUserSelect(!1);const e=f(this,xa);N(this,xa,null);let t=!1;for(const[{x:s,y:a,pageIndex:o},c]of e)c.newX=s,c.newY=a,c.newPageIndex=o,t||(t=s!==c.savedX||a!==c.savedY||o!==c.savedPageIndex);if(!t)return!1;const n=(s,a,o,c)=>{if(f(this,_n).has(s.id)){const u=f(this,Zn).get(c);u?s._setParentAndPosition(u,a,o):(s.pageIndex=c,s.x=a,s.y=o)}};return this.addCommands({cmd:()=>{for(const[s,{newX:a,newY:o,newPageIndex:c}]of e)n(s,a,o,c)},undo:()=>{for(const[s,{savedX:a,savedY:o,savedPageIndex:c}]of e)n(s,a,o,c)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(f(this,xa))for(const n of f(this,xa).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||f(this,Ut).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return f(this,Us)===e}getActive(){return f(this,Us)}getMode(){return f(this,$n)}isEditingMode(){return f(this,$n)!==Je.NONE}get imageManager(){return nt(this,"imageManager",new HA)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let d=0,p=t.rangeCount;d<p;d++)if(!e.contains(t.getRangeAt(d).commonAncestorContainer))return null;const{x:n,y:s,width:a,height:o}=e.getBoundingClientRect();let c;switch(e.getAttribute("data-main-rotation")){case"90":c=(d,p,y,v)=>({x:(p-s)/o,y:1-(d+y-n)/a,width:v/o,height:y/a});break;case"180":c=(d,p,y,v)=>({x:1-(d+y-n)/a,y:1-(p+v-s)/o,width:y/a,height:v/o});break;case"270":c=(d,p,y,v)=>({x:1-(p+v-s)/o,y:(d-n)/a,width:v/o,height:y/a});break;default:c=(d,p,y,v)=>({x:(d-n)/a,y:(p-s)/o,width:y/a,height:v/o});break}const u=[];for(let d=0,p=t.rangeCount;d<p;d++){const y=t.getRangeAt(d);if(!y.collapsed)for(const{x:v,y:w,width:A,height:C}of y.getClientRects())A===0||C===0||u.push(c(v,w,A,C))}return u.length===0?null:u}addChangedExistingAnnotation({annotationElementId:e,id:t}){(f(this,xf)||N(this,xf,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=f(this,xf))==null||t.delete(e)}renderAnnotationElement(e){var s;const t=(s=f(this,xf))==null?void 0:s.get(e.data.id);if(!t)return;const n=f(this,Er).getRawValue(t);n&&(f(this,$n)===Je.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}setMissingCanvas(e,t,n){var a;const s=(a=f(this,sc))==null?void 0:a.get(e);s&&(s.setCanvas(t,n),f(this,sc).delete(e))}addMissingCanvas(e,t){(f(this,sc)||N(this,sc,new Map)).set(e,t)}};gf=new WeakMap,Us=new WeakMap,yf=new WeakMap,_n=new WeakMap,Zn=new WeakMap,vf=new WeakMap,Er=new WeakMap,xf=new WeakMap,Ar=new WeakMap,Ui=new WeakMap,Kl=new WeakMap,Ql=new WeakMap,bf=new WeakMap,Zl=new WeakMap,xa=new WeakMap,Cr=new WeakMap,Pu=new WeakMap,qg=new WeakMap,$g=new WeakMap,wf=new WeakMap,Yg=new WeakMap,ba=new WeakMap,ec=new WeakMap,Sf=new WeakMap,tc=new WeakMap,wa=new WeakMap,Cb=new WeakMap,nc=new WeakMap,Ef=new WeakMap,Wg=new WeakMap,ic=new WeakMap,Lu=new WeakMap,Af=new WeakMap,sc=new WeakMap,Xg=new WeakMap,$n=new WeakMap,Ut=new WeakMap,Ao=new WeakMap,rc=new WeakMap,ac=new WeakMap,Jg=new WeakMap,Cf=new WeakMap,Kg=new WeakMap,oc=new WeakMap,Sa=new WeakMap,Co=new WeakMap,Qg=new WeakMap,Zg=new WeakMap,Tr=new WeakMap,we=new WeakSet,wx=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},GA=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of f(this,Zn).values())if(n.hasTextLayer(e))return n;return null},KL=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=j(this,we,wx).call(this,e).closest(".textLayer"),s=this.getSelectionBoxes(n);s&&(f(this,wa)||N(this,wa,new F9(this)),f(this,wa).show(n,s,this.direction==="ltr"))},QL=function(){var a,o,c;const e=document.getSelection();if(!e||e.isCollapsed){f(this,Ao)&&((a=f(this,wa))==null||a.hide(),N(this,Ao,null),j(this,we,Xi).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===f(this,Ao))return;const s=j(this,we,wx).call(this,e).closest(".textLayer");if(!s){f(this,Ao)&&((o=f(this,wa))==null||o.hide(),N(this,Ao,null),j(this,we,Xi).call(this,{hasSelectedText:!1}));return}if((c=f(this,wa))==null||c.hide(),N(this,Ao,t),j(this,we,Xi).call(this,{hasSelectedText:!0}),!(f(this,$n)!==Je.HIGHLIGHT&&f(this,$n)!==Je.NONE)&&(f(this,$n)===Je.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),N(this,tc,this.isShiftKeyDown),!this.isShiftKeyDown)){const u=f(this,$n)===Je.HIGHLIGHT?j(this,we,GA).call(this,s):null;if(u==null||u.toggleDrawing(),f(this,Ef)){const d=new AbortController,p=this.combinedSignal(d),y=v=>{v.type==="pointerup"&&v.button!==0||(d.abort(),u==null||u.toggleDrawing(!0),v.type==="pointerup"&&j(this,we,ig).call(this,"main_toolbar"))};window.addEventListener("pointerup",y,{signal:p}),window.addEventListener("blur",y,{signal:p})}else u==null||u.toggleDrawing(!0),j(this,we,ig).call(this,"main_toolbar")}},ig=function(e=""){f(this,$n)===Je.HIGHLIGHT?this.highlightSelection(e):f(this,qg)&&j(this,we,KL).call(this)},ZL=function(){document.addEventListener("selectionchange",j(this,we,QL).bind(this),{signal:this._signal})},e5=function(){if(f(this,ec))return;N(this,ec,new AbortController);const e=this.combinedSignal(f(this,ec));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},t5=function(){var e;(e=f(this,ec))==null||e.abort(),N(this,ec,null)},VA=function(){if(f(this,ic))return;N(this,ic,new AbortController);const e=this.combinedSignal(f(this,ic));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},n5=function(){var e;(e=f(this,ic))==null||e.abort(),N(this,ic,null)},qA=function(){if(f(this,Kl))return;N(this,Kl,new AbortController);const e=this.combinedSignal(f(this,Kl));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},$A=function(){var e;(e=f(this,Kl))==null||e.abort(),N(this,Kl,null)},i5=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},Xi=function(e){Object.entries(e).some(([n,s])=>f(this,Kg)[n]!==s)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(f(this,Kg),e)}),f(this,$n)===Je.HIGHLIGHT&&e.hasSelectedEditor===!1&&j(this,we,xo).call(this,[[pt.HIGHLIGHT_FREE,!0]]))},xo=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},s5=async function(){if(!f(this,nc)){N(this,nc,!0);const e=[];for(const t of f(this,Zn).values())e.push(t.enable());await Promise.all(e);for(const t of f(this,_n).values())t.enable()}},r5=function(){if(this.unselectAll(),f(this,nc)){N(this,nc,!1);for(const e of f(this,Zn).values())e.disable();for(const e of f(this,_n).values())e.disable()}},YA=function(e){const t=f(this,Zn).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},a5=function(){let e=null;for(e of f(this,Ut));return e},sg=function(){if(f(this,_n).size===0)return!0;if(f(this,_n).size===1)for(const e of f(this,_n).values())return e.isEmpty();return!1},WA=function(e){for(const t of f(this,Ut))t.unselect();f(this,Ut).clear();for(const t of e)t.isEmpty()||(f(this,Ut).add(t),t.select());j(this,we,Xi).call(this,{hasSelectedEditor:this.hasSelection})},ye(Kh,"TRANSLATE_SMALL",1),ye(Kh,"TRANSLATE_BIG",10);let Xc=Kh;var ai,Ea,Xr,Tf,Aa,js,_f,Ca,ms,To,Fu,Ta,lc,oa,rg,Sx;const Ji=class Ji{constructor(e){P(this,oa);P(this,ai,null);P(this,Ea,!1);P(this,Xr,null);P(this,Tf,null);P(this,Aa,null);P(this,js,null);P(this,_f,!1);P(this,Ca,null);P(this,ms,null);P(this,To,null);P(this,Fu,null);P(this,Ta,!1);N(this,ms,e),N(this,Ta,e._uiManager.useNewAltTextFlow),f(Ji,lc)||N(Ji,lc,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){Ji._l10n??(Ji._l10n=e)}async render(){const e=N(this,Xr,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=N(this,Tf,document.createElement("span"));e.append(t),f(this,Ta)?(e.classList.add("new"),e.setAttribute("data-l10n-id",f(Ji,lc).missing),t.setAttribute("data-l10n-id",f(Ji,lc)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=f(this,ms)._uiManager._signal;e.addEventListener("contextmenu",sr,{signal:n}),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const s=a=>{a.preventDefault(),f(this,ms)._uiManager.editAltText(f(this,ms)),f(this,Ta)&&f(this,ms)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:f(this,oa,rg)}})};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(N(this,_f,!0),s(a))},{signal:n}),await j(this,oa,Sx).call(this),e}finish(){f(this,Xr)&&(f(this,Xr).focus({focusVisible:f(this,_f)}),N(this,_f,!1))}isEmpty(){return f(this,Ta)?f(this,ai)===null:!f(this,ai)&&!f(this,Ea)}hasData(){return f(this,Ta)?f(this,ai)!==null||!!f(this,To):this.isEmpty()}get guessedText(){return f(this,To)}async setGuessedText(e){f(this,ai)===null&&(N(this,To,e),N(this,Fu,await Ji._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),j(this,oa,Sx).call(this))}toggleAltTextBadge(e=!1){var t;if(!f(this,Ta)||f(this,ai)){(t=f(this,Ca))==null||t.remove(),N(this,Ca,null);return}if(!f(this,Ca)){const n=N(this,Ca,document.createElement("div"));n.className="noAltTextBadge",f(this,ms).div.append(n)}f(this,Ca).classList.toggle("hidden",!e)}serialize(e){let t=f(this,ai);return!e&&f(this,To)===t&&(t=f(this,Fu)),{altText:t,decorative:f(this,Ea),guessedText:f(this,To),textWithDisclaimer:f(this,Fu)}}get data(){return{altText:f(this,ai),decorative:f(this,Ea)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:s,cancel:a=!1}){n&&(N(this,To,n),N(this,Fu,s)),!(f(this,ai)===e&&f(this,Ea)===t)&&(a||(N(this,ai,e),N(this,Ea,t)),j(this,oa,Sx).call(this))}toggle(e=!1){f(this,Xr)&&(!e&&f(this,js)&&(clearTimeout(f(this,js)),N(this,js,null)),f(this,Xr).disabled=!e)}shown(){f(this,ms)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:f(this,oa,rg)}})}destroy(){var e,t;(e=f(this,Xr))==null||e.remove(),N(this,Xr,null),N(this,Tf,null),N(this,Aa,null),(t=f(this,Ca))==null||t.remove(),N(this,Ca,null)}};ai=new WeakMap,Ea=new WeakMap,Xr=new WeakMap,Tf=new WeakMap,Aa=new WeakMap,js=new WeakMap,_f=new WeakMap,Ca=new WeakMap,ms=new WeakMap,To=new WeakMap,Fu=new WeakMap,Ta=new WeakMap,lc=new WeakMap,oa=new WeakSet,rg=function(){return f(this,ai)&&"added"||f(this,ai)===null&&this.guessedText&&"review"||"missing"},Sx=async function(){var s,a,o;const e=f(this,Xr);if(!e)return;if(f(this,Ta)){if(e.classList.toggle("done",!!f(this,ai)),e.setAttribute("data-l10n-id",f(Ji,lc)[f(this,oa,rg)]),(s=f(this,Tf))==null||s.setAttribute("data-l10n-id",f(Ji,lc)[`${f(this,oa,rg)}-label`]),!f(this,ai)){(a=f(this,Aa))==null||a.remove();return}}else{if(!f(this,ai)&&!f(this,Ea)){e.classList.remove("done"),(o=f(this,Aa))==null||o.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=f(this,Aa);if(!t){N(this,Aa,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${f(this,ms).id}`;const c=100,u=f(this,ms)._uiManager._signal;u.addEventListener("abort",()=>{clearTimeout(f(this,js)),N(this,js,null)},{once:!0}),e.addEventListener("mouseenter",()=>{N(this,js,setTimeout(()=>{N(this,js,null),f(this,Aa).classList.add("show"),f(this,ms)._reportTelemetry({action:"alt_text_tooltip"})},c))},{signal:u}),e.addEventListener("mouseleave",()=>{var d;f(this,js)&&(clearTimeout(f(this,js)),N(this,js,null)),(d=f(this,Aa))==null||d.classList.remove("show")},{signal:u})}f(this,Ea)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=f(this,ai)),t.parentNode||e.append(t);const n=f(this,ms).getElementForAltText();n==null||n.setAttribute("aria-describedby",t.id)},P(Ji,lc,null),ye(Ji,"_l10n",null);let db=Ji;var Ei,_r,Uu,nn,ey,ju,Jr,Bu,Ou,Hu,ty,XA;class nx{constructor(e){P(this,ty);P(this,Ei,null);P(this,_r,null);P(this,Uu,!1);P(this,nn,null);P(this,ey,null);P(this,ju,null);P(this,Jr,null);P(this,Bu,null);P(this,Ou,!1);P(this,Hu,null);N(this,nn,e)}renderForToolbar(){const e=N(this,_r,document.createElement("button"));return e.className="comment",j(this,ty,XA).call(this,e,!1)}renderForStandalone(){const e=N(this,Ei,document.createElement("button"));e.className="annotationCommentButton";const t=f(this,nn).commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd=`calc(${100*(f(this,nn)._uiManager.direction==="ltr"?1-t[0]:t[0])}% - var(--comment-button-dim))`,n.top=`calc(${100*t[1]}% - var(--comment-button-dim))`;const s=f(this,nn).commentButtonColor;s&&(n.backgroundColor=s)}return j(this,ty,XA).call(this,e,!0)}focusButton(){setTimeout(()=>{var e;(e=f(this,Ei)??f(this,_r))==null||e.focus()},0)}onUpdatedColor(){if(!f(this,Ei))return;const e=f(this,nn).commentButtonColor;e&&(f(this,Ei).style.backgroundColor=e),f(this,nn)._uiManager.updatePopupColor(f(this,nn))}get commentButtonWidth(){var e;return(((e=f(this,Ei))==null?void 0:e.getBoundingClientRect().width)??0)/f(this,nn).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(f(this,Hu))return f(this,Hu);if(!f(this,Ei))return null;const{x:e,y:t,height:n}=f(this,Ei).getBoundingClientRect(),{x:s,y:a,width:o,height:c}=f(this,nn).parent.boundingClientRect;return[(e-s)/o,(t+n-a)/c]}set commentPopupPositionInLayer(e){N(this,Hu,e)}hasDefaultPopupPosition(){return f(this,Hu)===null}removeStandaloneCommentButton(){var e;(e=f(this,Ei))==null||e.remove(),N(this,Ei,null)}removeToolbarCommentButton(){var e;(e=f(this,_r))==null||e.remove(),N(this,_r,null)}setCommentButtonStates({selected:e,hasPopup:t}){f(this,Ei)&&(f(this,Ei).classList.toggle("selected",e),f(this,Ei).ariaExpanded=t)}edit(e){const t=this.commentPopupPositionInLayer;let n,s;if(t)[n,s]=t;else{[n,s]=f(this,nn).commentButtonPosition;const{width:p,height:y,x:v,y:w}=f(this,nn);n=v+n*p,s=w+s*y}const a=f(this,nn).parent.boundingClientRect,{x:o,y:c,width:u,height:d}=a;f(this,nn)._uiManager.editComment(f(this,nn),o+n*u,c+s*d,{...e,parentDimensions:a})}finish(){f(this,_r)&&(f(this,_r).focus({focusVisible:f(this,Uu)}),N(this,Uu,!1))}isDeleted(){return f(this,Ou)||f(this,Jr)===""}isEmpty(){return f(this,Jr)===null}hasBeenEdited(){return this.isDeleted()||f(this,Jr)!==f(this,ey)}serialize(){return this.data}get data(){return{text:f(this,Jr),richText:f(this,ju),date:f(this,Bu),deleted:this.isDeleted()}}set data(e){if(e!==f(this,Jr)&&N(this,ju,null),e===null){N(this,Jr,""),N(this,Ou,!0);return}N(this,Jr,e),N(this,Bu,new Date),N(this,Ou,!1)}setInitialText(e,t=null){N(this,ey,e),this.data=e,N(this,Bu,null),N(this,ju,t)}shown(){}destroy(){var e,t;(e=f(this,_r))==null||e.remove(),N(this,_r,null),(t=f(this,Ei))==null||t.remove(),N(this,Ei,null),N(this,Jr,""),N(this,ju,null),N(this,Bu,null),N(this,nn,null),N(this,Uu,!1),N(this,Ou,!1)}}Ei=new WeakMap,_r=new WeakMap,Uu=new WeakMap,nn=new WeakMap,ey=new WeakMap,ju=new WeakMap,Jr=new WeakMap,Bu=new WeakMap,Ou=new WeakMap,Hu=new WeakMap,ty=new WeakSet,XA=function(e,t){if(!f(this,nn)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[f(this,nn)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=f(this,nn)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",sr,{signal:n}),t&&(e.addEventListener("focusin",a=>{f(this,nn)._focusEventsAllowed=!1,bn(a)},{capture:!0,signal:n}),e.addEventListener("focusout",a=>{f(this,nn)._focusEventsAllowed=!0,bn(a)},{capture:!0,signal:n})),e.addEventListener("pointerdown",a=>a.stopPropagation(),{signal:n});const s=a=>{a.preventDefault(),e===f(this,_r)?this.edit():f(this,nn).toggleComment(!0)};return e.addEventListener("click",s,{capture:!0,signal:n}),e.addEventListener("keydown",a=>{a.target===e&&a.key==="Enter"&&(N(this,Uu,!0),s(a))},{signal:n}),e.addEventListener("pointerenter",()=>{f(this,nn).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{f(this,nn).toggleComment(!1,!1)},{signal:n}),e};var Nf,zu,ny,iy,sy,ry,ay,_o,Gu,No,Vu,Ro,Jc,o5,l5,c5;const pT=class pT{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:s=null,onPinching:a=null,onPinchEnd:o=null,signal:c}){P(this,Jc);P(this,Nf);P(this,zu,!1);P(this,ny,null);P(this,iy);P(this,sy);P(this,ry);P(this,ay);P(this,_o,null);P(this,Gu);P(this,No,null);P(this,Vu);P(this,Ro,null);N(this,Nf,e),N(this,ny,n),N(this,iy,t),N(this,sy,s),N(this,ry,a),N(this,ay,o),N(this,Vu,new AbortController),N(this,Gu,AbortSignal.any([c,f(this,Vu).signal])),e.addEventListener("touchstart",j(this,Jc,o5).bind(this),{passive:!1,signal:f(this,Gu)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/la.pixelRatio}destroy(){var e,t;(e=f(this,Vu))==null||e.abort(),N(this,Vu,null),(t=f(this,_o))==null||t.abort(),N(this,_o,null)}};Nf=new WeakMap,zu=new WeakMap,ny=new WeakMap,iy=new WeakMap,sy=new WeakMap,ry=new WeakMap,ay=new WeakMap,_o=new WeakMap,Gu=new WeakMap,No=new WeakMap,Vu=new WeakMap,Ro=new WeakMap,Jc=new WeakSet,o5=function(e){var s,a,o;if((s=f(this,iy))!=null&&s.call(this))return;if(e.touches.length===1){if(f(this,_o))return;const c=N(this,_o,new AbortController),u=AbortSignal.any([f(this,Gu),c.signal]),d=f(this,Nf),p={capture:!0,signal:u,passive:!1},y=v=>{var w;v.pointerType==="touch"&&((w=f(this,_o))==null||w.abort(),N(this,_o,null))};d.addEventListener("pointerdown",v=>{v.pointerType==="touch"&&(bn(v),y(v))},p),d.addEventListener("pointerup",y,p),d.addEventListener("pointercancel",y,p);return}if(!f(this,Ro)){N(this,Ro,new AbortController);const c=AbortSignal.any([f(this,Gu),f(this,Ro).signal]),u=f(this,Nf),d={signal:c,capture:!1,passive:!1};u.addEventListener("touchmove",j(this,Jc,l5).bind(this),d);const p=j(this,Jc,c5).bind(this);u.addEventListener("touchend",p,d),u.addEventListener("touchcancel",p,d),d.capture=!0,u.addEventListener("pointerdown",bn,d),u.addEventListener("pointermove",bn,d),u.addEventListener("pointercancel",bn,d),u.addEventListener("pointerup",bn,d),(a=f(this,sy))==null||a.call(this)}if(bn(e),e.touches.length!==2||(o=f(this,ny))!=null&&o.call(this)){N(this,No,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),N(this,No,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},l5=function(e){var L;if(!f(this,No)||e.touches.length!==2)return;bn(e);let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:s,screenY:a}=t,{screenX:o,screenY:c}=n,u=f(this,No),{touch0X:d,touch0Y:p,touch1X:y,touch1Y:v}=u,w=y-d,A=v-p,C=o-s,T=c-a,_=Math.hypot(C,T)||1,D=Math.hypot(w,A)||1;if(!f(this,zu)&&Math.abs(D-_)<=pT.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(u.touch0X=s,u.touch0Y=a,u.touch1X=o,u.touch1Y=c,!f(this,zu)){N(this,zu,!0);return}const R=[(s+o)/2,(a+c)/2];(L=f(this,ry))==null||L.call(this,R,D,_)},c5=function(e){var t;e.touches.length>=2||(f(this,Ro)&&(f(this,Ro).abort(),N(this,Ro,null),(t=f(this,ay))==null||t.call(this)),f(this,No)&&(bn(e),N(this,No,null),N(this,zu,!1)))};let Lg=pT;var qu,Kr,pn,Kt,Mo,Rf,cc,oy,Ai,$u,ko,_a,uc,ly,Yu,Bs,cy,Wu,Do,Na,Mf,kf,Nr,Xu,uy,Tb,qe,JA,dy,KA,Ex,u5,d5,QA,Ax,ZA,h5,f5,p5,e1,m5,t1,g5,y5,v5,n1,ag;const Qe=class Qe{constructor(e){P(this,qe);P(this,qu,null);P(this,Kr,null);P(this,pn,null);P(this,Kt,null);P(this,Mo,null);P(this,Rf,!1);P(this,cc,null);P(this,oy,"");P(this,Ai,null);P(this,$u,null);P(this,ko,null);P(this,_a,null);P(this,uc,null);P(this,ly,"");P(this,Yu,!1);P(this,Bs,null);P(this,cy,!1);P(this,Wu,!1);P(this,Do,!1);P(this,Na,null);P(this,Mf,0);P(this,kf,0);P(this,Nr,null);P(this,Xu,null);ye(this,"isSelected",!1);ye(this,"_isCopy",!1);ye(this,"_editToolbar",null);ye(this,"_initialOptions",Object.create(null));ye(this,"_initialData",null);ye(this,"_isVisible",!0);ye(this,"_uiManager",null);ye(this,"_focusEventsAllowed",!0);P(this,uy,!1);P(this,Tb,Qe._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:s,pageX:a,pageY:o}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,s],this.pageTranslation=[a,o];const[c,u]=this.parentDimensions;this.x=e.x/c,this.y=e.y/u,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=Qe.prototype._resizeWithKeyboard,t=Xc.TRANSLATE_SMALL,n=Xc.TRANSLATE_BIG;return nt(this,"_resizerKeyboardManager",new D0([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],Qe.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return nt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new B9({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(Qe._l10n??(Qe._l10n=e),Qe._l10nResizer||(Qe._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Qe._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);Qe._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){tn("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return f(this,uy)}set _isDraggable(e){var t;N(this,uy,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=f(this,Tb)}setParent(e){var t;e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(j(this,qe,ag).call(this),(t=f(this,_a))==null||t.remove(),N(this,_a,null)),this.parent=e}focusin(e){this._focusEventsAllowed&&(f(this,Yu)?N(this,Yu,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,s){const[a,o]=this.parentDimensions;[n,s]=this.screenToPageTranslation(n,s),this.x=(e+n)/a,this.y=(t+s)/o,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,s]=this.parentDimensions;this.setAt(e*n,t*s,this.width*n,this.height*s),this._onTranslated()}translate(e,t){j(this,qe,JA).call(this,this.parentDimensions,e,t)}translateInPage(e,t){f(this,Bs)||N(this,Bs,[this.x,this.y,this.width,this.height]),j(this,qe,JA).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){f(this,Bs)||N(this,Bs,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[s,a]}=this;if(this.x+=e/s,this.y+=t/a,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:y,y:v}=this.div.getBoundingClientRect();this.parent.findNewParent(this,y,v)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:c}=this;const[u,d]=this.getBaseTranslation();o+=u,c+=d;const{style:p}=n;p.left=`${(100*o).toFixed(2)}%`,p.top=`${(100*c).toFixed(2)}%`,this._onTranslating(o,c),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!f(this,Bs)&&(f(this,Bs)[0]!==this.x||f(this,Bs)[1]!==this.y)}get _hasBeenResized(){return!!f(this,Bs)&&(f(this,Bs)[2]!==this.width||f(this,Bs)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=Qe,s=n/e,a=n/t;switch(this.rotation){case 90:return[-s,a];case 180:return[s,a];case 270:return[s,-a];default:return[-s,-a]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,s]}=this;let{x:a,y:o,width:c,height:u}=this;if(c*=n,u*=s,a*=n,o*=s,this._mustFixPosition)switch(e){case 0:a=zi(a,0,n-c),o=zi(o,0,s-u);break;case 90:a=zi(a,0,n-u),o=zi(o,c,s);break;case 180:a=zi(a,c,n),o=zi(o,u,s);break;case 270:a=zi(a,u,n),o=zi(o,0,s-c);break}this.x=a/=n,this.y=o/=s;const[d,p]=this.getBaseTranslation();a+=d,o+=p,t.left=`${(100*a).toFixed(2)}%`,t.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return j(n=Qe,dy,KA).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return j(n=Qe,dy,KA).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width=`${(100*t).toFixed(2)}%`,e.height=`${(100*n).toFixed(2)}%`}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=f(this,pn))==null||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||f(this,Wu))return this._editToolbar;this._editToolbar=new BA(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;(e=this._editToolbar)==null||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;(e=this._editToolbar)==null||e.removeButton("comment")}removeEditToolbar(){var e,t;(e=this._editToolbar)==null||e.remove(),this._editToolbar=null,(t=f(this,pn))==null||t.destroy()}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return f(this,pn)||(db.initialize(Qe._l10n),N(this,pn,new db(this)),f(this,qu)&&(f(this,pn).data=f(this,qu),N(this,qu,null))),f(this,pn)}get altTextData(){var e;return(e=f(this,pn))==null?void 0:e.data}set altTextData(e){f(this,pn)&&(f(this,pn).data=e)}get guessedAltText(){var e;return(e=f(this,pn))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=f(this,pn))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=f(this,pn))==null?void 0:t.serialize(e)}hasAltText(){return!!f(this,pn)&&!f(this,pn).isEmpty()}hasAltTextData(){var e;return((e=f(this,pn))==null?void 0:e.hasData())??!1}focusCommentButton(){var e;(e=f(this,Kt))==null||e.focusButton()}addCommentButton(){return f(this,Kt)||N(this,Kt,new nx(this))}addStandaloneCommentButton(){if(f(this,Mo)){this._uiManager.isEditingMode()&&f(this,Mo).classList.remove("hidden");return}this.hasComment&&(N(this,Mo,f(this,Kt).renderForStandalone()),this.div.append(f(this,Mo)))}removeStandaloneCommentButton(){f(this,Kt).removeStandaloneCommentButton(),N(this,Mo,null)}hideStandaloneCommentButton(){var e;(e=f(this,Mo))==null||e.classList.add("hidden")}get comment(){const{data:{richText:e,text:t,date:n,deleted:s}}=f(this,Kt);return{text:t,richText:e,date:n,deleted:s,color:this.getNonHCMColor(),opacity:this.opacity??1}}set comment(e){f(this,Kt)||N(this,Kt,new nx(this)),f(this,Kt).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData({comment:e,popupRef:t,richText:n}){if(!t||(f(this,Kt)||N(this,Kt,new nx(this)),f(this,Kt).setInitialText(e,n),!this.annotationElementId))return;const s=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);s&&this.updateFromAnnotationLayer(s)}get hasEditedComment(){var e;return(e=f(this,Kt))==null?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return(e=f(this,Kt))==null?void 0:e.isDeleted()}get hasComment(){return!!f(this,Kt)&&!f(this,Kt).isEmpty()&&!f(this,Kt).isDeleted()}async editComment(e){f(this,Kt)||N(this,Kt,new nx(this)),f(this,Kt).edit(e)}toggleComment(e,t=void 0){this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){f(this,Kt).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const[,,,s]=e.rect,[a]=this.pageDimensions,[o]=this.pageTranslation,c=o+a+1,u=s-100,d=c+180;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[c,u,d,s]}}}updateFromAnnotationLayer({popup:{contents:e,deleted:t}}){f(this,Kt).data=t?null:e}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var o;const e=this.div=document.createElement("div");e.setAttribute("data-editor-rotation",(360-this.rotation)%360),e.className=this.name,e.setAttribute("id",this.id),e.tabIndex=f(this,Rf)?-1:0,e.setAttribute("role","application"),this.defaultL10nId&&e.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||e.classList.add("hidden"),this.setInForeground(),j(this,qe,t1).call(this);const[t,n]=this.parentDimensions;this.parentRotation%180!==0&&(e.style.maxWidth=`${(100*n/t).toFixed(2)}%`,e.style.maxHeight=`${(100*t/n).toFixed(2)}%`);const[s,a]=this.getInitialTranslation();return this.translate(s,a),XL(this,e,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(f(this,Xu)||N(this,Xu,new Lg({container:e,isPinchingDisabled:()=>!this.isSelected,onPinchStart:j(this,qe,h5).bind(this),onPinching:j(this,qe,f5).bind(this),onPinchEnd:j(this,qe,p5).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),(o=this._uiManager._editorUndoBar)==null||o.hide(),e}pointerdown(e){const{isMac:t}=mi.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(N(this,Yu,!0),this._isDraggable){j(this,qe,m5).call(this,e);return}j(this,qe,e1).call(this,e)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){f(this,Na)&&clearTimeout(f(this,Na)),N(this,Na,setTimeout(()=>{var e;N(this,Na,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const s=this.parentScale,[a,o]=this.pageDimensions,[c,u]=this.pageTranslation,d=e/s,p=t/s,y=this.x*a,v=this.y*o,w=this.width*a,A=this.height*o;switch(n){case 0:return[y+d+c,o-v-p-A+u,y+d+w+c,o-v-p+u];case 90:return[y+p+c,o-v+d+u,y+p+A+c,o-v+d+w+u];case 180:return[y-d-w+c,o-v+p+u,y-d+c,o-v+p+A+u];case 270:return[y-p-A+c,o-v-d-w+u,y-p+c,o-v-d+u];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,s,a,o]=e,c=a-n,u=o-s;switch(this.rotation){case 0:return[n,t-o,c,u];case 90:return[n,t-s,u,c];case 180:return[a,t-s,c,u];case 270:return[a,t-o,u,c];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&Qe._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;(e=f(this,Kt))==null||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:s,deleted:a,richText:o},uid:c,pageIndex:u,creationDate:d,modificationDate:p}=this;return{id:c,pageIndex:u,rect:this.getPDFRect(),richText:o,contentsObj:{str:e},creationDate:d,modificationDate:n||p,popupRef:!a,color:t,opacity:s}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),N(this,Wu,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),N(this,Wu,!1),!0):!1}isInEditMode(){return f(this,Wu)}shouldGetKeyboardEvents(){return f(this,Do)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:s}=this.getClientDimensions(),{innerHeight:a,innerWidth:o}=window;return t<o&&s>0&&e<a&&n>0}rebuild(){j(this,qe,t1).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){var n;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:((n=this._initialData)==null?void 0:n.popupRef)||""}}static async deserialize(e,t,n){const s=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});s.rotation=e.rotation,N(s,qu,e.accessibilityData),s._isCopy=e.isCopy||!1;const[a,o]=s.pageDimensions,[c,u,d,p]=s.getRectInCurrentCoords(e.rect,o);return s.x=c/a,s.y=u/o,s.width=d/a,s.height=p/o,s}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=f(this,uc))==null||e.abort(),N(this,uc,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),f(this,Na)&&(clearTimeout(f(this,Na)),N(this,Na,null)),j(this,qe,ag).call(this),this.removeEditToolbar(),f(this,Nr)){for(const n of f(this,Nr).values())clearTimeout(n);N(this,Nr,null)}this.parent=null,(t=f(this,Xu))==null||t.destroy(),N(this,Xu,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(j(this,qe,u5).call(this),f(this,Ai).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return this._uiManager.direction==="ltr"?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,s,a,o]=this.getPDFRect();return[Qe._round(n+(a-n)*e),Qe._round(s+(o-s)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return f(this,Kt).commentPopupPositionInLayer}set commentPopupPosition(e){f(this,Kt).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return f(this,Kt).hasDefaultPopupPosition()}get commentButtonWidth(){return f(this,Kt).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){f(this,Kt).setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),N(this,ko,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=f(this,Ai).children;if(!f(this,Kr)){N(this,Kr,Array.from(t));const o=j(this,qe,g5).bind(this),c=j(this,qe,y5).bind(this),u=this._uiManager._signal;for(const d of f(this,Kr)){const p=d.getAttribute("data-resizer-name");d.setAttribute("role","spinbutton"),d.addEventListener("keydown",o,{signal:u}),d.addEventListener("blur",c,{signal:u}),d.addEventListener("focus",j(this,qe,v5).bind(this,p),{signal:u}),d.setAttribute("data-l10n-id",Qe._l10nResizer[p])}}const n=f(this,Kr)[0];let s=0;for(const o of t){if(o===n)break;s++}const a=(360-this.rotation+this.parentRotation)%360/90*(f(this,Kr).length/4);if(a!==s){if(a<s)for(let c=0;c<s-a;c++)f(this,Ai).append(f(this,Ai).firstChild);else if(a>s)for(let c=0;c<a-s;c++)f(this,Ai).firstChild.before(f(this,Ai).lastChild);let o=0;for(const c of t){const d=f(this,Kr)[o++].getAttribute("data-resizer-name");c.setAttribute("data-l10n-id",Qe._l10nResizer[d])}}j(this,qe,n1).call(this,0),N(this,Do,!0),f(this,Ai).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){f(this,Do)&&j(this,qe,ZA).call(this,f(this,ly),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){j(this,qe,ag).call(this),this.div.focus()}select(){var e,t,n;if(this.isSelected&&this._editToolbar){this._editToolbar.show();return}if(this.isSelected=!0,this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var s,a;(s=this.div)!=null&&s.classList.contains("selectedEditor")&&((a=this._editToolbar)==null||a.show())});return}(t=this._editToolbar)==null||t.show(),(n=f(this,pn))==null||n.toggleAltTextBadge(!1)}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return(e=this.div)==null?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,n,s,a;this.isSelected&&(this.isSelected=!1,(e=f(this,Ai))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(s=this._editToolbar)==null||s.hide(),(a=f(this,pn))==null||a.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){e.target.nodeName!=="BUTTON"&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return f(this,cy)}set isEditing(e){N(this,cy,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){f(this,Nr)||N(this,Nr,new Map);const{action:n}=e;let s=f(this,Nr).get(n);s&&clearTimeout(s),s=setTimeout(()=>{this._reportTelemetry(e),f(this,Nr).delete(n),f(this,Nr).size===0&&N(this,Nr,null)},Qe._telemetryTimeout),f(this,Nr).set(n,s);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),N(this,Rf,!1)}disable(){this.div&&(this.div.tabIndex=-1),N(this,Rf,!0)}updateFakeAnnotationElement(e){if(!f(this,_a)&&!this.deleted){N(this,_a,e.addFakeAnnotation(this));return}if(this.deleted){f(this,_a).remove(),N(this,_a,null);return}(this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&f(this,_a).updateEdited({rect:this.getPDFRect(),popup:this.comment})}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};qu=new WeakMap,Kr=new WeakMap,pn=new WeakMap,Kt=new WeakMap,Mo=new WeakMap,Rf=new WeakMap,cc=new WeakMap,oy=new WeakMap,Ai=new WeakMap,$u=new WeakMap,ko=new WeakMap,_a=new WeakMap,uc=new WeakMap,ly=new WeakMap,Yu=new WeakMap,Bs=new WeakMap,cy=new WeakMap,Wu=new WeakMap,Do=new WeakMap,Na=new WeakMap,Mf=new WeakMap,kf=new WeakMap,Nr=new WeakMap,Xu=new WeakMap,uy=new WeakMap,Tb=new WeakMap,qe=new WeakSet,JA=function([e,t],n,s){[n,s]=this.screenToPageTranslation(n,s),this.x+=n/e,this.y+=s/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},dy=new WeakSet,KA=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Ex=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},u5=function(){if(f(this,Ai))return;N(this,Ai,document.createElement("div")),f(this,Ai).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const s=document.createElement("div");f(this,Ai).append(s),s.classList.add("resizer",n),s.setAttribute("data-resizer-name",n),s.addEventListener("pointerdown",j(this,qe,d5).bind(this,n),{signal:t}),s.addEventListener("contextmenu",sr,{signal:t}),s.tabIndex=-1}this.div.prepend(f(this,Ai))},d5=function(e,t){var p;t.preventDefault();const{isMac:n}=mi.platform;if(t.button!==0||t.ctrlKey&&n)return;(p=f(this,pn))==null||p.toggle(!1);const s=this._isDraggable;this._isDraggable=!1,N(this,$u,[t.screenX,t.screenY]);const a=new AbortController,o=this._uiManager.combinedSignal(a);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",j(this,qe,ZA).bind(this,e),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",bn,{passive:!1,signal:o}),window.addEventListener("contextmenu",sr,{signal:o}),N(this,ko,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const c=this.parent.div.style.cursor,u=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const d=()=>{var y;a.abort(),this.parent.togglePointerEvents(!0),(y=f(this,pn))==null||y.toggle(!0),this._isDraggable=s,this.parent.div.style.cursor=c,this.div.style.cursor=u,j(this,qe,Ax).call(this)};window.addEventListener("pointerup",d,{signal:o}),window.addEventListener("blur",d,{signal:o})},QA=function(e,t,n,s){this.width=n,this.height=s,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()},Ax=function(){if(!f(this,ko))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:s}=f(this,ko);N(this,ko,null);const a=this.x,o=this.y,c=this.width,u=this.height;a===e&&o===t&&c===n&&u===s||this.addCommands({cmd:j(this,qe,QA).bind(this,a,o,c,u),undo:j(this,qe,QA).bind(this,e,t,n,s),mustExec:!0})},ZA=function(e,t){const[n,s]=this.parentDimensions,a=this.x,o=this.y,c=this.width,u=this.height,d=Qe.MIN_SIZE/n,p=Qe.MIN_SIZE/s,y=j(this,qe,Ex).call(this,this.rotation),v=(H,V)=>[y[0]*H+y[2]*V,y[1]*H+y[3]*V],w=j(this,qe,Ex).call(this,360-this.rotation),A=(H,V)=>[w[0]*H+w[2]*V,w[1]*H+w[3]*V];let C,T,_=!1,D=!1;switch(e){case"topLeft":_=!0,C=(H,V)=>[0,0],T=(H,V)=>[H,V];break;case"topMiddle":C=(H,V)=>[H/2,0],T=(H,V)=>[H/2,V];break;case"topRight":_=!0,C=(H,V)=>[H,0],T=(H,V)=>[0,V];break;case"middleRight":D=!0,C=(H,V)=>[H,V/2],T=(H,V)=>[0,V/2];break;case"bottomRight":_=!0,C=(H,V)=>[H,V],T=(H,V)=>[0,0];break;case"bottomMiddle":C=(H,V)=>[H/2,V],T=(H,V)=>[H/2,0];break;case"bottomLeft":_=!0,C=(H,V)=>[0,V],T=(H,V)=>[H,0];break;case"middleLeft":D=!0,C=(H,V)=>[0,V/2],T=(H,V)=>[H,V/2];break}const R=C(c,u),L=T(c,u);let F=v(...L);const U=Qe._round(a+F[0]),M=Qe._round(o+F[1]);let O=1,z=1,J,G;if(t.fromKeyboard)({deltaX:J,deltaY:G}=t);else{const{screenX:H,screenY:V}=t,[Q,ce]=f(this,$u);[J,G]=this.screenToPageTranslation(H-Q,V-ce),f(this,$u)[0]=H,f(this,$u)[1]=V}if([J,G]=A(J/n,G/s),_){const H=Math.hypot(c,u);O=z=Math.max(Math.min(Math.hypot(L[0]-R[0]-J,L[1]-R[1]-G)/H,1/c,1/u),d/c,p/u)}else D?O=zi(Math.abs(L[0]-R[0]-J),d,1)/c:z=zi(Math.abs(L[1]-R[1]-G),p,1)/u;const X=Qe._round(c*O),ie=Qe._round(u*z);F=v(...T(X,ie));const $=U-F[0],ee=M-F[1];f(this,Bs)||N(this,Bs,[this.x,this.y,this.width,this.height]),this.width=X,this.height=ie,this.x=$,this.y=ee,this.setDims(),this.fixAndSetPosition(),this._onResizing()},h5=function(){var e;N(this,ko,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=f(this,pn))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},f5=function(e,t,n){let a=.7*(n/t)+1-.7;if(a===1)return;const o=j(this,qe,Ex).call(this,this.rotation),c=(U,M)=>[o[0]*U+o[2]*M,o[1]*U+o[3]*M],[u,d]=this.parentDimensions,p=this.x,y=this.y,v=this.width,w=this.height,A=Qe.MIN_SIZE/u,C=Qe.MIN_SIZE/d;a=Math.max(Math.min(a,1/v,1/w),A/v,C/w);const T=Qe._round(v*a),_=Qe._round(w*a);if(T===v&&_===w)return;f(this,Bs)||N(this,Bs,[p,y,v,w]);const D=c(v/2,w/2),R=Qe._round(p+D[0]),L=Qe._round(y+D[1]),F=c(T/2,_/2);this.x=R-F[0],this.y=L-F[1],this.width=T,this.height=_,this.setDims(),this.fixAndSetPosition(),this._onResizing()},p5=function(){var e;(e=f(this,pn))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),j(this,qe,Ax).call(this)},e1=function(e){const{isMac:t}=mi.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},m5=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const s=new AbortController,a=this._uiManager.combinedSignal(s),o={capture:!0,passive:!1,signal:a},c=d=>{s.abort(),N(this,cc,null),N(this,Yu,!1),this._uiManager.endDragSession()||j(this,qe,e1).call(this,d),n&&this._onStopDragging()};t&&(N(this,Mf,e.clientX),N(this,kf,e.clientY),N(this,cc,e.pointerId),N(this,oy,e.pointerType),window.addEventListener("pointermove",d=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:p,clientY:y,pointerId:v}=d;if(v!==f(this,cc)){bn(d);return}const[w,A]=this.screenToPageTranslation(p-f(this,Mf),y-f(this,kf));N(this,Mf,p),N(this,kf,y),this._uiManager.dragSelectedEditors(w,A)},o),window.addEventListener("touchmove",bn,o),window.addEventListener("pointerdown",d=>{d.pointerType===f(this,oy)&&(f(this,Xu)||d.isPrimary)&&c(d),bn(d)},o));const u=d=>{if(!f(this,cc)||f(this,cc)===d.pointerId){c(d);return}bn(d)};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})},t1=function(){if(f(this,uc)||!this.div)return;N(this,uc,new AbortController);const e=this._uiManager.combinedSignal(f(this,uc));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},g5=function(e){Qe._resizerKeyboardManager.exec(this,e)},y5=function(e){var t;f(this,Do)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==f(this,Ai)&&j(this,qe,ag).call(this)},v5=function(e){N(this,ly,f(this,Do)?e:"")},n1=function(e){if(f(this,Kr))for(const t of f(this,Kr))t.tabIndex=e},ag=function(){N(this,Do,!1),j(this,qe,n1).call(this,-1),j(this,qe,Ax).call(this)},P(Qe,dy),ye(Qe,"_l10n",null),ye(Qe,"_l10nResizer",null),ye(Qe,"_borderLineWidth",-1),ye(Qe,"_colorManager",new zA),ye(Qe,"_zIndex",1),ye(Qe,"_telemetryTimeout",1e3);let sn=Qe;class B9 extends sn{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Yk=3285377520,vr=4294901760,ga=65535;class x5{constructor(e){this.h1=e?e&4294967295:Yk,this.h2=e?e&4294967295:Yk}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let C=0,T=e.length;C<T;C++){const _=e.charCodeAt(C);_<=255?t[n++]=_:(t[n++]=_>>>8,t[n++]=_&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const s=n>>2,a=n-s*4,o=new Uint32Array(t.buffer,0,s);let c=0,u=0,d=this.h1,p=this.h2;const y=3432918353,v=461845907,w=y&ga,A=v&ga;for(let C=0;C<s;C++)C&1?(c=o[C],c=c*y&vr|c*w&ga,c=c<<15|c>>>17,c=c*v&vr|c*A&ga,d^=c,d=d<<13|d>>>19,d=d*5+3864292196):(u=o[C],u=u*y&vr|u*w&ga,u=u<<15|u>>>17,u=u*v&vr|u*A&ga,p^=u,p=p<<13|p>>>19,p=p*5+3864292196);switch(c=0,a){case 3:c^=t[s*4+2]<<16;case 2:c^=t[s*4+1]<<8;case 1:c^=t[s*4],c=c*y&vr|c*w&ga,c=c<<15|c>>>17,c=c*v&vr|c*A&ga,s&1?d^=c:p^=c}this.h1=d,this.h2=p}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&vr|e*36045&ga,t=t*4283543511&vr|((t<<16|e>>>16)*2950163797&vr)>>>16,e^=t>>>1,e=e*444984403&vr|e*60499&ga,t=t*3301882366&vr|((t<<16|e>>>16)*3120437893&vr)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const i1=Object.freeze({map:null,hash:"",transfer:void 0});var Ju,Ku,Io,Ci,_b,b5;class iT{constructor(){P(this,_b);P(this,Ju,!1);P(this,Ku,null);P(this,Io,null);P(this,Ci,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=f(this,Ci).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return f(this,Ci).get(e)}remove(e){const t=f(this,Ci).get(e);if(t!==void 0&&(t instanceof sn&&f(this,Io).delete(t.annotationElementId),f(this,Ci).delete(e),f(this,Ci).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function")){for(const n of f(this,Ci).values())if(n instanceof sn)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=f(this,Ci).get(e);let s=!1;if(n!==void 0)for(const[a,o]of Object.entries(t))n[a]!==o&&(s=!0,n[a]=o);else s=!0,f(this,Ci).set(e,t);s&&j(this,_b,b5).call(this),t instanceof sn&&((f(this,Io)||N(this,Io,new Map)).set(t.annotationElementId,t),typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type))}has(e){return f(this,Ci).has(e)}get size(){return f(this,Ci).size}resetModified(){f(this,Ju)&&(N(this,Ju,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new w5(this)}get serializable(){if(f(this,Ci).size===0)return i1;const e=new Map,t=new x5,n=[],s=Object.create(null);let a=!1;for(const[o,c]of f(this,Ci)){const u=c instanceof sn?c.serialize(!1,s):c;u&&(e.set(o,u),t.update(`${o}:${JSON.stringify(u)}`),a||(a=!!u.bitmap))}if(a)for(const o of e.values())o.bitmap&&n.push(o.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:i1}get editorStats(){let e=null;const t=new Map;let n=0,s=0;for(const a of f(this,Ci).values()){if(!(a instanceof sn)){a.popup&&(a.popup.deleted?s+=1:n+=1);continue}a.isCommentDeleted?s+=1:a.hasEditedComment&&(n+=1);const o=a.telemetryFinalData;if(!o)continue;const{type:c}=o;t.has(c)||t.set(c,Object.getPrototypeOf(a).constructor),e||(e=Object.create(null));const u=e[c]||(e[c]=new Map);for(const[d,p]of Object.entries(o)){if(d==="type")continue;let y=u.get(d);y||(y=new Map,u.set(d,y));const v=y.get(p)??0;y.set(p,v+1)}}if((s>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:s,edited:n}),!e)return null;for(const[a,o]of t)e[a]=o.computeTelemetryFinalData(e[a]);return e}resetModifiedIds(){N(this,Ku,null)}updateEditor(e,t){var s;const n=(s=f(this,Io))==null?void 0:s.get(e);return n?(n.updateFromAnnotationLayer(t),!0):!1}getEditor(e){var t;return((t=f(this,Io))==null?void 0:t.get(e))||null}get modifiedIds(){if(f(this,Ku))return f(this,Ku);const e=[];if(f(this,Io))for(const t of f(this,Io).values())t.serialize()&&e.push(t.annotationElementId);return N(this,Ku,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return f(this,Ci).entries()}}Ju=new WeakMap,Ku=new WeakMap,Io=new WeakMap,Ci=new WeakMap,_b=new WeakSet,b5=function(){f(this,Ju)||(N(this,Ju,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var hy;class w5 extends iT{constructor(t){super();P(this,hy);const{map:n,hash:s,transfer:a}=t.serializable,o=structuredClone(n,a?{transfer:a}:null);N(this,hy,{map:o,hash:s,transfer:a})}get print(){tn("Should not call PrintAnnotationStorage.print")}get serializable(){return f(this,hy)}get modifiedIds(){return nt(this,"modifiedIds",{ids:new Set,hash:""})}}hy=new WeakMap;var Df;class O9{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){P(this,Df,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),f(this,Df).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,disableFontFace:t,_inspectFont:n}){if(!(!e||f(this,Df).has(e.loadedName))){if(vt(!t,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:s,src:a,style:o}=e,c=new FontFace(s,a,o);this.addNativeFontFace(c);try{await c.load(),f(this,Df).add(s),n==null||n(e)}catch{Ke(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(c)}return}tn("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(s){throw Ke(`Failed to load font '${n.family}': '${s}'.`),e.disableFontFace=!0,s}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const s=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,s)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return nt(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){return nt(this,"isSyncFontLoadingSupported",es||mi.platform.isFirefox)}_queueLoadingCallback(e){function t(){for(vt(!s.done,"completeRequest() cannot be called twice."),s.done=!0;n.length>0&&n[0].done;){const a=n.shift();setTimeout(a.callback,0)}}const{loadingRequests:n}=this,s={done:!1,complete:t,callback:e};return n.push(s),s}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return nt(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(L,F){return L.charCodeAt(F)<<24|L.charCodeAt(F+1)<<16|L.charCodeAt(F+2)<<8|L.charCodeAt(F+3)&255}function s(L,F,U,M){const O=L.substring(0,F),z=L.substring(F+U);return O+M+z}let a,o;const c=this._document.createElement("canvas");c.width=1,c.height=1;const u=c.getContext("2d");let d=0;function p(L,F){if(++d>30){Ke("Load test font never loaded."),F();return}if(u.font="30px "+L,u.fillText(".",0,20),u.getImageData(0,0,1,1).data[3]>0){F();return}setTimeout(p.bind(null,L,F))}const y=`lt${Date.now()}${this.loadTestFontId++}`;let v=this._loadTestFont;v=s(v,976,y.length,y);const A=16,C=1482184792;let T=n(v,A);for(a=0,o=y.length-3;a<o;a+=4)T=T-C+n(y,a)|0;a<y.length&&(T=T-C+n(y+"XXX",a)|0),v=s(v,A,4,_9(T));const _=`url(data:font/opentype;base64,${btoa(v)});`,D=`@font-face {font-family:"${y}";src:${_}}`;this.insertRule(D);const R=this._document.createElement("div");R.style.visibility="hidden",R.style.width=R.style.height="10px",R.style.position="absolute",R.style.top=R.style.left="0px";for(const L of[e.loadedName,y]){const F=this._document.createElement("span");F.textContent="Hi",F.style.fontFamily=L,R.append(F)}this._document.body.append(R),p(y,()=>{R.remove(),t.complete()})}}Df=new WeakMap;var Gt;class H9{constructor(e,t=null,n,s){P(this,Gt);this.compiledGlyphs=Object.create(null),N(this,Gt,e),this._inspectFont=t,n&&Object.assign(this,n),s&&(this.charProcOperatorList=s)}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${UL(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let s=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(s+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${s}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let s;try{s=e.get(n)}catch(o){Ke(`getPathGenerator - ignoring character: "${o}".`)}const a=new Path2D(s||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=a}get black(){return f(this,Gt).black}get bold(){return f(this,Gt).bold}get disableFontFace(){return f(this,Gt).disableFontFace??!1}get fontExtraProperties(){return f(this,Gt).fontExtraProperties??!1}get isInvalidPDFjsFont(){return f(this,Gt).isInvalidPDFjsFont}get isType3Font(){return f(this,Gt).isType3Font}get italic(){return f(this,Gt).italic}get missingFile(){return f(this,Gt).missingFile}get remeasure(){return f(this,Gt).remeasure}get vertical(){return f(this,Gt).vertical}get ascent(){return f(this,Gt).ascent}get defaultWidth(){return f(this,Gt).defaultWidth}get descent(){return f(this,Gt).descent}get bbox(){return f(this,Gt).bbox}get fontMatrix(){return f(this,Gt).fontMatrix}get fallbackName(){return f(this,Gt).fallbackName}get loadedName(){return f(this,Gt).loadedName}get mimetype(){return f(this,Gt).mimetype}get name(){return f(this,Gt).name}get data(){return f(this,Gt).data}clearData(){f(this,Gt).clearData()}get cssFontInfo(){return f(this,Gt).cssFontInfo}get systemFontInfo(){return f(this,Gt).systemFontInfo}get defaultVMetrics(){return f(this,Gt).defaultVMetrics}}Gt=new WeakMap;function z9(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if(es)return i;const e=URL.parse(i,window.location);if(e)return e.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function G9(i){if(es&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return R0(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function ix(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}const s1=i=>typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0,V9=i=>typeof i=="object"&&typeof(i==null?void 0:i.name)=="string",S5=k9.bind(null,s1,V9);var Po,Nb;class q9{constructor(){P(this,Po,new Map);P(this,Nb,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};f(this,Nb).then(()=>{for(const[s]of f(this,Po))s.call(this,n)})}addEventListener(e,t,n=null){let s=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:a}=n;if(a.aborted){Ke("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(e,t);s=()=>a.removeEventListener("abort",o),a.addEventListener("abort",o)}f(this,Po).set(t,s)}removeEventListener(e,t){const n=f(this,Po).get(t);n==null||n(),f(this,Po).delete(t)}terminate(){for(const[,e]of f(this,Po))e==null||e();f(this,Po).clear()}}Po=new WeakMap,Nb=new WeakMap;const sx={DATA:1,ERROR:2},qn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function Wk(){}function fs(i){if(i instanceof ul||i instanceof cb||i instanceof Ok||i instanceof Dg||i instanceof QE)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||tn('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new ul(i.message);case"InvalidPDFException":return new cb(i.message);case"PasswordException":return new Ok(i.message,i.code);case"ResponseException":return new Dg(i.message,i.status,i.missing);case"UnknownErrorException":return new QE(i.message,i.details)}return new QE(i.message,i.toString())}var If,Ur,E5,A5,C5,Cx;class og{constructor(e,t,n){P(this,Ur);P(this,If,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",j(this,Ur,E5).bind(this),{signal:f(this,If).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const s=this.callbackId++,a=Promise.withResolvers();this.callbackCapabilities[s]=a;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:s,data:t},n)}catch(o){a.reject(o)}return a.promise}sendWithStream(e,t,n,s){const a=this.streamId++,o=this.sourceName,c=this.targetName,u=this.comObj;return new ReadableStream({start:d=>{const p=Promise.withResolvers();return this.streamControllers[a]={controller:d,startCall:p,pullCall:null,cancelCall:null,isClosed:!1},u.postMessage({sourceName:o,targetName:c,action:e,streamId:a,data:t,desiredSize:d.desiredSize},s),p.promise},pull:d=>{const p=Promise.withResolvers();return this.streamControllers[a].pullCall=p,u.postMessage({sourceName:o,targetName:c,stream:qn.PULL,streamId:a,desiredSize:d.desiredSize}),p.promise},cancel:d=>{vt(d instanceof Error,"cancel must have a valid reason");const p=Promise.withResolvers();return this.streamControllers[a].cancelCall=p,this.streamControllers[a].isClosed=!0,u.postMessage({sourceName:o,targetName:c,stream:qn.CANCEL,streamId:a,reason:fs(d)}),p.promise}},n)}destroy(){var e;(e=f(this,If))==null||e.abort(),N(this,If,null)}}If=new WeakMap,Ur=new WeakSet,E5=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){j(this,Ur,C5).call(this,e);return}if(e.callback){const n=e.callbackId,s=this.callbackCapabilities[n];if(!s)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===sx.DATA)s.resolve(e.data);else if(e.callback===sx.ERROR)s.reject(fs(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,s=e.sourceName,a=this.comObj;Promise.try(t,e.data).then(function(o){a.postMessage({sourceName:n,targetName:s,callback:sx.DATA,callbackId:e.callbackId,data:o})},function(o){a.postMessage({sourceName:n,targetName:s,callback:sx.ERROR,callbackId:e.callbackId,reason:fs(o)})});return}if(e.streamId){j(this,Ur,A5).call(this,e);return}t(e.data)},A5=function(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,a=this.comObj,o=this,c=this.actionHandler[e.action],u={enqueue(d,p=1,y){if(this.isCancelled)return;const v=this.desiredSize;this.desiredSize-=p,v>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),a.postMessage({sourceName:n,targetName:s,stream:qn.ENQUEUE,streamId:t,chunk:d},y)},close(){this.isCancelled||(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:s,stream:qn.CLOSE,streamId:t}),delete o.streamSinks[t])},error(d){vt(d instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,a.postMessage({sourceName:n,targetName:s,stream:qn.ERROR,streamId:t,reason:fs(d)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};u.sinkCapability.resolve(),u.ready=u.sinkCapability.promise,this.streamSinks[t]=u,Promise.try(c,e.data,u).then(function(){a.postMessage({sourceName:n,targetName:s,stream:qn.START_COMPLETE,streamId:t,success:!0})},function(d){a.postMessage({sourceName:n,targetName:s,stream:qn.START_COMPLETE,streamId:t,reason:fs(d)})})},C5=function(e){const t=e.streamId,n=this.sourceName,s=e.sourceName,a=this.comObj,o=this.streamControllers[t],c=this.streamSinks[t];switch(e.stream){case qn.START_COMPLETE:e.success?o.startCall.resolve():o.startCall.reject(fs(e.reason));break;case qn.PULL_COMPLETE:e.success?o.pullCall.resolve():o.pullCall.reject(fs(e.reason));break;case qn.PULL:if(!c){a.postMessage({sourceName:n,targetName:s,stream:qn.PULL_COMPLETE,streamId:t,success:!0});break}c.desiredSize<=0&&e.desiredSize>0&&c.sinkCapability.resolve(),c.desiredSize=e.desiredSize,Promise.try(c.onPull||Wk).then(function(){a.postMessage({sourceName:n,targetName:s,stream:qn.PULL_COMPLETE,streamId:t,success:!0})},function(d){a.postMessage({sourceName:n,targetName:s,stream:qn.PULL_COMPLETE,streamId:t,reason:fs(d)})});break;case qn.ENQUEUE:if(vt(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(e.chunk);break;case qn.CLOSE:if(vt(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),j(this,Ur,Cx).call(this,o,t);break;case qn.ERROR:vt(o,"error should have stream controller"),o.controller.error(fs(e.reason)),j(this,Ur,Cx).call(this,o,t);break;case qn.CANCEL_COMPLETE:e.success?o.cancelCall.resolve():o.cancelCall.reject(fs(e.reason)),j(this,Ur,Cx).call(this,o,t);break;case qn.CANCEL:if(!c)break;const u=fs(e.reason);Promise.try(c.onCancel||Wk,u).then(function(){a.postMessage({sourceName:n,targetName:s,stream:qn.CANCEL_COMPLETE,streamId:t,success:!0})},function(d){a.postMessage({sourceName:n,targetName:s,stream:qn.CANCEL_COMPLETE,streamId:t,reason:fs(d)})}),c.sinkCapability.reject(u),c.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},Cx=async function(e,t){var n,s,a;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(s=e.pullCall)==null?void 0:s.promise,(a=e.cancelCall)==null?void 0:a.promise]),delete this.streamControllers[t]};var fy;class T5{constructor({enableHWA:e=!1}){P(this,fy,!1);N(this,fy,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!f(this,fy)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){tn("Abstract method `_createCanvas` called.")}}fy=new WeakMap;class $9 extends T5{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class _5{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){tn("Abstract method `_fetch` called.")}}class Xk extends _5{async _fetch(e){const t=await Xp(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):R0(t)}}class N5{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,s,a){return"none"}destroy(e=!1){}}var Qu,Pf,Lo,Fo,ji,Zu,ed,Ne,Li,lg,zh,Tx,Gh,R5,r1,Vh,cg,ug,a1,dg;class Y9 extends N5{constructor({docId:t,ownerDocument:n=globalThis.document}){super();P(this,Ne);P(this,Qu);P(this,Pf);P(this,Lo);P(this,Fo);P(this,ji);P(this,Zu);P(this,ed,0);N(this,Fo,t),N(this,ji,n)}addFilter(t){if(!t)return"none";let n=f(this,Ne,Li).get(t);if(n)return n;const[s,a,o]=j(this,Ne,Tx).call(this,t),c=t.length===1?s:`${s}${a}${o}`;if(n=f(this,Ne,Li).get(c),n)return f(this,Ne,Li).set(t,n),n;const u=`g_${f(this,Fo)}_transfer_map_${Kn(this,ed)._++}`,d=j(this,Ne,Gh).call(this,u);f(this,Ne,Li).set(t,d),f(this,Ne,Li).set(c,d);const p=j(this,Ne,Vh).call(this,u);return j(this,Ne,ug).call(this,s,a,o,p),d}addHCMFilter(t,n){var A;const s=`${t}-${n}`,a="base";let o=f(this,Ne,lg).get(a);if((o==null?void 0:o.key)===s||(o?((A=o.filter)==null||A.remove(),o.key=s,o.url="none",o.filter=null):(o={key:s,url:"none",filter:null},f(this,Ne,lg).set(a,o)),!t||!n))return o.url;const c=j(this,Ne,dg).call(this,t);t=Me.makeHexColor(...c);const u=j(this,Ne,dg).call(this,n);if(n=Me.makeHexColor(...u),f(this,Ne,zh).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return o.url;const d=new Array(256);for(let C=0;C<=255;C++){const T=C/255;d[C]=T<=.03928?T/12.92:((T+.055)/1.055)**2.4}const p=d.join(","),y=`g_${f(this,Fo)}_hcm_filter`,v=o.filter=j(this,Ne,Vh).call(this,y);j(this,Ne,ug).call(this,p,p,p,v),j(this,Ne,r1).call(this,v);const w=(C,T)=>{const _=c[C]/255,D=u[C]/255,R=new Array(T+1);for(let L=0;L<=T;L++)R[L]=_+L/T*(D-_);return R.join(",")};return j(this,Ne,ug).call(this,w(0,5),w(1,5),w(2,5),v),o.url=j(this,Ne,Gh).call(this,y),o.url}addAlphaFilter(t){let n=f(this,Ne,Li).get(t);if(n)return n;const[s]=j(this,Ne,Tx).call(this,[t]),a=`alpha_${s}`;if(n=f(this,Ne,Li).get(a),n)return f(this,Ne,Li).set(t,n),n;const o=`g_${f(this,Fo)}_alpha_map_${Kn(this,ed)._++}`,c=j(this,Ne,Gh).call(this,o);f(this,Ne,Li).set(t,c),f(this,Ne,Li).set(a,c);const u=j(this,Ne,Vh).call(this,o);return j(this,Ne,a1).call(this,s,u),c}addLuminosityFilter(t){let n=f(this,Ne,Li).get(t||"luminosity");if(n)return n;let s,a;if(t?([s]=j(this,Ne,Tx).call(this,[t]),a=`luminosity_${s}`):a="luminosity",n=f(this,Ne,Li).get(a),n)return f(this,Ne,Li).set(t,n),n;const o=`g_${f(this,Fo)}_luminosity_map_${Kn(this,ed)._++}`,c=j(this,Ne,Gh).call(this,o);f(this,Ne,Li).set(t,c),f(this,Ne,Li).set(a,c);const u=j(this,Ne,Vh).call(this,o);return j(this,Ne,R5).call(this,u),t&&j(this,Ne,a1).call(this,s,u),c}addHighlightHCMFilter(t,n,s,a,o){var D;const c=`${n}-${s}-${a}-${o}`;let u=f(this,Ne,lg).get(t);if((u==null?void 0:u.key)===c||(u?((D=u.filter)==null||D.remove(),u.key=c,u.url="none",u.filter=null):(u={key:c,url:"none",filter:null},f(this,Ne,lg).set(t,u)),!n||!s))return u.url;const[d,p]=[n,s].map(j(this,Ne,dg).bind(this));let y=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),v=Math.round(.2126*p[0]+.7152*p[1]+.0722*p[2]),[w,A]=[a,o].map(j(this,Ne,dg).bind(this));v<y&&([y,v,w,A]=[v,y,A,w]),f(this,Ne,zh).style.color="";const C=(R,L,F)=>{const U=new Array(256),M=(v-y)/F,O=R/255,z=(L-R)/(255*F);let J=0;for(let G=0;G<=F;G++){const X=Math.round(y+G*M),ie=O+G*z;for(let $=J;$<=X;$++)U[$]=ie;J=X+1}for(let G=J;G<256;G++)U[G]=U[J-1];return U.join(",")},T=`g_${f(this,Fo)}_hcm_${t}_filter`,_=u.filter=j(this,Ne,Vh).call(this,T);return j(this,Ne,r1).call(this,_),j(this,Ne,ug).call(this,C(w[0],A[0],5),C(w[1],A[1],5),C(w[2],A[2],5),_),u.url=j(this,Ne,Gh).call(this,T),u.url}destroy(t=!1){var n,s,a,o;t&&((n=f(this,Zu))!=null&&n.size)||((s=f(this,Lo))==null||s.parentNode.parentNode.remove(),N(this,Lo,null),(a=f(this,Pf))==null||a.clear(),N(this,Pf,null),(o=f(this,Zu))==null||o.clear(),N(this,Zu,null),N(this,ed,0))}}Qu=new WeakMap,Pf=new WeakMap,Lo=new WeakMap,Fo=new WeakMap,ji=new WeakMap,Zu=new WeakMap,ed=new WeakMap,Ne=new WeakSet,Li=function(){return f(this,Pf)||N(this,Pf,new Map)},lg=function(){return f(this,Zu)||N(this,Zu,new Map)},zh=function(){if(!f(this,Lo)){const t=f(this,ji).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const s=f(this,ji).createElementNS(vo,"svg");s.setAttribute("width",0),s.setAttribute("height",0),N(this,Lo,f(this,ji).createElementNS(vo,"defs")),t.append(s),s.append(f(this,Lo)),f(this,ji).body.append(t)}return f(this,Lo)},Tx=function(t){if(t.length===1){const d=t[0],p=new Array(256);for(let v=0;v<256;v++)p[v]=d[v]/255;const y=p.join(",");return[y,y,y]}const[n,s,a]=t,o=new Array(256),c=new Array(256),u=new Array(256);for(let d=0;d<256;d++)o[d]=n[d]/255,c[d]=s[d]/255,u[d]=a[d]/255;return[o.join(","),c.join(","),u.join(",")]},Gh=function(t){if(f(this,Qu)===void 0){N(this,Qu,"");const n=f(this,ji).URL;n!==f(this,ji).baseURI&&(k0(n)?Ke('#createUrl: ignore "data:"-URL for performance reasons.'):N(this,Qu,QC(n,"")))}return`url(${f(this,Qu)}#${t})`},R5=function(t){const n=f(this,ji).createElementNS(vo,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},r1=function(t){const n=f(this,ji).createElementNS(vo,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},Vh=function(t){const n=f(this,ji).createElementNS(vo,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),f(this,Ne,zh).append(n),n},cg=function(t,n,s){const a=f(this,ji).createElementNS(vo,n);a.setAttribute("type","discrete"),a.setAttribute("tableValues",s),t.append(a)},ug=function(t,n,s,a){const o=f(this,ji).createElementNS(vo,"feComponentTransfer");a.append(o),j(this,Ne,cg).call(this,o,"feFuncR",t),j(this,Ne,cg).call(this,o,"feFuncG",n),j(this,Ne,cg).call(this,o,"feFuncB",s)},a1=function(t,n){const s=f(this,ji).createElementNS(vo,"feComponentTransfer");n.append(s),j(this,Ne,cg).call(this,s,"feFuncA",t)},dg=function(t){return f(this,Ne,zh).style.color=t,Jp(getComputedStyle(f(this,Ne,zh)).getPropertyValue("color"))};class M5{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){tn("Abstract method `_fetch` called.")}}class Jk extends M5{async _fetch(e){const t=await Xp(e,"arraybuffer");return new Uint8Array(t)}}class k5{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!e)throw new Error("Wasm filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load wasm data at: ${t}`)})}async _fetch(e){tn("Abstract method `_fetch` called.")}}class Kk extends k5{async _fetch(e){const t=await Xp(e,"arraybuffer");return new Uint8Array(t)}}es&&Ke("Please use the `legacy` build in Node.js environments.");async function sT(i){const t=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(t)}class W9 extends N5{}class X9 extends T5{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class J9 extends _5{async _fetch(e){return sT(e)}}class K9 extends M5{async _fetch(e){return sT(e)}}class Q9 extends k5{async _fetch(e){return sT(e)}}const jh="__forcedDependency",{floor:Qk,ceil:Zk}=Math;function rx(i,e,t,n,s,a){i[e*4+0]=Math.min(i[e*4+0],t),i[e*4+1]=Math.min(i[e*4+1],n),i[e*4+2]=Math.max(i[e*4+2],s),i[e*4+3]=Math.max(i[e*4+3],a)}const o1=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var Lf,dc;class Z9{constructor(e,t){P(this,Lf);P(this,dc);N(this,Lf,e),N(this,dc,t)}get length(){return f(this,Lf).length}isEmpty(e){return f(this,Lf)[e]===o1}minX(e){return f(this,dc)[e*4+0]/256}minY(e){return f(this,dc)[e*4+1]/256}maxX(e){return(f(this,dc)[e*4+2]+1)/256}maxY(e){return(f(this,dc)[e*4+3]+1)/256}}Lf=new WeakMap,dc=new WeakMap;const ax=(i,e)=>{if(!i)return;let t=i.get(e);return t||(t={dependencies:new Set,isRenderingOperation:!1},i.set(e,t)),t};var gs,ys,td,Qr,nd,Uo,jt,Vt,jo,vs,py,Ff,id,sd,Bo,Bi,Ra,my,l1;class e7{constructor(e,t,n=!1){P(this,my);P(this,gs,{__proto__:null});P(this,ys,{__proto__:null,transform:[],moveText:[],sameLineText:[],[jh]:[]});P(this,td,new Map);P(this,Qr,[]);P(this,nd,[]);P(this,Uo,[[1,0,0,1,0,0]]);P(this,jt,[-1/0,-1/0,1/0,1/0]);P(this,Vt,new Float64Array([1/0,1/0,-1/0,-1/0]));P(this,jo,-1);P(this,vs,new Set);P(this,py,new Map);P(this,Ff,new Map);P(this,id);P(this,sd);P(this,Bo);P(this,Bi);P(this,Ra);N(this,id,e.width),N(this,sd,e.height),j(this,my,l1).call(this,t),n&&N(this,Ra,new Map)}growOperationsCount(e){e>=f(this,Bi).length&&j(this,my,l1).call(this,e,f(this,Bi))}save(e){return N(this,gs,{__proto__:f(this,gs)}),N(this,ys,{__proto__:f(this,ys),transform:{__proto__:f(this,ys).transform},moveText:{__proto__:f(this,ys).moveText},sameLineText:{__proto__:f(this,ys).sameLineText},[jh]:{__proto__:f(this,ys)[jh]}}),N(this,jt,{__proto__:f(this,jt)}),f(this,Qr).push(e),this}restore(e){var s;const t=Object.getPrototypeOf(f(this,gs));if(t===null)return this;N(this,gs,t),N(this,ys,Object.getPrototypeOf(f(this,ys))),N(this,jt,Object.getPrototypeOf(f(this,jt)));const n=f(this,Qr).pop();return n!==void 0&&((s=ax(f(this,Ra),e))==null||s.dependencies.add(n),f(this,Bi)[e]=f(this,Bi)[n]),this}recordOpenMarker(e){return f(this,Qr).push(e),this}getOpenMarker(){return f(this,Qr).length===0?null:f(this,Qr).at(-1)}recordCloseMarker(e){var n;const t=f(this,Qr).pop();return t!==void 0&&((n=ax(f(this,Ra),e))==null||n.dependencies.add(t),f(this,Bi)[e]=f(this,Bi)[t]),this}beginMarkedContent(e){return f(this,nd).push(e),this}endMarkedContent(e){var n;const t=f(this,nd).pop();return t!==void 0&&((n=ax(f(this,Ra),e))==null||n.dependencies.add(t),f(this,Bi)[e]=f(this,Bi)[t]),this}pushBaseTransform(e){return f(this,Uo).push(Me.multiplyByDOMMatrix(f(this,Uo).at(-1),e.getTransform())),this}popBaseTransform(){return f(this,Uo).length>1&&f(this,Uo).pop(),this}recordSimpleData(e,t){return f(this,gs)[e]=t,this}recordIncrementalData(e,t){return f(this,ys)[e].push(t),this}resetIncrementalData(e,t){return f(this,ys)[e].length=0,this}recordNamedData(e,t){return f(this,td).set(e,t),this}recordSimpleDataFromNamed(e,t,n){f(this,gs)[e]=f(this,td).get(t)??n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(jh,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in f(this,gs)&&this.recordFutureForcedDependency(t,f(this,gs)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of f(this,vs))this.recordFutureForcedDependency(jh,e);return this}resetBBox(e){return f(this,jo)!==e&&(N(this,jo,e),f(this,Vt)[0]=1/0,f(this,Vt)[1]=1/0,f(this,Vt)[2]=-1/0,f(this,Vt)[3]=-1/0),this}recordClipBox(e,t,n,s,a,o){const c=Me.multiplyByDOMMatrix(f(this,Uo).at(-1),t.getTransform()),u=[1/0,1/0,-1/0,-1/0];Me.axialAlignedBoundingBox([n,a,s,o],c,u);const d=Me.intersect(f(this,jt),u);return d?(f(this,jt)[0]=d[0],f(this,jt)[1]=d[1],f(this,jt)[2]=d[2],f(this,jt)[3]=d[3]):(f(this,jt)[0]=f(this,jt)[1]=1/0,f(this,jt)[2]=f(this,jt)[3]=-1/0),this}recordBBox(e,t,n,s,a,o){const c=f(this,jt);if(c[0]===1/0)return this;const u=Me.multiplyByDOMMatrix(f(this,Uo).at(-1),t.getTransform());if(c[0]===-1/0)return Me.axialAlignedBoundingBox([n,a,s,o],u,f(this,Vt)),this;const d=[1/0,1/0,-1/0,-1/0];return Me.axialAlignedBoundingBox([n,a,s,o],u,d),f(this,Vt)[0]=Math.min(f(this,Vt)[0],Math.max(d[0],c[0])),f(this,Vt)[1]=Math.min(f(this,Vt)[1],Math.max(d[1],c[1])),f(this,Vt)[2]=Math.max(f(this,Vt)[2],Math.min(d[2],c[2])),f(this,Vt)[3]=Math.max(f(this,Vt)[3],Math.min(d[3],c[3])),this}recordCharacterBBox(e,t,n,s=1,a=0,o=0,c){const u=n.bbox;let d,p;if(u&&(d=u[2]!==u[0]&&u[3]!==u[1]&&f(this,Ff).get(n),d!==!1&&(p=[0,0,0,0],Me.axialAlignedBoundingBox(u,n.fontMatrix,p),(s!==1||a!==0||o!==0)&&Me.scaleMinMax([s,0,0,-s,a,o],p),d)))return this.recordBBox(e,t,p[0],p[2],p[1],p[3]);if(!c)return this.recordFullPageBBox(e);const y=c();return u&&p&&d===void 0&&(d=p[0]<=a-y.actualBoundingBoxLeft&&p[2]>=a+y.actualBoundingBoxRight&&p[1]<=o-y.actualBoundingBoxAscent&&p[3]>=o+y.actualBoundingBoxDescent,f(this,Ff).set(n,d),d)?this.recordBBox(e,t,p[0],p[2],p[1],p[3]):this.recordBBox(e,t,a-y.actualBoundingBoxLeft,a+y.actualBoundingBoxRight,o-y.actualBoundingBoxAscent,o+y.actualBoundingBoxDescent)}recordFullPageBBox(e){return f(this,Vt)[0]=Math.max(0,f(this,jt)[0]),f(this,Vt)[1]=Math.max(0,f(this,jt)[1]),f(this,Vt)[2]=Math.min(f(this,id),f(this,jt)[2]),f(this,Vt)[3]=Math.min(f(this,sd),f(this,jt)[3]),this}getSimpleIndex(e){return f(this,gs)[e]}recordDependencies(e,t){const n=f(this,vs),s=f(this,gs),a=f(this,ys);for(const o of t)o in f(this,gs)?n.add(s[o]):o in a&&a[o].forEach(n.add,n);return this}recordNamedDependency(e,t){return f(this,td).has(t)&&f(this,vs).add(f(this,td).get(t)),this}recordOperation(e,t=!1){if(this.recordDependencies(e,[jh]),f(this,Ra)){const n=ax(f(this,Ra),e),{dependencies:s}=n;f(this,vs).forEach(s.add,s),f(this,Qr).forEach(s.add,s),f(this,nd).forEach(s.add,s),s.delete(e),n.isRenderingOperation=!0}if(f(this,jo)===e){const n=Qk(f(this,Vt)[0]*256/f(this,id)),s=Qk(f(this,Vt)[1]*256/f(this,sd)),a=Zk(f(this,Vt)[2]*256/f(this,id)),o=Zk(f(this,Vt)[3]*256/f(this,sd));rx(f(this,Bo),e,n,s,a,o);for(const c of f(this,vs))c!==e&&rx(f(this,Bo),c,n,s,a,o);for(const c of f(this,Qr))c!==e&&rx(f(this,Bo),c,n,s,a,o);for(const c of f(this,nd))c!==e&&rx(f(this,Bo),c,n,s,a,o);t||(f(this,vs).clear(),N(this,jo,-1))}return this}recordShowTextOperation(e,t=!1){const n=Array.from(f(this,vs));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const s of n)this.recordIncrementalData("sameLineText",s);return this}bboxToClipBoxDropOperation(e,t=!1){return f(this,jo)===e&&(N(this,jo,-1),f(this,jt)[0]=Math.max(f(this,jt)[0],f(this,Vt)[0]),f(this,jt)[1]=Math.max(f(this,jt)[1],f(this,Vt)[1]),f(this,jt)[2]=Math.min(f(this,jt)[2],f(this,Vt)[2]),f(this,jt)[3]=Math.min(f(this,jt)[3],f(this,Vt)[3]),t||f(this,vs).clear()),this}_takePendingDependencies(){const e=f(this,vs);return N(this,vs,new Set),e}_extractOperation(e){const t=f(this,py).get(e);return f(this,py).delete(e),t}_pushPendingDependencies(e){for(const t of e)f(this,vs).add(t)}take(){return f(this,Ff).clear(),new Z9(f(this,Bi),f(this,Bo))}takeDebugMetadata(){return f(this,Ra)}}gs=new WeakMap,ys=new WeakMap,td=new WeakMap,Qr=new WeakMap,nd=new WeakMap,Uo=new WeakMap,jt=new WeakMap,Vt=new WeakMap,jo=new WeakMap,vs=new WeakMap,py=new WeakMap,Ff=new WeakMap,id=new WeakMap,sd=new WeakMap,Bo=new WeakMap,Bi=new WeakMap,Ra=new WeakMap,my=new WeakSet,l1=function(e,t){const n=new ArrayBuffer(e*4);N(this,Bo,new Uint8ClampedArray(n)),N(this,Bi,new Uint32Array(n)),t&&t.length>0?(f(this,Bi).set(t),f(this,Bi).fill(o1,t.length)):f(this,Bi).fill(o1)};var Qt,Nn,Zr,Uf,jf;const mT=class mT{constructor(e,t,n){P(this,Qt);P(this,Nn);P(this,Zr);P(this,Uf,0);P(this,jf,0);if(e instanceof mT&&f(e,Zr)===!!n)return e;N(this,Qt,e),N(this,Nn,t),N(this,Zr,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){return Kn(this,jf)._++,f(this,Qt).save(f(this,Nn)),this}restore(e){return f(this,jf)>0&&(f(this,Qt).restore(f(this,Nn)),Kn(this,jf)._--),this}recordOpenMarker(e){return Kn(this,Uf)._++,this}getOpenMarker(){return f(this,Uf)>0?f(this,Nn):f(this,Qt).getOpenMarker()}recordCloseMarker(e){return Kn(this,Uf)._--,this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return f(this,Qt).pushBaseTransform(e),this}popBaseTransform(){return f(this,Qt).popBaseTransform(),this}recordSimpleData(e,t){return f(this,Qt).recordSimpleData(e,f(this,Nn)),this}recordIncrementalData(e,t){return f(this,Qt).recordIncrementalData(e,f(this,Nn)),this}resetIncrementalData(e,t){return f(this,Qt).resetIncrementalData(e,f(this,Nn)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return f(this,Qt).recordSimpleDataFromNamed(e,t,f(this,Nn)),this}recordFutureForcedDependency(e,t){return f(this,Qt).recordFutureForcedDependency(e,f(this,Nn)),this}inheritSimpleDataAsFutureForcedDependencies(e){return f(this,Qt).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return f(this,Qt).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return f(this,Zr)||f(this,Qt).resetBBox(f(this,Nn)),this}recordClipBox(e,t,n,s,a,o){return f(this,Zr)||f(this,Qt).recordClipBox(f(this,Nn),t,n,s,a,o),this}recordBBox(e,t,n,s,a,o){return f(this,Zr)||f(this,Qt).recordBBox(f(this,Nn),t,n,s,a,o),this}recordCharacterBBox(e,t,n,s,a,o,c){return f(this,Zr)||f(this,Qt).recordCharacterBBox(f(this,Nn),t,n,s,a,o,c),this}recordFullPageBBox(e){return f(this,Zr)||f(this,Qt).recordFullPageBBox(f(this,Nn)),this}getSimpleIndex(e){return f(this,Qt).getSimpleIndex(e)}recordDependencies(e,t){return f(this,Qt).recordDependencies(f(this,Nn),t),this}recordNamedDependency(e,t){return f(this,Qt).recordNamedDependency(f(this,Nn),t),this}recordOperation(e){return f(this,Qt).recordOperation(f(this,Nn),!0),this}recordShowTextOperation(e){return f(this,Qt).recordShowTextOperation(f(this,Nn),!0),this}bboxToClipBoxDropOperation(e){return f(this,Zr)||f(this,Qt).bboxToClipBoxDropOperation(f(this,Nn),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}};Qt=new WeakMap,Nn=new WeakMap,Zr=new WeakMap,Uf=new WeakMap,jf=new WeakMap;let hb=mT;const xr={stroke:["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],fill:["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],imageXObject:["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],rawFillPath:["filter","fillColor","fillAlpha"],showText:["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],transform:["transform"],transformAndFill:["transform","fillColor"]},Ni={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function c1(i,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],s=new Path2D;s.rect(e[0],e[1],t,n),i.clip(s)}class rT{isModifyingCurrentTransform(){return!1}getPattern(){tn("Abstract method `getPattern` called.")}}class t7 extends rT{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,s){let a;if(s===Ni.STROKE||s===Ni.FILL){const o=t.current.getClippedPathBoundingBox(s,vn(e))||[0,0,0,0],c=Math.ceil(o[2]-o[0])||1,u=Math.ceil(o[3]-o[1])||1,d=t.cachedCanvases.getCanvas("pattern",c,u),p=d.context;p.clearRect(0,0,p.canvas.width,p.canvas.height),p.beginPath(),p.rect(0,0,p.canvas.width,p.canvas.height),p.translate(-o[0],-o[1]),n=Me.transform(n,[1,0,0,1,o[0],o[1]]),p.transform(...t.baseTransform),this.matrix&&p.transform(...this.matrix),c1(p,this._bbox),p.fillStyle=this._createGradient(p),p.fill(),a=e.createPattern(d.canvas,"no-repeat");const y=new DOMMatrix(n);a.setTransform(y)}else c1(e,this._bbox),a=this._createGradient(e);return a}}function tA(i,e,t,n,s,a,o,c){const u=e.coords,d=e.colors,p=i.data,y=i.width*4;let v;u[t+1]>u[n+1]&&(v=t,t=n,n=v,v=a,a=o,o=v),u[n+1]>u[s+1]&&(v=n,n=s,s=v,v=o,o=c,c=v),u[t+1]>u[n+1]&&(v=t,t=n,n=v,v=a,a=o,o=v);const w=(u[t]+e.offsetX)*e.scaleX,A=(u[t+1]+e.offsetY)*e.scaleY,C=(u[n]+e.offsetX)*e.scaleX,T=(u[n+1]+e.offsetY)*e.scaleY,_=(u[s]+e.offsetX)*e.scaleX,D=(u[s+1]+e.offsetY)*e.scaleY;if(A>=D)return;const R=d[a],L=d[a+1],F=d[a+2],U=d[o],M=d[o+1],O=d[o+2],z=d[c],J=d[c+1],G=d[c+2],X=Math.round(A),ie=Math.round(D);let $,ee,H,V,Q,ce,ve,q;for(let Z=X;Z<=ie;Z++){if(Z<T){const Te=Z<A?0:(A-Z)/(A-T);$=w-(w-C)*Te,ee=R-(R-U)*Te,H=L-(L-M)*Te,V=F-(F-O)*Te}else{let Te;Z>D?Te=1:T===D?Te=0:Te=(T-Z)/(T-D),$=C-(C-_)*Te,ee=U-(U-z)*Te,H=M-(M-J)*Te,V=O-(O-G)*Te}let ue;Z<A?ue=0:Z>D?ue=1:ue=(A-Z)/(A-D),Q=w-(w-_)*ue,ce=R-(R-z)*ue,ve=L-(L-J)*ue,q=F-(F-G)*ue;const me=Math.round(Math.min($,Q)),be=Math.round(Math.max($,Q));let _e=y*Z+me*4;for(let Te=me;Te<=be;Te++)ue=($-Te)/($-Q),ue<0?ue=0:ue>1&&(ue=1),p[_e++]=ee-(ee-ce)*ue|0,p[_e++]=H-(H-ve)*ue|0,p[_e++]=V-(V-q)*ue|0,p[_e++]=255}}function n7(i,e,t){const n=e.coords,s=e.colors;let a,o;switch(e.type){case"lattice":const c=e.verticesPerRow,u=Math.floor(n.length/c)-1,d=c-1;for(a=0;a<u;a++){let p=a*c;for(let y=0;y<d;y++,p++)tA(i,t,n[p],n[p+1],n[p+c],s[p],s[p+1],s[p+c]),tA(i,t,n[p+c+1],n[p+1],n[p+c],s[p+c+1],s[p+1],s[p+c])}break;case"triangles":for(a=0,o=n.length;a<o;a+=3)tA(i,t,n[a],n[a+1],n[a+2],s[a],s[a+1],s[a+2]);break;default:throw new Error("illegal figure")}}class i7 extends rT{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const c=Math.floor(this._bounds[0]),u=Math.floor(this._bounds[1]),d=Math.ceil(this._bounds[2])-c,p=Math.ceil(this._bounds[3])-u,y=Math.min(Math.ceil(Math.abs(d*e[0]*1.1)),3e3),v=Math.min(Math.ceil(Math.abs(p*e[1]*1.1)),3e3),w=d/y,A=p/v,C={coords:this._coords,colors:this._colors,offsetX:-c,offsetY:-u,scaleX:1/w,scaleY:1/A},T=y+4,_=v+4,D=n.getCanvas("mesh",T,_),R=D.context,L=R.createImageData(y,v);if(t){const U=L.data;for(let M=0,O=U.length;M<O;M+=4)U[M]=t[0],U[M+1]=t[1],U[M+2]=t[2],U[M+3]=255}for(const U of this._figures)n7(L,U,C);return R.putImageData(L,2,2),{canvas:D.canvas,offsetX:c-2*w,offsetY:u-2*A,scaleX:w,scaleY:A}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,s){c1(e,this._bbox);const a=new Float32Array(2);if(s===Ni.SHADING)Me.singularValueDecompose2dScale(vn(e),a);else if(this.matrix){Me.singularValueDecompose2dScale(this.matrix,a);const[c,u]=a;Me.singularValueDecompose2dScale(t.baseTransform,a),a[0]*=c,a[1]*=u}else Me.singularValueDecompose2dScale(t.baseTransform,a);const o=this._createMeshCanvas(a,s===Ni.SHADING?null:this._background,t.cachedCanvases);return s!==Ni.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(o.offsetX,o.offsetY),e.scale(o.scaleX,o.scaleY),e.createPattern(o.canvas,"no-repeat")}}class s7 extends rT{getPattern(){return"hotpink"}}function r7(i){switch(i[0]){case"RadialAxial":return new t7(i);case"Mesh":return new i7(i);case"Dummy":return new s7}throw new Error(`Unknown IR type: ${i[0]}`)}const eD={COLORED:1,UNCOLORED:2},Rb=class Rb{constructor(e,t,n,s){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=s}createPatternCanvas(e,t){var ce,ve;const{bbox:n,operatorList:s,paintType:a,tilingType:o,color:c,canvasGraphicsFactory:u}=this;let{xstep:d,ystep:p}=this;d=Math.abs(d),p=Math.abs(p),uw("TilingType: "+o);const y=n[0],v=n[1],w=n[2],A=n[3],C=w-y,T=A-v,_=new Float32Array(2);Me.singularValueDecompose2dScale(this.matrix,_);const[D,R]=_;Me.singularValueDecompose2dScale(this.baseTransform,_);const L=D*_[0],F=R*_[1];let U=C,M=T,O=!1,z=!1;const J=Math.ceil(d*L),G=Math.ceil(p*F),X=Math.ceil(C*L),ie=Math.ceil(T*F);J>=X?U=d:O=!0,G>=ie?M=p:z=!0;const $=this.getSizeAndScale(U,this.ctx.canvas.width,L),ee=this.getSizeAndScale(M,this.ctx.canvas.height,F),H=e.cachedCanvases.getCanvas("pattern",$.size,ee.size),V=H.context,Q=u.createCanvasGraphics(V,t);if(Q.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(Q,a,c),V.translate(-$.scale*y,-ee.scale*v),Q.transform(0,$.scale,0,0,ee.scale,0,0),V.save(),(ce=Q.dependencyTracker)==null||ce.save(),this.clipBbox(Q,y,v,w,A),Q.baseTransform=vn(Q.ctx),Q.executeOperatorList(s),Q.endDrawing(),(ve=Q.dependencyTracker)==null||ve.restore(),V.restore(),O||z){const q=H.canvas;O&&(U=d),z&&(M=p);const Z=this.getSizeAndScale(U,this.ctx.canvas.width,L),ue=this.getSizeAndScale(M,this.ctx.canvas.height,F),me=Z.size,be=ue.size,_e=e.cachedCanvases.getCanvas("pattern-workaround",me,be),Te=_e.context,mt=O?Math.floor(C/d):0,rt=z?Math.floor(T/p):0;for(let lt=0;lt<=mt;lt++)for(let En=0;En<=rt;En++)Te.drawImage(q,me*lt,be*En,me,be,0,0,me,be);return{canvas:_e.canvas,scaleX:Z.scale,scaleY:ue.scale,offsetX:y,offsetY:v}}return{canvas:H.canvas,scaleX:$.scale,scaleY:ee.scale,offsetX:y,offsetY:v}}getSizeAndScale(e,t,n){const s=Math.max(Rb.MAX_PATTERN_SIZE,t);let a=Math.ceil(e*n);return a>=s?a=s:n=a/e,{scale:n,size:a}}clipBbox(e,t,n,s,a){const o=s-t,c=a-n;e.ctx.rect(t,n,o,c),Me.axialAlignedBoundingBox([t,n,s,a],vn(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const s=e.ctx,a=e.current;switch(t){case eD.COLORED:const{fillStyle:o,strokeStyle:c}=this.ctx;s.fillStyle=a.fillColor=o,s.strokeStyle=a.strokeColor=c;break;case eD.UNCOLORED:s.fillStyle=s.strokeStyle=n,a.fillColor=a.strokeColor=n;break;default:throw new T9(`Unsupported paint type: ${t}`)}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,s,a){let o=n;s!==Ni.SHADING&&(o=Me.transform(o,t.baseTransform),this.matrix&&(o=Me.transform(o,this.matrix)));const c=this.createPatternCanvas(t,a);let u=new DOMMatrix(o);u=u.translate(c.offsetX,c.offsetY),u=u.scale(1/c.scaleX,1/c.scaleY);const d=e.createPattern(c.canvas,"repeat");return d.setTransform(u),d}};ye(Rb,"MAX_PATTERN_SIZE",3e3);let u1=Rb;function a7({src:i,srcPos:e=0,dest:t,width:n,height:s,nonBlackColor:a=4294967295,inverseDecode:o=!1}){const c=mi.isLittleEndian?4278190080:255,[u,d]=o?[a,c]:[c,a],p=n>>3,y=n&7,v=i.length;t=new Uint32Array(t.buffer);let w=0;for(let A=0;A<s;A++){for(const T=e+p;e<T;e++){const _=e<v?i[e]:255;t[w++]=_&128?d:u,t[w++]=_&64?d:u,t[w++]=_&32?d:u,t[w++]=_&16?d:u,t[w++]=_&8?d:u,t[w++]=_&4?d:u,t[w++]=_&2?d:u,t[w++]=_&1?d:u}if(y===0)continue;const C=e<v?i[e++]:255;for(let T=0;T<y;T++)t[w++]=C&1<<7-T?d:u}return{srcPos:e,destPos:w}}const tD=16,nD=100,o7=15,iD=10,Ss=16,nA=new DOMMatrix,tr=new Float32Array(2),Jh=new Float32Array([1/0,1/0,-1/0,-1/0]);function l7(i,e){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){e.save(),this.__originalSave()},i.restore=function(){e.restore(),this.__originalRestore()},i.translate=function(t,n){e.translate(t,n),this.__originalTranslate(t,n)},i.scale=function(t,n){e.scale(t,n),this.__originalScale(t,n)},i.transform=function(t,n,s,a,o,c){e.transform(t,n,s,a,o,c),this.__originalTransform(t,n,s,a,o,c)},i.setTransform=function(t,n,s,a,o,c){e.setTransform(t,n,s,a,o,c),this.__originalSetTransform(t,n,s,a,o,c)},i.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},i.rotate=function(t){e.rotate(t),this.__originalRotate(t)},i.clip=function(t){e.clip(t),this.__originalClip(t)},i.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},i.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},i.bezierCurveTo=function(t,n,s,a,o,c){e.bezierCurveTo(t,n,s,a,o,c),this.__originalBezierCurveTo(t,n,s,a,o,c)},i.rect=function(t,n,s,a){e.rect(t,n,s,a),this.__originalRect(t,n,s,a)},i.closePath=function(){e.closePath(),this.__originalClosePath()},i.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class c7{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let s;return this.cache[e]!==void 0?(s=this.cache[e],this.canvasFactory.reset(s,t,n)):(s=this.canvasFactory.create(t,n),this.cache[e]=s),s}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function ox(i,e,t,n,s,a,o,c,u,d){const[p,y,v,w,A,C]=vn(i);if(y===0&&v===0){const D=o*p+A,R=Math.round(D),L=c*w+C,F=Math.round(L),U=(o+u)*p+A,M=Math.abs(Math.round(U)-R)||1,O=(c+d)*w+C,z=Math.abs(Math.round(O)-F)||1;return i.setTransform(Math.sign(p),0,0,Math.sign(w),R,F),i.drawImage(e,t,n,s,a,0,0,M,z),i.setTransform(p,y,v,w,A,C),[M,z]}if(p===0&&w===0){const D=c*v+A,R=Math.round(D),L=o*y+C,F=Math.round(L),U=(c+d)*v+A,M=Math.abs(Math.round(U)-R)||1,O=(o+u)*y+C,z=Math.abs(Math.round(O)-F)||1;return i.setTransform(0,Math.sign(y),Math.sign(v),0,R,F),i.drawImage(e,t,n,s,a,0,0,z,M),i.setTransform(p,y,v,w,A,C),[z,M]}i.drawImage(e,t,n,s,a,o,c,u,d);const T=Math.hypot(p,y),_=Math.hypot(v,w);return[T*u,_*d]}class sD{constructor(e,t,n){ye(this,"alphaIsShape",!1);ye(this,"fontSize",0);ye(this,"fontSizeScale",1);ye(this,"textMatrix",null);ye(this,"textMatrixScale",1);ye(this,"fontMatrix",FA);ye(this,"leading",0);ye(this,"x",0);ye(this,"y",0);ye(this,"lineX",0);ye(this,"lineY",0);ye(this,"charSpacing",0);ye(this,"wordSpacing",0);ye(this,"textHScale",1);ye(this,"textRenderingMode",Si.FILL);ye(this,"textRise",0);ye(this,"fillColor","#000000");ye(this,"strokeColor","#000000");ye(this,"patternFill",!1);ye(this,"patternStroke",!1);ye(this,"fillAlpha",1);ye(this,"strokeAlpha",1);ye(this,"lineWidth",1);ye(this,"activeSMask",null);ye(this,"transferMaps","none");n==null||n(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=Jh.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(e=Ni.FILL,t=null){const n=this.minMax.slice();if(e===Ni.STROKE){t||tn("Stroke bounding box must include transform."),Me.singularValueDecompose2dScale(t,tr);const s=tr[0]*this.lineWidth/2,a=tr[1]*this.lineWidth/2;n[0]-=s,n[1]-=a,n[2]+=s,n[3]+=a}return n}updateClipFromPath(){const e=Me.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(Jh,0)}getClippedPathBoundingBox(e=Ni.FILL,t=null){return Me.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function rD(i,e){if(e instanceof ImageData){i.putImageData(e,0,0);return}const t=e.height,n=e.width,s=t%Ss,a=(t-s)/Ss,o=s===0?a:a+1,c=i.createImageData(n,Ss);let u=0,d;const p=e.data,y=c.data;let v,w,A,C;if(e.kind===Ag.GRAYSCALE_1BPP){const T=p.byteLength,_=new Uint32Array(y.buffer,0,y.byteLength>>2),D=_.length,R=n+7>>3,L=4294967295,F=mi.isLittleEndian?4278190080:255;for(v=0;v<o;v++){for(A=v<a?Ss:s,d=0,w=0;w<A;w++){const U=T-u;let M=0;const O=U>R?n:U*8-7,z=O&-8;let J=0,G=0;for(;M<z;M+=8)G=p[u++],_[d++]=G&128?L:F,_[d++]=G&64?L:F,_[d++]=G&32?L:F,_[d++]=G&16?L:F,_[d++]=G&8?L:F,_[d++]=G&4?L:F,_[d++]=G&2?L:F,_[d++]=G&1?L:F;for(;M<O;M++)J===0&&(G=p[u++],J=128),_[d++]=G&J?L:F,J>>=1}for(;d<D;)_[d++]=0;i.putImageData(c,0,v*Ss)}}else if(e.kind===Ag.RGBA_32BPP){for(w=0,C=n*Ss*4,v=0;v<a;v++)y.set(p.subarray(u,u+C)),u+=C,i.putImageData(c,0,w),w+=Ss;v<o&&(C=n*s*4,y.set(p.subarray(u,u+C)),i.putImageData(c,0,w))}else if(e.kind===Ag.RGB_24BPP)for(A=Ss,C=n*A,v=0;v<o;v++){for(v>=a&&(A=s,C=n*A),d=0,w=C;w--;)y[d++]=p[u++],y[d++]=p[u++],y[d++]=p[u++],y[d++]=255;i.putImageData(c,0,v*Ss)}else throw new Error(`bad image kind: ${e.kind}`)}function aD(i,e){if(e.bitmap){i.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,s=t%Ss,a=(t-s)/Ss,o=s===0?a:a+1,c=i.createImageData(n,Ss);let u=0;const d=e.data,p=c.data;for(let y=0;y<o;y++){const v=y<a?Ss:s;({srcPos:u}=a7({src:d,srcPos:u,dest:p,width:n,height:v,nonBlackColor:0})),i.putImageData(c,0,y*Ss)}}function Wm(i,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)i[n]!==void 0&&(e[n]=i[n]);i.setLineDash!==void 0&&(e.setLineDash(i.getLineDash()),e.lineDashOffset=i.lineDashOffset)}function lx(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);const{filter:e}=i;e!=="none"&&e!==""&&(i.filter="none")}function oD(i,e){if(e)return!0;Me.singularValueDecompose2dScale(i,tr);const t=Math.fround(la.pixelRatio*dl.PDF_TO_CSS_UNITS);return tr[0]<=t&&tr[1]<=t}const u7=["butt","round","square"],d7=["miter","round","bevel"],h7={},lD={};var ca,d1,h1,f1;const gT=class gT{constructor(e,t,n,s,a,{optionalContentConfig:o,markedContentStack:c=null},u,d,p){P(this,ca);this.ctx=e,this.current=new sD(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=s,this.filterFactory=a,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=c||[],this.optionalContentConfig=o,this.cachedCanvases=new c7(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=u,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=d,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=p??null}getObject(e,t,n=null){var s;return typeof t=="string"?((s=this.dependencyTracker)==null||s.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:s=null}){const a=this.ctx.canvas.width,o=this.ctx.canvas.height,c=this.ctx.fillStyle;if(this.ctx.fillStyle=s||"#ffffff",this.ctx.fillRect(0,0,a,o),this.ctx.fillStyle=c,n){const u=this.cachedCanvases.getCanvas("transparent",a,o);this.compositeCtx=this.ctx,this.transparentCanvas=u.canvas,this.ctx=u.context,this.ctx.save(),this.ctx.transform(...vn(this.compositeCtx))}this.ctx.save(),lx(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=vn(this.ctx)}executeOperatorList(e,t,n,s,a){var _;const o=e.argsArray,c=e.fnArray;let u=t||0;const d=o.length;if(d===u)return u;const p=d-u>iD&&typeof n=="function",y=p?Date.now()+o7:0;let v=0;const w=this.commonObjs,A=this.objs;let C,T;for(;;){if(s!==void 0&&u===s.nextBreakPoint)return s.breakIt(u,n),u;if(!a||a(u))if(C=c[u],T=o[u]??null,C!==Op.dependency)T===null?this[C](u):this[C](u,...T);else for(const D of T){(_=this.dependencyTracker)==null||_.recordNamedData(D,u);const R=D.startsWith("g_")?w:A;if(!R.has(D))return R.get(D,n),u}if(u++,u===d)return u;if(p&&++v>iD){if(Date.now()>y)return n(),u;v=0}}}endDrawing(){j(this,ca,d1).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),j(this,ca,h1).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,s=e.height??e.displayHeight;let a=Math.max(Math.hypot(t[0],t[1]),1),o=Math.max(Math.hypot(t[2],t[3]),1),c=n,u=s,d="prescale1",p,y;for(;a>2&&c>1||o>2&&u>1;){let v=c,w=u;a>2&&c>1&&(v=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c/2),a/=c/v),o>2&&u>1&&(w=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,o/=u/w),p=this.cachedCanvases.getCanvas(d,v,w),y=p.context,y.clearRect(0,0,v,w),y.drawImage(e,0,0,c,u,0,0,v,w),e=p.canvas,c=v,u=w,d=d==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:c,paintHeight:u}}_createMaskCanvas(e,t){var J,G;const n=this.ctx,{width:s,height:a}=t,o=this.current.fillColor,c=this.current.patternFill,u=vn(n);let d,p,y,v;if((t.bitmap||t.data)&&t.count>1){const X=t.bitmap||t.data.buffer;p=JSON.stringify(c?u:[u.slice(0,4),o]),d=this._cachedBitmapsMap.get(X),d||(d=new Map,this._cachedBitmapsMap.set(X,d));const ie=d.get(p);if(ie&&!c){const $=Math.round(Math.min(u[0],u[2])+u[4]),ee=Math.round(Math.min(u[1],u[3])+u[5]);return(J=this.dependencyTracker)==null||J.recordDependencies(e,xr.transformAndFill),{canvas:ie,offsetX:$,offsetY:ee}}y=ie}y||(v=this.cachedCanvases.getCanvas("maskCanvas",s,a),aD(v.context,t));let w=Me.transform(u,[1/s,0,0,-1/a,0,0]);w=Me.transform(w,[1,0,0,1,0,-a]);const A=Jh.slice();Me.axialAlignedBoundingBox([0,0,s,a],w,A);const[C,T,_,D]=A,R=Math.round(_-C)||1,L=Math.round(D-T)||1,F=this.cachedCanvases.getCanvas("fillCanvas",R,L),U=F.context,M=C,O=T;U.translate(-M,-O),U.transform(...w),y||(y=this._scaleImage(v.canvas,ma(U)),y=y.img,d&&c&&d.set(p,y)),U.imageSmoothingEnabled=oD(vn(U),t.interpolate),ox(U,y,0,0,y.width,y.height,0,0,s,a),U.globalCompositeOperation="source-in";const z=Me.transform(ma(U),[1,0,0,1,-M,-O]);return U.fillStyle=c?o.getPattern(n,this,z,Ni.FILL,e):o,U.fillRect(0,0,s,a),d&&!c&&(this.cachedCanvases.delete("fillCanvas"),d.set(p,F.canvas)),(G=this.dependencyTracker)==null||G.recordDependencies(e,xr.transformAndFill),{canvas:F.canvas,offsetX:Math.round(M),offsetY:Math.round(O)}}setLineWidth(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineCap",e),this.ctx.lineCap=u7[t]}setLineJoin(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=d7[t]}setMiterLimit(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){var a;(a=this.dependencyTracker)==null||a.recordSimpleData("dash",e);const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var n,s,a,o,c;for(const[u,d]of t)switch(u){case"LW":this.setLineWidth(e,d);break;case"LC":this.setLineCap(e,d);break;case"LJ":this.setLineJoin(e,d);break;case"ML":this.setMiterLimit(e,d);break;case"D":this.setDash(e,d[0],d[1]);break;case"RI":this.setRenderingIntent(e,d);break;case"FL":this.setFlatness(e,d);break;case"Font":this.setFont(e,d[0],d[1]);break;case"CA":(n=this.dependencyTracker)==null||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=d;break;case"ca":(s=this.dependencyTracker)==null||s.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=d;break;case"BM":(a=this.dependencyTracker)==null||a.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=d;break;case"SMask":(o=this.dependencyTracker)==null||o.recordSimpleData("SMask",e),this.current.activeSMask=d?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":(c=this.dependencyTracker)==null||c.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(d);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,a=this.cachedCanvases.getCanvas(s,t,n);this.suspendedCtx=this.ctx;const o=this.ctx=a.context;o.setTransform(this.suspendedCtx.getTransform()),Wm(this.suspendedCtx,o),l7(o,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Wm(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,s){const a=s[0],o=s[1],c=s[2]-a,u=s[3]-o;c===0||u===0||(this.genericComposeSMask(t.context,n,c,u,t.subtype,t.backdrop,t.transferMap,a,o,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,s,a,o,c,u,d,p,y){let v=e.canvas,w=u-p,A=d-y;if(o)if(w<0||A<0||w+n>v.width||A+s>v.height){const T=this.cachedCanvases.getCanvas("maskExtension",n,s),_=T.context;_.drawImage(v,-w,-A),_.globalCompositeOperation="destination-atop",_.fillStyle=o,_.fillRect(0,0,n,s),_.globalCompositeOperation="source-over",v=T.canvas,w=A=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const T=new Path2D;T.rect(w,A,n,s),e.clip(T),e.globalCompositeOperation="destination-atop",e.fillStyle=o,e.fillRect(w,A,n,s),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),a==="Alpha"&&c?t.filter=this.filterFactory.addAlphaFilter(c):a==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(c));const C=new Path2D;C.rect(u,d,n,s),t.clip(C),t.globalCompositeOperation="destination-in",t.drawImage(v,w,A,n,s,u,d,n,s),t.restore()}save(e){var n;this.inSMaskMode&&Wm(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone(),(n=this.dependencyTracker)==null||n.save(e)}restore(e){var t;if((t=this.dependencyTracker)==null||t.restore(e),this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Wm(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(e,t,n,s,a,o,c){var u;(u=this.dependencyTracker)==null||u.recordIncrementalData("transform",e),this.ctx.transform(t,n,s,a,o,c),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,s){let[a]=n;if(!s){a||(a=n[0]=new Path2D),this[t](e,a);return}if(this.dependencyTracker!==null){const o=t===Op.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,s[0]-o,s[2]+o,s[1]-o,s[3]+o).recordDependencies(e,["transform"])}if(!(a instanceof Path2D)){const o=n[0]=new Path2D;for(let c=0,u=a.length;c<u;)switch(a[c++]){case tx.moveTo:o.moveTo(a[c++],a[c++]);break;case tx.lineTo:o.lineTo(a[c++],a[c++]);break;case tx.curveTo:o.bezierCurveTo(a[c++],a[c++],a[c++],a[c++],a[c++],a[c++]);break;case tx.closePath:o.closePath();break;default:Ke(`Unrecognized drawing path operator: ${a[c-1]}`);break}a=o}Me.axialAlignedBoundingBox(s,vn(this.ctx),this.current.minMax),this[t](e,a),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t,n=!0){var o;const s=this.ctx,a=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof a=="object"&&(a!=null&&a.getPattern)){const c=a.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=a.getPattern(s,this,ma(s),Ni.STROKE,e),c){const u=new Path2D;u.addPath(t,s.getTransform().invertSelf().multiplySelf(c)),t=u}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);(o=this.dependencyTracker)==null||o.recordDependencies(e,xr.stroke),n&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(Ni.STROKE,vn(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t,n=!0){var d,p,y;const s=this.ctx,a=this.current.fillColor,o=this.current.patternFill;let c=!1;if(o){const v=a.isModifyingCurrentTransform()?s.getTransform():null;if((d=this.dependencyTracker)==null||d.save(e),s.save(),s.fillStyle=a.getPattern(s,this,ma(s),Ni.FILL,e),v){const w=new Path2D;w.addPath(t,s.getTransform().invertSelf().multiplySelf(v)),t=w}c=!0}const u=this.current.getClippedPathBoundingBox();this.contentVisible&&u!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),(p=this.dependencyTracker)==null||p.recordDependencies(e,xr.fill),c&&(s.restore(),(y=this.dependencyTracker)==null||y.restore(e)),n&&this.consumePath(e,t,u)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var n;this.ctx.fill(t),(n=this.dependencyTracker)==null||n.recordDependencies(e,xr.rawFillPath).recordOperation(e)}clip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=h7}eoClip(e){var t;(t=this.dependencyTracker)==null||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=lD}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,(t=this.dependencyTracker)==null||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:s}=this;t!==void 0&&s.recordFutureForcedDependency("textClip",s.getOpenMarker()).recordFutureForcedDependency("textClip",e),s.recordCloseMarker(e)}if(t!==void 0){const s=new Path2D,a=n.getTransform().invertSelf();for(const{transform:o,x:c,y:u,fontSize:d,path:p}of t)p&&s.addPath(p,new DOMMatrix(o).preMultiplySelf(a).translate(c,u).scale(d,-d));n.clip(s)}delete this.pendingTextPaths}setCharSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){var y,v;(y=this.dependencyTracker)==null||y.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const s=this.commonObjs.get(t),a=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(a.fontMatrix=s.fontMatrix||FA,(a.fontMatrix[0]===0||a.fontMatrix[3]===0)&&Ke("Invalid font matrix for font "+t),n<0?(n=-n,a.fontDirection=-1):a.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const o=s.loadedName||"sans-serif",c=((v=s.systemFontInfo)==null?void 0:v.css)||`"${o}", ${s.fallbackName}`;let u="normal";s.black?u="900":s.bold&&(u="bold");const d=s.italic?"italic":"normal";let p=n;n<tD?p=tD:n>nD&&(p=nD),this.current.fontSizeScale=n/p,this.ctx.font=`${d} ${u} ${p}px ${c}`}setTextRenderingMode(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){var s;(s=this.dependencyTracker)==null||s.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){var s;(s=this.dependencyTracker)==null||s.recordSimpleData("textMatrix",e);const{current:n}=this;n.textMatrix=t,n.textMatrixScale=Math.hypot(t[0],t[1]),n.x=n.lineX=0,n.y=n.lineY=0}nextLine(e){var t;this.moveText(e,0,this.current.leading),(t=this.dependencyTracker)==null||t.recordIncrementalData("moveText",this.dependencyTracker.getSimpleIndex("leading")??e)}paintChar(e,t,n,s,a,o){var _,D,R,L;const c=this.ctx,u=this.current,d=u.font,p=u.textRenderingMode,y=u.fontSize/u.fontSizeScale,v=p&Si.FILL_STROKE_MASK,w=!!(p&Si.ADD_TO_PATH_FLAG),A=u.patternFill&&!d.missingFile,C=u.patternStroke&&!d.missingFile;let T;if((d.disableFontFace||w||A||C)&&!d.missingFile&&(T=d.getPathGenerator(this.commonObjs,t)),T&&(d.disableFontFace||A||C)){c.save(),c.translate(n,s),c.scale(y,-y),(_=this.dependencyTracker)==null||_.recordCharacterBBox(e,c,d);let F;if(v===Si.FILL||v===Si.FILL_STROKE)if(a){F=c.getTransform(),c.setTransform(...a);const U=j(this,ca,f1).call(this,T,F,a);c.fill(U)}else c.fill(T);if(v===Si.STROKE||v===Si.FILL_STROKE)if(o){F||(F=c.getTransform()),c.setTransform(...o);const{a:U,b:M,c:O,d:z}=F,J=Me.inverseTransform(o),G=Me.transform([U,M,O,z,0,0],J);Me.singularValueDecompose2dScale(G,tr),c.lineWidth*=Math.max(tr[0],tr[1])/y,c.stroke(j(this,ca,f1).call(this,T,F,o))}else c.lineWidth/=y,c.stroke(T);c.restore()}else(v===Si.FILL||v===Si.FILL_STROKE)&&(c.fillText(t,n,s),(D=this.dependencyTracker)==null||D.recordCharacterBBox(e,c,d,y,n,s,()=>c.measureText(t))),(v===Si.STROKE||v===Si.FILL_STROKE)&&(this.dependencyTracker&&((R=this.dependencyTracker)==null||R.recordCharacterBBox(e,c,d,y,n,s,()=>c.measureText(t)).recordDependencies(e,xr.stroke)),c.strokeText(t,n,s));w&&((this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:vn(c),x:n,y:s,fontSize:y,path:T}),(L=this.dependencyTracker)==null||L.recordCharacterBBox(e,c,d,y,n,s))}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let s=3;s<t.length;s+=4)if(t[s]>0&&t[s]<255){n=!0;break}return nt(this,"isFontSubpixelAAEnabled",n)}showText(e,t){var O,z,J,G;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,xr.showText).resetBBox(e),this.current.textRenderingMode&Si.ADD_TO_PATH_FLAG&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const n=this.current,s=n.font;if(s.isType3Font){this.showType3Text(e,t),(O=this.dependencyTracker)==null||O.recordShowTextOperation(e);return}const a=n.fontSize;if(a===0){(z=this.dependencyTracker)==null||z.recordOperation(e);return}const o=this.ctx,c=n.fontSizeScale,u=n.charSpacing,d=n.wordSpacing,p=n.fontDirection,y=n.textHScale*p,v=t.length,w=s.vertical,A=w?1:-1,C=s.defaultVMetrics,T=a*n.fontMatrix[0],_=n.textRenderingMode===Si.FILL&&!s.disableFontFace&&!n.patternFill;o.save(),n.textMatrix&&o.transform(...n.textMatrix),o.translate(n.x,n.y+n.textRise),p>0?o.scale(y,-1):o.scale(y,1);let D,R;if(n.patternFill){o.save();const X=n.fillColor.getPattern(o,this,ma(o),Ni.FILL,e);D=vn(o),o.restore(),o.fillStyle=X}if(n.patternStroke){o.save();const X=n.strokeColor.getPattern(o,this,ma(o),Ni.STROKE,e);R=vn(o),o.restore(),o.strokeStyle=X}let L=n.lineWidth;const F=n.textMatrixScale;if(F===0||L===0){const X=n.textRenderingMode&Si.FILL_STROKE_MASK;(X===Si.STROKE||X===Si.FILL_STROKE)&&(L=this.getSinglePixelWidth())}else L/=F;if(c!==1&&(o.scale(c,c),L/=c),o.lineWidth=L,s.isInvalidPDFjsFont){const X=[];let ie=0;for(const ee of t)X.push(ee.unicode),ie+=ee.width;const $=X.join("");if(o.fillText($,0,0),this.dependencyTracker!==null){const ee=o.measureText($);this.dependencyTracker.recordBBox(e,this.ctx,-ee.actualBoundingBoxLeft,ee.actualBoundingBoxRight,-ee.actualBoundingBoxAscent,ee.actualBoundingBoxDescent).recordShowTextOperation(e)}n.x+=ie*T*y,o.restore(),this.compose();return}let U=0,M;for(M=0;M<v;++M){const X=t[M];if(typeof X=="number"){U+=A*X*a/1e3;continue}let ie=!1;const $=(X.isSpace?d:0)+u,ee=X.fontChar,H=X.accent;let V,Q,ce=X.width;if(w){const Z=X.vmetric||C,ue=-(X.vmetric?Z[1]:ce*.5)*T,me=Z[2]*T;ce=Z?-Z[0]:ce,V=ue/c,Q=(U+me)/c}else V=U/c,Q=0;let ve;if(s.remeasure&&ce>0){ve=o.measureText(ee);const Z=ve.width*1e3/a*c;if(ce<Z&&this.isFontSubpixelAAEnabled){const ue=ce/Z;ie=!0,o.save(),o.scale(ue,1),V/=ue}else ce!==Z&&(V+=(ce-Z)/2e3*a/c)}if(this.contentVisible&&(X.isInFont||s.missingFile)){if(_&&!H)o.fillText(ee,V,Q),(J=this.dependencyTracker)==null||J.recordCharacterBBox(e,o,ve?{bbox:null}:s,a/c,V,Q,()=>ve??o.measureText(ee));else if(this.paintChar(e,ee,V,Q,D,R),H){const Z=V+a*H.offset.x/c,ue=Q-a*H.offset.y/c;this.paintChar(e,H.fontChar,Z,ue,D,R)}}const q=w?ce*T-$*p:ce*T+$*p;U+=q,ie&&o.restore()}w?n.y-=U:n.x+=U*y,o.restore(),this.compose(),(G=this.dependencyTracker)==null||G.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,s=this.current,a=s.font,o=s.fontSize,c=s.fontDirection,u=a.vertical?1:-1,d=s.charSpacing,p=s.wordSpacing,y=s.textHScale*c,v=s.fontMatrix||FA,w=t.length,A=s.textRenderingMode===Si.INVISIBLE;let C,T,_,D;if(A||o===0)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),s.textMatrix&&n.transform(...s.textMatrix),n.translate(s.x,s.y+s.textRise),n.scale(y,c);const R=this.dependencyTracker;for(this.dependencyTracker=R?new hb(R,e):null,C=0;C<w;++C){if(T=t[C],typeof T=="number"){D=u*T*o/1e3,this.ctx.translate(D,0),s.x+=D*y;continue}const L=(T.isSpace?p:0)+d,F=a.charProcOperatorList[T.operatorListId];F?this.contentVisible&&(this.save(),n.scale(o,o),n.transform(...v),this.executeOperatorList(F),this.restore()):Ke(`Type3 character "${T.operatorListId}" is not available.`);const U=[T.width,0];Me.applyTransform(U,v),_=U[0]*o+L,n.translate(_,0),s.x+=_*y}n.restore(),R&&(this.dependencyTracker=R)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,s,a,o,c){var d;const u=new Path2D;u.rect(s,a,o-s,c-a),this.ctx.clip(u),(d=this.dependencyTracker)==null||d.recordBBox(e,this.ctx,s,o,a,c).recordClipBox(e,this.ctx,s,o,a,c),this.endPath(e)}getColorN_Pattern(e,t){let n;if(t[0]==="TilingPattern"){const s=this.baseTransform||vn(this.ctx),a={createCanvasGraphics:(o,c)=>new gT(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new hb(this.dependencyTracker,c,!0):null)};n=new u1(t,this.ctx,a,s)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.current.strokeColor=this.getColorN_Pattern(e,t),this.current.patternStroke=!0}setFillColorN(e,...t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.current.fillColor=this.getColorN_Pattern(e,t),this.current.patternFill=!0}setStrokeRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var n;(n=this.dependencyTracker)==null||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;(t=this.dependencyTracker)==null||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t,n=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=r7(this.getObject(e,t)),this.cachedPatterns.set(t,s)),n&&(s.matrix=n),s}shadingFill(e,t){var o;if(!this.contentVisible)return;const n=this.ctx;this.save(e);const s=this._getPattern(e,t);n.fillStyle=s.getPattern(n,this,ma(n),Ni.SHADING,e);const a=ma(n);if(a){const{width:c,height:u}=n.canvas,d=Jh.slice();Me.axialAlignedBoundingBox([0,0,c,u],a,d);const[p,y,v,w]=d;this.ctx.fillRect(p,y,v-p,w-y)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);(o=this.dependencyTracker)==null||o.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,xr.transform).recordDependencies(e,xr.fill).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){tn("Should not call beginInlineImage")}beginImageData(){tn("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){var s;if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=vn(this.ctx),n)){Me.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[a,o,c,u]=n,d=new Path2D;d.rect(a,o,c-a,u-o),this.ctx.clip(d),(s=this.dependencyTracker)==null||s.recordClipBox(e,this.ctx,a,c,o,u),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var R;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const n=this.ctx;t.isolated||uw("TODO: Support non-isolated groups."),t.knockout&&Ke("Knockout groups not supported.");const s=vn(n);if(t.matrix&&n.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let a=Jh.slice();Me.axialAlignedBoundingBox(t.bbox,vn(n),a);const o=[0,0,n.canvas.width,n.canvas.height];a=Me.intersect(a,o)||[0,0,0,0];const c=Math.floor(a[0]),u=Math.floor(a[1]),d=Math.max(Math.ceil(a[2])-c,1),p=Math.max(Math.ceil(a[3])-u,1);this.current.startNewPathAndClipBox([0,0,d,p]);let y="groupAt"+this.groupLevel;t.smask&&(y+="_smask_"+this.smaskCounter++%2);const v=this.cachedCanvases.getCanvas(y,d,p),w=v.context;w.translate(-c,-u),w.transform(...s);let A=new Path2D;const[C,T,_,D]=t.bbox;if(A.rect(C,T,_-C,D-T),t.matrix){const L=new Path2D;L.addPath(A,new DOMMatrix(t.matrix)),A=L}w.clip(A),t.smask&&this.smaskStack.push({canvas:v.canvas,context:w,offsetX:c,offsetY:u,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),(!t.smask||this.dependencyTracker)&&(n.setTransform(1,0,0,1,0,0),n.translate(c,u),n.save()),Wm(n,w),this.ctx=w,(R=this.dependencyTracker)==null||R.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(n),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(n),this.groupLevel++}endGroup(e,t){var a;if(!this.contentVisible)return;this.groupLevel--;const n=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,(a=this.dependencyTracker)==null||a.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const o=vn(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...o);const c=Jh.slice();Me.axialAlignedBoundingBox([0,0,n.canvas.width,n.canvas.height],o,c),this.ctx.drawImage(n.canvas,0,0),this.ctx.restore(),this.compose(c)}}beginAnnotation(e,t,n,s,a,o){if(j(this,ca,d1).call(this),lx(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const c=n[2]-n[0],u=n[3]-n[1];if(o&&this.annotationCanvasMap){s=s.slice(),s[4]-=n[0],s[5]-=n[1],n=n.slice(),n[0]=n[1]=0,n[2]=c,n[3]=u,Me.singularValueDecompose2dScale(vn(this.ctx),tr);const{viewportScale:d}=this,p=Math.ceil(c*this.outputScaleX*d),y=Math.ceil(u*this.outputScaleY*d);this.annotationCanvas=this.canvasFactory.create(p,y);const{canvas:v,context:w}=this.annotationCanvas;this.annotationCanvasMap.set(t,v),this.annotationCanvas.savedCtx=this.ctx,this.ctx=w,this.ctx.save(),this.ctx.setTransform(tr[0],0,0,-tr[1],0,u*tr[1]),lx(this.ctx)}else{lx(this.ctx),this.endPath(e);const d=new Path2D;d.rect(n[0],n[1],c,u),this.ctx.clip(d)}}this.current=new sD(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...s),this.transform(e,...a)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),j(this,ca,h1).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var c;if(!this.contentVisible)return;const n=t.count;t=this.getObject(e,t.data,t),t.count=n;const s=this.ctx,a=this._createMaskCanvas(e,t),o=a.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(o,a.offsetX,a.offsetY),(c=this.dependencyTracker)==null||c.resetBBox(e).recordBBox(e,this.ctx,a.offsetX,a.offsetX+o.width,a.offsetY,a.offsetY+o.height).recordOperation(e),s.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n,s=0,a=0,o,c){var y,v,w;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const u=this.ctx;u.save();const d=vn(u);u.transform(n,s,a,o,0,0);const p=this._createMaskCanvas(e,t);u.setTransform(1,0,0,1,p.offsetX-d[4],p.offsetY-d[5]),(y=this.dependencyTracker)==null||y.resetBBox(e);for(let A=0,C=c.length;A<C;A+=2){const T=Me.transform(d,[n,s,a,o,c[A],c[A+1]]);u.drawImage(p.canvas,T[4],T[5]),(v=this.dependencyTracker)==null||v.recordBBox(e,this.ctx,T[4],T[4]+p.canvas.width,T[5],T[5]+p.canvas.height)}u.restore(),this.compose(),(w=this.dependencyTracker)==null||w.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var o,c,u;if(!this.contentVisible)return;const n=this.ctx,s=this.current.fillColor,a=this.current.patternFill;(o=this.dependencyTracker)==null||o.resetBBox(e).recordDependencies(e,xr.transformAndFill);for(const d of t){const{data:p,width:y,height:v,transform:w}=d,A=this.cachedCanvases.getCanvas("maskCanvas",y,v),C=A.context;C.save();const T=this.getObject(e,p,d);aD(C,T),C.globalCompositeOperation="source-in",C.fillStyle=a?s.getPattern(C,this,ma(n),Ni.FILL,e):s,C.fillRect(0,0,y,v),C.restore(),n.save(),n.transform(...w),n.scale(1,-1),ox(n,A.canvas,0,0,y,v,0,-1,1,1),(c=this.dependencyTracker)==null||c.recordBBox(e,n,0,y,0,v),n.restore()}this.compose(),(u=this.dependencyTracker)==null||u.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);if(!n){Ke("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e,n)}paintImageXObjectRepeat(e,t,n,s,a){if(!this.contentVisible)return;const o=this.getObject(e,t);if(!o){Ke("Dependent image isn't ready yet");return}const c=o.width,u=o.height,d=[];for(let p=0,y=a.length;p<y;p+=2)d.push({transform:[n,0,0,s,a[p],a[p+1]],x:0,y:0,w:c,h:u});this.paintInlineImageXObjectGroup(e,o,d)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:s}=e,a=this.cachedCanvases.getCanvas("inlineImage",n,s),o=a.context;return o.filter=this.current.transferMaps,o.drawImage(t,0,0),o.filter="none",a.canvas}paintInlineImageXObject(e,t){var d;if(!this.contentVisible)return;const n=t.width,s=t.height,a=this.ctx;this.save(e);const{filter:o}=a;o!=="none"&&o!==""&&(a.filter="none"),a.scale(1/n,-1/s);let c;if(t.bitmap)c=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)c=t;else{const y=this.cachedCanvases.getCanvas("inlineImage",n,s).context;rD(y,t),c=this.applyTransferMapsToCanvas(y)}const u=this._scaleImage(c,ma(a));a.imageSmoothingEnabled=oD(vn(a),t.interpolate),(d=this.dependencyTracker)==null||d.resetBBox(e).recordBBox(e,a,0,n,-s,0).recordDependencies(e,xr.imageXObject).recordOperation(e),ox(a,u.img,0,0,u.paintWidth,u.paintHeight,0,-s,n,s),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){var o,c,u;if(!this.contentVisible)return;const s=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const d=t.width,p=t.height,v=this.cachedCanvases.getCanvas("inlineImage",d,p).context;rD(v,t),a=this.applyTransferMapsToCanvas(v)}(o=this.dependencyTracker)==null||o.resetBBox(e);for(const d of n)s.save(),s.transform(...d.transform),s.scale(1,-1),ox(s,a,d.x,d.y,d.w,d.h,0,-1,1,1),(c=this.dependencyTracker)==null||c.recordBBox(e,s,0,1,-1,0),s.restore();(u=this.dependencyTracker)==null||u.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&((t=this.dependencyTracker)==null||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,xr.fill).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){var n;(n=this.dependencyTracker)==null||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){var s;(s=this.dependencyTracker)==null||s.beginMarkedContent(e),t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;(t=this.dependencyTracker)==null||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){var o,c;const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const a=this.ctx;this.pendingClip?(s||(this.pendingClip===lD?a.clip(t,"evenodd"):a.clip(t)),this.pendingClip=null,(o=this.dependencyTracker)==null||o.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):(c=this.dependencyTracker)==null||c.recordOperation(e),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=vn(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),s=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,s)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:s,d:a}=this.ctx.getTransform();let o,c;if(n===0&&s===0){const u=Math.abs(t),d=Math.abs(a);if(u===d)if(e===0)o=c=1/u;else{const p=u*e;o=c=p<1?1/p:1}else if(e===0)o=1/u,c=1/d;else{const p=u*e,y=d*e;o=p<1?1/p:1,c=y<1?1/y:1}}else{const u=Math.abs(t*a-n*s),d=Math.hypot(t,n),p=Math.hypot(s,a);if(e===0)o=p/u,c=d/u;else{const y=e*u;o=p>y?p/y:1,c=d>y?d/y:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=c}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:s}}=this,[a,o]=this.getScaleForStroking();if(a===o){n.lineWidth=(s||1)*a,n.stroke(e);return}const c=n.getLineDash();t&&n.save(),n.scale(a,o),nA.a=1/a,nA.d=1/o;const u=new Path2D;if(u.addPath(e,nA),c.length>0){const d=Math.max(a,o);n.setLineDash(c.map(p=>p/d)),n.lineDashOffset/=d}n.lineWidth=s||1,n.stroke(u),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};ca=new WeakSet,d1=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},h1=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},f1=function(e,t,n){const s=new Path2D;return s.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),s};let cf=gT;for(const i in Op)cf.prototype[i]!==void 0&&(cf.prototype[Op[i]]=cf.prototype[i]);var Bf,Of,gy,Hf,_x;const Qh=class Qh{constructor(e){P(this,Hf);P(this,Bf);P(this,Of);P(this,gy);N(this,Bf,e),N(this,Of,new DataView(f(this,Bf))),N(this,gy,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let s=0;for(const d of Qh.strings){const p=t.encode(e[d]);n[d]=p,s+=4+p.length}const a=new ArrayBuffer(s),o=new Uint8Array(a),c=new DataView(a);let u=0;for(const d of Qh.strings){const p=n[d],y=p.length;c.setUint32(u,y),o.set(p,u+4),u+=4+y}return vt(u===a.byteLength,"CssFontInfo.write: Buffer overflow"),a}get fontFamily(){return j(this,Hf,_x).call(this,0)}get fontWeight(){return j(this,Hf,_x).call(this,1)}get italicAngle(){return j(this,Hf,_x).call(this,2)}};Bf=new WeakMap,Of=new WeakMap,gy=new WeakMap,Hf=new WeakSet,_x=function(e){vt(e<Qh.strings.length,"Invalid string index");let t=0;for(let s=0;s<e;s++)t+=f(this,Of).getUint32(t)+4;const n=f(this,Of).getUint32(t);return f(this,gy).decode(new Uint8Array(f(this,Bf),t+4,n))},ye(Qh,"strings",["fontFamily","fontWeight","italicAngle"]);let fb=Qh;var hc,Ma,rd,ad,hg;const Zh=class Zh{constructor(e){P(this,ad);P(this,hc);P(this,Ma);P(this,rd);N(this,hc,e),N(this,Ma,new DataView(f(this,hc))),N(this,rd,new TextDecoder)}static write(e){const t=new TextEncoder,n={};let s=0;for(const v of Zh.strings){const w=t.encode(e[v]);n[v]=w,s+=4+w.length}s+=4;let a,o,c=1+s;e.style&&(a=t.encode(e.style.style),o=t.encode(e.style.weight),c+=4+a.length+4+o.length);const u=new ArrayBuffer(c),d=new Uint8Array(u),p=new DataView(u);let y=0;p.setUint8(y++,e.guessFallback?1:0),p.setUint32(y,0),y+=4,s=0;for(const v of Zh.strings){const w=n[v],A=w.length;s+=4+A,p.setUint32(y,A),d.set(w,y+4),y+=4+A}return p.setUint32(y-s-4,s),e.style&&(p.setUint32(y,a.length),d.set(a,y+4),y+=4+a.length,p.setUint32(y,o.length),d.set(o,y+4),y+=4+o.length),vt(y<=u.byteLength,"SubstitionInfo.write: Buffer overflow"),u.transferToFixedLength(y)}get guessFallback(){return f(this,Ma).getUint8(0)!==0}get css(){return j(this,ad,hg).call(this,0)}get loadedName(){return j(this,ad,hg).call(this,1)}get baseFontName(){return j(this,ad,hg).call(this,2)}get src(){return j(this,ad,hg).call(this,3)}get style(){let e=1;e+=4+f(this,Ma).getUint32(e);const t=f(this,Ma).getUint32(e),n=f(this,rd).decode(new Uint8Array(f(this,hc),e+4,t));e+=4+t;const s=f(this,Ma).getUint32(e),a=f(this,rd).decode(new Uint8Array(f(this,hc),e+4,s));return{style:n,weight:a}}};hc=new WeakMap,Ma=new WeakMap,rd=new WeakMap,ad=new WeakSet,hg=function(e){vt(e<Zh.strings.length,"Invalid string index");let t=5;for(let s=0;s<e;s++)t+=f(this,Ma).getUint32(t)+4;const n=f(this,Ma).getUint32(t);return f(this,rd).decode(new Uint8Array(f(this,hc),t+4,n))},ye(Zh,"strings",["css","loadedName","baseFontName","src"]);let pb=Zh;var zf,Gf,Vf,qf,Os,ka,yy,qt,Dn,Yr,Nx,fg;const et=class et{constructor({data:e,extra:t}){P(this,Dn);P(this,ka);P(this,yy);P(this,qt);N(this,ka,e),N(this,yy,new TextDecoder),N(this,qt,new DataView(f(this,ka))),t&&Object.assign(this,t)}get black(){return j(this,Dn,Yr).call(this,0)}get bold(){return j(this,Dn,Yr).call(this,1)}get disableFontFace(){return j(this,Dn,Yr).call(this,2)}get fontExtraProperties(){return j(this,Dn,Yr).call(this,3)}get isInvalidPDFjsFont(){return j(this,Dn,Yr).call(this,4)}get isType3Font(){return j(this,Dn,Yr).call(this,5)}get italic(){return j(this,Dn,Yr).call(this,6)}get missingFile(){return j(this,Dn,Yr).call(this,7)}get remeasure(){return j(this,Dn,Yr).call(this,8)}get vertical(){return j(this,Dn,Yr).call(this,9)}get ascent(){return j(this,Dn,Nx).call(this,0)}get defaultWidth(){return j(this,Dn,Nx).call(this,1)}get descent(){return j(this,Dn,Nx).call(this,2)}get bbox(){let e=f(et,Gf);if(f(this,qt).getUint8(e)===0)return;e+=1;const n=[];for(let s=0;s<4;s++)n.push(f(this,qt).getInt16(e,!0)),e+=2;return n}get fontMatrix(){let e=f(et,Vf);if(f(this,qt).getUint8(e)===0)return;e+=1;const n=[];for(let s=0;s<6;s++)n.push(f(this,qt).getFloat64(e,!0)),e+=8;return n}get defaultVMetrics(){let e=f(et,qf);if(f(this,qt).getUint8(e)===0)return;e+=1;const n=[];for(let s=0;s<3;s++)n.push(f(this,qt).getInt16(e,!0)),e+=2;return n}get fallbackName(){return j(this,Dn,fg).call(this,0)}get loadedName(){return j(this,Dn,fg).call(this,1)}get mimetype(){return j(this,Dn,fg).call(this,2)}get name(){return j(this,Dn,fg).call(this,3)}get data(){let e=f(et,Os);const t=f(this,qt).getUint32(e);e+=4+t;const n=f(this,qt).getUint32(e);e+=4+n;const s=f(this,qt).getUint32(e);e+=4+s;const a=f(this,qt).getUint32(e);if(a!==0)return new Uint8Array(f(this,ka),e+4,a)}clearData(){let e=f(et,Os);const t=f(this,qt).getUint32(e);e+=4+t;const n=f(this,qt).getUint32(e);e+=4+n;const s=f(this,qt).getUint32(e);e+=4+s;const a=f(this,qt).getUint32(e);new Uint8Array(f(this,ka),e+4,a).fill(0),f(this,qt).setUint32(e,0)}get cssFontInfo(){let e=f(et,Os);const t=f(this,qt).getUint32(e);e+=4+t;const n=f(this,qt).getUint32(e);e+=4+n;const s=f(this,qt).getUint32(e);if(s===0)return null;const a=new Uint8Array(s);return a.set(new Uint8Array(f(this,ka),e+4,s)),new fb(a.buffer)}get systemFontInfo(){let e=f(et,Os);const t=f(this,qt).getUint32(e);e+=4+t;const n=f(this,qt).getUint32(e);if(n===0)return null;const s=new Uint8Array(n);return s.set(new Uint8Array(f(this,ka),e+4,n)),new pb(s.buffer)}static write(e){const t=e.systemFontInfo?pb.write(e.systemFontInfo):null,n=e.cssFontInfo?fb.write(e.cssFontInfo):null,s=new TextEncoder,a={};let o=0;for(const C of et.strings)a[C]=s.encode(e[C]),o+=4+a[C].length;const c=f(et,Os)+4+o+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),u=new ArrayBuffer(c),d=new Uint8Array(u),p=new DataView(u);let y=0;const v=et.bools.length;let w=0,A=0;for(let C=0;C<v;C++){const T=e[et.bools[C]];w|=(T===void 0?0:T?2:1)<<A,A+=2,(A===8||C===v-1)&&(p.setUint8(y++,w),w=0,A=0)}vt(y===f(et,zf),"FontInfo.write: Boolean properties offset mismatch");for(const C of et.numbers)p.setFloat64(y,e[C]),y+=8;if(vt(y===f(et,Gf),"FontInfo.write: Number properties offset mismatch"),e.bbox){p.setUint8(y++,4);for(const C of e.bbox)p.setInt16(y,C,!0),y+=2}else p.setUint8(y++,0),y+=8;if(vt(y===f(et,Vf),"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){p.setUint8(y++,6);for(const C of e.fontMatrix)p.setFloat64(y,C,!0),y+=8}else p.setUint8(y++,0),y+=48;if(vt(y===f(et,qf),"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){p.setUint8(y++,1);for(const C of e.defaultVMetrics)p.setInt16(y,C,!0),y+=2}else p.setUint8(y++,0),y+=6;vt(y===f(et,Os),"FontInfo.write: DefaultVMetrics properties offset mismatch"),p.setUint32(f(et,Os),0),y+=4;for(const C of et.strings){const T=a[C],_=T.length;p.setUint32(y,_),d.set(T,y+4),y+=4+_}if(p.setUint32(f(et,Os),y-f(et,Os)-4),!t)p.setUint32(y,0),y+=4;else{const C=t.byteLength;p.setUint32(y,C),vt(y+4+C<=u.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),d.set(new Uint8Array(t),y+4),y+=4+C}if(!n)p.setUint32(y,0),y+=4;else{const C=n.byteLength;p.setUint32(y,C),vt(y+4+C<=u.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),d.set(new Uint8Array(n),y+4),y+=4+C}return e.data===void 0?(p.setUint32(y,0),y+=4):(p.setUint32(y,e.data.length),d.set(e.data,y+4),y+=4+e.data.length),vt(y<=u.byteLength,"FontInfo.write: Buffer overflow"),u.transferToFixedLength(y)}};zf=new WeakMap,Gf=new WeakMap,Vf=new WeakMap,qf=new WeakMap,Os=new WeakMap,ka=new WeakMap,yy=new WeakMap,qt=new WeakMap,Dn=new WeakSet,Yr=function(e){vt(e<et.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=e*2%8,s=f(this,qt).getUint8(t)>>n&3;return s===0?void 0:s===2},Nx=function(e){return vt(e<et.numbers.length,"Invalid number index"),f(this,qt).getFloat64(f(et,zf)+e*8)},fg=function(e){vt(e<et.strings.length,"Invalid string index");let t=f(et,Os)+4;for(let a=0;a<e;a++)t+=f(this,qt).getUint32(t)+4;const n=f(this,qt).getUint32(t),s=new Uint8Array(n);return s.set(new Uint8Array(f(this,ka),t+4,n)),f(this,yy).decode(s)},ye(et,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),ye(et,"numbers",["ascent","defaultWidth","descent"]),ye(et,"strings",["fallbackName","loadedName","mimetype","name"]),P(et,zf,Math.ceil(et.bools.length*2/8)),P(et,Gf,f(et,zf)+et.numbers.length*8),P(et,Vf,f(et,Gf)+1+8),P(et,qf,f(et,Vf)+1+48),P(et,Os,f(et,qf)+1+6);let p1=et;var vy,xy;class Ir{static get workerPort(){return f(this,vy)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");N(this,vy,e)}static get workerSrc(){return f(this,xy)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");N(this,xy,e)}}vy=new WeakMap,xy=new WeakMap,P(Ir,vy,null),P(Ir,xy,"");var $f,by;class f7{constructor({parsedData:e,rawData:t}){P(this,$f);P(this,by);N(this,$f,e),N(this,by,t)}getRaw(){return f(this,by)}get(e){return f(this,$f).get(e)??null}[Symbol.iterator](){return f(this,$f).entries()}}$f=new WeakMap,by=new WeakMap;const qh=Symbol("INTERNAL");var wy,Sy,Ey,Yf;class p7{constructor(e,{name:t,intent:n,usage:s,rbGroups:a}){P(this,wy,!1);P(this,Sy,!1);P(this,Ey,!1);P(this,Yf,!0);N(this,wy,!!(e&er.DISPLAY)),N(this,Sy,!!(e&er.PRINT)),this.name=t,this.intent=n,this.usage=s,this.rbGroups=a}get visible(){if(f(this,Ey))return f(this,Yf);if(!f(this,Yf))return!1;const{print:e,view:t}=this.usage;return f(this,wy)?(t==null?void 0:t.viewState)!=="OFF":f(this,Sy)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==qh&&tn("Internal method `_setVisible` called."),N(this,Ey,n),N(this,Yf,t)}}wy=new WeakMap,Sy=new WeakMap,Ey=new WeakMap,Yf=new WeakMap;var fc,$t,Wf,Xf,Ay,m1;class m7{constructor(e,t=er.DISPLAY){P(this,Ay);P(this,fc,null);P(this,$t,new Map);P(this,Wf,null);P(this,Xf,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,N(this,Xf,e.order);for(const n of e.groups)f(this,$t).set(n.id,new p7(t,n));if(e.baseState==="OFF")for(const n of f(this,$t).values())n._setVisible(qh,!1);for(const n of e.on)f(this,$t).get(n)._setVisible(qh,!0);for(const n of e.off)f(this,$t).get(n)._setVisible(qh,!1);N(this,Wf,this.getHash())}}isVisible(e){if(f(this,$t).size===0)return!0;if(!e)return uw("Optional content group not defined."),!0;if(e.type==="OCG")return f(this,$t).has(e.id)?f(this,$t).get(e.id).visible:(Ke(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return j(this,Ay,m1).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!f(this,$t).has(t))return Ke(`Optional content group not found: ${t}`),!0;if(f(this,$t).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!f(this,$t).has(t))return Ke(`Optional content group not found: ${t}`),!0;if(!f(this,$t).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!f(this,$t).has(t))return Ke(`Optional content group not found: ${t}`),!0;if(!f(this,$t).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!f(this,$t).has(t))return Ke(`Optional content group not found: ${t}`),!0;if(f(this,$t).get(t).visible)return!1}return!0}return Ke(`Unknown optional content policy ${e.policy}.`),!0}return Ke(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var a;const s=f(this,$t).get(e);if(!s){Ke(`Optional content group not found: ${e}`);return}if(n&&t&&s.rbGroups.length)for(const o of s.rbGroups)for(const c of o)c!==e&&((a=f(this,$t).get(c))==null||a._setVisible(qh,!1,!0));s._setVisible(qh,!!t,!0),N(this,fc,null)}setOCGState({state:e,preserveRB:t}){let n;for(const s of e){switch(s){case"ON":case"OFF":case"Toggle":n=s;continue}const a=f(this,$t).get(s);if(a)switch(n){case"ON":this.setVisibility(s,!0,t);break;case"OFF":this.setVisibility(s,!1,t);break;case"Toggle":this.setVisibility(s,!a.visible,t);break}}N(this,fc,null)}get hasInitialVisibility(){return f(this,Wf)===null||this.getHash()===f(this,Wf)}getOrder(){return f(this,$t).size?f(this,Xf)?f(this,Xf).slice():[...f(this,$t).keys()]:null}getGroup(e){return f(this,$t).get(e)||null}getHash(){if(f(this,fc)!==null)return f(this,fc);const e=new x5;for(const[t,n]of f(this,$t))e.update(`${t}:${n.visible}`);return N(this,fc,e.hexdigest())}[Symbol.iterator](){return f(this,$t).entries()}}fc=new WeakMap,$t=new WeakMap,Wf=new WeakMap,Xf=new WeakMap,Ay=new WeakSet,m1=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let s=1;s<t;s++){const a=e[s];let o;if(Array.isArray(a))o=j(this,Ay,m1).call(this,a);else if(f(this,$t).has(a))o=f(this,$t).get(a).visible;else return Ke(`Optional content group not found: ${a}`),!0;switch(n){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return n==="And"};class g7{constructor(e,{disableRange:t=!1,disableStream:n=!1}){vt(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:s,initialData:a,progressiveDone:o,contentDispositionFilename:c}=e;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=c,(a==null?void 0:a.length)>0){const u=a instanceof Uint8Array&&a.byteLength===a.buffer.byteLength?a.buffer:new Uint8Array(a).buffer;this._queuedChunks.push(u)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=s,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((u,d)=>{this._onReceiveData({begin:u,chunk:d})}),e.addProgressListener((u,d)=>{this._onProgress({loaded:u,total:d})}),e.addProgressiveReadListener(u=>{this._onReceiveData({chunk:u})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const s=this._rangeReaders.some(function(a){return a._begin!==e?!1:(a._enqueue(n),!0)});vt(s,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,s,a;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(a=(s=this._fullRequestReader)==null?void 0:s.onProgress)==null||a.call(s,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){vt(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new y7(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new v7(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class y7{constructor(e,t,n=!1,s=null){this._stream=e,this._done=n||!1,this._filename=hw(s)?s:null,this._queuedChunks=t||[],this._loaded=0;for(const a of this._queuedChunks)this._loaded+=a.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class v7{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function x7(i){let e=!0,t=n("filename\\*","i").exec(i);if(t){t=t[1];let p=c(t);return p=unescape(p),p=u(p),p=d(p),a(p)}if(t=o(i),t){const p=d(t);return a(p)}if(t=n("filename","i").exec(i),t){t=t[1];let p=c(t);return p=d(p),a(p)}function n(p,y){return new RegExp("(?:^|;)\\s*"+p+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',y)}function s(p,y){if(p){if(!/^[\x00-\xFF]+$/.test(y))return y;try{const v=new TextDecoder(p,{fatal:!0}),w=R0(y);y=v.decode(w),e=!1}catch{}}return y}function a(p){return e&&/[\x80-\xff]/.test(p)&&(p=s("utf-8",p),e&&(p=s("iso-8859-1",p))),p}function o(p){const y=[];let v;const w=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(v=w.exec(p))!==null;){let[,C,T,_]=v;if(C=parseInt(C,10),C in y){if(C===0)break;continue}y[C]=[T,_]}const A=[];for(let C=0;C<y.length&&C in y;++C){let[T,_]=y[C];_=c(_),T&&(_=unescape(_),C===0&&(_=u(_))),A.push(_)}return A.join("")}function c(p){if(p.startsWith('"')){const y=p.slice(1).split('\\"');for(let v=0;v<y.length;++v){const w=y[v].indexOf('"');w!==-1&&(y[v]=y[v].slice(0,w),y.length=v+1),y[v]=y[v].replaceAll(/\\(.)/g,"$1")}p=y.join('"')}return p}function u(p){const y=p.indexOf("'");if(y===-1)return p;const v=p.slice(0,y),A=p.slice(y+1).replace(/^[^']*'/,"");return s(v,A)}function d(p){return!p.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(p)?p:p.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(y,v,w,A){if(w==="q"||w==="Q")return A=A.replaceAll("_"," "),A=A.replaceAll(/=([0-9a-fA-F]{2})/g,function(C,T){return String.fromCharCode(parseInt(T,16))}),s(v,A);try{A=atob(A)}catch{}return s(v,A)})}return""}function D5(i,e){const t=new Headers;if(!i||!e||typeof e!="object")return t;for(const n in e){const s=e[n];s!==void 0&&t.append(n,s)}return t}function fw(i){var e;return((e=URL.parse(i))==null?void 0:e.origin)??null}function I5({responseHeaders:i,isHttp:e,rangeChunkSize:t,disableRange:n}){const s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(i.get("Content-Length"),10);return!Number.isInteger(a)||(s.suggestedLength=a,a<=2*t)||n||!e||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(s.allowRangeRequests=!0),s}function P5(i){const e=i.get("Content-Disposition");if(e){let t=x7(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(hw(t))return t}return null}function I0(i,e){return new Dg(`Unexpected server response (${i}) while retrieving PDF "${e}".`,i,i===404||i===0&&e.startsWith("file:"))}function L5(i){return i===200||i===206}function F5(i,e,t){return{method:"GET",headers:i,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function U5(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(Ke(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class b7{constructor(e){ye(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=D5(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return vt(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new w7(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new S7(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class w7{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),s=t.url;fetch(s,F5(n,this._withCredentials,this._abortController)).then(a=>{if(e._responseOrigin=fw(a.url),!L5(a.status))throw I0(a.status,s);this._reader=a.body.getReader(),this._headersCapability.resolve();const o=a.headers,{allowRangeRequests:c,suggestedLength:u}=I5({responseHeaders:o,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=u||this._contentLength,this._filename=P5(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new ul("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:U5(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class S7{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const s=e.source;this._withCredentials=s.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!s.disableStream,this._abortController=new AbortController;const a=new Headers(e.headers);a.append("Range",`bytes=${t}-${n-1}`);const o=s.url;fetch(o,F5(a,this._withCredentials,this._abortController)).then(c=>{const u=fw(c.url);if(u!==e._responseOrigin)throw new Error(`Expected range response-origin "${u}" to match "${e._responseOrigin}".`);if(!L5(c.status))throw I0(c.status,o);this._readCapability.resolve(),this._reader=c.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:U5(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const iA=200,sA=206;function E7(i){const e=i.response;return typeof e!="string"?e:R0(e).buffer}class A7{constructor({url:e,httpHeaders:t,withCredentials:n}){ye(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=D5(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,s=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[a,o]of this.headers)t.setRequestHeader(a,o);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),s.expectedStatus=sA):s.expectedStatus=iA,t.responseType="arraybuffer",vt(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),s.onHeadersReceived=e.onHeadersReceived,s.onDone=e.onDone,s.onError=e.onError,s.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var s;const n=this.pendingRequests[e];n&&((s=n.onProgress)==null||s.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const s=n.xhr;if(s.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),s.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],s.status===0&&this.isHttp){n.onError(s.status);return}const a=s.status||iA;if(!(a===iA&&n.expectedStatus===sA)&&a!==n.expectedStatus){n.onError(s.status);return}const c=E7(s);if(a===sA){const u=s.getResponseHeader("Content-Range"),d=/bytes (\d+)-(\d+)\/(\d+)/.exec(u);d?n.onDone({begin:parseInt(d[1],10),chunk:c}):(Ke('Missing or invalid "Content-Range" header.'),n.onError(0))}else c?n.onDone({begin:0,chunk:c}):n.onError(s.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class C7{constructor(e){this._source=e,this._manager=new A7(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return vt(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new T7(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new _7(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class T7{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=fw(t.responseURL);const n=t.getAllResponseHeaders(),s=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(c=>{const[u,...d]=c.split(": ");return[u,d.join(": ")]}):[]),{allowRangeRequests:a,suggestedLength:o}=I5({responseHeaders:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});a&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=P5(s),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=I0(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class _7{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=fw((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=I0(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const N7=/^[a-z][a-z0-9\-+.]+:/i;function R7(i){if(N7.test(i))return new URL(i);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(i))}class M7{constructor(e){this.source=e,this.url=R7(e.url),vt(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return vt(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new k7(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new D7(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class k7{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(s=>{this._contentLength=s.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},s=>{s.code==="ENOENT"&&(s=I0(0,this._url.href)),this._storedError=s,this._headersCapability.reject(s)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new ul("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class D7{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const s=e.source;this._isStreamingSupported=!s.disableStream;const a=process.getBuiltinModule("fs");this._setReadableStream(a.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Xm=Symbol("INITIAL_DATA");var Hs,Cy,g1;class j5{constructor(){P(this,Cy);P(this,Hs,Object.create(null))}get(e,t=null){if(t){const s=j(this,Cy,g1).call(this,e);return s.promise.then(()=>t(s.data)),null}const n=f(this,Hs)[e];if(!n||n.data===Xm)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=f(this,Hs)[e];return!!t&&t.data!==Xm}delete(e){const t=f(this,Hs)[e];return!t||t.data===Xm?!1:(delete f(this,Hs)[e],!0)}resolve(e,t=null){const n=j(this,Cy,g1).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in f(this,Hs)){const{data:n}=f(this,Hs)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}N(this,Hs,Object.create(null))}*[Symbol.iterator](){for(const e in f(this,Hs)){const{data:t}=f(this,Hs)[e];t!==Xm&&(yield[e,t])}}}Hs=new WeakMap,Cy=new WeakSet,g1=function(e){var t;return(t=f(this,Hs))[e]||(t[e]={...Promise.withResolvers(),data:Xm})};const I7=1e5,cD=30;var ED,pc,xs,Ty,_y,od,Oo,Ny,Ry,ld,Jf,Kf,mc,Qf,My,Zf,cd,ky,Dy,kn,ep,ud,Iy,gc,tp,fl,B5,O5,y1,ir,Rx,v1,H5,z5;let Fg=(kn=class{constructor({textContentSource:e,container:t,viewport:n}){P(this,fl);P(this,pc,Promise.withResolvers());P(this,xs,null);P(this,Ty,!1);P(this,_y,!!((ED=globalThis.FontInspector)!=null&&ED.enabled));P(this,od,null);P(this,Oo,null);P(this,Ny,0);P(this,Ry,0);P(this,ld,null);P(this,Jf,null);P(this,Kf,0);P(this,mc,0);P(this,Qf,Object.create(null));P(this,My,[]);P(this,Zf,null);P(this,cd,[]);P(this,ky,new WeakMap);P(this,Dy,null);var u;if(e instanceof ReadableStream)N(this,Zf,e);else if(typeof e=="object")N(this,Zf,new ReadableStream({start(d){d.enqueue(e),d.close()}}));else throw new Error('No "textContentSource" parameter specified.');N(this,xs,N(this,Jf,t)),N(this,mc,n.scale*la.pixelRatio),N(this,Kf,n.rotation),N(this,Oo,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:a,pageX:o,pageY:c}=n.rawDims;N(this,Dy,[1,0,0,-1,-o,c+a]),N(this,Ry,s),N(this,Ny,a),j(u=kn,ir,H5).call(u),Wc(t,n),f(this,pc).promise.finally(()=>{f(kn,tp).delete(this),N(this,Oo,null),N(this,Qf,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=mi.platform;return nt(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{f(this,ld).read().then(({value:t,done:n})=>{if(n){f(this,pc).resolve();return}f(this,od)??N(this,od,t.lang),Object.assign(f(this,Qf),t.styles),j(this,fl,B5).call(this,t.items),e()},f(this,pc).reject)};return N(this,ld,f(this,Zf).getReader()),f(kn,tp).add(this),e(),f(this,pc).promise}update({viewport:e,onBefore:t=null}){var a;const n=e.scale*la.pixelRatio,s=e.rotation;if(s!==f(this,Kf)&&(t==null||t(),N(this,Kf,s),Wc(f(this,Jf),{rotation:s})),n!==f(this,mc)){t==null||t(),N(this,mc,n);const o={div:null,properties:null,ctx:j(a=kn,ir,Rx).call(a,f(this,od))};for(const c of f(this,cd))o.properties=f(this,ky).get(c),o.div=c,j(this,fl,y1).call(this,o)}}cancel(){var t;const e=new ul("TextLayer task cancelled.");(t=f(this,ld))==null||t.cancel(e).catch(()=>{}),N(this,ld,null),f(this,pc).reject(e)}get textDivs(){return f(this,cd)}get textContentItemsStr(){return f(this,My)}static cleanup(){if(!(f(this,tp).size>0)){f(this,ep).clear();for(const{canvas:e}of f(this,ud).values())e.remove();f(this,ud).clear()}}},pc=new WeakMap,xs=new WeakMap,Ty=new WeakMap,_y=new WeakMap,od=new WeakMap,Oo=new WeakMap,Ny=new WeakMap,Ry=new WeakMap,ld=new WeakMap,Jf=new WeakMap,Kf=new WeakMap,mc=new WeakMap,Qf=new WeakMap,My=new WeakMap,Zf=new WeakMap,cd=new WeakMap,ky=new WeakMap,Dy=new WeakMap,ep=new WeakMap,ud=new WeakMap,Iy=new WeakMap,gc=new WeakMap,tp=new WeakMap,fl=new WeakSet,B5=function(e){var s,a;if(f(this,Ty))return;(a=f(this,Oo)).ctx??(a.ctx=j(s=kn,ir,Rx).call(s,f(this,od)));const t=f(this,cd),n=f(this,My);for(const o of e){if(t.length>I7){Ke("Ignoring additional textDivs for performance reasons."),N(this,Ty,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const c=f(this,xs);N(this,xs,document.createElement("span")),f(this,xs).classList.add("markedContent"),o.id&&f(this,xs).setAttribute("id",`${o.id}`),c.append(f(this,xs))}else o.type==="endMarkedContent"&&N(this,xs,f(this,xs).parentNode);continue}n.push(o.str),j(this,fl,O5).call(this,o)}},O5=function(e){var C;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};f(this,cd).push(t);const s=Me.transform(f(this,Dy),e.transform);let a=Math.atan2(s[1],s[0]);const o=f(this,Qf)[e.fontName];o.vertical&&(a+=Math.PI/2);let c=f(this,_y)&&o.fontSubstitution||o.fontFamily;c=kn.fontFamilyMap.get(c)||c;const u=Math.hypot(s[2],s[3]),d=u*j(C=kn,ir,z5).call(C,c,o,f(this,od));let p,y;a===0?(p=s[4],y=s[5]-d):(p=s[4]+d*Math.sin(a),y=s[5]-d*Math.cos(a));const v="calc(var(--total-scale-factor) *",w=t.style;f(this,xs)===f(this,Jf)?(w.left=`${(100*p/f(this,Ry)).toFixed(2)}%`,w.top=`${(100*y/f(this,Ny)).toFixed(2)}%`):(w.left=`${v}${p.toFixed(2)}px)`,w.top=`${v}${y.toFixed(2)}px)`),w.fontSize=`${v}${(f(kn,gc)*u).toFixed(2)}px)`,w.fontFamily=c,n.fontSize=u,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,f(this,_y)&&(t.dataset.fontName=o.fontSubstitutionLoadedName||e.fontName),a!==0&&(n.angle=a*(180/Math.PI));let A=!1;if(e.str.length>1)A=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const T=Math.abs(e.transform[0]),_=Math.abs(e.transform[3]);T!==_&&Math.max(T,_)/Math.min(T,_)>1.5&&(A=!0)}if(A&&(n.canvasWidth=o.vertical?e.height:e.width),f(this,ky).set(t,n),f(this,Oo).div=t,f(this,Oo).properties=n,j(this,fl,y1).call(this,f(this,Oo)),n.hasText&&f(this,xs).append(t),n.hasEOL){const T=document.createElement("br");T.setAttribute("role","presentation"),f(this,xs).append(T)}},y1=function(e){var c;const{div:t,properties:n,ctx:s}=e,{style:a}=t;let o="";if(f(kn,gc)>1&&(o=`scale(${1/f(kn,gc)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:u}=a,{canvasWidth:d,fontSize:p}=n;j(c=kn,ir,v1).call(c,s,p*f(this,mc),u);const{width:y}=s.measureText(t.textContent);y>0&&(o=`scaleX(${d*f(this,mc)/y}) ${o}`)}n.angle!==0&&(o=`rotate(${n.angle}deg) ${o}`),o.length>0&&(a.transform=o)},ir=new WeakSet,Rx=function(e=null){let t=f(this,ud).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),f(this,ud).set(e,t),f(this,Iy).set(t,{size:0,family:""})}return t},v1=function(e,t,n){const s=f(this,Iy).get(e);t===s.size&&n===s.family||(e.font=`${t}px ${n}`,s.size=t,s.family=n)},H5=function(){if(f(this,gc)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),N(this,gc,e.getBoundingClientRect().height),e.remove()},z5=function(e,t,n){const s=f(this,ep).get(e);if(s)return s;const a=j(this,ir,Rx).call(this,n);a.canvas.width=a.canvas.height=cD,j(this,ir,v1).call(this,a,cD,e);const o=a.measureText(""),c=o.fontBoundingBoxAscent,u=Math.abs(o.fontBoundingBoxDescent);a.canvas.width=a.canvas.height=0;let d=.8;return c?d=c/(c+u):(mi.platform.isFirefox&&Ke("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?d=t.ascent:t.descent&&(d=1+t.descent)),f(this,ep).set(e,d),d},P(kn,ir),P(kn,ep,new Map),P(kn,ud,new Map),P(kn,Iy,new WeakMap),P(kn,gc,null),P(kn,tp,new Set),kn);const P7=100;function aT(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const e=new x1,{docId:t}=e,n=i.url?z9(i.url):null,s=i.data?G9(i.data):null,a=i.httpHeaders||null,o=i.withCredentials===!0,c=i.password??null,u=i.range instanceof oT?i.range:null,d=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:2**16;let p=i.worker instanceof Hp?i.worker:null;const y=i.verbosity,v=typeof i.docBaseUrl=="string"&&!k0(i.docBaseUrl)?i.docBaseUrl:null,w=ix(i.cMapUrl),A=i.cMapPacked!==!1,C=i.CMapReaderFactory||(es?J9:Xk),T=ix(i.iccUrl),_=ix(i.standardFontDataUrl),D=i.StandardFontDataFactory||(es?K9:Jk),R=ix(i.wasmUrl),L=i.WasmFactory||(es?Q9:Kk),F=i.stopAtErrors!==!0,U=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,M=i.isEvalSupported!==!1,O=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!es,z=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!es&&(mi.platform.isFirefox||!globalThis.chrome),J=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,G=typeof i.disableFontFace=="boolean"?i.disableFontFace:es,X=i.fontExtraProperties===!0,ie=i.enableXfa===!0,$=i.ownerDocument||globalThis.document,ee=i.disableRange===!0,H=i.disableStream===!0,V=i.disableAutoFetch===!0,Q=i.pdfBug===!0,ce=i.CanvasFactory||(es?X9:$9),ve=i.FilterFactory||(es?W9:Y9),q=i.enableHWA===!0,Z=i.useWasm!==!1,ue=u?u.length:i.length??NaN,me=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!es&&!G,be=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(C===Xk&&D===Jk&&L===Kk&&w&&_&&R&&tg(w,document.baseURI)&&tg(_,document.baseURI)&&tg(R,document.baseURI)),_e=null;E9(y);const Te={canvasFactory:new ce({ownerDocument:$,enableHWA:q}),filterFactory:new ve({docId:t,ownerDocument:$}),cMapReaderFactory:be?null:new C({baseUrl:w,isCompressed:A}),standardFontDataFactory:be?null:new D({baseUrl:_}),wasmFactory:be?null:new L({baseUrl:R})};p||(p=Hp.create({verbosity:y,port:Ir.workerPort}),e._worker=p);const mt={docId:t,apiVersion:"5.4.296",data:s,password:c,disableAutoFetch:V,rangeChunkSize:d,length:ue,docBaseUrl:v,enableXfa:ie,evaluatorOptions:{maxImageSize:U,disableFontFace:G,ignoreErrors:F,isEvalSupported:M,isOffscreenCanvasSupported:O,isImageDecoderSupported:z,canvasMaxAreaInBytes:J,fontExtraProperties:X,useSystemFonts:me,useWasm:Z,useWorkerFetch:be,cMapUrl:w,iccUrl:T,standardFontDataUrl:_,wasmUrl:R}},rt={ownerDocument:$,pdfBug:Q,styleElement:_e,loadingParams:{disableAutoFetch:V,enableXfa:ie}};return p.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const lt=p.messageHandler.sendWithPromise("GetDocRequest",mt,s?[s.buffer]:null);let En;if(u)En=new g7(u,{disableRange:ee,disableStream:H});else if(!s){if(!n)throw new Error("getDocument - no `url` parameter provided.");const wt=tg(n)?b7:es?M7:C7;En=new wt({url:n,length:ue,httpHeaders:a,withCredentials:o,rangeChunkSize:d,disableRange:ee,disableStream:H})}return lt.then(wt=>{if(e.destroyed)throw new Error("Loading aborted");if(p.destroyed)throw new Error("Worker was destroyed");const Ye=new og(t,wt,p.port),at=new U7(Ye,e,En,rt,Te,q);e._transport=at,Ye.send("Ready",null)})}).catch(e._capability.reject),e}var Mb;const kb=class kb{constructor(){ye(this,"_capability",Promise.withResolvers());ye(this,"_transport",null);ye(this,"_worker",null);ye(this,"docId",`d${Kn(kb,Mb)._++}`);ye(this,"destroyed",!1);ye(this,"onPassword",null);ye(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e,t,n,s;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(a){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,a}this._transport=null,(s=this._worker)==null||s.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Mb=new WeakMap,P(kb,Mb,0);let x1=kb;var dd,Py,Ly,Fy,Uy,AD;let oT=(AD=class{constructor(e,t,n=!1,s=null){P(this,dd,Promise.withResolvers());P(this,Py,[]);P(this,Ly,[]);P(this,Fy,[]);P(this,Uy,[]);this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=s}addRangeListener(e){f(this,Uy).push(e)}addProgressListener(e){f(this,Fy).push(e)}addProgressiveReadListener(e){f(this,Ly).push(e)}addProgressiveDoneListener(e){f(this,Py).push(e)}onDataRange(e,t){for(const n of f(this,Uy))n(e,t)}onDataProgress(e,t){f(this,dd).promise.then(()=>{for(const n of f(this,Fy))n(e,t)})}onDataProgressiveRead(e){f(this,dd).promise.then(()=>{for(const t of f(this,Ly))t(e)})}onDataProgressiveDone(){f(this,dd).promise.then(()=>{for(const e of f(this,Py))e()})}transportReady(){f(this,dd).resolve()}requestDataRange(e,t){tn("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}},dd=new WeakMap,Py=new WeakMap,Ly=new WeakMap,Fy=new WeakMap,Uy=new WeakMap,AD);class L7{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return nt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var Ho,hd,pg;class F7{constructor(e,t,n,s=!1){P(this,hd);P(this,Ho,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=s?new zk:null,this._pdfBug=s,this.commonObjs=n.commonObjs,this.objs=new j5,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:s=0,dontFlip:a=!1}={}){return new M0({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:s,dontFlip:a})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return nt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,canvas:t=e.canvas,viewport:n,intent:s="display",annotationMode:a=za.ENABLE,transform:o=null,background:c=null,optionalContentConfigPromise:u=null,annotationCanvasMap:d=null,pageColors:p=null,printAnnotationStorage:y=null,isEditing:v=!1,recordOperations:w=!1,operationsFilter:A=null}){var z,J,G;(z=this._stats)==null||z.time("Overall");const C=this._transport.getRenderingIntent(s,a,y,v),{renderingIntent:T,cacheKey:_}=C;N(this,Ho,!1),u||(u=this._transport.getOptionalContentConfig(T));let D=this._intentStates.get(_);D||(D=Object.create(null),this._intentStates.set(_,D)),D.streamReaderCancelTimeout&&(clearTimeout(D.streamReaderCancelTimeout),D.streamReaderCancelTimeout=null);const R=!!(T&er.PRINT);D.displayReadyCapability||(D.displayReadyCapability=Promise.withResolvers(),D.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(J=this._stats)==null||J.time("Page Request"),this._pumpOperatorList(C));const L=!!(this._pdfBug&&((G=globalThis.StepperManager)!=null&&G.enabled)),F=!this.recordedBBoxes&&(w||L),U=X=>{var ie,$;if(D.renderTasks.delete(M),F){const ee=(ie=M.gfx)==null?void 0:ie.dependencyTracker.take();ee&&(M.stepper&&M.stepper.setOperatorBBoxes(ee,M.gfx.dependencyTracker.takeDebugMetadata()),w&&(this.recordedBBoxes=ee))}R&&N(this,Ho,!0),j(this,hd,pg).call(this),X?(M.capability.reject(X),this._abortOperatorList({intentState:D,reason:X instanceof Error?X:new Error(X)})):M.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),($=globalThis.Stats)!=null&&$.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},M=new b1({callback:U,params:{canvas:t,canvasContext:e,dependencyTracker:F?new e7(t,D.operatorList.length,L):null,viewport:n,transform:o,background:c},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:d,operatorList:D.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!R,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:A});(D.renderTasks||(D.renderTasks=new Set)).add(M);const O=M.task;return Promise.all([D.displayReadyCapability.promise,u]).then(([X,ie])=>{var $;if(this.destroyed){U();return}if(($=this._stats)==null||$.time("Rendering"),!(ie.renderingIntent&T))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");M.initializeGraphics({transparency:X,optionalContentConfig:ie}),M.operatorListChanged()}).catch(U),O}getOperatorList({intent:e="display",annotationMode:t=za.ENABLE,printAnnotationStorage:n=null,isEditing:s=!1}={}){var d;function a(){c.operatorList.lastChunk&&(c.opListReadCapability.resolve(c.operatorList),c.renderTasks.delete(u))}const o=this._transport.getRenderingIntent(e,t,n,s,!0);let c=this._intentStates.get(o.cacheKey);c||(c=Object.create(null),this._intentStates.set(o.cacheKey,c));let u;return c.opListReadCapability||(u=Object.create(null),u.operatorListChanged=a,c.opListReadCapability=Promise.withResolvers(),(c.renderTasks||(c.renderTasks=new Set)).add(u),c.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(d=this._stats)==null||d.time("Page Request"),this._pumpOperatorList(o)),c.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(s){return s.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>Ig.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,s){function a(){o.read().then(function({value:u,done:d}){if(d){n(c);return}c.lang??(c.lang=u.lang),Object.assign(c.styles,u.styles),c.items.push(...u.items),a()},s)}const o=t.getReader(),c={items:[],styles:Object.create(null),lang:null};a()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),N(this,Ho,!1),Promise.all(e)}cleanup(e=!1){N(this,Ho,!0);const t=j(this,hd,pg).call(this);return e&&t&&this._stats&&(this._stats=new zk),t}_startRenderPage(e,t){var s,a;const n=this._intentStates.get(t);n&&((s=this._stats)==null||s.timeEnd("Page Request"),(a=n.displayReadyCapability)==null||a.resolve(e))}_renderPageChunk(e,t){for(let n=0,s=e.length;n<s;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&j(this,hd,pg).call(this)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:s}){const{map:a,transfer:o}=n,u=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:a,modifiedIds:s},o).getReader(),d=this._intentStates.get(t);d.streamReader=u;const p=()=>{u.read().then(({value:y,done:v})=>{if(v){d.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(y,d),p())},y=>{if(d.streamReader=null,!this._transport.destroyed){if(d.operatorList){d.operatorList.lastChunk=!0;for(const v of d.renderTasks)v.operatorListChanged();j(this,hd,pg).call(this)}if(d.displayReadyCapability)d.displayReadyCapability.reject(y);else if(d.opListReadCapability)d.opListReadCapability.reject(y);else throw y}})};p()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof dw){let s=P7;t.extraDelay>0&&t.extraDelay<1e3&&(s+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},s);return}}if(e.streamReader.cancel(new ul(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[s,a]of this._intentStates)if(a===e){this._intentStates.delete(s);break}this.cleanup()}}}get stats(){return this._stats}}Ho=new WeakMap,hd=new WeakSet,pg=function(){if(!f(this,Ho)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),N(this,Ho,!1),!0};var yc,ea,zo,fd,Db,pd,md,ts,Mx,G5,V5,mg,np,kx;const fn=class fn{constructor({name:e=null,port:t=null,verbosity:n=A9()}={}){P(this,ts);P(this,yc,Promise.withResolvers());P(this,ea,null);P(this,zo,null);P(this,fd,null);if(this.name=e,this.destroyed=!1,this.verbosity=n,t){if(f(fn,md).has(t))throw new Error("Cannot use more than one PDFWorker per port.");f(fn,md).set(t,this),j(this,ts,G5).call(this,t)}else j(this,ts,V5).call(this)}get promise(){return f(this,yc).promise}get port(){return f(this,zo)}get messageHandler(){return f(this,ea)}destroy(){var e,t;this.destroyed=!0,(e=f(this,fd))==null||e.terminate(),N(this,fd,null),f(fn,md).delete(f(this,zo)),N(this,zo,null),(t=f(this,ea))==null||t.destroy(),N(this,ea,null)}static create(e){const t=f(this,md).get(e==null?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new fn(e)}static get workerSrc(){if(Ir.workerSrc)return Ir.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return nt(this,"_setupFakeWorkerGlobal",(async()=>f(this,np,kx)?f(this,np,kx):(await import(this.workerSrc)).WorkerMessageHandler)())}};yc=new WeakMap,ea=new WeakMap,zo=new WeakMap,fd=new WeakMap,Db=new WeakMap,pd=new WeakMap,md=new WeakMap,ts=new WeakSet,Mx=function(){f(this,yc).resolve(),f(this,ea).send("configure",{verbosity:this.verbosity})},G5=function(e){N(this,zo,e),N(this,ea,new og("main","worker",e)),f(this,ea).on("ready",()=>{}),j(this,ts,Mx).call(this)},V5=function(){if(f(fn,pd)||f(fn,np,kx)){j(this,ts,mg).call(this);return}let{workerSrc:e}=fn;try{fn._isSameOrigin(window.location,e)||(e=fn._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new og("main","worker",t),s=()=>{a.abort(),n.destroy(),t.terminate(),this.destroyed?f(this,yc).reject(new Error("Worker was destroyed")):j(this,ts,mg).call(this)},a=new AbortController;t.addEventListener("error",()=>{f(this,fd)||s()},{signal:a.signal}),n.on("test",c=>{if(a.abort(),this.destroyed||!c){s();return}N(this,ea,n),N(this,zo,t),N(this,fd,t),j(this,ts,Mx).call(this)}),n.on("ready",c=>{if(a.abort(),this.destroyed){s();return}try{o()}catch{j(this,ts,mg).call(this)}});const o=()=>{const c=new Uint8Array;n.send("test",c,[c.buffer])};o();return}catch{uw("The worker has been disabled.")}j(this,ts,mg).call(this)},mg=function(){f(fn,pd)||(Ke("Setting up fake worker."),N(fn,pd,!0)),fn._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){f(this,yc).reject(new Error("Worker was destroyed"));return}const t=new q9;N(this,zo,t);const n=`fake${Kn(fn,Db)._++}`,s=new og(n+"_worker",n,t);e.setup(s,t),N(this,ea,new og(n,n+"_worker",t)),j(this,ts,Mx).call(this)}).catch(e=>{f(this,yc).reject(new Error(`Setting up fake worker failed: "${e.message}".`))})},np=new WeakSet,kx=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},P(fn,np),P(fn,Db,0),P(fn,pd,!1),P(fn,md,new WeakMap),es&&(N(fn,pd,!0),Ir.workerSrc||(Ir.workerSrc="./pdf.worker.mjs")),fn._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(!(n!=null&&n.origin)||n.origin==="null")return!1;const s=new URL(t,n);return n.origin===s.origin},fn._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},fn.fromPort=e=>{if(I9("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return fn.create(e)};let Hp=fn;var Go,Da,ip,sp,Vo,gd,gg;class U7{constructor(e,t,n,s,a,o){P(this,gd);P(this,Go,new Map);P(this,Da,new Map);P(this,ip,new Map);P(this,sp,new Map);P(this,Vo,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new j5,this.fontLoader=new O9({ownerDocument:s.ownerDocument,styleElement:s.styleElement}),this.loadingParams=s.loadingParams,this._params=s,this.canvasFactory=a.canvasFactory,this.filterFactory=a.filterFactory,this.cMapReaderFactory=a.cMapReaderFactory,this.standardFontDataFactory=a.standardFontDataFactory,this.wasmFactory=a.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=o,this.setupMessageHandler()}get annotationStorage(){return nt(this,"annotationStorage",new iT)}getRenderingIntent(e,t=za.ENABLE,n=null,s=!1,a=!1){let o=er.DISPLAY,c=i1;switch(e){case"any":o=er.ANY;break;case"display":break;case"print":o=er.PRINT;break;default:Ke(`getRenderingIntent - invalid intent: ${e}`)}const u=o&er.PRINT&&n instanceof w5?n:this.annotationStorage;switch(t){case za.DISABLE:o+=er.ANNOTATIONS_DISABLE;break;case za.ENABLE:break;case za.ENABLE_FORMS:o+=er.ANNOTATIONS_FORMS;break;case za.ENABLE_STORAGE:o+=er.ANNOTATIONS_STORAGE,c=u.serializable;break;default:Ke(`getRenderingIntent - invalid annotationMode: ${t}`)}s&&(o+=er.IS_EDITING),a&&(o+=er.OPLIST);const{ids:d,hash:p}=u.modifiedIds,y=[o,c.hash,p];return{renderingIntent:o,cacheKey:y.join("_"),annotationStorageSerializable:c,modifiedIds:d}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=f(this,Vo))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const s of f(this,Da).values())e.push(s._destroy());f(this,Da).clear(),f(this,ip).clear(),f(this,sp).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var s,a;this.commonObjs.clear(),this.fontLoader.clear(),f(this,Go).clear(),this.filterFactory.destroy(),Fg.cleanup(),(s=this._networkStream)==null||s.cancelAllRequests(new ul("Worker was terminated.")),(a=this.messageHandler)==null||a.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,s)=>{vt(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=a=>{this._lastProgress={loaded:a.loaded,total:a.total}},s.onPull=()=>{this._fullReader.read().then(function({value:a,done:o}){if(o){s.close();return}vt(a instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{s.error(a)})},s.onCancel=a=>{this._fullReader.cancel(a),s.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("ReaderHeadersReady",async n=>{var c;await this._fullReader.headersReady;const{isStreamingSupported:s,isRangeSupported:a,contentLength:o}=this._fullReader;return(!s||!a)&&(this._lastProgress&&((c=t.onProgress)==null||c.call(t,this._lastProgress)),this._fullReader.onProgress=u=>{var d;(d=t.onProgress)==null||d.call(t,{loaded:u.loaded,total:u.total})}),{isStreamingSupported:s,isRangeSupported:a,contentLength:o}}),e.on("GetRangeReader",(n,s)=>{vt(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const a=this._networkStream.getRangeReader(n.begin,n.end);if(!a){s.close();return}s.onPull=()=>{a.read().then(function({value:o,done:c}){if(c){s.close();return}vt(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),s.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{s.error(o)})},s.onCancel=o=>{a.cancel(o),s.ready.catch(c=>{if(!this.destroyed)throw c})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new L7(n,this))}),e.on("DocException",n=>{t._capability.reject(fs(n))}),e.on("PasswordRequest",n=>{N(this,Vo,Promise.withResolvers());try{if(!t.onPassword)throw fs(n);const s=a=>{a instanceof Error?f(this,Vo).reject(a):f(this,Vo).resolve({password:a})};t.onPassword(s,n.code)}catch(s){f(this,Vo).reject(s)}return f(this,Vo).promise}),e.on("DataLoaded",n=>{var s;(s=t.onProgress)==null||s.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;f(this,Da).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,s,a])=>{var o;if(this.destroyed||this.commonObjs.has(n))return null;switch(s){case"Font":if("error"in a){const y=a.error;Ke(`Error during font loading: ${y}`),this.commonObjs.resolve(n,y);break}const c=new p1(a),u=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(y,v)=>globalThis.FontInspector.fontAdded(y,v):null,d=new H9(c,u,a.extra,a.charProcOperatorList);this.fontLoader.bind(d).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!d.fontExtraProperties&&d.data&&d.clearData(),this.commonObjs.resolve(n,d)});break;case"CopyLocalImage":const{imageRef:p}=a;vt(p,"The imageRef must be defined.");for(const y of f(this,Da).values())for(const[,v]of y.objs)if((v==null?void 0:v.ref)===p)return v.dataLen?(this.commonObjs.resolve(n,structuredClone(v)),v.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,a);break;default:throw new Error(`Got unknown common object type ${s}`)}return null}),e.on("obj",([n,s,a,o])=>{var u;if(this.destroyed)return;const c=f(this,Da).get(s);if(!c.objs.has(n)){if(c._intentStates.size===0){(u=o==null?void 0:o.bitmap)==null||u.close();return}switch(a){case"Image":case"Pattern":c.objs.resolve(n,o);break;default:throw new Error(`Got unknown object type ${a}`)}}}),e.on("DocProgress",n=>{var s;this.destroyed||(s=t.onProgress)==null||s.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBinaryData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");const s=this[n.type];if(!s)throw new Error(`${n.type} not initialized, see the \`useWorkerFetch\` parameter.`);return s.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&Ke("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=f(this,ip).get(t);if(n)return n;const s=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(a=>{if(this.destroyed)throw new Error("Transport destroyed");a.refStr&&f(this,sp).set(a.refStr,e);const o=new F7(t,a,this,this._params.pdfBug);return f(this,Da).set(t,o),o});return f(this,ip).set(t,s),s}getPageIndex(e){return s1(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return j(this,gd,gg).call(this,"GetFieldObjects")}hasJSActions(){return j(this,gd,gg).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return j(this,gd,gg).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return j(this,gd,gg).call(this,"GetOptionalContentConfig").then(t=>new m7(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=f(this,Go).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(s=>{var a,o;return{info:s[0],metadata:s[1]?new f7(s[1]):null,contentDispositionFilename:((a=this._fullReader)==null?void 0:a.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return f(this,Go).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of f(this,Da).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),f(this,Go).clear(),this.filterFactory.destroy(!0),Fg.cleanup()}}cachedPageNumber(e){if(!s1(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return f(this,sp).get(t)??null}}Go=new WeakMap,Da=new WeakMap,ip=new WeakMap,sp=new WeakMap,Vo=new WeakMap,gd=new WeakSet,gg=function(e,t=null){const n=f(this,Go).get(e);if(n)return n;const s=this.messageHandler.sendWithPromise(e,t);return f(this,Go).set(e,s),s};var vc;class j7{constructor(e){P(this,vc,null);ye(this,"onContinue",null);ye(this,"onError",null);N(this,vc,e)}get promise(){return f(this,vc).capability.promise}cancel(e=0){f(this,vc).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=f(this,vc).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=f(this,vc);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}vc=new WeakMap;var xc,yd;const Mu=class Mu{constructor({callback:e,params:t,objs:n,commonObjs:s,annotationCanvasMap:a,operatorList:o,pageIndex:c,canvasFactory:u,filterFactory:d,useRequestAnimationFrame:p=!1,pdfBug:y=!1,pageColors:v=null,enableHWA:w=!1,operationsFilter:A=null}){P(this,xc,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=s,this.annotationCanvasMap=a,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=c,this.canvasFactory=u,this.filterFactory=d,this._pdfBug=y,this.pageColors=v,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=p===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new j7(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvas,this._canvasContext=t.canvas?null:t.canvasContext,this._enableHWA=w,this._dependencyTracker=t.dependencyTracker,this._operationsFilter=A}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var u,d;if(this.cancelled)return;if(this._canvas){if(f(Mu,yd).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");f(Mu,yd).add(this._canvas)}this._pdfBug&&((u=globalThis.StepperManager)!=null&&u.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:n,transform:s,background:a,dependencyTracker:o}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new cf(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors,o),this.gfx.beginDrawing({transform:s,viewport:n,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(d=this.graphicsReadyCallback)==null||d.call(this)}cancel(e=null,t=0){var n,s,a;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),f(this,xc)&&(window.cancelAnimationFrame(f(this,xc)),N(this,xc,null)),f(Mu,yd).delete(this._canvas),e||(e=new dw(`Rendering cancelled, page ${this._pageIndex+1}`,t)),this.callback(e),(a=(s=this.task).onError)==null||a.call(s,e)}operatorListChanged(){var e,t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.gfx.dependencyTracker)==null||e.growOperationsCount(this.operatorList.fnArray.length),(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?N(this,xc,window.requestAnimationFrame(()=>{N(this,xc,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),f(Mu,yd).delete(this._canvas),this.callback())))}};xc=new WeakMap,yd=new WeakMap,P(Mu,yd,new WeakSet);let b1=Mu;const q5="5.4.296",$5="f56dc8601";var zs,vd,rp,ei,jy,ap,qo,By,bc,ta,Oy,Yt,w1,S1,E1,Tu,Y5,ql;const ps=class ps{constructor({editor:e=null,uiManager:t=null}){P(this,Yt);P(this,zs,null);P(this,vd,null);P(this,rp);P(this,ei,null);P(this,jy,!1);P(this,ap,!1);P(this,qo,null);P(this,By);P(this,bc,null);P(this,ta,null);var n,s;e?(N(this,ap,!1),N(this,qo,e)):N(this,ap,!0),N(this,ta,(e==null?void 0:e._uiManager)||t),N(this,By,f(this,ta)._eventBus),N(this,rp,((n=e==null?void 0:e.color)==null?void 0:n.toUpperCase())||((s=f(this,ta))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),f(ps,Oy)||N(ps,Oy,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return nt(this,"_keyboardManager",new D0([[["Escape","mac+Escape"],ps.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],ps.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],ps.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],ps.prototype._moveToPrevious],[["Home","mac+Home"],ps.prototype._moveToBeginning],[["End","mac+End"],ps.prototype._moveToEnd]]))}renderButton(){const e=N(this,zs,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",f(this,qo)&&(e.ariaControls=`${f(this,qo).id}_colorpicker_dropdown`);const t=f(this,ta)._signal;e.addEventListener("click",j(this,Yt,Tu).bind(this),{signal:t}),e.addEventListener("keydown",j(this,Yt,E1).bind(this),{signal:t});const n=N(this,vd,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=f(this,rp),e.append(n),e}renderMainDropdown(){const e=N(this,ei,j(this,Yt,w1).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===f(this,zs)){j(this,Yt,Tu).call(this,e);return}const t=e.target.getAttribute("data-color");t&&j(this,Yt,S1).call(this,t,e)}_moveToNext(e){var t,n;if(!f(this,Yt,ql)){j(this,Yt,Tu).call(this,e);return}if(e.target===f(this,zs)){(t=f(this,ei).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=f(this,ei))==null?void 0:t.firstChild)||e.target===f(this,zs)){f(this,Yt,ql)&&this._hideDropdownFromKeyboard();return}f(this,Yt,ql)||j(this,Yt,Tu).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!f(this,Yt,ql)){j(this,Yt,Tu).call(this,e);return}(t=f(this,ei).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!f(this,Yt,ql)){j(this,Yt,Tu).call(this,e);return}(t=f(this,ei).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=f(this,ei))==null||e.classList.add("hidden"),f(this,zs).ariaExpanded="false",(t=f(this,bc))==null||t.abort(),N(this,bc,null)}_hideDropdownFromKeyboard(){var e;if(!f(this,ap)){if(!f(this,Yt,ql)){(e=f(this,qo))==null||e.unselect();return}this.hideDropdown(),f(this,zs).focus({preventScroll:!0,focusVisible:f(this,jy)})}}updateColor(e){if(f(this,vd)&&(f(this,vd).style.backgroundColor=e),!f(this,ei))return;const t=f(this,ta).highlightColors.values();for(const n of f(this,ei).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;(e=f(this,zs))==null||e.remove(),N(this,zs,null),N(this,vd,null),(t=f(this,ei))==null||t.remove(),N(this,ei,null)}};zs=new WeakMap,vd=new WeakMap,rp=new WeakMap,ei=new WeakMap,jy=new WeakMap,ap=new WeakMap,qo=new WeakMap,By=new WeakMap,bc=new WeakMap,ta=new WeakMap,Oy=new WeakMap,Yt=new WeakSet,w1=function(){const e=document.createElement("div"),t=f(this,ta)._signal;e.addEventListener("contextmenu",sr,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),f(this,qo)&&(e.id=`${f(this,qo).id}_colorpicker_dropdown`);for(const[n,s]of f(this,ta).highlightColors){const a=document.createElement("button");a.tabIndex="0",a.role="option",a.setAttribute("data-color",s),a.title=n,a.setAttribute("data-l10n-id",f(ps,Oy)[n]);const o=document.createElement("span");a.append(o),o.className="swatch",o.style.backgroundColor=s,a.ariaSelected=s===f(this,rp),a.addEventListener("click",j(this,Yt,S1).bind(this,s),{signal:t}),e.append(a)}return e.addEventListener("keydown",j(this,Yt,E1).bind(this),{signal:t}),e},S1=function(e,t){t.stopPropagation(),f(this,By).dispatch("switchannotationeditorparams",{source:this,type:pt.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)},E1=function(e){ps._keyboardManager.exec(this,e)},Tu=function(e){if(f(this,Yt,ql)){this.hideDropdown();return}if(N(this,jy,e.detail===0),f(this,bc)||(N(this,bc,new AbortController),window.addEventListener("pointerdown",j(this,Yt,Y5).bind(this),{signal:f(this,ta).combinedSignal(f(this,bc))})),f(this,zs).ariaExpanded="true",f(this,ei)){f(this,ei).classList.remove("hidden");return}const t=N(this,ei,j(this,Yt,w1).call(this));f(this,zs).append(t)},Y5=function(e){var t;(t=f(this,ei))!=null&&t.contains(e.target)||this.hideDropdown()},ql=function(){return f(this,ei)&&!f(this,ei).classList.contains("hidden")},P(ps,Oy,null);let Ug=ps;var Ia,Hy,op,zy;const ku=class ku{constructor(e){P(this,Ia,null);P(this,Hy,null);P(this,op,null);N(this,Hy,e),N(this,op,e._uiManager),f(ku,zy)||N(ku,zy,Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(f(this,Ia))return f(this,Ia);const{editorType:e,colorType:t,colorValue:n}=f(this,Hy),s=N(this,Ia,document.createElement("input"));return s.type="color",s.value=n||"#000000",s.className="basicColorPicker",s.tabIndex=0,s.setAttribute("data-l10n-id",f(ku,zy)[e]),s.addEventListener("input",()=>{f(this,op).updateParams(t,s.value)},{signal:f(this,op)._signal}),s}update(e){f(this,Ia)&&(f(this,Ia).value=e)}destroy(){var e;(e=f(this,Ia))==null||e.remove(),N(this,Ia,null)}hideDropdown(){}};Ia=new WeakMap,Hy=new WeakMap,op=new WeakMap,zy=new WeakMap,P(ku,zy,null);let mb=ku;function uD(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Jm(i){return Math.max(0,Math.min(255,255*i))}class dD{static CMYK_G([e,t,n,s]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+s)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=Jm(e),[e,e,e]}static G_HTML([e]){const t=uD(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(Jm)}static RGB_HTML(e){return`#${e.map(uD).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,s]){return["RGB",1-Math.min(1,e+s),1-Math.min(1,n+s),1-Math.min(1,t+s)]}static CMYK_rgb([e,t,n,s]){return[Jm(1-Math.min(1,e+s)),Jm(1-Math.min(1,n+s)),Jm(1-Math.min(1,t+s))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const s=1-e,a=1-t,o=1-n,c=Math.min(s,a,o);return["CMYK",s,a,o,c]}}class B7{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const s=this._createSVG("svg:svg");return s.setAttribute("version","1.1"),n||(s.setAttribute("width",`${e}px`),s.setAttribute("height",`${t}px`)),s.setAttribute("preserveAspectRatio","none"),s.setAttribute("viewBox",`0 0 ${e} ${t}`),s}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){tn("Abstract method `_createSVG` called.")}}class jg extends B7{_createSVG(e){return document.createElementNS(vo,e)}}const O7=9,$d=new WeakSet,H7=new Date().getTimezoneOffset()*60*1e3;class hD{static create(e){switch(e.data.annotationType){case Fn.LINK:return new lT(e);case Fn.TEXT:return new G7(e);case Fn.WIDGET:switch(e.data.fieldType){case"Tx":return new V7(e);case"Btn":return e.data.radioButton?new J5(e):e.data.checkBox?new $7(e):new Y7(e);case"Ch":return new W7(e);case"Sig":return new q7(e)}return new Qd(e);case Fn.POPUP:return new C1(e);case Fn.FREETEXT:return new t4(e);case Fn.LINE:return new J7(e);case Fn.SQUARE:return new K7(e);case Fn.CIRCLE:return new Q7(e);case Fn.POLYLINE:return new n4(e);case Fn.CARET:return new eY(e);case Fn.INK:return new cT(e);case Fn.POLYGON:return new Z7(e);case Fn.HIGHLIGHT:return new i4(e);case Fn.UNDERLINE:return new tY(e);case Fn.SQUIGGLY:return new nY(e);case Fn.STRIKEOUT:return new iY(e);case Fn.STAMP:return new s4(e);case Fn.FILEATTACHMENT:return new sY(e);default:return new Sn(e)}}}var xd,lp,Rr,Gy,A1;const yT=class yT{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:s=!1}={}){P(this,Gy);P(this,xd,null);P(this,lp,!1);P(this,Rr,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),s&&this._createQuadrilaterals()}static _hasPopupData({contentsObj:e,richText:t}){return!!(e!=null&&e.str||t!=null&&t.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return yT._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var n;const{data:e}=this,t=(n=this.annotationStorage)==null?void 0:n.getEditor(e.id);return t?t.getData():e}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var c;const e=(c=this.annotationStorage)==null?void 0:c.getEditor(this.data.id);if(e)return e.commentButtonPositionInPage;const{quadPoints:t,inkLists:n,rect:s}=this.data;let a=-1/0,o=-1/0;if((t==null?void 0:t.length)>=8){for(let u=0;u<t.length;u+=8)t[u+1]>o?(o=t[u+1],a=t[u+2]):t[u+1]===o&&(a=Math.max(a,t[u+2]));return[a,o]}if((n==null?void 0:n.length)>=1){for(const u of n)for(let d=0,p=u.length;d<p;d+=2)u[d+1]>o?(o=u[d+1],a=u[d]):u[d+1]===o&&(a=Math.max(a,u[d]));if(a!==1/0)return[a,o]}return s?[s[2],s[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:s,pageX:a,pageY:o}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-a)/n,e[1]=100*(e[1]-o)/s,e}get commentText(){var t,n,s;const{data:e}=this;return((n=(t=this.annotationStorage.getRawValue(`${kg}${e.id}`))==null?void 0:t.popup)==null?void 0:n.contents)||((s=e.contentsObj)==null?void 0:s.str)||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue(`${kg}${t.id}`,{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;(t=((e=f(this,Rr))==null?void 0:e.popup)||this.popup)==null||t.remove(),N(this,Rr,this.popup=null)}updateEdited(e){var a;if(!this.container)return;e.rect&&(f(this,xd)||N(this,xd,{rect:this.data.rect.slice(0)}));const{rect:t,popup:n}=e;t&&j(this,Gy,A1).call(this,t);let s=((a=f(this,Rr))==null?void 0:a.popup)||this.popup;!s&&(n!=null&&n.text)&&(this._createPopup(n),s=f(this,Rr).popup),s&&(s.updateEdited(e),n!=null&&n.deleted&&(s.remove(),N(this,Rr,null),this.popup=null))}resetEdited(){var e;f(this,xd)&&(j(this,Gy,A1).call(this,f(this,xd).rect),(e=f(this,Rr))==null||e.popup.resetEdited(),N(this,xd,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:s}}=this,a=document.createElement("section");a.setAttribute("data-annotation-id",t.id),!(this instanceof Qd)&&!(this instanceof lT)&&(a.tabIndex=0);const{style:o}=a;if(o.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(a.title=t.alternativeText),t.noRotate&&a.classList.add("norotate"),!t.rect||this instanceof C1){const{rotation:C}=t;return!t.hasOwnCanvas&&C!==0&&this.setRotation(C,a),a}const{width:c,height:u}=this;if(!e&&t.borderStyle.width>0){o.borderWidth=`${t.borderStyle.width}px`;const C=t.borderStyle.horizontalCornerRadius,T=t.borderStyle.verticalCornerRadius;if(C>0||T>0){const D=`calc(${C}px * var(--total-scale-factor)) / calc(${T}px * var(--total-scale-factor))`;o.borderRadius=D}else if(this instanceof J5){const D=`calc(${c}px * var(--total-scale-factor)) / calc(${u}px * var(--total-scale-factor))`;o.borderRadius=D}switch(t.borderStyle.style){case Oh.SOLID:o.borderStyle="solid";break;case Oh.DASHED:o.borderStyle="dashed";break;case Oh.BEVELED:Ke("Unimplemented border style: beveled");break;case Oh.INSET:Ke("Unimplemented border style: inset");break;case Oh.UNDERLINE:o.borderBottomStyle="solid";break}const _=t.borderColor||null;_?(N(this,lp,!0),o.borderColor=Me.makeHexColor(_[0]|0,_[1]|0,_[2]|0)):o.borderWidth=0}const d=Me.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:p,pageHeight:y,pageX:v,pageY:w}=s.rawDims;o.left=`${100*(d[0]-v)/p}%`,o.top=`${100*(d[1]-w)/y}%`;const{rotation:A}=t;return t.hasOwnCanvas||A===0?(o.width=`${100*c/p}%`,o.height=`${100*u/y}%`):this.setRotation(A,a),a}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:s}=this.parent.viewport.rawDims;let{width:a,height:o}=this;e%180!==0&&([a,o]=[o,a]),t.style.width=`${100*a/n}%`,t.style.height=`${100*o/s}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,s)=>{const a=s.detail[t],o=a[0],c=a.slice(1);s.target.style[n]=dD[`${o}_HTML`](c),this.annotationStorage.setValue(this.data.id,{[n]:dD[`${o}_rgb`](c)})};return nt(this,"_commonActions",{display:t=>{const{display:n}=t.detail,s=n%2===1;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:s,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const s of Object.keys(t.detail)){const a=e[s]||n[s];a==null||a(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[s,a]of Object.entries(t)){const o=n[s];if(o){const c={detail:{[s]:a},target:e};o(c),delete t[s]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,s,a]=this.data.rect.map(C=>Math.fround(C));if(e.length===8){const[C,T,_,D]=e.subarray(2,6);if(s===C&&a===T&&t===_&&n===D)return}const{style:o}=this.container;let c;if(f(this,lp)){const{borderColor:C,borderWidth:T}=o;o.borderWidth=0,c=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${C}" stroke-width="${T}">`],this.container.classList.add("hasBorder")}const u=s-t,d=a-n,{svgFactory:p}=this,y=p.createElement("svg");y.classList.add("quadrilateralsContainer"),y.setAttribute("width",0),y.setAttribute("height",0),y.role="none";const v=p.createElement("defs");y.append(v);const w=p.createElement("clipPath"),A=`clippath_${this.data.id}`;w.setAttribute("id",A),w.setAttribute("clipPathUnits","objectBoundingBox"),v.append(w);for(let C=2,T=e.length;C<T;C+=8){const _=e[C],D=e[C+1],R=e[C+2],L=e[C+3],F=p.createElement("rect"),U=(R-t)/u,M=(a-D)/d,O=(_-R)/u,z=(D-L)/d;F.setAttribute("x",U),F.setAttribute("y",M),F.setAttribute("width",O),F.setAttribute("height",z),w.append(F),c==null||c.push(`<rect vector-effect="non-scaling-stroke" x="${U}" y="${M}" width="${O}" height="${z}"/>`)}f(this,lp)&&(c.push("</g></svg>')"),o.backgroundImage=c.join("")),this.container.append(y),this.container.style.clipPath=`url(#${A})`}_createPopup(e=null){const{data:t}=this;let n,s;e?(n={str:e.text},s=e.date):(n=t.contentsObj,s=t.modificationDate);const a=N(this,Rr,new C1({data:{color:t.color,titleObj:t.titleObj,modificationDate:s,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(a.render())}get hasPopupElement(){return!!(f(this,Rr)||this.popup||this.data.popupRef)}get extraPopupElement(){return f(this,Rr)}render(){tn("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const s=this._fieldObjects[e];if(s)for(const{page:a,id:o,exportValues:c}of s){if(a===-1||o===t)continue;const u=typeof c=="string"?c:null,d=document.querySelector(`[data-element-id="${o}"]`);if(d&&!$d.has(d)){Ke(`_getElementsByName - element not allowed: ${o}`);continue}n.push({id:o,exportValue:u,domElement:d})}return n}for(const s of document.getElementsByName(e)){const{exportValue:a}=s,o=s.getAttribute("data-element-id");o!==t&&$d.has(s)&&n.push({id:o,exportValue:a,domElement:s})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};xd=new WeakMap,lp=new WeakMap,Rr=new WeakMap,Gy=new WeakSet,A1=function(e){const{container:{style:t},data:{rect:n,rotation:s},parent:{viewport:{rawDims:{pageWidth:a,pageHeight:o,pageX:c,pageY:u}}}}=this;n==null||n.splice(0,4,...e),t.left=`${100*(e[0]-c)/a}%`,t.top=`${100*(o-e[3]+u)/o}%`,s===0?(t.width=`${100*(e[2]-e[0])/a}%`,t.height=`${100*(e[3]-e[1])/o}%`):this.setRotation(s)};let Sn=yT;class z7 extends Sn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var nr,_u,W5,X5;class lT extends Sn{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});P(this,nr);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,s=document.createElement("a");s.setAttribute("data-element-id",t.id);let a=!1;return t.url?(n.addLinkAttributes(s,t.url,t.newWindow),a=!0):t.action?(this._bindNamedAction(s,t.action,t.overlaidText),a=!0):t.attachment?(j(this,nr,W5).call(this,s,t.attachment,t.overlaidText,t.attachmentDest),a=!0):t.setOCGState?(j(this,nr,X5).call(this,s,t.setOCGState,t.overlaidText),a=!0):t.dest?(this._bindLink(s,t.dest,t.overlaidText),a=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(s,t),a=!0),t.resetForm?(this._bindResetFormAction(s,t.resetForm),a=!0):this.isTooltipOnly&&!a&&(this._bindLink(s,""),a=!0)),this.container.classList.add("linkAnnotation"),a&&this.container.append(s),this.container}_bindLink(t,n,s=""){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&j(this,nr,_u).call(this),s&&(t.title=s)}_bindNamedAction(t,n,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),s&&(t.title=s),j(this,nr,_u).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const s=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const a of Object.keys(n.actions)){const o=s.get(a);o&&(t[o]=()=>{var c;return(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:a}}),!1})}n.overlaidText&&(t.title=n.overlaidText),t.onclick||(t.onclick=()=>!1),j(this,nr,_u).call(this)}_bindResetFormAction(t,n){const s=t.onclick;if(s||(t.href=this.linkService.getAnchorUrl("")),j(this,nr,_u).call(this),!this._fieldObjects){Ke('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),s||(t.onclick=()=>!1);return}t.onclick=()=>{var y;s==null||s();const{fields:a,refs:o,include:c}=n,u=[];if(a.length!==0||o.length!==0){const v=new Set(o);for(const w of a){const A=this._fieldObjects[w]||[];for(const{id:C}of A)v.add(C)}for(const w of Object.values(this._fieldObjects))for(const A of w)v.has(A.id)===c&&u.push(A)}else for(const v of Object.values(this._fieldObjects))u.push(...v);const d=this.annotationStorage,p=[];for(const v of u){const{id:w}=v;switch(p.push(w),v.type){case"text":{const C=v.defaultValue||"";d.setValue(w,{value:C});break}case"checkbox":case"radiobutton":{const C=v.defaultValue===v.exportValues;d.setValue(w,{value:C});break}case"combobox":case"listbox":{const C=v.defaultValue||"";d.setValue(w,{value:C});break}default:continue}const A=document.querySelector(`[data-element-id="${w}"]`);if(A){if(!$d.has(A)){Ke(`_bindResetFormAction - element not allowed: ${w}`);continue}}else continue;A.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((y=this.linkService.eventBus)==null||y.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:p,name:"ResetForm"}})),!1}}}nr=new WeakSet,_u=function(){this.container.setAttribute("data-internal-link","")},W5=function(t,n,s="",a=null){t.href=this.linkService.getAnchorUrl(""),n.description?t.title=n.description:s&&(t.title=s),t.onclick=()=>{var o;return(o=this.downloadManager)==null||o.openOrDownloadData(n.content,n.filename,a),!1},j(this,nr,_u).call(this)},X5=function(t,n,s=""){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),s&&(t.title=s),j(this,nr,_u).call(this)};class G7 extends Sn{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Qd extends Sn{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return mi.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,s,a){n.includes("mouse")?e.addEventListener(n,o=>{var c;(c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):e.addEventListener(n,o=>{var c;if(n==="blur"){if(!t.focused||!o.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}a&&((c=this.linkService.eventBus)==null||c.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:s,value:a(o)}}))})}_setEventListeners(e,t,n,s){var a,o,c;for(const[u,d]of n)(d==="Action"||(a=this.data.actions)!=null&&a[d])&&((d==="Focus"||d==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,u,d,s),d==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(e,t,"blur","Blur",null):d==="Blur"&&!((c=this.data.actions)!=null&&c.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":Me.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,s=this.data.defaultAppearanceData.fontSize||O7,a=e.style;let o;const c=2,u=d=>Math.round(10*d)/10;if(this.data.multiLine){const d=Math.abs(this.data.rect[3]-this.data.rect[1]-c),p=Math.round(d/(KE*s))||1,y=d/p;o=Math.min(s,u(y/KE))}else{const d=Math.abs(this.data.rect[3]-this.data.rect[1]-c);o=Math.min(s,u(d/KE))}a.fontSize=`calc(${o}px * var(--total-scale-factor))`,a.color=Me.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(a.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class V7 extends Qd{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,s){const a=this.annotationStorage;for(const o of this._getElementsByName(e.name,e.id))o.domElement&&(o.domElement[t]=n),a.setValue(o.id,{[s]:n})}render(){var s,a;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const o=e.getValue(t,{value:this.data.fieldValue});let c=o.value||"";const u=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;u&&c.length>u&&(c=c.slice(0,u));let d=o.formattedValue||((s=this.data.textContent)==null?void 0:s.join(`
`))||null;d&&this.data.comb&&(d=d.replaceAll(/\s+/g,""));const p={userValue:c,formattedValue:d,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=d??c,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",d??c),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),$d.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:y,datetimeType:v,timeStep:w}=this.data,A=!!v&&this.enableScripting;y&&(n.title=y),this._setRequired(n,this.data.required),u&&(n.maxLength=u),n.addEventListener("input",T=>{e.setValue(t,{value:T.target.value}),this.setPropertyOnSiblings(n,"value",T.target.value,"value"),p.formattedValue=null}),n.addEventListener("resetform",T=>{const _=this.data.defaultFieldValue??"";n.value=p.userValue=_,p.formattedValue=null});let C=T=>{const{formattedValue:_}=p;_!=null&&(T.target.value=_),T.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",_=>{var R;if(p.focused)return;const{target:D}=_;if(A&&(D.type=v,w&&(D.step=w)),p.userValue){const L=p.userValue;if(A)if(v==="time"){const F=new Date(L),U=[F.getHours(),F.getMinutes(),F.getSeconds()];D.value=U.map(M=>M.toString().padStart(2,"0")).join(":")}else D.value=new Date(L-H7).toISOString().split(v==="date"?"T":".",1)[0];else D.value=L}p.lastCommittedValue=D.value,p.commitKey=1,(R=this.data.actions)!=null&&R.Focus||(p.focused=!0)}),n.addEventListener("updatefromsandbox",_=>{this.showElementAndHideCanvas(_.target);const D={value(R){p.userValue=R.detail.value??"",A||e.setValue(t,{value:p.userValue.toString()}),R.target.value=p.userValue},formattedValue(R){const{formattedValue:L}=R.detail;p.formattedValue=L,L!=null&&R.target!==document.activeElement&&(R.target.value=L);const F={formattedValue:L};A&&(F.value=L),e.setValue(t,F)},selRange(R){R.target.setSelectionRange(...R.detail.selRange)},charLimit:R=>{var M;const{charLimit:L}=R.detail,{target:F}=R;if(L===0){F.removeAttribute("maxLength");return}F.setAttribute("maxLength",L);let U=p.userValue;!U||U.length<=L||(U=U.slice(0,L),F.value=p.userValue=U,e.setValue(t,{value:U}),(M=this.linkService.eventBus)==null||M.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:U,willCommit:!0,commitKey:1,selStart:F.selectionStart,selEnd:F.selectionEnd}}))}};this._dispatchEventFromSandbox(D,_)}),n.addEventListener("keydown",_=>{var L;p.commitKey=1;let D=-1;if(_.key==="Escape"?D=0:_.key==="Enter"&&!this.data.multiLine?D=2:_.key==="Tab"&&(p.commitKey=3),D===-1)return;const{value:R}=_.target;p.lastCommittedValue!==R&&(p.lastCommittedValue=R,p.userValue=R,(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:R,willCommit:!0,commitKey:D,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}}))});const T=C;C=null,n.addEventListener("blur",_=>{var L,F;if(!p.focused||!_.relatedTarget)return;(L=this.data.actions)!=null&&L.Blur||(p.focused=!1);const{target:D}=_;let{value:R}=D;if(A){if(R&&v==="time"){const U=R.split(":").map(M=>parseInt(M,10));R=new Date(2e3,0,1,U[0],U[1],U[2]||0).valueOf(),D.step=""}else R.includes("T")||(R=`${R}T00:00`),R=new Date(R).valueOf();D.type="text"}p.userValue=R,p.lastCommittedValue!==R&&((F=this.linkService.eventBus)==null||F.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:R,willCommit:!0,commitKey:p.commitKey,selStart:_.target.selectionStart,selEnd:_.target.selectionEnd}})),T(_)}),(a=this.data.actions)!=null&&a.Keystroke&&n.addEventListener("beforeinput",_=>{var z;p.lastCommittedValue=null;const{data:D,target:R}=_,{value:L,selectionStart:F,selectionEnd:U}=R;let M=F,O=U;switch(_.inputType){case"deleteWordBackward":{const J=L.substring(0,F).match(/\w*[^\w]*$/);J&&(M-=J[0].length);break}case"deleteWordForward":{const J=L.substring(F).match(/^[^\w]*\w*/);J&&(O+=J[0].length);break}case"deleteContentBackward":F===U&&(M-=1);break;case"deleteContentForward":F===U&&(O+=1);break}_.preventDefault(),(z=this.linkService.eventBus)==null||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:L,change:D||"",willCommit:!1,selStart:M,selEnd:O}})}),this._setEventListeners(n,p,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],_=>_.target.value)}if(C&&n.addEventListener("blur",C),this.data.comb){const _=(this.data.rect[2]-this.data.rect[0])/u;n.classList.add("comb"),n.style.letterSpacing=`calc(${_}px * var(--total-scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class q7 extends Qd{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class $7 extends Qd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof s=="string"&&(s=s!=="Off",e.setValue(n,{value:s})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const a=document.createElement("input");return $d.add(a),a.setAttribute("data-element-id",n),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="checkbox",a.name=t.fieldName,s&&a.setAttribute("checked",!0),a.setAttribute("exportValue",t.exportValue),a.tabIndex=0,a.addEventListener("change",o=>{const{name:c,checked:u}=o.target;for(const d of this._getElementsByName(c,n)){const p=u&&d.exportValue===t.exportValue;d.domElement&&(d.domElement.checked=p),e.setValue(d.id,{value:p})}e.setValue(n,{value:u})}),a.addEventListener("resetform",o=>{const c=t.defaultFieldValue||"Off";o.target.checked=c===t.exportValue}),this.enableScripting&&this.hasJSActions&&(a.addEventListener("updatefromsandbox",o=>{const c={value(u){u.target.checked=u.detail.value!=="Off",e.setValue(n,{value:u.target.checked})}};this._dispatchEventFromSandbox(c,o)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class J5 extends Qd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let s=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof s=="string"&&(s=s!==t.buttonValue,e.setValue(n,{value:s})),s)for(const o of this._getElementsByName(t.fieldName,n))e.setValue(o.id,{value:!1});const a=document.createElement("input");if($d.add(a),a.setAttribute("data-element-id",n),a.disabled=t.readOnly,this._setRequired(a,this.data.required),a.type="radio",a.name=t.fieldName,s&&a.setAttribute("checked",!0),a.tabIndex=0,a.addEventListener("change",o=>{const{name:c,checked:u}=o.target;for(const d of this._getElementsByName(c,n))e.setValue(d.id,{value:!1});e.setValue(n,{value:u})}),a.addEventListener("resetform",o=>{const c=t.defaultFieldValue;o.target.checked=c!=null&&c===t.buttonValue}),this.enableScripting&&this.hasJSActions){const o=t.buttonValue;a.addEventListener("updatefromsandbox",c=>{const u={value:d=>{const p=o===d.detail.value;for(const y of this._getElementsByName(d.target.name)){const v=p&&y.id===n;y.domElement&&(y.domElement.checked=v),e.setValue(y.id,{value:v})}}};this._dispatchEventFromSandbox(u,c)}),this._setEventListeners(a,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],c=>c.target.checked)}return this._setBackgroundColor(a),this._setDefaultPropertiesFromJS(a),this.container.append(a),this.container}}class Y7 extends lT{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class W7 extends Qd{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),s=document.createElement("select");$d.add(s),s.setAttribute("data-element-id",t),s.disabled=this.data.readOnly,this._setRequired(s,this.data.required),s.name=this.data.fieldName,s.tabIndex=0;let a=this.data.combo&&this.data.options.length>0;this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0)),s.addEventListener("resetform",p=>{const y=this.data.defaultFieldValue;for(const v of s.options)v.selected=v.value===y});for(const p of this.data.options){const y=document.createElement("option");y.textContent=p.displayValue,y.value=p.exportValue,n.value.includes(p.exportValue)&&(y.setAttribute("selected",!0),a=!1),s.append(y)}let o=null;if(a){const p=document.createElement("option");p.value=" ",p.setAttribute("hidden",!0),p.setAttribute("selected",!0),s.prepend(p),o=()=>{p.remove(),s.removeEventListener("input",o),o=null},s.addEventListener("input",o)}const c=p=>{const y=p?"value":"textContent",{options:v,multiple:w}=s;return w?Array.prototype.filter.call(v,A=>A.selected).map(A=>A[y]):v.selectedIndex===-1?null:v[v.selectedIndex][y]};let u=c(!1);const d=p=>{const y=p.target.options;return Array.prototype.map.call(y,v=>({displayValue:v.textContent,exportValue:v.value}))};return this.enableScripting&&this.hasJSActions?(s.addEventListener("updatefromsandbox",p=>{const y={value(v){o==null||o();const w=v.detail.value,A=new Set(Array.isArray(w)?w:[w]);for(const C of s.options)C.selected=A.has(C.value);e.setValue(t,{value:c(!0)}),u=c(!1)},multipleSelection(v){s.multiple=!0},remove(v){const w=s.options,A=v.detail.remove;w[A].selected=!1,s.remove(A),w.length>0&&Array.prototype.findIndex.call(w,T=>T.selected)===-1&&(w[0].selected=!0),e.setValue(t,{value:c(!0),items:d(v)}),u=c(!1)},clear(v){for(;s.length!==0;)s.remove(0);e.setValue(t,{value:null,items:[]}),u=c(!1)},insert(v){const{index:w,displayValue:A,exportValue:C}=v.detail.insert,T=s.children[w],_=document.createElement("option");_.textContent=A,_.value=C,T?T.before(_):s.append(_),e.setValue(t,{value:c(!0),items:d(v)}),u=c(!1)},items(v){const{items:w}=v.detail;for(;s.length!==0;)s.remove(0);for(const A of w){const{displayValue:C,exportValue:T}=A,_=document.createElement("option");_.textContent=C,_.value=T,s.append(_)}s.options.length>0&&(s.options[0].selected=!0),e.setValue(t,{value:c(!0),items:d(v)}),u=c(!1)},indices(v){const w=new Set(v.detail.indices);for(const A of v.target.options)A.selected=w.has(A.index);e.setValue(t,{value:c(!0)}),u=c(!1)},editable(v){v.target.disabled=!v.detail.editable}};this._dispatchEventFromSandbox(y,p)}),s.addEventListener("input",p=>{var w;const y=c(!0),v=c(!1);e.setValue(t,{value:y}),p.preventDefault(),(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:u,change:v,changeEx:y,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(s,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],p=>p.target.value)):s.addEventListener("input",function(p){e.setValue(t,{value:c(!0)})}),this.data.combo&&this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}var Vy,T1;class C1 extends Sn{constructor(t){const{data:n,elements:s,parent:a}=t,o=!!a._commentManager;super(t,{isRenderable:!o&&Sn._hasPopupData(n)});P(this,Vy);if(this.elements=s,o&&Sn._hasPopupData(n)){const c=this.popup=j(this,Vy,T1).call(this);for(const u of s)u.popup=c}else this.popup=null}render(){const{container:t}=this;t.classList.add("popupAnnotation"),t.role="comment";const n=this.popup=j(this,Vy,T1).call(this),s=[];for(const a of this.elements)a.popup=n,a.container.ariaHasPopup="dialog",s.push(a.data.id),a.addHighlightArea();return this.container.setAttribute("aria-controls",s.map(a=>`${eT}${a}`).join(",")),this.container}}Vy=new WeakSet,T1=function(){return new X7({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})};var Gs,wc,Ib,Pb,cp,up,Rn,Pa,Sc,bd,dp,hp,La,Vs,$o,Yo,oi,Wo,Ec,qy,Xo,fp,wd,Ac,Oi,Cc,st,Dx,_1,N1,R1,Ix,M1,K5,Q5,Z5,e4,Px,Lx,k1;class X7{constructor({container:e,color:t,elements:n,titleObj:s,modificationDate:a,contentsObj:o,richText:c,parent:u,rect:d,parentRect:p,open:y,commentManager:v=null}){P(this,st);P(this,Gs,null);P(this,wc,j(this,st,Z5).bind(this));P(this,Ib,j(this,st,k1).bind(this));P(this,Pb,j(this,st,Lx).bind(this));P(this,cp,j(this,st,Px).bind(this));P(this,up,null);P(this,Rn,null);P(this,Pa,null);P(this,Sc,null);P(this,bd,null);P(this,dp,null);P(this,hp,null);P(this,La,!1);P(this,Vs,null);P(this,$o,null);P(this,Yo,null);P(this,oi,null);P(this,Wo,null);P(this,Ec,null);P(this,qy,null);P(this,Xo,null);P(this,fp,null);P(this,wd,null);P(this,Ac,!1);P(this,Oi,null);P(this,Cc,null);N(this,Rn,e),N(this,fp,s),N(this,Pa,o),N(this,Xo,c),N(this,dp,u),N(this,up,t),N(this,qy,d),N(this,hp,p),N(this,bd,n),N(this,Gs,v),N(this,Oi,n[0]),N(this,Sc,Pg.toDateObject(a)),this.trigger=n.flatMap(w=>w.getElementsToTriggerPopup()),v?this.renderCommentButton():(j(this,st,Dx).call(this),f(this,Rn).hidden=!0,y&&j(this,st,Px).call(this))}renderCommentButton(){if(f(this,oi)||(f(this,Wo)||j(this,st,_1).call(this),!f(this,Wo)))return;const{signal:e}=N(this,$o,new AbortController),t=!!f(this,Oi).extraPopupElement,n=()=>{f(this,Gs).toggleCommentPopup(this,!0,void 0,!t)},s=()=>{f(this,Gs).toggleCommentPopup(this,!1,!0,!t)},a=()=>{f(this,Gs).toggleCommentPopup(this,!1,!1)};if(t){N(this,oi,f(this,Oi).container);for(const o of this.trigger)o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.addEventListener("keydown",f(this,wc),{signal:e}),o.addEventListener("click",n,{signal:e}),o.addEventListener("pointerenter",s,{signal:e}),o.addEventListener("pointerleave",a,{signal:e}),o.classList.add("popupTriggerArea")}else{const o=N(this,oi,document.createElement("button"));o.className="annotationCommentButton";const c=f(this,Oi).container;o.style.zIndex=c.style.zIndex+1,o.tabIndex=0,o.ariaHasPopup="dialog",o.ariaControls="commentPopup",o.setAttribute("data-l10n-id","pdfjs-show-comment-button"),j(this,st,R1).call(this),j(this,st,N1).call(this),o.addEventListener("keydown",f(this,wc),{signal:e}),o.addEventListener("click",n,{signal:e}),o.addEventListener("pointerenter",s,{signal:e}),o.addEventListener("pointerleave",a,{signal:e}),c.after(o)}}get commentButtonColor(){const{color:e,opacity:t}=f(this,Oi).commentData;return e?f(this,dp)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;(e=f(this,oi))==null||e.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:s,modificationDate:a}=f(this,Oi).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:s,modificationDate:a}}get elementBeforePopup(){return f(this,oi)}get comment(){return f(this,Cc)||N(this,Cc,f(this,Oi).commentText),f(this,Cc)}set comment(e){e!==this.comment&&(f(this,Oi).commentText=N(this,Cc,e))}get parentBoundingClientRect(){return f(this,Oi).layer.getBoundingClientRect()}setCommentButtonStates({selected:e,hasPopup:t}){f(this,oi)&&(f(this,oi).classList.toggle("selected",e),f(this,oi).ariaExpanded=t)}setSelectedCommentButton(e){f(this,oi).classList.toggle("selected",e)}get commentPopupPosition(){if(f(this,Ec))return f(this,Ec);const{x:e,y:t,height:n}=f(this,oi).getBoundingClientRect(),{x:s,y:a,width:o,height:c}=f(this,Oi).layer.getBoundingClientRect();return[(e-s)/o,(t+n-a)/c]}set commentPopupPosition(e){N(this,Ec,e)}hasDefaultPopupPosition(){return f(this,Ec)===null}get commentButtonPosition(){return f(this,Wo)}get commentButtonWidth(){return f(this,oi).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=f(this,Ec)||this.commentButtonPosition.map(d=>d/100),s=this.parentBoundingClientRect,{x:a,y:o,width:c,height:u}=s;f(this,Gs).showDialog(null,this,a+t*c,o+n*u,{...e,parentDimensions:s})}render(){var n,s;if(f(this,Vs))return;const e=N(this,Vs,document.createElement("div"));if(e.className="popup",f(this,up)){const a=e.style.outlineColor=Me.makeHexColor(...f(this,up));e.style.backgroundColor=`color-mix(in srgb, ${a} 30%, white)`}const t=document.createElement("span");if(t.className="header",(n=f(this,fp))!=null&&n.str){const a=document.createElement("span");a.className="title",t.append(a),{dir:a.dir,str:a.textContent}=f(this,fp)}if(e.append(t),f(this,Sc)){const a=document.createElement("time");a.className="popupDate",a.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),a.setAttribute("data-l10n-args",JSON.stringify({dateObj:f(this,Sc).valueOf()})),a.dateTime=f(this,Sc).toISOString(),t.append(a)}nT({html:f(this,st,Ix)||f(this,Pa).str,dir:(s=f(this,Pa))==null?void 0:s.dir,className:"popupContent"},e),f(this,Rn).append(e)}updateEdited({rect:e,popup:t,deleted:n}){var s;if(f(this,Gs)){n?(this.remove(),N(this,Cc,null)):t&&(t.deleted?this.remove():(j(this,st,R1).call(this),N(this,Cc,t.text))),e&&(N(this,Wo,null),j(this,st,_1).call(this),j(this,st,N1).call(this));return}if(n||t!=null&&t.deleted){this.remove();return}j(this,st,Dx).call(this),f(this,wd)||N(this,wd,{contentsObj:f(this,Pa),richText:f(this,Xo)}),e&&N(this,Yo,null),t&&t.text&&(N(this,Xo,j(this,st,Q5).call(this,t.text)),N(this,Sc,Pg.toDateObject(t.date)),N(this,Pa,null)),(s=f(this,Vs))==null||s.remove(),N(this,Vs,null)}resetEdited(){var e;f(this,wd)&&({contentsObj:Kn(this,Pa)._,richText:Kn(this,Xo)._}=f(this,wd),N(this,wd,null),(e=f(this,Vs))==null||e.remove(),N(this,Vs,null),N(this,Yo,null))}remove(){var e,t,n;if((e=f(this,$o))==null||e.abort(),N(this,$o,null),(t=f(this,Vs))==null||t.remove(),N(this,Vs,null),N(this,Ac,!1),N(this,La,!1),(n=f(this,oi))==null||n.remove(),N(this,oi,null),this.trigger)for(const s of this.trigger)s.classList.remove("popupTriggerArea")}forceHide(){N(this,Ac,this.isVisible),f(this,Ac)&&(f(this,Rn).hidden=!0)}maybeShow(){f(this,Gs)||(j(this,st,Dx).call(this),f(this,Ac)&&(f(this,Vs)||j(this,st,Lx).call(this),N(this,Ac,!1),f(this,Rn).hidden=!1))}get isVisible(){return f(this,Gs)?!1:f(this,Rn).hidden===!1}}Gs=new WeakMap,wc=new WeakMap,Ib=new WeakMap,Pb=new WeakMap,cp=new WeakMap,up=new WeakMap,Rn=new WeakMap,Pa=new WeakMap,Sc=new WeakMap,bd=new WeakMap,dp=new WeakMap,hp=new WeakMap,La=new WeakMap,Vs=new WeakMap,$o=new WeakMap,Yo=new WeakMap,oi=new WeakMap,Wo=new WeakMap,Ec=new WeakMap,qy=new WeakMap,Xo=new WeakMap,fp=new WeakMap,wd=new WeakMap,Ac=new WeakMap,Oi=new WeakMap,Cc=new WeakMap,st=new WeakSet,Dx=function(){var t;if(f(this,$o))return;N(this,$o,new AbortController);const{signal:e}=f(this,$o);for(const n of this.trigger)n.addEventListener("click",f(this,cp),{signal:e}),n.addEventListener("pointerenter",f(this,Pb),{signal:e}),n.addEventListener("pointerleave",f(this,Ib),{signal:e}),n.classList.add("popupTriggerArea");for(const n of f(this,bd))(t=n.container)==null||t.addEventListener("keydown",f(this,wc),{signal:e})},_1=function(){const e=f(this,bd).find(t=>t.hasCommentButton);e&&N(this,Wo,e._normalizePoint(e.commentButtonPosition))},N1=function(){if(f(this,Oi).extraPopupElement&&!f(this,Oi).editor)return;this.renderCommentButton();const[e,t]=f(this,Wo),{style:n}=f(this,oi);n.left=`calc(${e}%)`,n.top=`calc(${t}% - var(--comment-button-dim))`},R1=function(){f(this,Oi).extraPopupElement||(this.renderCommentButton(),f(this,oi).style.backgroundColor=this.commentButtonColor||"")},Ix=function(){const e=f(this,Xo),t=f(this,Pa);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&f(this,Xo).html||null},M1=function(){var e,t,n;return((n=(t=(e=f(this,st,Ix))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},K5=function(){var e,t,n;return((n=(t=(e=f(this,st,Ix))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},Q5=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},s={style:{color:f(this,st,K5),fontSize:f(this,st,M1)?`calc(${f(this,st,M1)}px * var(--total-scale-factor))`:""}};for(const a of e.split(`
`))t.push({name:"span",value:a,attributes:s});return n},Z5=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&f(this,La))&&j(this,st,Px).call(this)},e4=function(){if(f(this,Yo)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:s,pageY:a}}}=f(this,dp);let o=!!f(this,hp),c=o?f(this,hp):f(this,qy);for(const A of f(this,bd))if(!c||Me.intersect(A.data.rect,c)!==null){c=A.data.rect,o=!0;break}const u=Me.normalizeRect([c[0],e[3]-c[1]+e[1],c[2],e[3]-c[3]+e[1]]),p=o?c[2]-c[0]+5:0,y=u[0]+p,v=u[1];N(this,Yo,[100*(y-s)/t,100*(v-a)/n]);const{style:w}=f(this,Rn);w.left=`${f(this,Yo)[0]}%`,w.top=`${f(this,Yo)[1]}%`},Px=function(){if(f(this,Gs)){f(this,Gs).toggleCommentPopup(this,!1);return}N(this,La,!f(this,La)),f(this,La)?(j(this,st,Lx).call(this),f(this,Rn).addEventListener("click",f(this,cp)),f(this,Rn).addEventListener("keydown",f(this,wc))):(j(this,st,k1).call(this),f(this,Rn).removeEventListener("click",f(this,cp)),f(this,Rn).removeEventListener("keydown",f(this,wc)))},Lx=function(){f(this,Vs)||this.render(),this.isVisible?f(this,La)&&f(this,Rn).classList.add("focused"):(j(this,st,e4).call(this),f(this,Rn).hidden=!1,f(this,Rn).style.zIndex=parseInt(f(this,Rn).style.zIndex)+1e3)},k1=function(){f(this,Rn).classList.remove("focused"),!(f(this,La)||!this.isVisible)&&(f(this,Rn).hidden=!0,f(this,Rn).style.zIndex=parseInt(f(this,Rn).style.zIndex)-1e3)};class t4 extends Sn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=Je.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var $y;class J7 extends Sn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});P(this,$y,null)}render(){this.container.classList.add("lineAnnotation");const{data:t,width:n,height:s}=this,a=this.svgFactory.create(n,s,!0),o=N(this,$y,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),o.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),o.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),o.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),o.setAttribute("stroke-width",t.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),a.append(o),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,$y)}addHighlightArea(){this.container.classList.add("highlightArea")}}$y=new WeakMap;var Yy;class K7 extends Sn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});P(this,Yy,null)}render(){this.container.classList.add("squareAnnotation");const{data:t,width:n,height:s}=this,a=this.svgFactory.create(n,s,!0),o=t.borderStyle.width,c=N(this,Yy,this.svgFactory.createElement("svg:rect"));return c.setAttribute("x",o/2),c.setAttribute("y",o/2),c.setAttribute("width",n-o),c.setAttribute("height",s-o),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,Yy)}addHighlightArea(){this.container.classList.add("highlightArea")}}Yy=new WeakMap;var Wy;class Q7 extends Sn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});P(this,Wy,null)}render(){this.container.classList.add("circleAnnotation");const{data:t,width:n,height:s}=this,a=this.svgFactory.create(n,s,!0),o=t.borderStyle.width,c=N(this,Wy,this.svgFactory.createElement("svg:ellipse"));return c.setAttribute("cx",n/2),c.setAttribute("cy",s/2),c.setAttribute("rx",n/2-o/2),c.setAttribute("ry",s/2-o/2),c.setAttribute("stroke-width",o||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),a.append(c),this.container.append(a),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,Wy)}addHighlightArea(){this.container.classList.add("highlightArea")}}Wy=new WeakMap;var Xy;class n4 extends Sn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});P(this,Xy,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:s,popupRef:a},width:o,height:c}=this;if(!n)return this.container;const u=this.svgFactory.create(o,c,!0);let d=[];for(let y=0,v=n.length;y<v;y+=2){const w=n[y]-t[0],A=t[3]-n[y+1];d.push(`${w},${A}`)}d=d.join(" ");const p=N(this,Xy,this.svgFactory.createElement(this.svgElementName));return p.setAttribute("points",d),p.setAttribute("stroke-width",s.width||1),p.setAttribute("stroke","transparent"),p.setAttribute("fill","transparent"),u.append(p),this.container.append(u),!a&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return f(this,Xy)}addHighlightArea(){this.container.classList.add("highlightArea")}}Xy=new WeakMap;class Z7 extends n4{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class eY extends Sn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Jy,Sd,Ky,D1;class cT extends Sn{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});P(this,Ky);P(this,Jy,null);P(this,Sd,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Je.HIGHLIGHT:Je.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:s,borderStyle:a,popupRef:o}}=this,{transform:c,width:u,height:d}=j(this,Ky,D1).call(this,n,t),p=this.svgFactory.create(u,d,!0),y=N(this,Jy,this.svgFactory.createElement("svg:g"));p.append(y),y.setAttribute("stroke-width",a.width||1),y.setAttribute("stroke-linecap","round"),y.setAttribute("stroke-linejoin","round"),y.setAttribute("stroke-miterlimit",10),y.setAttribute("stroke","transparent"),y.setAttribute("fill","transparent"),y.setAttribute("transform",c);for(let v=0,w=s.length;v<w;v++){const A=this.svgFactory.createElement(this.svgElementName);f(this,Sd).push(A),A.setAttribute("points",s[v].join(",")),y.append(A)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(p),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:s,rect:a}=t,o=f(this,Jy);if(n>=0&&o.setAttribute("stroke-width",n||1),s)for(let c=0,u=f(this,Sd).length;c<u;c++)f(this,Sd)[c].setAttribute("points",s[c].join(","));if(a){const{transform:c,width:u,height:d}=j(this,Ky,D1).call(this,this.data.rotation,a);o.parentElement.setAttribute("viewBox",`0 0 ${u} ${d}`),o.setAttribute("transform",c)}}getElementsToTriggerPopup(){return f(this,Sd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Jy=new WeakMap,Sd=new WeakMap,Ky=new WeakSet,D1=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class i4 extends Sn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Je.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const n=document.createElement("mark");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class tY extends Sn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class nY extends Sn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const n=document.createElement("u");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class iY extends Sn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const n=document.createElement("s");n.classList.add("overlaidText"),n.textContent=e,this.container.append(n)}return this.container}}class s4 extends Sn{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Je.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Qy,Zy,I1;class sY extends Sn{constructor(t){var s;super(t,{isRenderable:!0});P(this,Zy);P(this,Qy,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(s=this.linkService.eventBus)==null||s.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let s;n.hasAppearance||n.fillAlpha===0?s=document.createElement("div"):(s=document.createElement("img"),s.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(s.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),s.addEventListener("dblclick",j(this,Zy,I1).bind(this)),N(this,Qy,s);const{isMac:a}=mi.platform;return t.addEventListener("keydown",o=>{o.key==="Enter"&&(a?o.metaKey:o.ctrlKey)&&j(this,Zy,I1).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():s.classList.add("popupTriggerArea"),t.append(s),t}getElementsToTriggerPopup(){return f(this,Qy)}addHighlightArea(){this.container.classList.add("highlightArea")}}Qy=new WeakMap,Zy=new WeakSet,I1=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var pp,Ed,mp,Tc,e0,Ad,Kc,P1,L1,gp;let uT=(gp=class{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:s,page:a,viewport:o,structTreeLayer:c,commentManager:u,linkService:d,annotationStorage:p}){P(this,Kc);P(this,pp,null);P(this,Ed,null);P(this,mp,null);P(this,Tc,new Map);P(this,e0,null);P(this,Ad,null);this.div=e,N(this,pp,t),N(this,Ed,n),N(this,e0,c||null),N(this,Ad,d||null),N(this,mp,p||new iT),this.page=a,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=s,this._commentManager=u||null}hasEditableAnnotations(){return f(this,Tc).size>0}async render(e){var o,c,u;const{annotations:t}=e,n=this.div;Wc(n,this.viewport);const s=new Map,a={data:null,layer:n,linkService:f(this,Ad),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new jg,annotationStorage:f(this,mp),enableComment:e.enableComment===!0,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const d of t){if(d.noHTML)continue;const p=d.annotationType===Fn.POPUP;if(p){const w=s.get(d.id);if(!w)continue;a.elements=w}else if(d.rect[2]===d.rect[0]||d.rect[3]===d.rect[1])continue;a.data=d;const y=hD.create(a);if(!y.isRenderable)continue;if(!p&&d.popupRef){const w=s.get(d.popupRef);w?w.push(y):s.set(d.popupRef,[y])}const v=y.render();d.hidden&&(v.style.visibility="hidden"),await j(this,Kc,P1).call(this,v,d.id,a.elements),(c=(o=y.extraPopupElement)==null?void 0:o.popup)==null||c.renderCommentButton(),y._isEditable&&(f(this,Tc).set(y.data.id,y),(u=this._annotationEditorUIManager)==null||u.renderAnnotationElement(y))}j(this,Kc,L1).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:f(this,Ad),svgFactory:new jg,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=gp._defaultBorderStyle),t.data=n;const s=hD.create(t);if(!s.isRenderable)continue;const a=s.render();await j(this,Kc,P1).call(this,a,n.id,null)}}update({viewport:e}){const t=this.div;this.viewport=e,Wc(t,{rotation:e.rotation}),j(this,Kc,L1).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(f(this,Tc).values())}getEditableAnnotation(e){return f(this,Tc).get(e)}addFakeAnnotation(e){var c;const{div:t}=this,{id:n,rotation:s}=e,a=new z7({data:{id:n,rect:e.getPDFRect(),rotation:s},editor:e,layer:t,parent:this,enableComment:!!this._commentManager,linkService:f(this,Ad),annotationStorage:f(this,mp)}),o=a.render();return t.append(o),(c=f(this,pp))==null||c.moveElementInDOM(t,o,o,!1),a.createOrUpdatePopup(),a}static get _defaultBorderStyle(){return nt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Oh.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}},pp=new WeakMap,Ed=new WeakMap,mp=new WeakMap,Tc=new WeakMap,e0=new WeakMap,Ad=new WeakMap,Kc=new WeakSet,P1=async function(e,t,n){var c,u;const s=e.firstChild||e,a=s.id=`${eT}${t}`,o=await((c=f(this,e0))==null?void 0:c.getAriaAttributes(a));if(o)for(const[d,p]of o)s.setAttribute(d,p);n?n.at(-1).container.after(e):(this.div.append(e),(u=f(this,pp))==null||u.moveElementInDOM(this.div,e,s,!1))},L1=function(){var t;if(!f(this,Ed))return;const e=this.div;for(const[n,s]of f(this,Ed)){const a=e.querySelector(`[data-annotation-id="${n}"]`);if(!a)continue;s.className="annotationContent";const{firstChild:o}=a;o?o.nodeName==="CANVAS"?o.replaceWith(s):o.classList.contains("annotationContent")?o.after(s):o.before(s):a.append(s);const c=f(this,Tc).get(n);c&&(c._hasNoCanvas?((t=this._annotationEditorUIManager)==null||t.setMissingCanvas(n,a.id,s),c._hasNoCanvas=!1):c.canvas=s)}f(this,Ed).clear()},gp);const cx=/\r\n?|\n/g;var qs,t0,Cd,$s,Wn,r4,a4,o4,Fx,al,Ux,jx,l4,U1,c4;const un=class un extends sn{constructor(t){super({...t,name:"freeTextEditor"});P(this,Wn);P(this,qs,"");P(this,t0,`${this.id}-editor`);P(this,Cd,null);P(this,$s);ye(this,"_colorPicker",null);this.color=t.color||un._defaultColor||sn._defaultLineColor,N(this,$s,t.fontSize||un._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static get _keyboardManager(){const t=un.prototype,n=o=>o.isEmpty(),s=Xc.TRANSLATE_SMALL,a=Xc.TRANSLATE_BIG;return nt(this,"_keyboardManager",new D0([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-a,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[a,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-a],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,a],checker:n}]]))}static initialize(t,n){sn.initialize(t,n);const s=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(s.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case pt.FREETEXT_SIZE:un._defaultFontSize=n;break;case pt.FREETEXT_COLOR:un._defaultColor=n;break}}updateParams(t,n){switch(t){case pt.FREETEXT_SIZE:j(this,Wn,r4).call(this,n);break;case pt.FREETEXT_COLOR:j(this,Wn,a4).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[pt.FREETEXT_SIZE,un._defaultFontSize],[pt.FREETEXT_COLOR,un._defaultColor||sn._defaultLineColor]]}get propertiesToUpdate(){return[[pt.FREETEXT_SIZE,f(this,$s)],[pt.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new mb(this)),[["colorPicker",this._colorPicker]]}get colorType(){return pt.FREETEXT_COLOR}onUpdatedColor(){var t;this.editorDiv.style.color=this.color,(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-un._internalPadding*t,-(un._internalPadding+f(this,$s))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),N(this,Cd,new AbortController);const t=this._uiManager.combinedSignal(f(this,Cd));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t}),!0}disableEditMode(){var t;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",f(this,t0)),this._isDraggable=!0,(t=f(this,Cd))==null||t.abort(),N(this,Cd,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=f(this,qs),n=N(this,qs,j(this,Wn,o4).call(this).trimEnd());if(t===n)return;const s=a=>{if(N(this,qs,a),!a){this.remove();return}j(this,Wn,jx).call(this),this._uiManager.rebuild(this),j(this,Wn,Fx).call(this)};this.addCommands({cmd:()=>{s(n)},undo:()=>{s(t)},mustExec:!1}),j(this,Wn,Fx).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){un._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let t,n;(this._isCopy||this.annotationElementId)&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",f(this,t0)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:s}=this.editorDiv;if(s.fontSize=`calc(${f(this,$s)}px * var(--total-scale-factor))`,s.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[a,o]=this.parentDimensions;if(this.annotationElementId){const{position:c}=this._initialData;let[u,d]=this.getInitialTranslation();[u,d]=this.pageTranslationToScreen(u,d);const[p,y]=this.pageDimensions,[v,w]=this.pageTranslation;let A,C;switch(this.rotation){case 0:A=t+(c[0]-v)/p,C=n+this.height-(c[1]-w)/y;break;case 90:A=t+(c[0]-v)/p,C=n-(c[1]-w)/y,[u,d]=[d,-u];break;case 180:A=t-this.width+(c[0]-v)/p,C=n-(c[1]-w)/y,[u,d]=[-u,-d];break;case 270:A=t+(c[0]-v-this.height*y)/p,C=n+(c[1]-w-this.width*p)/y,[u,d]=[-d,u];break}this.setAt(A*a,C*o,u,d)}else this._moveAfterPaste(t,n);j(this,Wn,jx).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var A,C,T;const n=t.clipboardData||window.clipboardData,{types:s}=n;if(s.length===1&&s[0]==="text/plain")return;t.preventDefault();const a=j(A=un,al,U1).call(A,n.getData("text")||"").replaceAll(cx,`
`);if(!a)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const c=o.getRangeAt(0);if(!a.includes(`
`)){c.insertNode(document.createTextNode(a)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:u,startOffset:d}=c,p=[],y=[];if(u.nodeType===Node.TEXT_NODE){const _=u.parentElement;if(y.push(u.nodeValue.slice(d).replaceAll(cx,"")),_!==this.editorDiv){let D=p;for(const R of this.editorDiv.childNodes){if(R===_){D=y;continue}D.push(j(C=un,al,Ux).call(C,R))}}p.push(u.nodeValue.slice(0,d).replaceAll(cx,""))}else if(u===this.editorDiv){let _=p,D=0;for(const R of this.editorDiv.childNodes)D++===d&&(_=y),_.push(j(T=un,al,Ux).call(T,R))}N(this,qs,`${p.join(`
`)}${a}${y.join(`
`)}`),j(this,Wn,jx).call(this);const v=new Range;let w=Math.sumPrecise(p.map(_=>_.length));for(const{firstChild:_}of this.editorDiv.childNodes)if(_.nodeType===Node.TEXT_NODE){const D=_.nodeValue.length;if(w<=D){v.setStart(_,w),v.setEnd(_,w);break}w-=D}o.removeAllRanges(),o.addRange(v)}get contentDiv(){return this.editorDiv}getPDFRect(){const t=un._internalPadding*this.parentScale;return this.getRect(t,t)}static async deserialize(t,n,s){var c;let a=null;if(t instanceof t4){const{data:{defaultAppearanceData:{fontSize:u,fontColor:d},rect:p,rotation:y,id:v,popupRef:w,richText:A,contentsObj:C,creationDate:T,modificationDate:_},textContent:D,textPosition:R,parent:{page:{pageNumber:L}}}=t;if(!D||D.length===0)return null;a=t={annotationType:Je.FREETEXT,color:Array.from(d),fontSize:u,value:D.join(`
`),position:R,pageIndex:L-1,rect:p.slice(0),rotation:y,annotationElementId:v,id:v,deleted:!1,popupRef:w,comment:(C==null?void 0:C.str)||null,richText:A,creationDate:T,modificationDate:_}}const o=await super.deserialize(t,n,s);return N(o,$s,t.fontSize),o.color=Me.makeHexColor(...t.color),N(o,qs,j(c=un,al,U1).call(c,t.value)),o._initialData=a,t.comment&&o.setCommentData(t),o}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=sn._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),s=Object.assign(super.serialize(t),{color:n,fontSize:f(this,$s),value:j(this,Wn,l4).call(this)});return this.addComment(s),t?(s.isCopy=!0,s):this.annotationElementId&&!j(this,Wn,c4).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(!n)return null;const{style:s}=n;s.fontSize=`calc(${f(this,$s)}px * var(--total-scale-factor))`,s.color=this.color,n.replaceChildren();for(const a of f(this,qs).split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),n.append(o)}return t.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:f(this,qs)}}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};qs=new WeakMap,t0=new WeakMap,Cd=new WeakMap,$s=new WeakMap,Wn=new WeakSet,r4=function(t){const n=a=>{this.editorDiv.style.fontSize=`calc(${a}px * var(--total-scale-factor))`,this.translate(0,-(a-f(this,$s))*this.parentScale),N(this,$s,a),j(this,Wn,Fx).call(this)},s=f(this,$s);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},a4=function(t){const n=a=>{this.color=a,this.onUpdatedColor()},s=this.color;this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},o4=function(){var s;const t=[];this.editorDiv.normalize();let n=null;for(const a of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&a.nodeName==="BR"||(t.push(j(s=un,al,Ux).call(s,a)),n=a);return t.join(`
`)},Fx=function(){const[t,n]=this.parentDimensions;let s;if(this.isAttachedToDOM)s=this.div.getBoundingClientRect();else{const{currentLayer:a,div:o}=this,c=o.style.display,u=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",a.div.append(this.div),s=o.getBoundingClientRect(),o.remove(),o.style.display=c,o.classList.toggle("hidden",u)}this.rotation%180===this.parentRotation%180?(this.width=s.width/t,this.height=s.height/n):(this.width=s.height/t,this.height=s.width/n),this.fixAndSetPosition()},al=new WeakSet,Ux=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(cx,"")},jx=function(){if(this.editorDiv.replaceChildren(),!!f(this,qs))for(const t of f(this,qs).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},l4=function(){return f(this,qs).replaceAll(""," ")},U1=function(t){return t.replaceAll(" ","")},c4=function(t){const{value:n,fontSize:s,color:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||t.value!==n||t.fontSize!==s||t.color.some((c,u)=>c!==a[u])||t.pageIndex!==o},P(un,al),ye(un,"_freeTextDefaultContent",""),ye(un,"_internalPadding",0),ye(un,"_defaultColor",null),ye(un,"_defaultFontSize",10),ye(un,"_type","freetext"),ye(un,"_editorType",Je.FREETEXT);let F1=un;class Re{toSVGPath(){tn("Abstract method `toSVGPath` must be implemented.")}get box(){tn("Abstract getter `box` must be implemented.")}serialize(e,t){tn("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,s,a,o){o||(o=new Float32Array(e.length));for(let c=0,u=e.length;c<u;c+=2)o[c]=t+e[c]*s,o[c+1]=n+e[c+1]*a;return o}static _rescaleAndSwap(e,t,n,s,a,o){o||(o=new Float32Array(e.length));for(let c=0,u=e.length;c<u;c+=2)o[c]=t+e[c+1]*s,o[c+1]=n+e[c]*a;return o}static _translate(e,t,n,s){s||(s=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)s[a]=t+e[a],s[a+1]=n+e[a+1];return s}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,s,a){switch(a){case 90:return[1-t/n,e/s];case 180:return[1-e/n,1-t/s];case 270:return[t/n,1-e/s];default:return[e/n,t/s]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,s,a,o){return[(e+5*n)/6,(t+5*s)/6,(5*n+a)/6,(5*s+o)/6,(n+a)/2,(s+o)/2]}}ye(Re,"PRECISION",1e-4);var Ys,na,yp,vp,Fa,ot,Td,_d,n0,i0,xp,bp,_c,s0,Lb,Fb,ni,yg,u4,d4,h4,f4,p4,m4;const So=class So{constructor({x:e,y:t},n,s,a,o,c=0){P(this,ni);P(this,Ys);P(this,na,[]);P(this,yp);P(this,vp);P(this,Fa,[]);P(this,ot,new Float32Array(18));P(this,Td);P(this,_d);P(this,n0);P(this,i0);P(this,xp);P(this,bp);P(this,_c,[]);N(this,Ys,n),N(this,bp,a*s),N(this,vp,o),f(this,ot).set([NaN,NaN,NaN,NaN,e,t],6),N(this,yp,c),N(this,i0,f(So,s0)*s),N(this,n0,f(So,Fb)*s),N(this,xp,s),f(this,_c).push(e,t)}isEmpty(){return isNaN(f(this,ot)[8])}add({x:e,y:t}){var z;N(this,Td,e),N(this,_d,t);const[n,s,a,o]=f(this,Ys);let[c,u,d,p]=f(this,ot).subarray(8,12);const y=e-d,v=t-p,w=Math.hypot(y,v);if(w<f(this,n0))return!1;const A=w-f(this,i0),C=A/w,T=C*y,_=C*v;let D=c,R=u;c=d,u=p,d+=T,p+=_,(z=f(this,_c))==null||z.push(e,t);const L=-_/A,F=T/A,U=L*f(this,bp),M=F*f(this,bp);return f(this,ot).set(f(this,ot).subarray(2,8),0),f(this,ot).set([d+U,p+M],4),f(this,ot).set(f(this,ot).subarray(14,18),12),f(this,ot).set([d-U,p-M],16),isNaN(f(this,ot)[6])?(f(this,Fa).length===0&&(f(this,ot).set([c+U,u+M],2),f(this,Fa).push(NaN,NaN,NaN,NaN,(c+U-n)/a,(u+M-s)/o),f(this,ot).set([c-U,u-M],14),f(this,na).push(NaN,NaN,NaN,NaN,(c-U-n)/a,(u-M-s)/o)),f(this,ot).set([D,R,c,u,d,p],6),!this.isEmpty()):(f(this,ot).set([D,R,c,u,d,p],6),Math.abs(Math.atan2(R-u,D-c)-Math.atan2(_,T))<Math.PI/2?([c,u,d,p]=f(this,ot).subarray(2,6),f(this,Fa).push(NaN,NaN,NaN,NaN,((c+d)/2-n)/a,((u+p)/2-s)/o),[c,u,D,R]=f(this,ot).subarray(14,18),f(this,na).push(NaN,NaN,NaN,NaN,((D+c)/2-n)/a,((R+u)/2-s)/o),!0):([D,R,c,u,d,p]=f(this,ot).subarray(0,6),f(this,Fa).push(((D+5*c)/6-n)/a,((R+5*u)/6-s)/o,((5*c+d)/6-n)/a,((5*u+p)/6-s)/o,((c+d)/2-n)/a,((u+p)/2-s)/o),[d,p,c,u,D,R]=f(this,ot).subarray(12,18),f(this,na).push(((D+5*c)/6-n)/a,((R+5*u)/6-s)/o,((5*c+d)/6-n)/a,((5*u+p)/6-s)/o,((c+d)/2-n)/a,((u+p)/2-s)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const e=f(this,Fa),t=f(this,na);if(isNaN(f(this,ot)[6])&&!this.isEmpty())return j(this,ni,u4).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let s=6;s<e.length;s+=6)isNaN(e[s])?n.push(`L${e[s+4]} ${e[s+5]}`):n.push(`C${e[s]} ${e[s+1]} ${e[s+2]} ${e[s+3]} ${e[s+4]} ${e[s+5]}`);j(this,ni,h4).call(this,n);for(let s=t.length-6;s>=6;s-=6)isNaN(t[s])?n.push(`L${t[s+4]} ${t[s+5]}`):n.push(`C${t[s]} ${t[s+1]} ${t[s+2]} ${t[s+3]} ${t[s+4]} ${t[s+5]}`);return j(this,ni,d4).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,s,a,o){return new g4(e,t,n,s,a,o)}getOutlines(){var y;const e=f(this,Fa),t=f(this,na),n=f(this,ot),[s,a,o,c]=f(this,Ys),u=new Float32Array((((y=f(this,_c))==null?void 0:y.length)??0)+2);for(let v=0,w=u.length-2;v<w;v+=2)u[v]=(f(this,_c)[v]-s)/o,u[v+1]=(f(this,_c)[v+1]-a)/c;if(u[u.length-2]=(f(this,Td)-s)/o,u[u.length-1]=(f(this,_d)-a)/c,isNaN(n[6])&&!this.isEmpty())return j(this,ni,f4).call(this,u);const d=new Float32Array(f(this,Fa).length+24+f(this,na).length);let p=e.length;for(let v=0;v<p;v+=2){if(isNaN(e[v])){d[v]=d[v+1]=NaN;continue}d[v]=e[v],d[v+1]=e[v+1]}p=j(this,ni,m4).call(this,d,p);for(let v=t.length-6;v>=6;v-=6)for(let w=0;w<6;w+=2){if(isNaN(t[v+w])){d[p]=d[p+1]=NaN,p+=2;continue}d[p]=t[v+w],d[p+1]=t[v+w+1],p+=2}return j(this,ni,p4).call(this,d,p),this.newFreeDrawOutline(d,u,f(this,Ys),f(this,xp),f(this,yp),f(this,vp))}};Ys=new WeakMap,na=new WeakMap,yp=new WeakMap,vp=new WeakMap,Fa=new WeakMap,ot=new WeakMap,Td=new WeakMap,_d=new WeakMap,n0=new WeakMap,i0=new WeakMap,xp=new WeakMap,bp=new WeakMap,_c=new WeakMap,s0=new WeakMap,Lb=new WeakMap,Fb=new WeakMap,ni=new WeakSet,yg=function(){const e=f(this,ot).subarray(4,6),t=f(this,ot).subarray(16,18),[n,s,a,o]=f(this,Ys);return[(f(this,Td)+(e[0]-t[0])/2-n)/a,(f(this,_d)+(e[1]-t[1])/2-s)/o,(f(this,Td)+(t[0]-e[0])/2-n)/a,(f(this,_d)+(t[1]-e[1])/2-s)/o]},u4=function(){const[e,t,n,s]=f(this,Ys),[a,o,c,u]=j(this,ni,yg).call(this);return`M${(f(this,ot)[2]-e)/n} ${(f(this,ot)[3]-t)/s} L${(f(this,ot)[4]-e)/n} ${(f(this,ot)[5]-t)/s} L${a} ${o} L${c} ${u} L${(f(this,ot)[16]-e)/n} ${(f(this,ot)[17]-t)/s} L${(f(this,ot)[14]-e)/n} ${(f(this,ot)[15]-t)/s} Z`},d4=function(e){const t=f(this,na);e.push(`L${t[4]} ${t[5]} Z`)},h4=function(e){const[t,n,s,a]=f(this,Ys),o=f(this,ot).subarray(4,6),c=f(this,ot).subarray(16,18),[u,d,p,y]=j(this,ni,yg).call(this);e.push(`L${(o[0]-t)/s} ${(o[1]-n)/a} L${u} ${d} L${p} ${y} L${(c[0]-t)/s} ${(c[1]-n)/a}`)},f4=function(e){const t=f(this,ot),[n,s,a,o]=f(this,Ys),[c,u,d,p]=j(this,ni,yg).call(this),y=new Float32Array(36);return y.set([NaN,NaN,NaN,NaN,(t[2]-n)/a,(t[3]-s)/o,NaN,NaN,NaN,NaN,(t[4]-n)/a,(t[5]-s)/o,NaN,NaN,NaN,NaN,c,u,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,(t[16]-n)/a,(t[17]-s)/o,NaN,NaN,NaN,NaN,(t[14]-n)/a,(t[15]-s)/o],0),this.newFreeDrawOutline(y,e,f(this,Ys),f(this,xp),f(this,yp),f(this,vp))},p4=function(e,t){const n=f(this,na);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},m4=function(e,t){const n=f(this,ot).subarray(4,6),s=f(this,ot).subarray(16,18),[a,o,c,u]=f(this,Ys),[d,p,y,v]=j(this,ni,yg).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-a)/c,(n[1]-o)/u,NaN,NaN,NaN,NaN,d,p,NaN,NaN,NaN,NaN,y,v,NaN,NaN,NaN,NaN,(s[0]-a)/c,(s[1]-o)/u],t),t+=24},P(So,s0,8),P(So,Lb,2),P(So,Fb,f(So,s0)+f(So,Lb));let gb=So;var wp,Nd,Jo,r0,Ws,a0,jn,Ub,y4;class g4 extends Re{constructor(t,n,s,a,o,c){super();P(this,Ub);P(this,wp);P(this,Nd,new Float32Array(4));P(this,Jo);P(this,r0);P(this,Ws);P(this,a0);P(this,jn);N(this,jn,t),N(this,Ws,n),N(this,wp,s),N(this,a0,a),N(this,Jo,o),N(this,r0,c),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],j(this,Ub,y4).call(this,c);const[u,d,p,y]=f(this,Nd);for(let v=0,w=t.length;v<w;v+=2)t[v]=(t[v]-u)/p,t[v+1]=(t[v+1]-d)/y;for(let v=0,w=n.length;v<w;v+=2)n[v]=(n[v]-u)/p,n[v+1]=(n[v+1]-d)/y}toSVGPath(){const t=[`M${f(this,jn)[4]} ${f(this,jn)[5]}`];for(let n=6,s=f(this,jn).length;n<s;n+=6){if(isNaN(f(this,jn)[n])){t.push(`L${f(this,jn)[n+4]} ${f(this,jn)[n+5]}`);continue}t.push(`C${f(this,jn)[n]} ${f(this,jn)[n+1]} ${f(this,jn)[n+2]} ${f(this,jn)[n+3]} ${f(this,jn)[n+4]} ${f(this,jn)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,s,a],o){const c=s-t,u=a-n;let d,p;switch(o){case 0:d=Re._rescale(f(this,jn),t,a,c,-u),p=Re._rescale(f(this,Ws),t,a,c,-u);break;case 90:d=Re._rescaleAndSwap(f(this,jn),t,n,c,u),p=Re._rescaleAndSwap(f(this,Ws),t,n,c,u);break;case 180:d=Re._rescale(f(this,jn),s,n,-c,u),p=Re._rescale(f(this,Ws),s,n,-c,u);break;case 270:d=Re._rescaleAndSwap(f(this,jn),s,a,-c,-u),p=Re._rescaleAndSwap(f(this,Ws),s,a,-c,-u);break}return{outline:Array.from(d),points:[Array.from(p)]}}get box(){return f(this,Nd)}newOutliner(t,n,s,a,o,c=0){return new gb(t,n,s,a,o,c)}getNewOutline(t,n){const[s,a,o,c]=f(this,Nd),[u,d,p,y]=f(this,wp),v=o*p,w=c*y,A=s*p+u,C=a*y+d,T=this.newOutliner({x:f(this,Ws)[0]*v+A,y:f(this,Ws)[1]*w+C},f(this,wp),f(this,a0),t,f(this,r0),n??f(this,Jo));for(let _=2;_<f(this,Ws).length;_+=2)T.add({x:f(this,Ws)[_]*v+A,y:f(this,Ws)[_+1]*w+C});return T.getOutlines()}}wp=new WeakMap,Nd=new WeakMap,Jo=new WeakMap,r0=new WeakMap,Ws=new WeakMap,a0=new WeakMap,jn=new WeakMap,Ub=new WeakSet,y4=function(t){const n=f(this,jn);let s=n[4],a=n[5];const o=[s,a,s,a];let c=s,u=a,d=s,p=a;const y=t?Math.max:Math.min,v=new Float32Array(4);for(let A=6,C=n.length;A<C;A+=6){const T=n[A+4],_=n[A+5];isNaN(n[A])?(Me.pointBoundingBox(T,_,o),u>_?(c=T,u=_):u===_&&(c=y(c,T)),p<_?(d=T,p=_):p===_&&(d=y(d,T))):(v[0]=v[1]=1/0,v[2]=v[3]=-1/0,Me.bezierBoundingBox(s,a,...n.slice(A,A+6),v),Me.rectBoundingBox(v[0],v[1],v[2],v[3],o),u>v[1]?(c=v[0],u=v[1]):u===v[1]&&(c=y(c,v[0])),p<v[3]?(d=v[2],p=v[3]):p===v[3]&&(d=y(d,v[2]))),s=T,a=_}const w=f(this,Nd);w[0]=o[0]-f(this,Jo),w[1]=o[1]-f(this,Jo),w[2]=o[2]-o[0]+2*f(this,Jo),w[3]=o[3]-o[1]+2*f(this,Jo),this.firstPoint=[c,u],this.lastPoint=[d,p]};var o0,l0,c0,Nc,ia,ns,v4,Bx,x4,b4,B1;class j1{constructor(e,t=0,n=0,s=!0){P(this,ns);P(this,o0);P(this,l0);P(this,c0);P(this,Nc,[]);P(this,ia,[]);const a=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:C,y:T,width:_,height:D}of e){const R=Math.floor((C-t)/o)*o,L=Math.ceil((C+_+t)/o)*o,F=Math.floor((T-t)/o)*o,U=Math.ceil((T+D+t)/o)*o,M=[R,F,U,!0],O=[L,F,U,!1];f(this,Nc).push(M,O),Me.rectBoundingBox(R,F,L,U,a)}const c=a[2]-a[0]+2*n,u=a[3]-a[1]+2*n,d=a[0]-n,p=a[1]-n;let y=s?-1/0:1/0,v=1/0;const w=f(this,Nc).at(s?-1:-2),A=[w[0],w[2]];for(const C of f(this,Nc)){const[T,_,D,R]=C;!R&&s?_<v?(v=_,y=T):_===v&&(y=Math.max(y,T)):R&&!s&&(_<v?(v=_,y=T):_===v&&(y=Math.min(y,T))),C[0]=(T-d)/c,C[1]=(_-p)/u,C[2]=(D-p)/u}N(this,o0,new Float32Array([d,p,c,u])),N(this,l0,[y,v]),N(this,c0,A)}getOutlines(){f(this,Nc).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of f(this,Nc))t[3]?(e.push(...j(this,ns,B1).call(this,t)),j(this,ns,x4).call(this,t)):(j(this,ns,b4).call(this,t),e.push(...j(this,ns,B1).call(this,t)));return j(this,ns,v4).call(this,e)}}o0=new WeakMap,l0=new WeakMap,c0=new WeakMap,Nc=new WeakMap,ia=new WeakMap,ns=new WeakSet,v4=function(e){const t=[],n=new Set;for(const o of e){const[c,u,d]=o;t.push([c,u,o],[c,d,o])}t.sort((o,c)=>o[1]-c[1]||o[0]-c[0]);for(let o=0,c=t.length;o<c;o+=2){const u=t[o][2],d=t[o+1][2];u.push(d),d.push(u),n.add(u),n.add(d)}const s=[];let a;for(;n.size>0;){const o=n.values().next().value;let[c,u,d,p,y]=o;n.delete(o);let v=c,w=u;for(a=[c,d],s.push(a);;){let A;if(n.has(p))A=p;else if(n.has(y))A=y;else break;n.delete(A),[c,u,d,p,y]=A,v!==c&&(a.push(v,w,c,w===u?u:d),v=c),w=w===u?d:u}a.push(v,w)}return new rY(s,f(this,o0),f(this,l0),f(this,c0))},Bx=function(e){const t=f(this,ia);let n=0,s=t.length-1;for(;n<=s;){const a=n+s>>1,o=t[a][0];if(o===e)return a;o<e?n=a+1:s=a-1}return s+1},x4=function([,e,t]){const n=j(this,ns,Bx).call(this,e);f(this,ia).splice(n,0,[e,t])},b4=function([,e,t]){const n=j(this,ns,Bx).call(this,e);for(let s=n;s<f(this,ia).length;s++){const[a,o]=f(this,ia)[s];if(a!==e)break;if(a===e&&o===t){f(this,ia).splice(s,1);return}}for(let s=n-1;s>=0;s--){const[a,o]=f(this,ia)[s];if(a!==e)break;if(a===e&&o===t){f(this,ia).splice(s,1);return}}},B1=function(e){const[t,n,s]=e,a=[[t,n,s]],o=j(this,ns,Bx).call(this,s);for(let c=0;c<o;c++){const[u,d]=f(this,ia)[c];for(let p=0,y=a.length;p<y;p++){const[,v,w]=a[p];if(!(d<=v||w<=u)){if(v>=u){if(w>d)a[p][1]=d;else{if(y===1)return[];a.splice(p,1),p--,y--}continue}a[p][2]=u,w>d&&a.push([t,d,w])}}}return a};var u0,Sp;class rY extends Re{constructor(t,n,s,a){super();P(this,u0);P(this,Sp);N(this,Sp,t),N(this,u0,n),this.firstPoint=s,this.lastPoint=a}toSVGPath(){const t=[];for(const n of f(this,Sp)){let[s,a]=n;t.push(`M${s} ${a}`);for(let o=2;o<n.length;o+=2){const c=n[o],u=n[o+1];c===s?(t.push(`V${u}`),a=u):u===a&&(t.push(`H${c}`),s=c)}t.push("Z")}return t.join(" ")}serialize([t,n,s,a],o){const c=[],u=s-t,d=a-n;for(const p of f(this,Sp)){const y=new Array(p.length);for(let v=0;v<p.length;v+=2)y[v]=t+p[v]*u,y[v+1]=a-p[v+1]*d;c.push(y)}return c}get box(){return f(this,u0)}get classNamesForOutlining(){return["highlightOutline"]}}u0=new WeakMap,Sp=new WeakMap;class O1 extends gb{newFreeDrawOutline(e,t,n,s,a,o){return new aY(e,t,n,s,a,o)}}class aY extends g4{newOutliner(e,t,n,s,a,o=0){return new O1(e,t,n,s,a,o)}}var Ep,d0,Ko,Rd,h0,bs,f0,p0,Md,Xs,Js,Ti,Ap,Cp,Hi,Tp,Mr,m0,it,H1,Ox,w4,S4,E4,z1,Nu,Pr,$h,A4,Hx,zx,C4,T4,_4,N4,R4;const Dt=class Dt extends sn{constructor(t){super({...t,name:"highlightEditor"});P(this,it);P(this,Ep,null);P(this,d0,0);P(this,Ko);P(this,Rd,null);P(this,h0,null);P(this,bs,null);P(this,f0,null);P(this,p0,0);P(this,Md,null);P(this,Xs,null);P(this,Js,null);P(this,Ti,!1);P(this,Ap,null);P(this,Cp,null);P(this,Hi,null);P(this,Tp,"");P(this,Mr);P(this,m0,"");this.color=t.color||Dt._defaultColor,N(this,Mr,t.thickness||Dt._defaultThickness),this.opacity=t.opacity||Dt._defaultOpacity,N(this,Ko,t.boxes||null),N(this,m0,t.methodOfCreation||""),N(this,Tp,t.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",t.highlightId>-1?(N(this,Ti,!0),j(this,it,Ox).call(this,t),j(this,it,Nu).call(this)):f(this,Ko)&&(N(this,Ep,t.anchorNode),N(this,d0,t.anchorOffset),N(this,f0,t.focusNode),N(this,p0,t.focusOffset),j(this,it,H1).call(this),j(this,it,Nu).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}static get _keyboardManager(){const t=Dt.prototype;return nt(this,"_keyboardManager",new D0([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:f(this,Ti)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:f(this,Mr),methodOfCreation:f(this,m0)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var s;sn.initialize(t,n),Dt._defaultColor||(Dt._defaultColor=((s=n.highlightColors)==null?void 0:s.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case pt.HIGHLIGHT_COLOR:Dt._defaultColor=n;break;case pt.HIGHLIGHT_THICKNESS:Dt._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return f(this,Cp)}get commentButtonPosition(){return f(this,Ap)}updateParams(t,n){switch(t){case pt.HIGHLIGHT_COLOR:j(this,it,w4).call(this,n);break;case pt.HIGHLIGHT_THICKNESS:j(this,it,S4).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[pt.HIGHLIGHT_COLOR,Dt._defaultColor],[pt.HIGHLIGHT_THICKNESS,Dt._defaultThickness]]}get propertiesToUpdate(){return[[pt.HIGHLIGHT_COLOR,this.color||Dt._defaultColor],[pt.HIGHLIGHT_THICKNESS,f(this,Mr)||Dt._defaultThickness],[pt.HIGHLIGHT_FREE,f(this,Ti)]]}onUpdatedColor(){var t,n;(t=this.parent)==null||t.drawLayer.updateProperties(f(this,Js),{root:{fill:this.color,"fill-opacity":this.opacity}}),(n=f(this,h0))==null||n.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){return this._uiManager.highlightColors?[["colorPicker",N(this,h0,new Ug({editor:this}))]]:super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(j(this,it,zx).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,j(this,it,zx).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){j(this,it,z1).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(j(this,it,Nu).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let n=!1;this.parent&&!t?j(this,it,z1).call(this):t&&(j(this,it,Nu).call(this,t),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var a,o,c;const{drawLayer:n}=this.parent;let s;f(this,Ti)?(t=(t-this.rotation+360)%360,s=j(a=Dt,Pr,$h).call(a,f(this,Xs).box,t)):s=j(o=Dt,Pr,$h).call(o,[this.x,this.y,this.width,this.height],t),n.updateProperties(f(this,Js),{bbox:s,root:{"data-main-rotation":t}}),n.updateProperties(f(this,Hi),{bbox:j(c=Dt,Pr,$h).call(c,f(this,bs).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();f(this,Tp)&&(t.setAttribute("aria-label",f(this,Tp)),t.setAttribute("role","mark")),f(this,Ti)?t.classList.add("free"):this.div.addEventListener("keydown",j(this,it,A4).bind(this),{signal:this._uiManager._signal});const n=N(this,Md,document.createElement("div"));return t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=f(this,Rd),this.setDims(this.width,this.height),XL(this,f(this,Md),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(f(this,Hi),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(f(this,Hi),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:j(this,it,Hx).call(this,!0);break;case 1:case 3:j(this,it,Hx).call(this,!1);break}}select(){var t;super.select(),f(this,Hi)&&((t=this.parent)==null||t.drawLayer.updateProperties(f(this,Hi),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),f(this,Hi)&&((t=this.parent)==null||t.drawLayer.updateProperties(f(this,Hi),{rootClass:{selected:!1}}),f(this,Ti)||j(this,it,Hx).call(this,!1))}get _mustFixPosition(){return!f(this,Ti)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(f(this,Js),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(f(this,Hi),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:s,x:a,y:o}){const{x:c,y:u,width:d,height:p}=s.getBoundingClientRect(),y=new AbortController,v=t.combinedSignal(y),w=A=>{y.abort(),j(this,Pr,N4).call(this,t,A)};window.addEventListener("blur",w,{signal:v}),window.addEventListener("pointerup",w,{signal:v}),window.addEventListener("pointerdown",bn,{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",sr,{signal:v}),s.addEventListener("pointermove",j(this,Pr,_4).bind(this,t),{signal:v}),this._freeHighlight=new O1({x:a,y:o},[c,u,d,p],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,s){var C,T,_,D;let a=null;if(t instanceof i4){const{data:{quadPoints:R,rect:L,rotation:F,id:U,color:M,opacity:O,popupRef:z,richText:J,contentsObj:G,creationDate:X,modificationDate:ie},parent:{page:{pageNumber:$}}}=t;a=t={annotationType:Je.HIGHLIGHT,color:Array.from(M),opacity:O,quadPoints:R,boxes:null,pageIndex:$-1,rect:L.slice(0),rotation:F,annotationElementId:U,id:U,deleted:!1,popupRef:z,richText:J,comment:(G==null?void 0:G.str)||null,creationDate:X,modificationDate:ie}}else if(t instanceof cT){const{data:{inkLists:R,rect:L,rotation:F,id:U,color:M,borderStyle:{rawWidth:O},popupRef:z,richText:J,contentsObj:G,creationDate:X,modificationDate:ie},parent:{page:{pageNumber:$}}}=t;a=t={annotationType:Je.HIGHLIGHT,color:Array.from(M),thickness:O,inkLists:R,boxes:null,pageIndex:$-1,rect:L.slice(0),rotation:F,annotationElementId:U,id:U,deleted:!1,popupRef:z,richText:J,comment:(G==null?void 0:G.str)||null,creationDate:X,modificationDate:ie}}const{color:o,quadPoints:c,inkLists:u,opacity:d}=t,p=await super.deserialize(t,n,s);p.color=Me.makeHexColor(...o),p.opacity=d||1,u&&N(p,Mr,t.thickness),p._initialData=a,t.comment&&p.setCommentData(t);const[y,v]=p.pageDimensions,[w,A]=p.pageTranslation;if(c){const R=N(p,Ko,[]);for(let L=0;L<c.length;L+=8)R.push({x:(c[L]-w)/y,y:1-(c[L+1]-A)/v,width:(c[L+2]-c[L])/y,height:(c[L+1]-c[L+5])/v});j(C=p,it,H1).call(C),j(T=p,it,Nu).call(T),p.rotate(p.rotation)}else if(u){N(p,Ti,!0);const R=u[0],L={x:R[0]-w,y:v-(R[1]-A)},F=new O1(L,[0,0,y,v],1,f(p,Mr)/2,!0,.001);for(let O=0,z=R.length;O<z;O+=2)L.x=R[O]-w,L.y=v-(R[O+1]-A),F.add(L);const{id:U,clipPathId:M}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:p.color,"fill-opacity":p._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:F.toSVGPath()}},!0,!0);j(_=p,it,Ox).call(_,{highlightOutlines:F.getOutlines(),highlightId:U,clipPathId:M}),j(D=p,it,Nu).call(D),p.rotate(p.parentRotation)}return p}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=sn._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),s=super.serialize(t);return Object.assign(s,{color:n,opacity:this.opacity,thickness:f(this,Mr),quadPoints:j(this,it,C4).call(this),outlines:j(this,it,T4).call(this,s.rect)}),this.addComment(s),this.annotationElementId&&!j(this,it,R4).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}};Ep=new WeakMap,d0=new WeakMap,Ko=new WeakMap,Rd=new WeakMap,h0=new WeakMap,bs=new WeakMap,f0=new WeakMap,p0=new WeakMap,Md=new WeakMap,Xs=new WeakMap,Js=new WeakMap,Ti=new WeakMap,Ap=new WeakMap,Cp=new WeakMap,Hi=new WeakMap,Tp=new WeakMap,Mr=new WeakMap,m0=new WeakMap,it=new WeakSet,H1=function(){const t=new j1(f(this,Ko),.001);N(this,Xs,t.getOutlines()),[this.x,this.y,this.width,this.height]=f(this,Xs).box;const n=new j1(f(this,Ko),.0025,.001,this._uiManager.direction==="ltr");N(this,bs,n.getOutlines());const{firstPoint:s}=f(this,Xs);N(this,Ap,[(s[0]-this.x)/this.width,(s[1]-this.y)/this.height]);const{lastPoint:a}=f(this,bs);N(this,Cp,[(a[0]-this.x)/this.width,(a[1]-this.y)/this.height])},Ox=function({highlightOutlines:t,highlightId:n,clipPathId:s}){var v,w;if(N(this,Xs,t),N(this,bs,t.getNewOutline(f(this,Mr)/2+1.5,.0025)),n>=0)N(this,Js,n),N(this,Rd,s),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),N(this,Hi,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:f(this,bs).box,path:{d:f(this,bs).toSVGPath()}},!0));else if(this.parent){const A=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(f(this,Js),{bbox:j(v=Dt,Pr,$h).call(v,f(this,Xs).box,(A-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(f(this,Hi),{bbox:j(w=Dt,Pr,$h).call(w,f(this,bs).box,A),path:{d:f(this,bs).toSVGPath()}})}const[o,c,u,d]=t.box;switch(this.rotation){case 0:this.x=o,this.y=c,this.width=u,this.height=d;break;case 90:{const[A,C]=this.parentDimensions;this.x=c,this.y=1-o,this.width=u*C/A,this.height=d*A/C;break}case 180:this.x=1-o,this.y=1-c,this.width=u,this.height=d;break;case 270:{const[A,C]=this.parentDimensions;this.x=1-c,this.y=o,this.width=u*C/A,this.height=d*A/C;break}}const{firstPoint:p}=t;N(this,Ap,[(p[0]-o)/u,(p[1]-c)/d]);const{lastPoint:y}=f(this,bs);N(this,Cp,[(y[0]-o)/u,(y[1]-c)/d])},w4=function(t){const n=(o,c)=>{this.color=o,this.opacity=c,this.onUpdatedColor()},s=this.color,a=this.opacity;this.addCommands({cmd:n.bind(this,t,Dt._defaultOpacity),undo:n.bind(this,s,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(t)},!0)},S4=function(t){const n=f(this,Mr),s=a=>{N(this,Mr,a),j(this,it,E4).call(this,a)};this.addCommands({cmd:s.bind(this,t),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:pt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},E4=function(t){f(this,Ti)&&(j(this,it,Ox).call(this,{highlightOutlines:f(this,Xs).getNewOutline(t/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))},z1=function(){f(this,Js)===null||!this.parent||(this.parent.drawLayer.remove(f(this,Js)),N(this,Js,null),this.parent.drawLayer.remove(f(this,Hi)),N(this,Hi,null))},Nu=function(t=this.parent){f(this,Js)===null&&({id:Kn(this,Js)._,clipPathId:Kn(this,Rd)._}=t.drawLayer.draw({bbox:f(this,Xs).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:f(this,Ti)},path:{d:f(this,Xs).toSVGPath()}},!1,!0),N(this,Hi,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:f(this,Ti)},bbox:f(this,bs).box,path:{d:f(this,bs).toSVGPath()}},f(this,Ti))),f(this,Md)&&(f(this,Md).style.clipPath=f(this,Rd)))},Pr=new WeakSet,$h=function([t,n,s,a],o){switch(o){case 90:return[1-n-a,t,a,s];case 180:return[1-t-s,1-n-a,s,a];case 270:return[n,1-t-s,a,s]}return[t,n,s,a]},A4=function(t){Dt._keyboardManager.exec(this,t)},Hx=function(t){if(!f(this,Ep))return;const n=window.getSelection();t?n.setPosition(f(this,Ep),f(this,d0)):n.setPosition(f(this,f0),f(this,p0))},zx=function(){return f(this,Ti)?this.rotation:0},C4=function(){if(f(this,Ti))return null;const[t,n]=this.pageDimensions,[s,a]=this.pageTranslation,o=f(this,Ko),c=new Float32Array(o.length*8);let u=0;for(const{x:d,y:p,width:y,height:v}of o){const w=d*t+s,A=(1-p)*n+a;c[u]=c[u+4]=w,c[u+1]=c[u+3]=A,c[u+2]=c[u+6]=w+y*t,c[u+5]=c[u+7]=A-v*n,u+=8}return c},T4=function(t){return f(this,Xs).serialize(t,j(this,it,zx).call(this))},_4=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},N4=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},R4=function(t){const{color:n}=this._initialData;return this.hasEditedComment||t.color.some((s,a)=>s!==n[a])},P(Dt,Pr),ye(Dt,"_defaultColor",null),ye(Dt,"_defaultOpacity",1),ye(Dt,"_defaultThickness",12),ye(Dt,"_type","highlight"),ye(Dt,"_editorType",Je.HIGHLIGHT),ye(Dt,"_freeHighlightId",-1),ye(Dt,"_freeHighlight",null),ye(Dt,"_freeHighlightClipId","");let yb=Dt;var kd;class M4{constructor(){P(this,kd,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){f(this,kd)[e]=t}toSVGProperties(){const e=f(this,kd);return N(this,kd,Object.create(null)),{root:e}}reset(){N(this,kd,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){tn("Not implemented")}}kd=new WeakMap;var Ks,_p,li,Dd,Id,Rc,Mc,kc,Pd,xt,G1,V1,q1,vg,k4,Gx,xg,Yh;const Ie=class Ie extends sn{constructor(t){super(t);P(this,xt);P(this,Ks,null);P(this,_p);ye(this,"_colorPicker",null);ye(this,"_drawId",null);N(this,_p,t.mustBeCommitted||!1),this._addOutlines(t)}onUpdatedColor(){var t;(t=this._colorPicker)==null||t.update(this.color),super.onUpdatedColor()}_addOutlines(t){t.drawOutlines&&(j(this,xt,G1).call(this,t),j(this,xt,vg).call(this))}static _mergeSVGProperties(t,n){const s=new Set(Object.keys(t));for(const[a,o]of Object.entries(n))s.has(a)?Object.assign(t[a],o):t[a]=o;return t}static getDefaultDrawingOptions(t){tn("Not implemented")}static get typesMap(){tn("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const s=this.typesMap.get(t);s&&this._defaultDrawingOptions.updateProperty(s,n),this._currentParent&&(f(Ie,li).updateProperty(s,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const s=this.constructor.typesMap.get(t);s&&this._updateProperty(t,s,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[s,a]of this.typesMap)t.push([s,n[a]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[s,a]of this.constructor.typesMap)t.push([s,n[a]]);return t}_updateProperty(t,n,s){const a=this._drawingOptions,o=a[n],c=u=>{var p;a.updateProperty(n,u);const d=f(this,Ks).updateProperty(n,u);d&&j(this,xt,xg).call(this,d),(p=this.parent)==null||p.drawLayer.updateProperties(this._drawId,a.toSVGProperties()),t===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:c.bind(this,s),undo:c.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Ie._mergeSVGProperties(f(this,Ks).getPathResizingSVGProperties(j(this,xt,Gx).call(this)),{bbox:j(this,xt,Yh).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Ie._mergeSVGProperties(f(this,Ks).getPathResizedSVGProperties(j(this,xt,Gx).call(this)),{bbox:j(this,xt,Yh).call(this)}))}_onTranslating(t,n){var s;(s=this.parent)==null||s.drawLayer.updateProperties(this._drawId,{bbox:j(this,xt,Yh).call(this)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Ie._mergeSVGProperties(f(this,Ks).getPathTranslatedSVGProperties(j(this,xt,Gx).call(this),this.parentDimensions),{bbox:j(this,xt,Yh).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,f(this,_p)&&(N(this,_p,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){j(this,xt,q1).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(j(this,xt,vg).call(this),j(this,xt,xg).call(this,f(this,Ks).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var s;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),j(this,xt,q1).call(this)):t&&(this._uiManager.addShouldRescale(this),j(this,xt,vg).call(this,t),n=!this.parent&&((s=this.div)==null?void 0:s.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ie._mergeSVGProperties({bbox:j(this,xt,Yh).call(this)},f(this,Ks).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&j(this,xt,xg).call(this,f(this,Ks).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let t,n;this._isCopy&&(t=this.x,n=this.y);const s=super.render();s.classList.add("draw");const a=document.createElement("div");return s.append(a),a.setAttribute("aria-hidden","true"),a.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(t,n),s}static createDrawerInstance(t,n,s,a,o){tn("Not implemented")}static startDrawing(t,n,s,a){var T;const{target:o,offsetX:c,offsetY:u,pointerId:d,pointerType:p}=a;if(f(Ie,Mc)&&f(Ie,Mc)!==p)return;const{viewport:{rotation:y}}=t,{width:v,height:w}=o.getBoundingClientRect(),A=N(Ie,Dd,new AbortController),C=t.combinedSignal(A);if(f(Ie,Rc)||N(Ie,Rc,d),f(Ie,Mc)??N(Ie,Mc,p),window.addEventListener("pointerup",_=>{var D;f(Ie,Rc)===_.pointerId?this._endDraw(_):(D=f(Ie,kc))==null||D.delete(_.pointerId)},{signal:C}),window.addEventListener("pointercancel",_=>{var D;f(Ie,Rc)===_.pointerId?this._currentParent.endDrawingSession():(D=f(Ie,kc))==null||D.delete(_.pointerId)},{signal:C}),window.addEventListener("pointerdown",_=>{f(Ie,Mc)===_.pointerType&&((f(Ie,kc)||N(Ie,kc,new Set)).add(_.pointerId),f(Ie,li).isCancellable()&&(f(Ie,li).removeLastElement(),f(Ie,li).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:C}),window.addEventListener("contextmenu",sr,{signal:C}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:C}),o.addEventListener("touchmove",_=>{_.timeStamp===f(Ie,Pd)&&bn(_)},{signal:C}),t.toggleDrawing(),(T=n._editorUndoBar)==null||T.hide(),f(Ie,li)){t.drawLayer.updateProperties(this._currentDrawId,f(Ie,li).startNew(c,u,v,w,y));return}n.updateUIForDefaultProperties(this),N(Ie,li,this.createDrawerInstance(c,u,v,w,y)),N(Ie,Id,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(f(Ie,Id).toSVGProperties(),f(Ie,li).defaultSVGProperties),!0,!1)}static _drawMove(t){var o;if(N(Ie,Pd,-1),!f(Ie,li))return;const{offsetX:n,offsetY:s,pointerId:a}=t;if(f(Ie,Rc)===a){if(((o=f(Ie,kc))==null?void 0:o.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,f(Ie,li).add(n,s)),N(Ie,Pd,t.timeStamp),bn(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,N(Ie,li,null),N(Ie,Id,null),N(Ie,Mc,null),N(Ie,Pd,NaN)),f(Ie,Dd)&&(f(Ie,Dd).abort(),N(Ie,Dd,null),N(Ie,Rc,NaN),N(Ie,kc,null))}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),(t==null?void 0:t.target)===n.div&&n.drawLayer.updateProperties(this._currentDrawId,f(Ie,li).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const s=f(Ie,li),a=this._currentDrawId,o=s.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(a,s.setLastElement(o))},undo:()=>{n.drawLayer.updateProperties(a,s.removeLastElement())},mustExec:!1,type:pt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(pt.DRAW_STEP),!f(Ie,li).isEmpty()){const{pageDimensions:[s,a],scale:o}=n,c=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:f(Ie,li).getOutlines(s*o,a*o,o,this._INNER_MARGIN),drawingOptions:f(Ie,Id),mustBeCommitted:!t});return this._cleanup(!0),c}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,s,a,o,c){tn("Not implemented")}static async deserialize(t,n,s){var y,v;const{rawDims:{pageWidth:a,pageHeight:o,pageX:c,pageY:u}}=n.viewport,d=this.deserializeDraw(c,u,a,o,this._INNER_MARGIN,t),p=await super.deserialize(t,n,s);return p.createDrawingOptions(t),j(y=p,xt,G1).call(y,{drawOutlines:d}),j(v=p,xt,vg).call(v),p.onScaleChanging(),p.rotate(),p}serializeDraw(t){const[n,s]=this.pageTranslation,[a,o]=this.pageDimensions;return f(this,Ks).serialize([n,s,a,o],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}};Ks=new WeakMap,_p=new WeakMap,li=new WeakMap,Dd=new WeakMap,Id=new WeakMap,Rc=new WeakMap,Mc=new WeakMap,kc=new WeakMap,Pd=new WeakMap,xt=new WeakSet,G1=function({drawOutlines:t,drawId:n,drawingOptions:s}){N(this,Ks,t),this._drawingOptions||(this._drawingOptions=s),this.annotationElementId||this._uiManager.a11yAlert(`pdfjs-editor-${this.editorType}-added-alert`),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=j(this,xt,V1).call(this,t,this.parent),j(this,xt,xg).call(this,t.box)},V1=function(t,n){const{id:s}=n.drawLayer.draw(Ie._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return s},q1=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},vg=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=j(this,xt,V1).call(this,f(this,Ks),t)}},k4=function([t,n,s,a]){const{parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[n,1-t,s*(c/o),a*(o/c)];case 180:return[1-t,1-n,s,a];case 270:return[1-n,t,s*(c/o),a*(o/c)];default:return[t,n,s,a]}},Gx=function(){const{x:t,y:n,width:s,height:a,parentDimensions:[o,c],rotation:u}=this;switch(u){case 90:return[1-n,t,s*(o/c),a*(c/o)];case 180:return[1-t,1-n,s,a];case 270:return[n,1-t,s*(o/c),a*(c/o)];default:return[t,n,s,a]}},xg=function(t){[this.x,this.y,this.width,this.height]=j(this,xt,k4).call(this,t),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()},Yh=function(){const{x:t,y:n,width:s,height:a,rotation:o,parentRotation:c,parentDimensions:[u,d]}=this;switch((o*4+c)/90){case 1:return[1-n-a,t,a,s];case 2:return[1-t-s,1-n-a,s,a];case 3:return[n,1-t-s,a,s];case 4:return[t,n-s*(u/d),a*(d/u),s*(u/d)];case 5:return[1-n,t,s*(u/d),a*(d/u)];case 6:return[1-t-a*(d/u),1-n,a*(d/u),s*(u/d)];case 7:return[n-s*(u/d),1-t-a*(d/u),s*(u/d),a*(d/u)];case 8:return[t-s,n-a,s,a];case 9:return[1-n,t-s,a,s];case 10:return[1-t,1-n,s,a];case 11:return[n-a,1-t,a,s];case 12:return[t-a*(d/u),n,a*(d/u),s*(u/d)];case 13:return[1-n-s*(u/d),t-a*(d/u),s*(u/d),a*(d/u)];case 14:return[1-t,1-n-s*(u/d),a*(d/u),s*(u/d)];case 15:return[n,1-t,s*(u/d),a*(d/u)];default:return[t,n,s,a]}},ye(Ie,"_currentDrawId",-1),ye(Ie,"_currentParent",null),P(Ie,li,null),P(Ie,Dd,null),P(Ie,Id,null),P(Ie,Rc,NaN),P(Ie,Mc,null),P(Ie,kc,null),P(Ie,Pd,NaN),ye(Ie,"_INNER_MARGIN",3);let vb=Ie;var Ua,ci,ui,Ld,Np,Ki,_i,kr,Fd,Ud,jd,Rp,Vx;class oY{constructor(e,t,n,s,a,o){P(this,Rp);P(this,Ua,new Float64Array(6));P(this,ci);P(this,ui);P(this,Ld);P(this,Np);P(this,Ki);P(this,_i,"");P(this,kr,0);P(this,Fd,new P0);P(this,Ud);P(this,jd);N(this,Ud,n),N(this,jd,s),N(this,Ld,a),N(this,Np,o),[e,t]=j(this,Rp,Vx).call(this,e,t);const c=N(this,ci,[NaN,NaN,NaN,NaN,e,t]);N(this,Ki,[e,t]),N(this,ui,[{line:c,points:f(this,Ki)}]),f(this,Ua).set(c,0)}updateProperty(e,t){e==="stroke-width"&&N(this,Np,t)}isEmpty(){return!f(this,ui)||f(this,ui).length===0}isCancellable(){return f(this,Ki).length<=10}add(e,t){[e,t]=j(this,Rp,Vx).call(this,e,t);const[n,s,a,o]=f(this,Ua).subarray(2,6),c=e-a,u=t-o;return Math.hypot(f(this,Ud)*c,f(this,jd)*u)<=2?null:(f(this,Ki).push(e,t),isNaN(n)?(f(this,Ua).set([a,o,e,t],2),f(this,ci).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(f(this,Ua)[0])&&f(this,ci).splice(6,6),f(this,Ua).set([n,s,a,o,e,t],0),f(this,ci).push(...Re.createBezierPoints(n,s,a,o,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(f(this,Ki).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,s,a){N(this,Ud,n),N(this,jd,s),N(this,Ld,a),[e,t]=j(this,Rp,Vx).call(this,e,t);const o=N(this,ci,[NaN,NaN,NaN,NaN,e,t]);N(this,Ki,[e,t]);const c=f(this,ui).at(-1);return c&&(c.line=new Float32Array(c.line),c.points=new Float32Array(c.points)),f(this,ui).push({line:o,points:f(this,Ki)}),f(this,Ua).set(o,0),N(this,kr,0),this.toSVGPath(),null}getLastElement(){return f(this,ui).at(-1)}setLastElement(e){return f(this,ui)?(f(this,ui).push(e),N(this,ci,e.line),N(this,Ki,e.points),N(this,kr,0),{path:{d:this.toSVGPath()}}):f(this,Fd).setLastElement(e)}removeLastElement(){if(!f(this,ui))return f(this,Fd).removeLastElement();f(this,ui).pop(),N(this,_i,"");for(let e=0,t=f(this,ui).length;e<t;e++){const{line:n,points:s}=f(this,ui)[e];N(this,ci,n),N(this,Ki,s),N(this,kr,0),this.toSVGPath()}return{path:{d:f(this,_i)}}}toSVGPath(){const e=Re.svgRound(f(this,ci)[4]),t=Re.svgRound(f(this,ci)[5]);if(f(this,Ki).length===2)return N(this,_i,`${f(this,_i)} M ${e} ${t} Z`),f(this,_i);if(f(this,Ki).length<=6){const s=f(this,_i).lastIndexOf("M");N(this,_i,`${f(this,_i).slice(0,s)} M ${e} ${t}`),N(this,kr,6)}if(f(this,Ki).length===4){const s=Re.svgRound(f(this,ci)[10]),a=Re.svgRound(f(this,ci)[11]);return N(this,_i,`${f(this,_i)} L ${s} ${a}`),N(this,kr,12),f(this,_i)}const n=[];f(this,kr)===0&&(n.push(`M ${e} ${t}`),N(this,kr,6));for(let s=f(this,kr),a=f(this,ci).length;s<a;s+=6){const[o,c,u,d,p,y]=f(this,ci).slice(s,s+6).map(Re.svgRound);n.push(`C${o} ${c} ${u} ${d} ${p} ${y}`)}return N(this,_i,f(this,_i)+n.join(" ")),N(this,kr,f(this,ci).length),f(this,_i)}getOutlines(e,t,n,s){const a=f(this,ui).at(-1);return a.line=new Float32Array(a.line),a.points=new Float32Array(a.points),f(this,Fd).build(f(this,ui),e,t,n,f(this,Ld),f(this,Np),s),N(this,Ua,null),N(this,ci,null),N(this,ui,null),N(this,_i,null),f(this,Fd)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Ua=new WeakMap,ci=new WeakMap,ui=new WeakMap,Ld=new WeakMap,Np=new WeakMap,Ki=new WeakMap,_i=new WeakMap,kr=new WeakMap,Fd=new WeakMap,Ud=new WeakMap,jd=new WeakMap,Rp=new WeakSet,Vx=function(e,t){return Re._normalizePoint(e,t,f(this,Ud),f(this,jd),f(this,Ld))};var Qi,g0,y0,Qs,ja,Ba,Mp,kp,Bd,Ri,bo,D4,I4,P4;class P0 extends Re{constructor(){super(...arguments);P(this,Ri);P(this,Qi);P(this,g0,0);P(this,y0);P(this,Qs);P(this,ja);P(this,Ba);P(this,Mp);P(this,kp);P(this,Bd)}build(t,n,s,a,o,c,u){N(this,ja,n),N(this,Ba,s),N(this,Mp,a),N(this,kp,o),N(this,Bd,c),N(this,y0,u??0),N(this,Qs,t),j(this,Ri,I4).call(this)}get thickness(){return f(this,Bd)}setLastElement(t){return f(this,Qs).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return f(this,Qs).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of f(this,Qs)){if(t.push(`M${Re.svgRound(n[4])} ${Re.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12&&isNaN(n[6])){t.push(`L${Re.svgRound(n[10])} ${Re.svgRound(n[11])}`);continue}for(let s=6,a=n.length;s<a;s+=6){const[o,c,u,d,p,y]=n.subarray(s,s+6).map(Re.svgRound);t.push(`C${o} ${c} ${u} ${d} ${p} ${y}`)}}return t.join("")}serialize([t,n,s,a],o){const c=[],u=[],[d,p,y,v]=j(this,Ri,D4).call(this);let w,A,C,T,_,D,R,L,F;switch(f(this,kp)){case 0:F=Re._rescale,w=t,A=n+a,C=s,T=-a,_=t+d*s,D=n+(1-p-v)*a,R=t+(d+y)*s,L=n+(1-p)*a;break;case 90:F=Re._rescaleAndSwap,w=t,A=n,C=s,T=a,_=t+p*s,D=n+d*a,R=t+(p+v)*s,L=n+(d+y)*a;break;case 180:F=Re._rescale,w=t+s,A=n,C=-s,T=a,_=t+(1-d-y)*s,D=n+p*a,R=t+(1-d)*s,L=n+(p+v)*a;break;case 270:F=Re._rescaleAndSwap,w=t+s,A=n+a,C=-s,T=-a,_=t+(1-p-v)*s,D=n+(1-d-y)*a,R=t+(1-p)*s,L=n+(1-d)*a;break}for(const{line:U,points:M}of f(this,Qs))c.push(F(U,w,A,C,T,o?new Array(U.length):null)),u.push(F(M,w,A,C,T,o?new Array(M.length):null));return{lines:c,points:u,rect:[_,D,R,L]}}static deserialize(t,n,s,a,o,{paths:{lines:c,points:u},rotation:d,thickness:p}){const y=[];let v,w,A,C,T;switch(d){case 0:T=Re._rescale,v=-t/s,w=n/a+1,A=1/s,C=-1/a;break;case 90:T=Re._rescaleAndSwap,v=-n/a,w=-t/s,A=1/a,C=1/s;break;case 180:T=Re._rescale,v=t/s+1,w=-n/a,A=-1/s,C=1/a;break;case 270:T=Re._rescaleAndSwap,v=n/a+1,w=t/s+1,A=-1/a,C=-1/s;break}if(!c){c=[];for(const D of u){const R=D.length;if(R===2){c.push(new Float32Array([NaN,NaN,NaN,NaN,D[0],D[1]]));continue}if(R===4){c.push(new Float32Array([NaN,NaN,NaN,NaN,D[0],D[1],NaN,NaN,NaN,NaN,D[2],D[3]]));continue}const L=new Float32Array(3*(R-2));c.push(L);let[F,U,M,O]=D.subarray(0,4);L.set([NaN,NaN,NaN,NaN,F,U],0);for(let z=4;z<R;z+=2){const J=D[z],G=D[z+1];L.set(Re.createBezierPoints(F,U,M,O,J,G),(z-2)*3),[F,U,M,O]=[M,O,J,G]}}}for(let D=0,R=c.length;D<R;D++)y.push({line:T(c[D].map(L=>L??NaN),v,w,A,C),points:T(u[D].map(L=>L??NaN),v,w,A,C)});const _=new this.prototype.constructor;return _.build(y,s,a,1,d,p,o),_}get box(){return f(this,Qi)}updateProperty(t,n){return t==="stroke-width"?j(this,Ri,P4).call(this,n):null}updateParentDimensions([t,n],s){const[a,o]=j(this,Ri,bo).call(this);N(this,ja,t),N(this,Ba,n),N(this,Mp,s);const[c,u]=j(this,Ri,bo).call(this),d=c-a,p=u-o,y=f(this,Qi);return y[0]-=d,y[1]-=p,y[2]+=2*d,y[3]+=2*p,y}updateRotation(t){return N(this,g0,t),{path:{transform:this.rotationTransform}}}get viewBox(){return f(this,Qi).map(Re.svgRound).join(" ")}get defaultProperties(){const[t,n]=f(this,Qi);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Re.svgRound(t)} ${Re.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=f(this,Qi);let s=0,a=0,o=0,c=0,u=0,d=0;switch(f(this,g0)){case 90:a=n/t,o=-t/n,u=t;break;case 180:s=-1,c=-1,u=t,d=n;break;case 270:a=-n/t,o=t/n,d=n;break;default:return""}return`matrix(${s} ${a} ${o} ${c} ${Re.svgRound(u)} ${Re.svgRound(d)})`}getPathResizingSVGProperties([t,n,s,a]){const[o,c]=j(this,Ri,bo).call(this),[u,d,p,y]=f(this,Qi);if(Math.abs(p-o)<=Re.PRECISION||Math.abs(y-c)<=Re.PRECISION){const T=t+s/2-(u+p/2),_=n+a/2-(d+y/2);return{path:{"transform-origin":`${Re.svgRound(t)} ${Re.svgRound(n)}`,transform:`${this.rotationTransform} translate(${T} ${_})`}}}const v=(s-2*o)/(p-2*o),w=(a-2*c)/(y-2*c),A=p/s,C=y/a;return{path:{"transform-origin":`${Re.svgRound(u)} ${Re.svgRound(d)}`,transform:`${this.rotationTransform} scale(${A} ${C}) translate(${Re.svgRound(o)} ${Re.svgRound(c)}) scale(${v} ${w}) translate(${Re.svgRound(-o)} ${Re.svgRound(-c)})`}}}getPathResizedSVGProperties([t,n,s,a]){const[o,c]=j(this,Ri,bo).call(this),u=f(this,Qi),[d,p,y,v]=u;if(u[0]=t,u[1]=n,u[2]=s,u[3]=a,Math.abs(y-o)<=Re.PRECISION||Math.abs(v-c)<=Re.PRECISION){const _=t+s/2-(d+y/2),D=n+a/2-(p+v/2);for(const{line:R,points:L}of f(this,Qs))Re._translate(R,_,D,R),Re._translate(L,_,D,L);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Re.svgRound(t)} ${Re.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const w=(s-2*o)/(y-2*o),A=(a-2*c)/(v-2*c),C=-w*(d+o)+t+o,T=-A*(p+c)+n+c;if(w!==1||A!==1||C!==0||T!==0)for(const{line:_,points:D}of f(this,Qs))Re._rescale(_,C,T,w,A,_),Re._rescale(D,C,T,w,A,D);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Re.svgRound(t)} ${Re.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],s){const[a,o]=s,c=f(this,Qi),u=t-c[0],d=n-c[1];if(f(this,ja)===a&&f(this,Ba)===o)for(const{line:p,points:y}of f(this,Qs))Re._translate(p,u,d,p),Re._translate(y,u,d,y);else{const p=f(this,ja)/a,y=f(this,Ba)/o;N(this,ja,a),N(this,Ba,o);for(const{line:v,points:w}of f(this,Qs))Re._rescale(v,u,d,p,y,v),Re._rescale(w,u,d,p,y,w);c[2]*=p,c[3]*=y}return c[0]=t,c[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Re.svgRound(t)} ${Re.svgRound(n)}`}}}get defaultSVGProperties(){const t=f(this,Qi);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Re.svgRound(t[0])} ${Re.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}}Qi=new WeakMap,g0=new WeakMap,y0=new WeakMap,Qs=new WeakMap,ja=new WeakMap,Ba=new WeakMap,Mp=new WeakMap,kp=new WeakMap,Bd=new WeakMap,Ri=new WeakSet,bo=function(t=f(this,Bd)){const n=f(this,y0)+t/2*f(this,Mp);return f(this,kp)%180===0?[n/f(this,ja),n/f(this,Ba)]:[n/f(this,Ba),n/f(this,ja)]},D4=function(){const[t,n,s,a]=f(this,Qi),[o,c]=j(this,Ri,bo).call(this,0);return[t+o,n+c,s-2*o,a-2*c]},I4=function(){const t=N(this,Qi,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:a}of f(this,Qs)){if(a.length<=12){for(let u=4,d=a.length;u<d;u+=6)Me.pointBoundingBox(a[u],a[u+1],t);continue}let o=a[4],c=a[5];for(let u=6,d=a.length;u<d;u+=6){const[p,y,v,w,A,C]=a.subarray(u,u+6);Me.bezierBoundingBox(o,c,p,y,v,w,A,C,t),o=A,c=C}}const[n,s]=j(this,Ri,bo).call(this);t[0]=zi(t[0]-n,0,1),t[1]=zi(t[1]-s,0,1),t[2]=zi(t[2]+n,0,1),t[3]=zi(t[3]+s,0,1),t[2]-=t[0],t[3]-=t[1]},P4=function(t){const[n,s]=j(this,Ri,bo).call(this);N(this,Bd,t);const[a,o]=j(this,Ri,bo).call(this),[c,u]=[a-n,o-s],d=f(this,Qi);return d[0]-=c,d[1]-=u,d[2]+=2*c,d[3]+=2*u,d};class pw extends M4{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:sn._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){e==="stroke-width"&&(t??(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new pw(this._viewParameters);return e.updateAll(this),e}}var jb,L4;const ef=class ef extends vb{constructor(t){super({...t,name:"inkEditor"});P(this,jb);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(t,n){sn.initialize(t,n),this._defaultDrawingOptions=new pw(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return nt(this,"typesMap",new Map([[pt.INK_THICKNESS,"stroke-width"],[pt.INK_COLOR,"stroke"],[pt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,s,a,o){return new oY(t,n,s,a,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,s,a,o,c){return P0.deserialize(t,n,s,a,o,c)}static async deserialize(t,n,s){let a=null;if(t instanceof cT){const{data:{inkLists:c,rect:u,rotation:d,id:p,color:y,opacity:v,borderStyle:{rawWidth:w},popupRef:A,richText:C,contentsObj:T,creationDate:_,modificationDate:D},parent:{page:{pageNumber:R}}}=t;a=t={annotationType:Je.INK,color:Array.from(y),thickness:w,opacity:v,paths:{points:c},boxes:null,pageIndex:R-1,rect:u.slice(0),rotation:d,annotationElementId:p,id:p,deleted:!1,popupRef:A,richText:C,comment:(T==null?void 0:T.str)||null,creationDate:_,modificationDate:D}}const o=await super.deserialize(t,n,s);return o._initialData=a,t.comment&&o.setCommentData(t),o}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new mb(this)),[["colorPicker",this._colorPicker]]}get colorType(){return pt.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:s}=this;n.updateSVGProperty("stroke-width"),s.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:s}){this._drawingOptions=ef.getDefaultDrawingOptions({stroke:Me.makeHexColor(...t),"stroke-width":n,"stroke-opacity":s})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:s}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":c}}=this,u=Object.assign(super.serialize(t),{color:sn._colorManager.convert(a),opacity:o,thickness:c,paths:{lines:n,points:s}});return this.addComment(u),t?(u.isCopy=!0,u):this.annotationElementId&&!j(this,jb,L4).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(t){if(this.deleted)return t.hide(),null;const{points:n,rect:s}=this.serializeDraw(!1);return t.updateEdited({rect:s,thickness:this._drawingOptions["stroke-width"],points:n,popup:this.comment}),null}};jb=new WeakSet,L4=function(t){const{color:n,thickness:s,opacity:a,pageIndex:o}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||t.color.some((c,u)=>c!==n[u])||t.thickness!==s||t.opacity!==a||t.pageIndex!==o},ye(ef,"_type","ink"),ye(ef,"_editorType",Je.INK),ye(ef,"_defaultDrawingOptions",null);let $1=ef;class Y1 extends P0{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}const ux=8,Km=3;var Od,Pt,W1,sa,F4,U4,X1,qx,j4,B4,O4,J1,K1,H4;class Ga{static extractContoursFromText(e,{fontFamily:t,fontStyle:n,fontWeight:s},a,o,c,u){let d=new OffscreenCanvas(1,1),p=d.getContext("2d",{alpha:!1});const y=200,v=p.font=`${n} ${s} ${y}px ${t}`,{actualBoundingBoxLeft:w,actualBoundingBoxRight:A,actualBoundingBoxAscent:C,actualBoundingBoxDescent:T,fontBoundingBoxAscent:_,fontBoundingBoxDescent:D,width:R}=p.measureText(e),L=1.5,F=Math.ceil(Math.max(Math.abs(w)+Math.abs(A)||0,R)*L),U=Math.ceil(Math.max(Math.abs(C)+Math.abs(T)||y,Math.abs(_)+Math.abs(D)||y)*L);d=new OffscreenCanvas(F,U),p=d.getContext("2d",{alpha:!0,willReadFrequently:!0}),p.font=v,p.filter="grayscale(1)",p.fillStyle="white",p.fillRect(0,0,F,U),p.fillStyle="black",p.fillText(e,F*(L-1)/2,U*(3-L)/2);const M=j(this,Pt,J1).call(this,p.getImageData(0,0,F,U).data),O=j(this,Pt,O4).call(this,M),z=j(this,Pt,K1).call(this,O),J=j(this,Pt,X1).call(this,M,F,U,z);return this.processDrawnLines({lines:{curves:J,width:F,height:U},pageWidth:a,pageHeight:o,rotation:c,innerMargin:u,mustSmooth:!0,areContours:!0})}static process(e,t,n,s,a){const[o,c,u]=j(this,Pt,H4).call(this,e),[d,p]=j(this,Pt,B4).call(this,o,c,u,Math.hypot(c,u)*f(this,Od).sigmaSFactor,f(this,Od).sigmaR,f(this,Od).kernelSize),y=j(this,Pt,K1).call(this,p),v=j(this,Pt,X1).call(this,d,c,u,y);return this.processDrawnLines({lines:{curves:v,width:c,height:u},pageWidth:t,pageHeight:n,rotation:s,innerMargin:a,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:s,innerMargin:a,mustSmooth:o,areContours:c}){s%180!==0&&([t,n]=[n,t]);const{curves:u,width:d,height:p}=e,y=e.thickness??0,v=[],w=Math.min(t/d,n/p),A=w/t,C=w/n,T=[];for(const{points:D}of u){const R=o?j(this,Pt,j4).call(this,D):D;if(!R)continue;T.push(R);const L=R.length,F=new Float32Array(L),U=new Float32Array(3*(L===2?2:L-2));if(v.push({line:U,points:F}),L===2){F[0]=R[0]*A,F[1]=R[1]*C,U.set([NaN,NaN,NaN,NaN,F[0],F[1]],0);continue}let[M,O,z,J]=R;M*=A,O*=C,z*=A,J*=C,F.set([M,O,z,J],0),U.set([NaN,NaN,NaN,NaN,M,O],0);for(let G=4;G<L;G+=2){const X=F[G]=R[G]*A,ie=F[G+1]=R[G+1]*C;U.set(Re.createBezierPoints(M,O,z,J,X,ie),(G-2)*3),[M,O,z,J]=[z,J,X,ie]}}if(v.length===0)return null;const _=c?new Y1:new P0;return _.build(v,t,n,1,s,c?0:y,a),{outline:_,newCurves:T,areContours:c,thickness:y,width:d,height:p}}static async compressSignature({outlines:e,areContours:t,thickness:n,width:s,height:a}){let o=1/0,c=-1/0,u=0;for(const R of e){u+=R.length;for(let L=2,F=R.length;L<F;L++){const U=R[L]-R[L-2];o=Math.min(o,U),c=Math.max(c,U)}}let d;o>=-128&&c<=127?d=Int8Array:o>=-32768&&c<=32767?d=Int16Array:d=Int32Array;const p=e.length,y=ux+Km*p,v=new Uint32Array(y);let w=0;v[w++]=y*Uint32Array.BYTES_PER_ELEMENT+(u-2*p)*d.BYTES_PER_ELEMENT,v[w++]=0,v[w++]=s,v[w++]=a,v[w++]=t?0:1,v[w++]=Math.max(0,Math.floor(n??0)),v[w++]=p,v[w++]=d.BYTES_PER_ELEMENT;for(const R of e)v[w++]=R.length-2,v[w++]=R[0],v[w++]=R[1];const A=new CompressionStream("deflate-raw"),C=A.writable.getWriter();await C.ready,C.write(v);const T=d.prototype.constructor;for(const R of e){const L=new T(R.length-2);for(let F=2,U=R.length;F<U;F++)L[F-2]=R[F]-R[F-2];C.write(L)}C.close();const _=await new Response(A.readable).arrayBuffer(),D=new Uint8Array(_);return UL(D)}static async decompressSignature(e){try{const t=D9(e),{readable:n,writable:s}=new DecompressionStream("deflate-raw"),a=s.getWriter();await a.ready,a.write(t).then(async()=>{await a.ready,await a.close()}).catch(()=>{});let o=null,c=0;for await(const R of n)o||(o=new Uint8Array(new Uint32Array(R.buffer,0,4)[0])),o.set(R,c),c+=R.length;const u=new Uint32Array(o.buffer,0,o.length>>2),d=u[1];if(d!==0)throw new Error(`Invalid version: ${d}`);const p=u[2],y=u[3],v=u[4]===0,w=u[5],A=u[6],C=u[7],T=[],_=(ux+Km*A)*Uint32Array.BYTES_PER_ELEMENT;let D;switch(C){case Int8Array.BYTES_PER_ELEMENT:D=new Int8Array(o.buffer,_);break;case Int16Array.BYTES_PER_ELEMENT:D=new Int16Array(o.buffer,_);break;case Int32Array.BYTES_PER_ELEMENT:D=new Int32Array(o.buffer,_);break}c=0;for(let R=0;R<A;R++){const L=u[Km*R+ux],F=new Float32Array(L+2);T.push(F);for(let U=0;U<Km-1;U++)F[U]=u[Km*R+ux+U+1];for(let U=0;U<L;U++)F[U+2]=F[U]+D[c++]}return{areContours:v,thickness:w,outlines:T,width:p,height:y}}catch(t){return Ke(`decompressSignature: ${t}`),null}}}Od=new WeakMap,Pt=new WeakSet,W1=function(e,t,n,s){return n-=e,s-=t,n===0?s>0?0:4:n===1?s+6:2-s},sa=new WeakMap,F4=function(e,t,n,s,a,o,c){const u=j(this,Pt,W1).call(this,n,s,a,o);for(let d=0;d<8;d++){const p=(-d+u-c+16)%8,y=f(this,sa)[2*p],v=f(this,sa)[2*p+1];if(e[(n+y)*t+(s+v)]!==0)return p}return-1},U4=function(e,t,n,s,a,o,c){const u=j(this,Pt,W1).call(this,n,s,a,o);for(let d=0;d<8;d++){const p=(d+u+c+16)%8,y=f(this,sa)[2*p],v=f(this,sa)[2*p+1];if(e[(n+y)*t+(s+v)]!==0)return p}return-1},X1=function(e,t,n,s){const a=e.length,o=new Int32Array(a);for(let p=0;p<a;p++)o[p]=e[p]<=s?1:0;for(let p=1;p<n-1;p++)o[p*t]=o[p*t+t-1]=0;for(let p=0;p<t;p++)o[p]=o[t*n-1-p]=0;let c=1,u;const d=[];for(let p=1;p<n-1;p++){u=1;for(let y=1;y<t-1;y++){const v=p*t+y,w=o[v];if(w===0)continue;let A=p,C=y;if(w===1&&o[v-1]===0)c+=1,C-=1;else if(w>=1&&o[v+1]===0)c+=1,C+=1,w>1&&(u=w);else{w!==1&&(u=Math.abs(w));continue}const T=[y,p],_=C===y+1,D={isHole:_,points:T,id:c,parent:0};d.push(D);let R;for(const G of d)if(G.id===u){R=G;break}R?R.isHole?D.parent=_?R.parent:u:D.parent=_?u:R.parent:D.parent=_?u:0;const L=j(this,Pt,F4).call(this,o,t,p,y,A,C,0);if(L===-1){o[v]=-c,o[v]!==1&&(u=Math.abs(o[v]));continue}let F=f(this,sa)[2*L],U=f(this,sa)[2*L+1];const M=p+F,O=y+U;A=M,C=O;let z=p,J=y;for(;;){const G=j(this,Pt,U4).call(this,o,t,z,J,A,C,1);F=f(this,sa)[2*G],U=f(this,sa)[2*G+1];const X=z+F,ie=J+U;T.push(ie,X);const $=z*t+J;if(o[$+1]===0?o[$]=-c:o[$]===1&&(o[$]=c),X===p&&ie===y&&z===M&&J===O){o[v]!==1&&(u=Math.abs(o[v]));break}else A=z,C=J,z=X,J=ie}}}return d},qx=function(e,t,n,s){if(n-t<=4){for(let M=t;M<n-2;M+=2)s.push(e[M],e[M+1]);return}const a=e[t],o=e[t+1],c=e[n-4]-a,u=e[n-3]-o,d=Math.hypot(c,u),p=c/d,y=u/d,v=p*o-y*a,w=u/c,A=1/d,C=Math.atan(w),T=Math.cos(C),_=Math.sin(C),D=A*(Math.abs(T)+Math.abs(_)),R=A*(1-D+D**2),L=Math.max(Math.atan(Math.abs(_+T)*R),Math.atan(Math.abs(_-T)*R));let F=0,U=t;for(let M=t+2;M<n-2;M+=2){const O=Math.abs(v-p*e[M+1]+y*e[M]);O>F&&(U=M,F=O)}F>(d*L)**2?(j(this,Pt,qx).call(this,e,t,U+2,s),j(this,Pt,qx).call(this,e,U,n,s)):s.push(a,o)},j4=function(e){const t=[],n=e.length;return j(this,Pt,qx).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t},B4=function(e,t,n,s,a,o){const c=new Float32Array(o**2),u=-2*s**2,d=o>>1;for(let C=0;C<o;C++){const T=(C-d)**2;for(let _=0;_<o;_++)c[C*o+_]=Math.exp((T+(_-d)**2)/u)}const p=new Float32Array(256),y=-2*a**2;for(let C=0;C<256;C++)p[C]=Math.exp(C**2/y);const v=e.length,w=new Uint8Array(v),A=new Uint32Array(256);for(let C=0;C<n;C++)for(let T=0;T<t;T++){const _=C*t+T,D=e[_];let R=0,L=0;for(let U=0;U<o;U++){const M=C+U-d;if(!(M<0||M>=n))for(let O=0;O<o;O++){const z=T+O-d;if(z<0||z>=t)continue;const J=e[M*t+z],G=c[U*o+O]*p[Math.abs(J-D)];R+=J*G,L+=G}}const F=w[_]=Math.round(R/L);A[F]++}return[w,A]},O4=function(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t},J1=function(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let s=-1/0,a=1/0;for(let c=0,u=n.length;c<u;c++){const d=n[c]=e[c<<2];s=Math.max(s,d),a=Math.min(a,d)}const o=255/(s-a);for(let c=0,u=n.length;c<u;c++)n[c]=(n[c]-a)*o;return n},K1=function(e){let t,n=-1/0,s=-1/0;const a=e.findIndex(u=>u!==0);let o=a,c=a;for(t=a;t<256;t++){const u=e[t];u>n&&(t-o>s&&(s=t-o,c=t-1),n=u,o=t)}for(t=c-1;t>=0&&!(e[t]>e[t+1]);t--);return t},H4=function(e){const t=e,{width:n,height:s}=e,{maxDim:a}=f(this,Od);let o=n,c=s;if(n>a||s>a){let v=n,w=s,A=Math.log2(Math.max(n,s)/a);const C=Math.floor(A);A=A===C?C-1:C;for(let _=0;_<A;_++){o=Math.ceil(v/2),c=Math.ceil(w/2);const D=new OffscreenCanvas(o,c);D.getContext("2d").drawImage(e,0,0,v,w,0,0,o,c),v=o,w=c,e!==t&&e.close(),e=D.transferToImageBitmap()}const T=Math.min(a/o,a/c);o=Math.round(o*T),c=Math.round(c*T)}const d=new OffscreenCanvas(o,c).getContext("2d",{willReadFrequently:!0});d.fillStyle="white",d.fillRect(0,0,o,c),d.filter="grayscale(1)",d.drawImage(e,0,0,e.width,e.height,0,0,o,c);const p=d.getImageData(0,0,o,c).data;return[j(this,Pt,J1).call(this,p),o,c]},P(Ga,Pt),P(Ga,Od,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),P(Ga,sa,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class dT extends M4{constructor(){super(),super.updateProperties({fill:sn._defaultLineColor,"stroke-width":0})}clone(){const e=new dT;return e.updateAll(this),e}}class hT extends pw{constructor(e){super(e),super.updateProperties({stroke:sn._defaultLineColor,"stroke-width":1})}clone(){const e=new hT(this._viewParameters);return e.updateAll(this),e}}var Dc,Oa,Ic,Hd;const Fs=class Fs extends vb{constructor(t){super({...t,mustBeCommitted:!0,name:"signatureEditor"});P(this,Dc,!1);P(this,Oa,null);P(this,Ic,null);P(this,Hd,null);this._willKeepAspectRatio=!0,N(this,Ic,t.signatureData||null),N(this,Oa,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(t,n){sn.initialize(t,n),this._defaultDrawingOptions=new dT,this._defaultDrawnSignatureOptions=new hT(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!1}static get typesMap(){return nt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!f(this,Oa)}}static computeTelemetryFinalData(t){const n=t.get("hasDescription");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let t,n;const{_isCopy:s}=this;if(s&&(this._isCopy=!1,t=this.x,n=this.y),super.render(),this._drawId===null)if(f(this,Ic)){const{lines:a,mustSmooth:o,areContours:c,description:u,uuid:d,heightInPage:p}=f(this,Ic),{rawDims:{pageWidth:y,pageHeight:v},rotation:w}=this.parent.viewport,A=Ga.processDrawnLines({lines:a,pageWidth:y,pageHeight:v,rotation:w,innerMargin:Fs._INNER_MARGIN,mustSmooth:o,areContours:c});this.addSignature(A,p,u,d)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:f(this,Oa)||""}));return s&&(this._isCopy=!0,this._moveAfterPaste(t,n)),this.div}setUuid(t){N(this,Hd,t),this.addEditToolbar()}getUuid(){return f(this,Hd)}get description(){return f(this,Oa)}set description(t){N(this,Oa,t),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:t})),super.addEditToolbar().then(n=>{n==null||n.updateEditSignatureButton(t)}))}getSignaturePreview(){const{newCurves:t,areContours:n,thickness:s,width:a,height:o}=f(this,Ic),c=Math.max(a,o),u=Ga.processDrawnLines({lines:{curves:t.map(d=>({points:d})),thickness:s,width:a,height:o},pageWidth:c,pageHeight:c,rotation:0,innerMargin:0,mustSmooth:!1,areContours:n});return{areContours:n,outline:u.outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(t,n,s,a){const{x:o,y:c}=this,{outline:u}=N(this,Ic,t);N(this,Dc,u instanceof Y1),this.description=s;let d;f(this,Dc)?d=Fs.getDefaultDrawingOptions():(d=Fs._defaultDrawnSignatureOptions.clone(),d.updateProperties({"stroke-width":u.thickness})),this._addOutlines({drawOutlines:u,drawingOptions:d});const[,p]=this.pageDimensions;let y=n/p;y=y>=1?.5:y,this.width*=y/this.height,this.width>=1&&(y*=.9/this.width,this.width=.9),this.height=y,this.setDims(),this.x=o,this.y=c,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(a),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!a,hasDescription:!!s}}),this.div.hidden=!1}getFromImage(t){const{rawDims:{pageWidth:n,pageHeight:s},rotation:a}=this.parent.viewport;return Ga.process(t,n,s,a,Fs._INNER_MARGIN)}getFromText(t,n){const{rawDims:{pageWidth:s,pageHeight:a},rotation:o}=this.parent.viewport;return Ga.extractContoursFromText(t,n,s,a,o,Fs._INNER_MARGIN)}getDrawnSignature(t){const{rawDims:{pageWidth:n,pageHeight:s},rotation:a}=this.parent.viewport;return Ga.processDrawnLines({lines:t,pageWidth:n,pageHeight:s,rotation:a,innerMargin:Fs._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:t,thickness:n}){t?this._drawingOptions=Fs.getDefaultDrawingOptions():(this._drawingOptions=Fs._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(t=!1){if(this.isEmpty())return null;const{lines:n,points:s}=this.serializeDraw(t),{_drawingOptions:{"stroke-width":a}}=this,o=Object.assign(super.serialize(t),{isSignature:!0,areContours:f(this,Dc),color:[0,0,0],thickness:f(this,Dc)?0:a});return this.addComment(o),t?(o.paths={lines:n,points:s},o.uuid=f(this,Hd),o.isCopy=!0):o.lines=n,f(this,Oa)&&(o.accessibilityData={type:"Figure",alt:f(this,Oa)}),o}static deserializeDraw(t,n,s,a,o,c){return c.areContours?Y1.deserialize(t,n,s,a,o,c):P0.deserialize(t,n,s,a,o,c)}static async deserialize(t,n,s){var o;const a=await super.deserialize(t,n,s);return N(a,Dc,t.areContours),a.description=((o=t.accessibilityData)==null?void 0:o.alt)||"",N(a,Hd,t.uuid),a}};Dc=new WeakMap,Oa=new WeakMap,Ic=new WeakMap,Hd=new WeakMap,ye(Fs,"_type","signature"),ye(Fs,"_editorType",Je.SIGNATURE),ye(Fs,"_defaultDrawingOptions",null);let Q1=Fs;var mn,di,Pc,Qo,Lc,Dp,Zo,zd,Ha,Zs,Ip,bt,bg,wg,$x,Yx,Wx,eC,Xx,z4;class Z1 extends sn{constructor(t){super({...t,name:"stampEditor"});P(this,bt);P(this,mn,null);P(this,di,null);P(this,Pc,null);P(this,Qo,null);P(this,Lc,null);P(this,Dp,"");P(this,Zo,null);P(this,zd,!1);P(this,Ha,null);P(this,Zs,!1);P(this,Ip,!1);N(this,Qo,t.bitmapUrl),N(this,Lc,t.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(t,n){sn.initialize(t,n)}static isHandlingMimeForPasting(t){return ub.includes(t)}static paste(t,n){n.pasteEditor({mode:Je.STAMP},{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:s}=this._uiManager;if(!s)throw new Error("No ML.");if(!await s.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:a,width:o,height:c}=t||this.copyCanvas(null,null,!0).imageData,u=await s.guess({name:"altText",request:{data:a,width:o,height:c,channels:a.length/(o*c)}});if(!u)throw new Error("No response from the AI service.");if(u.error)throw new Error("Error from the AI service.");if(u.cancel)return null;if(!u.output)throw new Error("No valid response from the AI service.");const d=u.output;return await this.setGuessedAltText(d),n&&!this.hasAltTextData()&&(this.altTextData={alt:d,decorative:!1}),d}remove(){var t;f(this,di)&&(N(this,mn,null),this._uiManager.imageManager.deleteId(f(this,di)),(t=f(this,Zo))==null||t.remove(),N(this,Zo,null),f(this,Ha)&&(clearTimeout(f(this,Ha)),N(this,Ha,null))),super.remove()}rebuild(){if(!this.parent){f(this,di)&&j(this,bt,$x).call(this);return}super.rebuild(),this.div!==null&&(f(this,di)&&f(this,Zo)===null&&j(this,bt,$x).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(f(this,Pc)||f(this,mn)||f(this,Qo)||f(this,Lc)||f(this,di)||f(this,zd))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;return this._isCopy&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.createAltText(),f(this,zd)||(f(this,mn)?j(this,bt,Yx).call(this):j(this,bt,$x).call(this)),this._isCopy&&this._moveAfterPaste(t,n),this._uiManager.addShouldRescale(this),this.div}setCanvas(t,n){const{id:s,bitmap:a}=this._uiManager.imageManager.getFromCanvas(t,n);n.remove(),s&&this._uiManager.imageManager.isValidId(s)&&(N(this,di,s),a&&N(this,mn,a),N(this,zd,!1),j(this,bt,Yx).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;f(this,Ha)!==null&&clearTimeout(f(this,Ha)),N(this,Ha,setTimeout(()=>{N(this,Ha,null),j(this,bt,eC).call(this)},200))}copyCanvas(t,n,s=!1){t||(t=224);const{width:a,height:o}=f(this,mn),c=new la;let u=f(this,mn),d=a,p=o,y=null;if(n){if(a>n||o>n){const M=Math.min(n/a,n/o);d=Math.floor(a*M),p=Math.floor(o*M)}y=document.createElement("canvas");const w=y.width=Math.ceil(d*c.sx),A=y.height=Math.ceil(p*c.sy);f(this,Zs)||(u=j(this,bt,Wx).call(this,w,A));const C=y.getContext("2d");C.filter=this._uiManager.hcmFilter;let T="white",_="#cfcfd8";this._uiManager.hcmFilter!=="none"?_="black":L9.isDarkMode&&(T="#8f8f9d",_="#42414d");const D=15,R=D*c.sx,L=D*c.sy,F=new OffscreenCanvas(R*2,L*2),U=F.getContext("2d");U.fillStyle=T,U.fillRect(0,0,R*2,L*2),U.fillStyle=_,U.fillRect(0,0,R,L),U.fillRect(R,L,R,L),C.fillStyle=C.createPattern(F,"repeat"),C.fillRect(0,0,w,A),C.drawImage(u,0,0,u.width,u.height,0,0,w,A)}let v=null;if(s){let w,A;if(c.symmetric&&u.width<t&&u.height<t)w=u.width,A=u.height;else if(u=f(this,mn),a>t||o>t){const _=Math.min(t/a,t/o);w=Math.floor(a*_),A=Math.floor(o*_),f(this,Zs)||(u=j(this,bt,Wx).call(this,w,A))}const T=new OffscreenCanvas(w,A).getContext("2d",{willReadFrequently:!0});T.drawImage(u,0,0,u.width,u.height,0,0,w,A),v={width:w,height:A,data:T.getImageData(0,0,w,A).data}}return{canvas:y,width:d,height:p,imageData:v}}static async deserialize(t,n,s){var T;let a=null,o=!1;if(t instanceof s4){const{data:{rect:_,rotation:D,id:R,structParent:L,popupRef:F,richText:U,contentsObj:M,creationDate:O,modificationDate:z},container:J,parent:{page:{pageNumber:G}},canvas:X}=t;let ie,$;X?(delete t.canvas,{id:ie,bitmap:$}=s.imageManager.getFromCanvas(J.id,X),X.remove()):(o=!0,t._hasNoCanvas=!0);const ee=((T=await n._structTree.getAriaAttributes(`${eT}${R}`))==null?void 0:T.get("aria-label"))||"";a=t={annotationType:Je.STAMP,bitmapId:ie,bitmap:$,pageIndex:G-1,rect:_.slice(0),rotation:D,annotationElementId:R,id:R,deleted:!1,accessibilityData:{decorative:!1,altText:ee},isSvg:!1,structParent:L,popupRef:F,richText:U,comment:(M==null?void 0:M.str)||null,creationDate:O,modificationDate:z}}const c=await super.deserialize(t,n,s),{rect:u,bitmap:d,bitmapUrl:p,bitmapId:y,isSvg:v,accessibilityData:w}=t;o?(s.addMissingCanvas(t.id,c),N(c,zd,!0)):y&&s.imageManager.isValidId(y)?(N(c,di,y),d&&N(c,mn,d)):N(c,Qo,p),N(c,Zs,v);const[A,C]=c.pageDimensions;return c.width=(u[2]-u[0])/A,c.height=(u[3]-u[1])/C,w&&(c.altTextData=w),c._initialData=a,t.comment&&c.setCommentData(t),N(c,Ip,!!a),c}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=Object.assign(super.serialize(t),{bitmapId:f(this,di),isSvg:f(this,Zs)});if(this.addComment(s),t)return s.bitmapUrl=j(this,bt,Xx).call(this,!0),s.accessibilityData=this.serializeAltText(!0),s.isCopy=!0,s;const{decorative:a,altText:o}=this.serializeAltText(!1);if(!a&&o&&(s.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const u=j(this,bt,z4).call(this,s);return u.isSame?null:(u.isSameAltText?delete s.accessibilityData:s.accessibilityData.structParent=this._initialData.structParent??-1,s.id=this.annotationElementId,delete s.bitmapId,s)}if(n===null)return s;n.stamps||(n.stamps=new Map);const c=f(this,Zs)?(s.rect[2]-s.rect[0])*(s.rect[3]-s.rect[1]):null;if(!n.stamps.has(f(this,di)))n.stamps.set(f(this,di),{area:c,serialized:s}),s.bitmap=j(this,bt,Xx).call(this,!1);else if(f(this,Zs)){const u=n.stamps.get(f(this,di));c>u.area&&(u.area=c,u.serialized.bitmap.close(),u.serialized.bitmap=j(this,bt,Xx).call(this,!1))}return s}renderAnnotationElement(t){return this.deleted?(t.hide(),null):(t.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}mn=new WeakMap,di=new WeakMap,Pc=new WeakMap,Qo=new WeakMap,Lc=new WeakMap,Dp=new WeakMap,Zo=new WeakMap,zd=new WeakMap,Ha=new WeakMap,Zs=new WeakMap,Ip=new WeakMap,bt=new WeakSet,bg=function(t,n=!1){if(!t){this.remove();return}N(this,mn,t.bitmap),n||(N(this,di,t.id),N(this,Zs,t.isSvg)),t.file&&N(this,Dp,t.file.name),j(this,bt,Yx).call(this)},wg=function(){if(N(this,Pc,null),this._uiManager.enableWaiting(!1),!!f(this,Zo)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&f(this,mn)){this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&f(this,mn)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},$x=function(){if(f(this,di)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(f(this,di)).then(s=>j(this,bt,bg).call(this,s,!0)).finally(()=>j(this,bt,wg).call(this));return}if(f(this,Qo)){const s=f(this,Qo);N(this,Qo,null),this._uiManager.enableWaiting(!0),N(this,Pc,this._uiManager.imageManager.getFromUrl(s).then(a=>j(this,bt,bg).call(this,a)).finally(()=>j(this,bt,wg).call(this)));return}if(f(this,Lc)){const s=f(this,Lc);N(this,Lc,null),this._uiManager.enableWaiting(!0),N(this,Pc,this._uiManager.imageManager.getFromFile(s).then(a=>j(this,bt,bg).call(this,a)).finally(()=>j(this,bt,wg).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=ub.join(",");const n=this._uiManager._signal;N(this,Pc,new Promise(s=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const a=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),j(this,bt,bg).call(this,a)}s()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),s()},{signal:n})}).finally(()=>j(this,bt,wg).call(this))),t.click()},Yx=function(){var d;const{div:t}=this;let{width:n,height:s}=f(this,mn);const[a,o]=this.pageDimensions,c=.75;if(this.width)n=this.width*a,s=this.height*o;else if(n>c*a||s>c*o){const p=Math.min(c*a/n,c*o/s);n*=p,s*=p}this._uiManager.enableWaiting(!1);const u=N(this,Zo,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=n/a,this.height=s/o,this.setDims(),(d=this._initialOptions)!=null&&d.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),j(this,bt,eC).call(this),f(this,Ip)||(this.parent.addUndoableEditor(this),N(this,Ip,!0)),this._reportTelemetry({action:"inserted_image"}),f(this,Dp)&&this.div.setAttribute("aria-description",f(this,Dp)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")},Wx=function(t,n){const{width:s,height:a}=f(this,mn);let o=s,c=a,u=f(this,mn);for(;o>2*t||c>2*n;){const d=o,p=c;o>2*t&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),c>2*n&&(c=c>=16384?Math.floor(c/2)-1:Math.ceil(c/2));const y=new OffscreenCanvas(o,c);y.getContext("2d").drawImage(u,0,0,d,p,0,0,o,c),u=y.transferToImageBitmap()}return u},eC=function(){const[t,n]=this.parentDimensions,{width:s,height:a}=this,o=new la,c=Math.ceil(s*t*o.sx),u=Math.ceil(a*n*o.sy),d=f(this,Zo);if(!d||d.width===c&&d.height===u)return;d.width=c,d.height=u;const p=f(this,Zs)?f(this,mn):j(this,bt,Wx).call(this,c,u),y=d.getContext("2d");y.filter=this._uiManager.hcmFilter,y.drawImage(p,0,0,p.width,p.height,0,0,c,u)},Xx=function(t){if(t){if(f(this,Zs)){const a=this._uiManager.imageManager.getSvgUrl(f(this,di));if(a)return a}const n=document.createElement("canvas");return{width:n.width,height:n.height}=f(this,mn),n.getContext("2d").drawImage(f(this,mn),0,0),n.toDataURL()}if(f(this,Zs)){const[n,s]=this.pageDimensions,a=Math.round(this.width*n*dl.PDF_TO_CSS_UNITS),o=Math.round(this.height*s*dl.PDF_TO_CSS_UNITS),c=new OffscreenCanvas(a,o);return c.getContext("2d").drawImage(f(this,mn),0,0,f(this,mn).width,f(this,mn).height,0,0,a,o),c.transferToImageBitmap()}return structuredClone(f(this,mn))},z4=function(t){var c;const{pageIndex:n,accessibilityData:{altText:s}}=this._initialData,a=t.pageIndex===n,o=(((c=t.accessibilityData)==null?void 0:c.alt)||"")===s;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&a&&o,isSameAltText:o}},ye(Z1,"_type","stamp"),ye(Z1,"_editorType",Je.STAMP);var Gd,Pp,Fc,Uc,el,ws,jc,Lp,Fp,ra,tl,hi,nl,Bc,Up,Le,Oc,en,tC,G4,ya,nC,iC,Jx;const Wr=class Wr{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:s,accessibilityManager:a,annotationLayer:o,drawLayer:c,textLayer:u,viewport:d,l10n:p}){P(this,en);P(this,Gd);P(this,Pp,!1);P(this,Fc,null);P(this,Uc,null);P(this,el,null);P(this,ws,new Map);P(this,jc,!1);P(this,Lp,!1);P(this,Fp,!1);P(this,ra,null);P(this,tl,null);P(this,hi,null);P(this,nl,null);P(this,Bc,null);P(this,Up,-1);P(this,Le);const y=[...f(Wr,Oc).values()];if(!Wr._initialized){Wr._initialized=!0;for(const v of y)v.initialize(p,e)}e.registerEditorTypes(y),N(this,Le,e),this.pageIndex=t,this.div=n,N(this,Gd,a),N(this,Fc,o),this.viewport=d,N(this,hi,u),this.drawLayer=c,this._structTree=s,f(this,Le).addLayer(this)}get isEmpty(){return f(this,ws).size===0}get isInvisible(){return this.isEmpty&&f(this,Le).getMode()===Je.NONE}updateToolbar(e){f(this,Le).updateToolbar(e)}updateMode(e=f(this,Le).getMode()){switch(j(this,en,Jx).call(this),e){case Je.NONE:this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Je.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Je.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===Je.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of f(Wr,Oc).values())t.toggle(`${n._type}Editing`,e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=f(this,hi))==null?void 0:t.div)}setEditingState(e){f(this,Le).setEditingState(e)}addCommands(e){f(this,Le).addCommands(e)}cleanUndoStack(e){f(this,Le).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=f(this,Fc))==null||t.div.classList.toggle("disabled",!e)}async enable(){var n;N(this,Fp,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),(n=f(this,Bc))==null||n.abort(),N(this,Bc,null);const e=new Set;for(const s of f(this,en,tC))s.enableEditing(),s.show(!0),s.annotationElementId&&(f(this,Le).removeChangedExistingAnnotation(s),e.add(s.annotationElementId));const t=f(this,Fc);if(t)for(const s of t.getEditableAnnotations()){if(s.hide(),f(this,Le).isDeletedAnnotationElement(s.data.id)||e.has(s.data.id))continue;const a=await this.deserialize(s);a&&(this.addOrRebuild(a),a.enableEditing())}N(this,Fp,!1),f(this,Le)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){var n;if(N(this,Lp,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),f(this,hi)&&!f(this,Bc)){N(this,Bc,new AbortController);const s=f(this,Le).combinedSignal(f(this,Bc));f(this,hi).div.addEventListener("pointerdown",a=>{const{clientX:c,clientY:u,timeStamp:d}=a,p=f(this,Up);if(d-p>500){N(this,Up,d);return}N(this,Up,-1);const{classList:y}=this.div;y.toggle("getElements",!0);const v=document.elementsFromPoint(c,u);if(y.toggle("getElements",!1),!this.div.contains(v[0]))return;let w;const A=new RegExp(`^${kg}[0-9]+$`);for(const T of v)if(A.test(T.id)){w=T.id;break}if(!w)return;const C=f(this,ws).get(w);(C==null?void 0:C.annotationElementId)===null&&(a.stopPropagation(),a.preventDefault(),C.dblclick(a))},{signal:s,capture:!0})}const e=f(this,Fc);if(e){const s=new Map,a=new Map;for(const c of f(this,en,tC)){if(c.disableEditing(),!c.annotationElementId){c.updateFakeAnnotationElement(e);continue}if(c.serialize()!==null){s.set(c.annotationElementId,c);continue}else a.set(c.annotationElementId,c);(n=this.getEditableAnnotation(c.annotationElementId))==null||n.show(),c.remove()}const o=e.getEditableAnnotations();for(const c of o){const{id:u}=c.data;if(f(this,Le).isDeletedAnnotationElement(u)){c.updateEdited({deleted:!0});continue}let d=a.get(u);if(d){d.resetAnnotationElement(c),d.show(!1),c.show();continue}d=s.get(u),d&&(f(this,Le).addChangedExistingAnnotation(d),d.renderAnnotationElement(c)&&d.show(!1)),c.show()}}j(this,en,Jx).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:t}=this.div;for(const s of f(Wr,Oc).values())t.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),N(this,Lp,!1)}getEditableAnnotation(e){var t;return((t=f(this,Fc))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){f(this,Le).getActive()!==e&&f(this,Le).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=f(this,hi))!=null&&e.div&&!f(this,nl)){N(this,nl,new AbortController);const t=f(this,Le).combinedSignal(f(this,nl));f(this,hi).div.addEventListener("pointerdown",j(this,en,G4).bind(this),{signal:t}),f(this,hi).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=f(this,hi))!=null&&e.div&&f(this,nl)&&(f(this,nl).abort(),N(this,nl,null),f(this,hi).div.classList.remove("highlighting"))}enableClick(){if(f(this,Uc))return;N(this,Uc,new AbortController);const e=f(this,Le).combinedSignal(f(this,Uc));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=f(this,Uc))==null||e.abort(),N(this,Uc,null)}attach(e){f(this,ws).set(e.id,e);const{annotationElementId:t}=e;t&&f(this,Le).isDeletedAnnotationElement(t)&&f(this,Le).removeDeletedAnnotationElement(e)}detach(e){var t;f(this,ws).delete(e.id),(t=f(this,Gd))==null||t.removePointerInTextLayer(e.contentDiv),!f(this,Lp)&&e.annotationElementId&&f(this,Le).addDeletedAnnotationElement(e)}remove(e){this.detach(e),f(this,Le).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(f(this,Le).addDeletedAnnotationElement(e.annotationElementId),sn.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),f(this,Le).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!f(this,Fp)),f(this,Le).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!f(this,el)&&(e._focusEventsAllowed=!1,N(this,el,setTimeout(()=>{N(this,el,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:f(this,Le)._signal}),t.focus())},0))),e._structTreeParentId=(n=f(this,Gd))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getEditorByUID(e){for(const t of f(this,ws).values())if(t.uid===e)return t;return null}getNextId(){return f(this,Le).getId()}combinedSignal(e){return f(this,Le).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=f(this,en,ya))==null?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await f(this,Le).updateMode(e.mode);const{offsetX:n,offsetY:s}=j(this,en,iC).call(this),a=this.getNextId(),o=j(this,en,nC).call(this,{parent:this,id:a,x:n,y:s,uiManager:f(this,Le),isCentered:!0,...t});o&&this.add(o)}async deserialize(e){var t;return await((t=f(Wr,Oc).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,f(this,Le)))||null}createAndAddNewEditor(e,t,n={}){const s=this.getNextId(),a=j(this,en,nC).call(this,{parent:this,id:s,x:e.offsetX,y:e.offsetY,uiManager:f(this,Le),isCentered:t,...n});return a&&this.add(a),a}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(e={}){this.createAndAddNewEditor(j(this,en,iC).call(this),!0,e)}setSelected(e){f(this,Le).setSelected(e)}toggleSelected(e){f(this,Le).toggleSelected(e)}unselect(e){f(this,Le).unselect(e)}pointerup(e){var s;const{isMac:t}=mi.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div||!f(this,jc)||(N(this,jc,!1),(s=f(this,en,ya))!=null&&s.isDrawer&&f(this,en,ya).supportMultipleDrawings))return;if(!f(this,Pp)){N(this,Pp,!0);return}const n=f(this,Le).getMode();if(n===Je.STAMP||n===Je.SIGNATURE){f(this,Le).unselectAll();return}this.createAndAddNewEditor(e,!1)}pointerdown(e){var s;if(f(this,Le).getMode()===Je.HIGHLIGHT&&this.enableTextSelection(),f(this,jc)){N(this,jc,!1);return}const{isMac:t}=mi.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(N(this,jc,!0),(s=f(this,en,ya))!=null&&s.isDrawer){this.startDrawingSession(e);return}const n=f(this,Le).getActive();N(this,Pp,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),f(this,ra)){f(this,en,ya).startDrawing(this,f(this,Le),!1,e);return}f(this,Le).setCurrentDrawingSession(this),N(this,ra,new AbortController);const t=f(this,Le).combinedSignal(f(this,ra));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(N(this,tl,null),this.commitOrRemove())},{signal:t}),f(this,en,ya).startDrawing(this,f(this,Le),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&N(this,tl,t);return}f(this,tl)&&setTimeout(()=>{var t;(t=f(this,tl))==null||t.focus(),N(this,tl,null)},0)}endDrawingSession(e=!1){return f(this,ra)?(f(this,Le).setCurrentDrawingSession(null),f(this,ra).abort(),N(this,ra,null),N(this,tl,null),f(this,en,ya).endDrawing(e)):null}findNewParent(e,t,n){const s=f(this,Le).findParent(t,n);return s===null||s===this?!1:(s.changeParent(e),!0)}commitOrRemove(){return f(this,ra)?(this.endDrawingSession(),!0):!1}onScaleChanging(){f(this,ra)&&f(this,en,ya).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=f(this,Le).getActive())==null?void 0:e.parent)===this&&(f(this,Le).commitOrRemove(),f(this,Le).setActiveEditor(null)),f(this,el)&&(clearTimeout(f(this,el)),N(this,el,null));for(const n of f(this,ws).values())(t=f(this,Gd))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,f(this,ws).clear(),f(this,Le).removeLayer(this)}render({viewport:e}){this.viewport=e,Wc(this.div,e);for(const t of f(this,Le).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){f(this,Le).commitOrRemove(),j(this,en,Jx).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,Wc(this.div,{rotation:n}),t!==n)for(const s of f(this,ws).values())s.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return f(this,Le).viewParameters.realScale}};Gd=new WeakMap,Pp=new WeakMap,Fc=new WeakMap,Uc=new WeakMap,el=new WeakMap,ws=new WeakMap,jc=new WeakMap,Lp=new WeakMap,Fp=new WeakMap,ra=new WeakMap,tl=new WeakMap,hi=new WeakMap,nl=new WeakMap,Bc=new WeakMap,Up=new WeakMap,Le=new WeakMap,Oc=new WeakMap,en=new WeakSet,tC=function(){return f(this,ws).size!==0?f(this,ws).values():f(this,Le).getEditors(this.pageIndex)},G4=function(e){f(this,Le).unselectAll();const{target:t}=e;if(t===f(this,hi).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&f(this,hi).div.contains(t)){const{isMac:n}=mi.platform;if(e.button!==0||e.ctrlKey&&n)return;f(this,Le).showAllEditors("highlight",!0,!0),f(this,hi).div.classList.add("free"),this.toggleDrawing(),yb.startHighlighting(this,f(this,Le).direction==="ltr",{target:f(this,hi).div,x:e.x,y:e.y}),f(this,hi).div.addEventListener("pointerup",()=>{f(this,hi).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:f(this,Le)._signal}),e.preventDefault()}},ya=function(){return f(Wr,Oc).get(f(this,Le).getMode())},nC=function(e){const t=f(this,en,ya);return t?new t.prototype.constructor(e):null},iC=function(){const{x:e,y:t,width:n,height:s}=this.boundingClientRect,a=Math.max(0,e),o=Math.max(0,t),c=Math.min(window.innerWidth,e+n),u=Math.min(window.innerHeight,t+s),d=(a+c)/2-e,p=(o+u)/2-t,[y,v]=this.viewport.rotation%180===0?[d,p]:[p,d];return{offsetX:y,offsetY:v}},Jx=function(){for(const e of f(this,ws).values())e.isEmpty()&&e.remove()},ye(Wr,"_initialized",!1),P(Wr,Oc,new Map([F1,$1,Z1,yb,Q1].map(e=>[e._editorType,e])));let xb=Wr;var aa,Zi,Vd,v0,Bb,V4,Wa,sC,q4,rC;const Qn=class Qn{constructor({pageIndex:e}){P(this,Wa);P(this,aa,null);P(this,Zi,new Map);P(this,Vd,new Map);this.pageIndex=e}setParent(e){if(!f(this,aa)){N(this,aa,e);return}if(f(this,aa)!==e){if(f(this,Zi).size>0)for(const t of f(this,Zi).values())t.remove(),e.append(t);N(this,aa,e)}}static get _svgFactory(){return nt(this,"_svgFactory",new jg)}draw(e,t=!1,n=!1){const s=Kn(Qn,v0)._++,a=j(this,Wa,sC).call(this),o=Qn._svgFactory.createElement("defs");a.append(o);const c=Qn._svgFactory.createElement("path");o.append(c);const u=`path_p${this.pageIndex}_${s}`;c.setAttribute("id",u),c.setAttribute("vector-effect","non-scaling-stroke"),t&&f(this,Vd).set(s,c);const d=n?j(this,Wa,q4).call(this,o,u):null,p=Qn._svgFactory.createElement("use");return a.append(p),p.setAttribute("href",`#${u}`),this.updateProperties(a,e),f(this,Zi).set(s,a),{id:s,clipPathId:`url(#${d})`}}drawOutline(e,t){const n=Kn(Qn,v0)._++,s=j(this,Wa,sC).call(this),a=Qn._svgFactory.createElement("defs");s.append(a);const o=Qn._svgFactory.createElement("path");a.append(o);const c=`path_p${this.pageIndex}_${n}`;o.setAttribute("id",c),o.setAttribute("vector-effect","non-scaling-stroke");let u;if(t){const y=Qn._svgFactory.createElement("mask");a.append(y),u=`mask_p${this.pageIndex}_${n}`,y.setAttribute("id",u),y.setAttribute("maskUnits","objectBoundingBox");const v=Qn._svgFactory.createElement("rect");y.append(v),v.setAttribute("width","1"),v.setAttribute("height","1"),v.setAttribute("fill","white");const w=Qn._svgFactory.createElement("use");y.append(w),w.setAttribute("href",`#${c}`),w.setAttribute("stroke","none"),w.setAttribute("fill","black"),w.setAttribute("fill-rule","nonzero"),w.classList.add("mask")}const d=Qn._svgFactory.createElement("use");s.append(d),d.setAttribute("href",`#${c}`),u&&d.setAttribute("mask",`url(#${u})`);const p=d.cloneNode();return s.append(p),d.classList.add("mainOutline"),p.classList.add("secondaryOutline"),this.updateProperties(s,e),f(this,Zi).set(n,s),n}finalizeDraw(e,t){f(this,Vd).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var u;if(!t)return;const{root:n,bbox:s,rootClass:a,path:o}=t,c=typeof e=="number"?f(this,Zi).get(e):e;if(c){if(n&&j(this,Wa,rC).call(this,c,n),s&&j(u=Qn,Bb,V4).call(u,c,s),a){const{classList:d}=c;for(const[p,y]of Object.entries(a))d.toggle(p,y)}if(o){const p=c.firstChild.firstChild;j(this,Wa,rC).call(this,p,o)}}}updateParent(e,t){if(t===this)return;const n=f(this,Zi).get(e);n&&(f(t,aa).append(n),f(this,Zi).delete(e),f(t,Zi).set(e,n))}remove(e){f(this,Vd).delete(e),f(this,aa)!==null&&(f(this,Zi).get(e).remove(),f(this,Zi).delete(e))}destroy(){N(this,aa,null);for(const e of f(this,Zi).values())e.remove();f(this,Zi).clear(),f(this,Vd).clear()}};aa=new WeakMap,Zi=new WeakMap,Vd=new WeakMap,v0=new WeakMap,Bb=new WeakSet,V4=function(e,[t,n,s,a]){const{style:o}=e;o.top=`${100*n}%`,o.left=`${100*t}%`,o.width=`${100*s}%`,o.height=`${100*a}%`},Wa=new WeakSet,sC=function(){const e=Qn._svgFactory.create(1,1,!0);return f(this,aa).append(e),e.setAttribute("aria-hidden",!0),e},q4=function(e,t){const n=Qn._svgFactory.createElement("clipPath");e.append(n);const s=`clip_${t}`;n.setAttribute("id",s),n.setAttribute("clipPathUnits","objectBoundingBox");const a=Qn._svgFactory.createElement("use");return n.append(a),a.setAttribute("href",`#${t}`),a.classList.add("clip"),s},rC=function(e,t){for(const[n,s]of Object.entries(t))s===null?e.removeAttribute(n):e.setAttribute(n,s)},P(Qn,Bb),P(Qn,v0,0);let bb=Qn;globalThis._pdfjsTestingUtils={HighlightOutliner:j1};globalThis.pdfjsLib={AbortException:ul,AnnotationEditorLayer:xb,AnnotationEditorParamsType:pt,AnnotationEditorType:Je,AnnotationEditorUIManager:Xc,AnnotationLayer:uT,AnnotationMode:za,AnnotationType:Fn,applyOpacity:zL,build:$5,ColorPicker:Ug,createValidAbsoluteUrl:KC,CSSConstants:HL,DOMSVGFactory:jg,DrawLayer:bb,FeatureTest:mi,fetchData:Xp,findContrastColor:GL,getDocument:aT,getFilenameFromUrl:jL,getPdfFilenameFromUrl:BL,getRGB:Jp,getUuid:ZC,getXfaPageViewport:OL,GlobalWorkerOptions:Ir,ImageKind:Ag,InvalidPDFException:cb,isDataScheme:k0,isPdfFile:hw,isValidExplicitDest:S5,MathClamp:zi,noContextMenu:sr,normalizeUnicode:FL,OPS:Op,OutputScale:la,PasswordResponses:PL,PDFDataRangeTransport:oT,PDFDateString:Pg,PDFWorker:Hp,PermissionFlag:IL,PixelsPerInch:dl,RenderingCancelledException:dw,renderRichText:nT,ResponseException:Dg,setLayerDimensions:Wc,shadow:nt,SignatureExtractor:Ga,stopEvent:bn,SupportedImageMimeTypes:ub,TextLayer:Fg,TouchManager:Lg,updateUrlHash:QC,Util:Me,VerbosityLevel:N0,version:q5,XfaLayer:tT};const lY=Object.freeze(Object.defineProperty({__proto__:null,AbortException:ul,AnnotationEditorLayer:xb,AnnotationEditorParamsType:pt,AnnotationEditorType:Je,AnnotationEditorUIManager:Xc,AnnotationLayer:uT,AnnotationMode:za,AnnotationType:Fn,CSSConstants:HL,ColorPicker:Ug,DOMSVGFactory:jg,DrawLayer:bb,FeatureTest:mi,GlobalWorkerOptions:Ir,ImageKind:Ag,InvalidPDFException:cb,MathClamp:zi,OPS:Op,OutputScale:la,PDFDataRangeTransport:oT,PDFDateString:Pg,PDFWorker:Hp,PasswordResponses:PL,PermissionFlag:IL,PixelsPerInch:dl,RenderingCancelledException:dw,ResponseException:Dg,SignatureExtractor:Ga,SupportedImageMimeTypes:ub,TextLayer:Fg,TouchManager:Lg,Util:Me,VerbosityLevel:N0,XfaLayer:tT,applyOpacity:zL,build:$5,createValidAbsoluteUrl:KC,fetchData:Xp,findContrastColor:GL,getDocument:aT,getFilenameFromUrl:jL,getPdfFilenameFromUrl:BL,getRGB:Jp,getUuid:ZC,getXfaPageViewport:OL,isDataScheme:k0,isPdfFile:hw,isValidExplicitDest:S5,noContextMenu:sr,normalizeUnicode:FL,renderRichText:nT,setLayerDimensions:Wc,shadow:nt,stopEvent:bn,updateUrlHash:QC,version:q5},Symbol.toStringTag,{value:"Module"}));function $4(i){var e,t,n="";if(typeof i=="string"||typeof i=="number")n+=i;else if(typeof i=="object")if(Array.isArray(i)){var s=i.length;for(e=0;e<s;e++)i[e]&&(t=$4(i[e]))&&(n&&(n+=" "),n+=t)}else for(t in i)i[t]&&(n&&(n+=" "),n+=t);return n}function mw(){for(var i,e,t=0,n="",s=arguments.length;t<s;t++)(i=arguments[t])&&(e=$4(i))&&(n&&(n+=" "),n+=e);return n}var fD=Object.prototype.hasOwnProperty;function pD(i,e,t){for(t of i.keys())if(uf(t,e))return t}function uf(i,e){var t,n,s;if(i===e)return!0;if(i&&e&&(t=i.constructor)===e.constructor){if(t===Date)return i.getTime()===e.getTime();if(t===RegExp)return i.toString()===e.toString();if(t===Array){if((n=i.length)===e.length)for(;n--&&uf(i[n],e[n]););return n===-1}if(t===Set){if(i.size!==e.size)return!1;for(n of i)if(s=n,s&&typeof s=="object"&&(s=pD(e,s),!s)||!e.has(s))return!1;return!0}if(t===Map){if(i.size!==e.size)return!1;for(n of i)if(s=n[0],s&&typeof s=="object"&&(s=pD(e,s),!s)||!uf(n[1],e.get(s)))return!1;return!0}if(t===ArrayBuffer)i=new Uint8Array(i),e=new Uint8Array(e);else if(t===DataView){if((n=i.byteLength)===e.byteLength)for(;n--&&i.getInt8(n)===e.getInt8(n););return n===-1}if(ArrayBuffer.isView(i)){if((n=i.byteLength)===e.byteLength)for(;n--&&i[n]===e[n];);return n===-1}if(!t||typeof i=="object"){n=0;for(t in i)if(fD.call(i,t)&&++n&&!fD.call(e,t)||!(t in e)||!uf(i[t],e[t]))return!1;return Object.keys(e).length===n}}return i!==i&&e!==e}function L0(i){let e=!1;return{promise:new Promise((n,s)=>{i.then(a=>!e&&n(a)).catch(a=>!e&&s(a))}),cancel(){e=!0}}}const cY=["onCopy","onCut","onPaste"],uY=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],dY=["onFocus","onBlur"],hY=["onInput","onInvalid","onReset","onSubmit"],fY=["onLoad","onError"],pY=["onKeyDown","onKeyPress","onKeyUp"],mY=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],gY=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],yY=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],vY=["onSelect"],xY=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],bY=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],wY=["onScroll"],SY=["onWheel"],EY=["onAnimationStart","onAnimationEnd","onAnimationIteration"],AY=["onTransitionEnd"],CY=["onToggle"],TY=["onChange"],_Y=[...cY,...uY,...dY,...hY,...fY,...pY,...mY,...gY,...yY,...vY,...xY,...bY,...wY,...SY,...EY,...AY,...TY,...CY];function Y4(i,e){const t={};for(const n of _Y){const s=i[n];s&&(e?t[n]=(a=>s(a,e(n))):t[n]=s)}return t}var NY="Invariant failed";function Zt(i,e){if(!i)throw new Error(NY)}var rA,mD;function RY(){if(mD)return rA;mD=1;var i=function(){};return rA=i,rA}var MY=RY();const qi=Ob(MY),W4=k.createContext(null),kY="noopener noreferrer nofollow";class DY{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return Zt(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){Zt(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||kY,e.target=n?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{Zt(this.pdfDocument),Zt(e),typeof e=="string"?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(t=>{Zt(Array.isArray(t));const n=t[0];new Promise(s=>{Zt(this.pdfDocument),n instanceof Object?this.pdfDocument.getPageIndex(n).then(a=>{s(a)}).catch(()=>{Zt(!1)}):typeof n=="number"?s(n):Zt(!1)}).then(s=>{const a=s+1;Zt(this.pdfViewer),Zt(a>=1&&a<=this.pagesCount),this.pdfViewer.scrollPageIntoView({dest:t,pageIndex:s,pageNumber:a})})})}goToPage(e){const t=e-1;Zt(this.pdfViewer),Zt(e>=1&&e<=this.pagesCount),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function df({children:i,type:e}){return m.jsx("div",{className:`react-pdf__message react-pdf__message--${e}`,children:i})}const gD={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function IY(i,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function zp(){return k.useReducer(IY,{value:void 0,error:void 0})}const gw=typeof window<"u",X4=gw&&window.location.protocol==="file:";function PY(i){return typeof i<"u"}function Cu(i){return PY(i)&&i!==null}function LY(i){return typeof i=="string"}function FY(i){return i instanceof ArrayBuffer}function UY(i){return Zt(gw),i instanceof Blob}function aC(i){return LY(i)&&/^data:/.test(i)}function yD(i){Zt(aC(i));const[e="",t=""]=i.split(",");return e.split(";").indexOf("base64")!==-1?atob(t):unescape(t)}function jY(){return gw&&window.devicePixelRatio||1}const J4="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function vD(){qi(!X4,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${J4}`)}function BY(){qi(!X4,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${J4}`)}function Yd(i){i!=null&&i.cancel&&i.cancel()}function oC(i,e){return Object.defineProperty(i,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.view[3]},configurable:!0}),i}function OY(i){return i.name==="RenderingCancelledException"}function HY(i){return new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{if(!n.result)return t(new Error("Error while reading a file."));e(n.result)},n.onerror=s=>{if(!s.target)return t(new Error("Error while reading a file."));const{error:a}=s.target;if(!a)return t(new Error("Error while reading a file."));switch(a.code){case a.NOT_FOUND_ERR:return t(new Error("Error while reading a file: File not found."));case a.SECURITY_ERR:return t(new Error("Error while reading a file: Security error."));case a.ABORT_ERR:return t(new Error("Error while reading a file: Aborted."));default:return t(new Error("Error while reading a file."))}},n.readAsArrayBuffer(i)})}const{PDFDataRangeTransport:zY}=lY,GY=(i,e)=>{switch(e){case gD.NEED_PASSWORD:{const t=prompt("Enter the password to open this PDF file.");i(t);break}case gD.INCORRECT_PASSWORD:{const t=prompt("Invalid password. Please try again.");i(t);break}}};function xD(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const VY=k.forwardRef(function({children:e,className:t,error:n="Failed to load PDF file.",externalLinkRel:s,externalLinkTarget:a,file:o,inputRef:c,imageResourcesPath:u,loading:d="Loading PDF",noData:p="No PDF file specified.",onItemClick:y,onLoadError:v,onLoadProgress:w,onLoadSuccess:A,onPassword:C=GY,onSourceError:T,onSourceSuccess:_,options:D,renderMode:R,rotate:L,scale:F,...U},M){const[O,z]=zp(),{value:J,error:G}=O,[X,ie]=zp(),{value:$,error:ee}=X,H=k.useRef(new DY),V=k.useRef([]),Q=k.useRef(void 0),ce=k.useRef(void 0);o&&o!==Q.current&&xD(o)&&(qi(!uf(o,Q.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),Q.current=o),D&&D!==ce.current&&(qi(!uf(D,ce.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),ce.current=D);const ve=k.useRef({scrollPageIntoView:Ye=>{const{dest:at,pageNumber:pe,pageIndex:Se=pe-1}=Ye;if(y){y({dest:at,pageIndex:Se,pageNumber:pe});return}const ze=V.current[Se];if(ze){ze.scrollIntoView();return}qi(!1,`An internal link leading to page ${pe} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});k.useImperativeHandle(M,()=>({linkService:H,pages:V,viewer:ve}),[]);function q(){_&&_()}function Z(){G&&(qi(!1,G.toString()),T&&T(G))}function ue(){z({type:"RESET"})}k.useEffect(ue,[o,z]);const me=k.useCallback(async()=>{if(!o)return null;if(typeof o=="string")return aC(o)?{data:yD(o)}:(vD(),{url:o});if(o instanceof zY)return{range:o};if(FY(o))return{data:o};if(gw&&UY(o))return{data:await HY(o)};if(Zt(typeof o=="object"),Zt(xD(o)),"url"in o&&typeof o.url=="string"){if(aC(o.url)){const{url:Ye,...at}=o;return{data:yD(Ye),...at}}vD()}return o},[o]);k.useEffect(()=>{const Ye=L0(me());return Ye.promise.then(at=>{z({type:"RESOLVE",value:at})}).catch(at=>{z({type:"REJECT",error:at})}),()=>{Yd(Ye)}},[me,z]),k.useEffect(()=>{if(!(typeof J>"u")){if(J===!1){Z();return}q()}},[J]);function be(){$&&(A&&A($),V.current=new Array($.numPages),H.current.setDocument($))}function _e(){ee&&(qi(!1,ee.toString()),v&&v(ee))}k.useEffect(function(){ie({type:"RESET"})},[ie,J]),k.useEffect(function(){if(!J)return;const at=D?{...J,...D}:J,pe=aT(at);w&&(pe.onProgress=w),C&&(pe.onPassword=C);const Se=pe,ze=Se.promise.then($e=>{ie({type:"RESOLVE",value:$e})}).catch($e=>{Se.destroyed||ie({type:"REJECT",error:$e})});return()=>{ze.finally(()=>Se.destroy())}},[D,ie,J]),k.useEffect(()=>{if(!(typeof $>"u")){if($===!1){_e();return}be()}},[$]),k.useEffect(function(){H.current.setViewer(ve.current),H.current.setExternalLinkRel(s),H.current.setExternalLinkTarget(a)},[s,a]);const Te=k.useCallback((Ye,at)=>{V.current[Ye]=at},[]),mt=k.useCallback(Ye=>{delete V.current[Ye]},[]),rt=k.useMemo(()=>({imageResourcesPath:u,linkService:H.current,onItemClick:y,pdf:$,registerPage:Te,renderMode:R,rotate:L,scale:F,unregisterPage:mt}),[u,y,$,Te,R,L,F,mt]),lt=k.useMemo(()=>Y4(U,()=>$),[U,$]);function En(){function Ye(pe){return!!(pe!=null&&pe.pdf)}if(!Ye(rt))throw new Error("pdf is undefined");const at=typeof e=="function"?e(rt):e;return m.jsx(W4.Provider,{value:rt,children:at})}function wt(){return o?$==null?m.jsx(df,{type:"loading",children:typeof d=="function"?d():d}):$===!1?m.jsx(df,{type:"error",children:typeof n=="function"?n():n}):En():m.jsx(df,{type:"no-data",children:typeof p=="function"?p():p})}return m.jsx("div",{className:mw("react-pdf__Document",t),ref:c,...lt,children:wt()})});function K4(){return k.useContext(W4)}function Q4(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var t=i.filter(Boolean);if(t.length<=1){var n=t[0];return n||null}return function(a){for(var o=0,c=t;o<c.length;o++){var u=c[o];typeof u=="function"?u(a):u&&(u.current=a)}}}const Z4=k.createContext(null);function yw(){return k.useContext(Z4)}function qY(){const i=K4(),e=yw();Zt(e);const t={...i,...e},{imageResourcesPath:n,linkService:s,onGetAnnotationsError:a,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:c,onRenderAnnotationLayerSuccess:u,page:d,pdf:p,renderForms:y,rotate:v,scale:w=1}=t;Zt(p),Zt(d),Zt(s);const[A,C]=zp(),{value:T,error:_}=A,D=k.useRef(null);qi(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function R(){T&&o&&o(T)}function L(){_&&(qi(!1,_.toString()),a&&a(_))}k.useEffect(function(){C({type:"RESET"})},[C,d]),k.useEffect(function(){if(!d)return;const z=L0(d.getAnnotations()),J=z;return z.promise.then(G=>{C({type:"RESOLVE",value:G})}).catch(G=>{C({type:"REJECT",error:G})}),()=>{Yd(J)}},[C,d]),k.useEffect(()=>{if(T!==void 0){if(T===!1){L();return}R()}},[T]);function F(){u&&u()}function U(O){qi(!1,`${O}`),c&&c(O)}const M=k.useMemo(()=>d.getViewport({scale:w,rotation:v}),[d,v,w]);return k.useEffect(function(){if(!p||!d||!s||!T)return;const{current:z}=D;if(!z)return;const J=M.clone({dontFlip:!0}),G={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:p.annotationStorage,commentManager:null,div:z,l10n:null,linkService:s,page:d,structTreeLayer:null,viewport:J},X={annotations:T,annotationStorage:p.annotationStorage,div:z,imageResourcesPath:n,linkService:s,page:d,renderForms:y,viewport:J};z.innerHTML="";try{new uT(G).render(X),F()}catch(ie){U(ie)}return()=>{}},[T,n,s,d,p,y,M]),m.jsx("div",{className:mw("react-pdf__Page__annotations","annotationLayer"),ref:D})}const e3={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},$Y=/^H(\d+)$/;function YY(i){return i in e3}function vw(i){return"children"in i}function t3(i){return vw(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function WY(i){const e={};if(vw(i)){const{role:t}=i,n=t.match($Y);if(n)e.role="heading",e["aria-level"]=Number(n[1]);else if(YY(t)){const s=e3[t];s&&(e.role=s)}}return e}function n3(i){const e={};if(vw(i)){if(i.alt!==void 0&&(e["aria-label"]=i.alt),i.lang!==void 0&&(e.lang=i.lang),t3(i)){const[t]=i.children;if(t){const n=n3(t);return{...e,...n}}}}else"id"in i&&(e["aria-owns"]=i.id);return e}function XY(i){return i?{...WY(i),...n3(i)}:null}function i3({className:i,node:e}){const t=k.useMemo(()=>XY(e),[e]),n=k.useMemo(()=>!vw(e)||t3(e)?null:e.children.map((s,a)=>m.jsx(i3,{node:s},a)),[e]);return m.jsx("span",{className:i,...t,children:n})}function JY(){const i=yw();Zt(i);const{onGetStructTreeError:e,onGetStructTreeSuccess:t}=i,[n,s]=zp(),{value:a,error:o}=n,{customTextRenderer:c,page:u}=i;function d(){a&&t&&t(a)}function p(){o&&(qi(!1,o.toString()),e&&e(o))}return k.useEffect(function(){s({type:"RESET"})},[s,u]),k.useEffect(function(){if(c||!u)return;const v=L0(u.getStructTree()),w=v;return v.promise.then(A=>{s({type:"RESOLVE",value:A})}).catch(A=>{s({type:"REJECT",error:A})}),()=>Yd(w)},[c,u,s]),k.useEffect(()=>{if(a!==void 0){if(a===!1){p();return}d()}},[a]),a?m.jsx(i3,{className:"react-pdf__Page__structTree structTree",node:a}):null}const bD=za;function KY(i){const e=yw();Zt(e);const t={...e,...i},{_className:n,canvasBackground:s,devicePixelRatio:a=jY(),onRenderError:o,onRenderSuccess:c,page:u,renderForms:d,renderTextLayer:p,rotate:y,scale:v}=t,{canvasRef:w}=i;Zt(u);const A=k.useRef(null);function C(){u&&c&&c(oC(u,v))}function T(L){OY(L)||(qi(!1,L.toString()),o&&o(L))}const _=k.useMemo(()=>u.getViewport({scale:v*a,rotation:y}),[a,u,y,v]),D=k.useMemo(()=>u.getViewport({scale:v,rotation:y}),[u,y,v]);k.useEffect(function(){if(!u)return;u.cleanup();const{current:F}=A;if(!F)return;F.width=_.width,F.height=_.height,F.style.width=`${Math.floor(D.width)}px`,F.style.height=`${Math.floor(D.height)}px`,F.style.visibility="hidden";const U={annotationMode:d?bD.ENABLE_FORMS:bD.ENABLE,canvas:F,canvasContext:F.getContext("2d",{alpha:!1}),viewport:_};s&&(U.background=s);const M=u.render(U),O=M;return M.promise.then(()=>{F.style.visibility="",C()}).catch(T),()=>Yd(O)},[s,u,d,_,D]);const R=k.useCallback(()=>{const{current:L}=A;L&&(L.width=0,L.height=0)},[]);return k.useEffect(()=>R,[R]),m.jsx("canvas",{className:`${n}__canvas`,dir:"ltr",ref:Q4(w,A),style:{display:"block",userSelect:"none"},children:p?m.jsx(JY,{}):null})}function QY(i){return"str"in i}function ZY(){const i=yw();Zt(i);const{customTextRenderer:e,onGetTextError:t,onGetTextSuccess:n,onRenderTextLayerError:s,onRenderTextLayerSuccess:a,page:o,pageIndex:c,pageNumber:u,rotate:d,scale:p}=i;Zt(o);const[y,v]=zp(),{value:w,error:A}=y,C=k.useRef(null);qi(Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function T(){w&&n&&n(w)}function _(){A&&(qi(!1,A.toString()),t&&t(A))}k.useEffect(function(){v({type:"RESET"})},[o,v]),k.useEffect(function(){if(!o)return;const O=L0(o.getTextContent()),z=O;return O.promise.then(J=>{v({type:"RESOLVE",value:J})}).catch(J=>{v({type:"REJECT",error:J})}),()=>Yd(z)},[o,v]),k.useEffect(()=>{if(w!==void 0){if(w===!1){_();return}T()}},[w]);const D=k.useCallback(()=>{a&&a()},[a]),R=k.useCallback(M=>{qi(!1,M.toString()),s&&s(M)},[s]);function L(){const M=C.current;M&&M.classList.add("selecting")}function F(){const M=C.current;M&&M.classList.remove("selecting")}const U=k.useMemo(()=>o.getViewport({scale:p,rotation:d}),[o,d,p]);return k.useLayoutEffect(function(){if(!o||!w)return;const{current:O}=C;if(!O)return;O.innerHTML="";const z=o.streamTextContent({includeMarkedContent:!0}),J={container:O,textContentSource:z,viewport:U},G=new Fg(J),X=G;return G.render().then(()=>{const ie=document.createElement("div");ie.className="endOfContent",O.append(ie);const $=O.querySelectorAll('[role="presentation"]');if(e){let ee=0;w.items.forEach((H,V)=>{if(!QY(H))return;const Q=$[ee];if(!Q)return;const ce=e({pageIndex:c,pageNumber:u,itemIndex:V,...H});Q.innerHTML=ce,ee+=H.str&&H.hasEOL?2:1})}D()}).catch(R),()=>Yd(X)},[e,R,D,o,c,u,w,U]),m.jsx("div",{className:mw("react-pdf__Page__textContent","textLayer"),onMouseUp:F,onMouseDown:L,ref:C})}const wD=1;function eW(i){const t={...K4(),...i},{_className:n="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:a,canvasRef:o,children:c,className:u,customRenderer:d,customTextRenderer:p,devicePixelRatio:y,error:v="Failed to load the page.",height:w,inputRef:A,loading:C="Loading page",noData:T="No page specified.",onGetAnnotationsError:_,onGetAnnotationsSuccess:D,onGetStructTreeError:R,onGetStructTreeSuccess:L,onGetTextError:F,onGetTextSuccess:U,onLoadError:M,onLoadSuccess:O,onRenderAnnotationLayerError:z,onRenderAnnotationLayerSuccess:J,onRenderError:G,onRenderSuccess:X,onRenderTextLayerError:ie,onRenderTextLayerSuccess:$,pageIndex:ee,pageNumber:H,pdf:V,registerPage:Q,renderAnnotationLayer:ce=!0,renderForms:ve=!1,renderMode:q="canvas",renderTextLayer:Z=!0,rotate:ue,scale:me=wD,unregisterPage:be,width:_e,...Te}=t,[mt,rt]=zp(),{value:lt,error:En}=mt,wt=k.useRef(null);Zt(V);const Ye=Cu(H)?H-1:ee??null,at=H??(Cu(ee)?ee+1:null),pe=ue??(lt?lt.rotate:null),Se=k.useMemo(()=>{if(!lt)return null;let Bt=1;const Et=me??wD;if(_e||w){const an=lt.getViewport({scale:1,rotation:pe});_e?Bt=_e/an.width:w&&(Bt=w/an.height)}return Et*Bt},[w,lt,pe,me,_e]);k.useEffect(function(){return()=>{Cu(Ye)&&s&&be&&be(Ye)}},[s,V,Ye,be]);function ze(){if(O){if(!lt||!Se)return;O(oC(lt,Se))}if(s&&Q){if(!Cu(Ye)||!wt.current)return;Q(Ye,wt.current)}}function $e(){En&&(qi(!1,En.toString()),M&&M(En))}k.useEffect(function(){rt({type:"RESET"})},[rt,V,Ye]),k.useEffect(function(){if(!V||!at)return;const Et=L0(V.getPage(at)),an=Et;return Et.promise.then(In=>{rt({type:"RESOLVE",value:In})}).catch(In=>{rt({type:"REJECT",error:In})}),()=>Yd(an)},[rt,V,at]),k.useEffect(()=>{if(lt!==void 0){if(lt===!1){$e();return}ze()}},[lt,Se]);const gt=k.useMemo(()=>Cu(Ye)&&at&&Cu(pe)&&Cu(Se)?{_className:n,canvasBackground:a,customTextRenderer:p,devicePixelRatio:y,onGetAnnotationsError:_,onGetAnnotationsSuccess:D,onGetStructTreeError:R,onGetStructTreeSuccess:L,onGetTextError:F,onGetTextSuccess:U,onRenderAnnotationLayerError:z,onRenderAnnotationLayerSuccess:J,onRenderError:G,onRenderSuccess:X,onRenderTextLayerError:ie,onRenderTextLayerSuccess:$,page:lt,pageIndex:Ye,pageNumber:at,renderForms:ve,renderTextLayer:Z,rotate:pe,scale:Se}:null,[n,a,p,y,_,D,R,L,F,U,z,J,G,X,ie,$,lt,Ye,at,ve,Z,pe,Se]),Xn=k.useMemo(()=>Y4(Te,()=>lt&&(Se?oC(lt,Se):void 0)),[Te,lt,Se]),rn=`${Ye}@${Se}/${pe}`;function On(){switch(q){case"custom":return Zt(d),m.jsx(d,{},`${rn}_custom`);case"none":return null;case"canvas":default:return m.jsx(KY,{canvasRef:o},`${rn}_canvas`)}}function Ja(){return Z?m.jsx(ZY,{},`${rn}_text`):null}function St(){return ce?m.jsx(qY,{},`${rn}_annotations`):null}function ar(){function Bt(an){return!!(an!=null&&an.page)}if(!Bt(gt))throw new Error("page is undefined");const Et=typeof c=="function"?c(gt):c;return m.jsxs(Z4.Provider,{value:gt,children:[On(),Ja(),St(),Et]})}function jr(){return at?V===null||lt===void 0||lt===null?m.jsx(df,{type:"loading",children:typeof C=="function"?C():C}):V===!1||lt===!1?m.jsx(df,{type:"error",children:typeof v=="function"?v():v}):ar():m.jsx(df,{type:"no-data",children:typeof T=="function"?T():T})}return m.jsx("div",{className:mw(n,u),"data-page-number":at,ref:Q4(A,wt),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":`${Se}`,"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"},...Xn,children:jr()})}BY();Ir.workerSrc="pdf.worker.mjs";const{useParams:tW,useNavigate:nW}=gi;Ir.workerSrc="https://esm.sh/pdfjs-dist@4.4.168/build/pdf.worker.min.mjs";const iW=()=>{const{bookId:i}=tW(),e=nW(),{currentUser:t,userType:n,allBooks:s}=Yi(),[a,o]=k.useState(null),[c,u]=k.useState(!0),[d,p]=k.useState(!1),[y,v]=k.useState(!1),[w,A]=k.useState({theme:"dark",fontSize:18,lineHeight:1.8,fontFamily:"serif"}),[C,T]=k.useState(0),[_,D]=k.useState(1),[R,L]=k.useState(1.2),[F,U]=k.useState(null),[M,O]=k.useState(0),z=k.useRef(null);k.useEffect(()=>{(async()=>{var ce,ve,q;if(!i)return;u(!0);let Q=s.find(Z=>Z.id===i);if(!Q&&t&&(n===It.SELLER?Q=(ce=t.uploadedBooks)==null?void 0:ce.find(Z=>Z.id===i):n===It.USER&&(Q=(ve=t.purchaseHistory)==null?void 0:ve.find(Z=>Z.id===i))),Q){const Z=Q.price===0;let ue=Z;if(!ue&&t&&(n===It.SELLER?ue=Q.sellerId===t.id:n===It.USER&&(ue=(q=t.purchaseHistory)==null?void 0:q.some(me=>me.id===i))),ue){if(o(Q),Q.pdfUrl)try{const be=await(await fetch(Q.pdfUrl)).blob(),_e=URL.createObjectURL(be);U(_e)}catch{U(Q.pdfUrl)}}else if(!t&&!Z){e("/login");return}else if(t){alert("Access denied. Please purchase this book."),e("/store");return}}u(!1)})()},[i,t,n,e,s]),k.useEffect(()=>()=>{F&&F.startsWith("blob:")&&URL.revokeObjectURL(F)},[F]);const J=()=>{switch(w.theme){case"light":return"bg-[#f8f9fa] text-neutral-900 selection:bg-yellow-200";case"sepia":return"bg-[#f4ecd8] text-[#5b4636] selection:bg-[#d6cbb1]";case"dark":default:return"bg-[#0a0a0a] text-[#d4d4d4] selection:bg-white/20"}},G=()=>{switch(w.theme){case"light":return"bg-white shadow-[0_0_50px_rgba(0,0,0,0.1)] border-neutral-200";case"sepia":return"bg-[#faf4e8] shadow-[0_0_50px_rgba(91,70,54,0.1)] border-[#e3d8c4]";case"dark":default:return"bg-[#111] shadow-[0_0_50px_rgba(0,0,0,0.8)] border-white/5"}},X=()=>{switch(w.fontFamily){case"sans":return"font-sans";case"mono":return"font-mono";case"serif":default:return"font-serif"}},ie=V=>V.split(/(!\[.*?\]\(.*?\))/g).map((ce,ve)=>{const q=ce.match(/!\[(.*?)\]\((.*?)\)/);return q?m.jsxs("div",{className:"my-8 flex flex-col items-center group",children:[m.jsx("div",{className:"relative rounded-lg overflow-hidden shadow-2xl border border-white/10 bg-black",children:m.jsx("img",{src:q[2],alt:q[1],className:"max-h-[500px] w-auto object-contain transition-transform duration-500 hover:scale-[1.02]"})}),q[1]&&m.jsx("span",{className:"text-[10px] text-neutral-500 mt-3 font-mono uppercase tracking-widest",children:q[1]})]},ve):m.jsx("div",{className:"whitespace-pre-wrap",children:ce.split(`
`).map((Z,ue)=>{if(!Z.trim())return m.jsx("div",{className:"h-4"},ue);if(Z.startsWith("# "))return m.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-6 mt-8 leading-tight",children:Z.replace("# ","")},ue);if(Z.startsWith("## "))return m.jsx("h2",{className:"text-2xl font-bold mb-4 mt-6 leading-snug opacity-90",children:Z.replace("## ","")},ue);if(Z.startsWith("### "))return m.jsx("h3",{className:"text-xl font-bold mb-3 mt-5 leading-snug opacity-80",children:Z.replace("### ","")},ue);if(Z.startsWith("- "))return m.jsx("li",{className:"ml-6 list-disc mb-2 pl-2",children:Z.replace("- ","")},ue);const me=Z.split(/(\*\*.*?\*\*)/g);return m.jsx("p",{className:"mb-4 leading-relaxed",children:me.map((be,_e)=>be.startsWith("**")&&be.endsWith("**")?m.jsx("strong",{className:"font-bold opacity-100",children:be.slice(2,-2)},_e):be)},ue)})},ve)});if(c)return m.jsxs("div",{className:"min-h-screen bg-black flex flex-col items-center justify-center relative overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20"}),m.jsx(Ya,{className:"w-16 h-16 mb-6 border border-white/20 bg-black shadow-[0_0_30px_white/20] rounded-full"}),m.jsx("p",{className:"text-neutral-500 font-mono text-xs uppercase tracking-widest animate-pulse",children:"Initializing Reader Engine..."})]});if(!a)return null;const $=a.pages&&a.pages.length>0?a.pages:[{id:"1",title:"Cover",pageNumber:1,content:"No content available."}],ee=$[M],H=a.pdfUrl?Math.round(_/C*100):Math.round((M+1)/$.length*100);return m.jsxs("div",{className:`min-h-screen w-full flex flex-col fixed inset-0 z-50 transition-colors duration-500 font-sans ${J()}`,children:[m.jsxs("header",{className:`
                h-16 flex items-center justify-between px-4 md:px-8 border-b z-40 relative backdrop-blur-xl transition-colors duration-300
                ${w.theme==="dark"?"bg-black/80 border-white/10":w.theme==="light"?"bg-white/80 border-black/5":"bg-[#f4ecd8]/80 border-[#5b4636]/10"}
            `,children:[m.jsxs("div",{className:"flex items-center gap-2 md:gap-4 flex-1 min-w-0",children:[m.jsx("button",{onClick:()=>e(-1),className:"group p-2 rounded-full hover:bg-black/5 transition-all",title:"Exit",children:m.jsx(Yc,{className:`w-5 h-5 ${w.theme==="dark"?"text-neutral-400 group-hover:text-white":"text-neutral-500 group-hover:text-black"}`})}),m.jsx("button",{onClick:()=>p(!0),className:"group p-2 rounded-full hover:bg-black/5 transition-all",title:"Table of Contents",children:m.jsx(SL,{className:`w-5 h-5 ${w.theme==="dark"?"text-neutral-400 group-hover:text-white":"text-neutral-500 group-hover:text-black"}`})}),m.jsx("h1",{className:"text-sm font-bold truncate opacity-80 flex-1 min-w-0",children:a.title})]}),m.jsxs("div",{className:"flex items-center gap-2 md:gap-4 shrink-0",children:[!a.pdfUrl&&m.jsxs("div",{className:"relative",children:[m.jsx("button",{onClick:()=>v(!y),className:`p-2 rounded-full transition-all border ${y?"bg-black/5":"bg-transparent border-transparent"} ${w.theme==="dark"?"hover:bg-white/10 text-neutral-300":"hover:bg-black/5 text-neutral-600"}`,children:m.jsx("span",{className:"font-serif font-bold text-lg",children:"Aa"})}),y&&m.jsxs("div",{className:`absolute top-12 right-0 w-72 p-5 rounded-2xl shadow-2xl border animate-slide-up origin-top-right z-50
                                    ${w.theme==="dark"?"bg-[#1a1a1a] border-white/10 text-white":"bg-white border-neutral-200 text-neutral-900"}
                                `,children:[m.jsx("div",{className:"flex bg-black/5 rounded-lg p-1 mb-6 border border-black/5",children:[{id:"light",icon:m.jsx(u$,{className:"w-4 h-4"}),label:"Light"},{id:"sepia",icon:m.jsx("div",{className:"w-3 h-3 rounded-full bg-[#d6cbb1]"}),label:"Sepia"},{id:"dark",icon:m.jsx(d$,{className:"w-4 h-4"}),label:"Dark"}].map(V=>m.jsxs("button",{onClick:()=>A(Q=>({...Q,theme:V.id})),className:`flex-1 flex items-center justify-center gap-2 py-2 rounded-md text-xs font-bold uppercase tracking-wider transition-all
                                                    ${w.theme===V.id?w.theme==="dark"?"bg-white text-black":"bg-black text-white":"hover:bg-black/5 text-neutral-500"}
                                                `,children:[V.icon," ",V.label]},V.id))}),m.jsxs("div",{className:"mb-6",children:[m.jsx("p",{className:"text-[10px] font-bold uppercase tracking-widest opacity-50 mb-2",children:"Typography"}),m.jsx("div",{className:"flex gap-2",children:[{id:"sans",label:"Sans",font:"font-sans"},{id:"serif",label:"Serif",font:"font-serif"},{id:"mono",label:"Mono",font:"font-mono"}].map(V=>m.jsx("button",{onClick:()=>A(Q=>({...Q,fontFamily:V.id})),className:`flex-1 py-3 border rounded-lg text-sm transition-all ${V.font}
                                                        ${w.fontFamily===V.id?"border-current bg-current/5":"border-transparent bg-black/5 hover:bg-black/10"}
                                                    `,children:V.label},V.id))})]}),m.jsxs("div",{className:"mb-4",children:[m.jsxs("div",{className:"flex justify-between items-center mb-2",children:[m.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest opacity-50",children:"Size"}),m.jsxs("span",{className:"text-xs font-mono",children:[w.fontSize,"px"]})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("button",{onClick:()=>A(V=>({...V,fontSize:Math.max(12,V.fontSize-1)})),className:"p-2 hover:bg-black/5 rounded",children:m.jsx("span",{className:"text-xs font-bold",children:"A-"})}),m.jsx("input",{type:"range",min:"12",max:"32",value:w.fontSize,onChange:V=>A(Q=>({...Q,fontSize:parseInt(V.target.value)})),className:"flex-1 h-1 bg-neutral-500/20 rounded-lg appearance-none cursor-pointer [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:w-3 [&::-webkit-slider-thumb]:h-3 [&::-webkit-slider-thumb]:bg-current [&::-webkit-slider-thumb]:rounded-full"}),m.jsx("button",{onClick:()=>A(V=>({...V,fontSize:Math.min(32,V.fontSize+1)})),className:"p-2 hover:bg-black/5 rounded",children:m.jsx("span",{className:"text-lg font-bold",children:"A+"})})]})]})]})]}),m.jsxs("div",{className:"hidden md:flex items-center gap-3 px-3 py-1.5 rounded-full border border-current/10 bg-current/5",children:[m.jsxs("span",{className:"text-xs font-bold tabular-nums",children:[H,"%"]}),m.jsx("div",{className:"w-16 h-1 bg-current/20 rounded-full overflow-hidden",children:m.jsx("div",{className:"h-full bg-current transition-all duration-300",style:{width:`${H}%`}})})]})]})]}),d&&m.jsxs("div",{className:"fixed inset-0 z-[60] flex",children:[m.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>p(!1)}),m.jsxs("div",{className:`relative w-80 h-full shadow-2xl flex flex-col animate-slide-right border-r ${w.theme==="dark"?"bg-[#0f0f0f] border-white/10":"bg-white border-neutral-200"}`,children:[m.jsxs("div",{className:"p-6 border-b border-current/10 flex items-center justify-between",children:[m.jsx("h3",{className:"font-bold text-sm uppercase tracking-widest",children:"Chapters"}),m.jsx("button",{onClick:()=>p(!1),children:m.jsx(Yc,{className:"w-5 h-5"})})]}),m.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:$.map((V,Q)=>m.jsxs("button",{onClick:()=>{var ce;O(Q),p(!1),(ce=z.current)==null||ce.scrollTo(0,0)},className:`w-full text-left p-4 rounded-xl transition-all border ${M===Q?"bg-current/10 border-current/20 font-bold":"bg-transparent border-transparent hover:bg-current/5 text-current/60"}`,children:[m.jsxs("span",{className:"text-xs opacity-50 block mb-1",children:["Chapter ",Q+1]}),m.jsx("span",{className:"text-sm",children:V.title})]},V.id))})]})]}),m.jsx("main",{className:"flex-1 relative overflow-hidden flex flex-col pb-24",children:a.pdfUrl&&F?m.jsxs("div",{className:"flex-1 relative bg-black/50 overflow-auto flex justify-center p-4 md:p-10 custom-scrollbar pb-32",children:[m.jsx("div",{className:"shadow-[0_0_60px_rgba(0,0,0,0.5)] border border-white/5 transition-transform origin-top",style:{transform:`scale(${R})`},children:m.jsx(VY,{file:F,onLoadSuccess:({numPages:V})=>T(V),loading:m.jsx("div",{className:"text-white p-10 font-mono text-xs",children:"Loading Document..."}),error:m.jsx("div",{className:"text-red-400 p-10 font-mono text-xs",children:"PDF Error"}),children:m.jsx(eW,{pageNumber:_,scale:1,className:"shadow-2xl",renderTextLayer:!1,renderAnnotationLayer:!1})})}),m.jsxs("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 bg-black/80 backdrop-blur-xl border border-white/10 p-2 rounded-full flex items-center gap-4 shadow-2xl z-40 text-white",children:[m.jsx("button",{onClick:()=>D(V=>Math.max(1,V-1)),disabled:_<=1,className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-white/10 disabled:opacity-30",children:m.jsx(Lk,{className:"w-5 h-5"})}),m.jsxs("span",{className:"font-mono text-xs font-bold",children:[_," / ",C]}),m.jsx("button",{onClick:()=>D(V=>Math.min(C,V+1)),disabled:_>=C,className:"w-10 h-10 flex items-center justify-center rounded-full hover:bg-white/10 disabled:opacity-30",children:m.jsx(Fk,{className:"w-5 h-5"})}),m.jsx("div",{className:"w-px h-6 bg-white/20 mx-2"}),m.jsx("button",{onClick:()=>L(V=>Math.max(.5,V-.1)),className:"p-2 hover:text-white text-neutral-400",children:m.jsx(EL,{className:"w-4 h-4"})}),m.jsx("button",{onClick:()=>L(V=>Math.min(2,V+.1)),className:"p-2 hover:text-white text-neutral-400",children:m.jsx(lb,{className:"w-4 h-4"})})]})]}):m.jsx("div",{ref:z,className:"flex-1 overflow-y-auto custom-scrollbar scroll-smooth",children:m.jsx("div",{className:"max-w-3xl mx-auto py-8 md:py-12 px-4 md:px-0",children:m.jsxs("div",{className:`
                                min-h-[calc(100vh-200px)] p-6 md:p-16 rounded-[12px] transition-all duration-300 border
                                ${G()}
                            `,children:[m.jsxs("div",{className:"mb-8 md:mb-12 text-center pb-8 border-b border-current/10",children:[m.jsxs("h4",{className:"text-[10px] md:text-xs font-bold uppercase tracking-[0.2em] opacity-40 mb-3",children:["Chapter ",M+1]}),m.jsx("h2",{className:`text-2xl md:text-5xl font-bold leading-tight ${w.fontFamily==="serif"?"font-serif":"font-sans"}`,children:ee.title})]}),m.jsx("article",{className:`prose prose-base md:prose-lg max-w-none transition-all duration-300 ${X()}`,style:{fontSize:`${w.fontSize}px`,lineHeight:w.lineHeight,color:"currentColor"},children:m.jsx("div",{className:"opacity-90",children:ie(ee.content||"Start writing to see content here...")})}),m.jsxs("div",{className:"mt-12 md:mt-20 pt-10 border-t border-current/10 flex flex-col md:flex-row gap-4 justify-between items-center opacity-50 text-[10px] md:text-xs font-mono uppercase tracking-widest text-center md:text-left",children:[m.jsx("span",{children:a.title}),m.jsxs("span",{children:[M+1," / ",$.length]})]})]})})})}),!a.pdfUrl&&m.jsx("div",{className:`fixed bottom-0 left-0 right-0 p-4 border-t z-50 backdrop-blur-xl ${w.theme==="dark"?"bg-black/90 border-white/10":w.theme==="light"?"bg-white/90 border-black/10":"bg-[#f4ecd8]/90 border-[#5b4636]/10"}`,children:m.jsxs("div",{className:"max-w-2xl mx-auto flex items-center justify-between gap-4",children:[m.jsxs("button",{onClick:()=>{var V;M>0&&(O(Q=>Q-1),(V=z.current)==null||V.scrollTo(0,0))},disabled:M===0,className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-full transition-all border ${w.theme==="dark"?"hover:bg-white/10 border-white/10 text-white disabled:opacity-30":"hover:bg-black/5 border-black/10 text-black disabled:opacity-30"}`,children:[m.jsx(Lk,{className:"w-4 h-4"}),m.jsx("span",{className:"font-bold text-xs uppercase tracking-wider",children:"Prev"})]}),m.jsxs("div",{className:`text-[10px] font-mono font-bold uppercase tracking-widest opacity-50 ${w.theme==="dark"?"text-white":"text-black"}`,children:[M+1," / ",$.length]}),m.jsxs("button",{onClick:()=>{var V;M<$.length-1&&(O(Q=>Q+1),(V=z.current)==null||V.scrollTo(0,0))},disabled:M===$.length-1,className:`flex-1 flex items-center justify-center gap-2 px-4 py-3 rounded-full transition-all border ${w.theme==="dark"?"hover:bg-white/10 border-white/10 text-white disabled:opacity-30":"hover:bg-black/5 border-black/10 text-black disabled:opacity-30"}`,children:[m.jsx("span",{className:"font-bold text-xs uppercase tracking-wider",children:"Next"}),m.jsx(Fk,{className:"w-4 h-4"})]})]})})]})},{useParams:sW,Link:rW}=gi,aW=()=>{const{username:i}=sW(),{allBooks:e}=Yi(),[t,n]=k.useState(null),[s,a]=k.useState(null),[o,c]=k.useState([]),[u,d]=k.useState(!0);if(k.useEffect(()=>{(async()=>{if(d(!0),!i){d(!1);return}const v=await e9(i);if(v&&v.sellerProfile){n(v.sellerProfile),a(v.siteConfig);const w=v.books||[];c(w),d(!1);return}setTimeout(()=>{const w=Object.values(va).find(A=>{var C,T;return((C=A.creatorSite)==null?void 0:C.slug)===i||((T=A.username)==null?void 0:T.replace("@",""))===i||A.id===i});if(w&&w.creatorSite){n(w),a(w.creatorSite);const A=[...qd,...e],T=Array.from(new Map(A.map(_=>[_.id,_])).values()).filter(_=>w.creatorSite.showcasedBookIds.includes(_.id)&&_.sellerId===w.id);c(T)}d(!1)},800)})()},[i,e]),k.useEffect(()=>(document.body.style.backgroundColor=(s==null?void 0:s.theme)==="light-elegant"?"#ffffff":"#0a0a0a",document.body.style.color=(s==null?void 0:s.theme)==="light-elegant"?"#000000":"#ffffff",()=>{document.body.style.backgroundColor="",document.body.style.color=""}),[s]),u)return m.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-black text-white font-mono",children:[m.jsx("div",{className:"w-16 h-16 border-4 border-white/20 border-t-white rounded-full animate-spin mb-4"}),m.jsx("p",{className:"uppercase tracking-widest text-xs",children:"Resolving host: ebook-engine.github.io..."})]});if(!t||!s)return m.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-black text-neutral-500 font-mono text-center p-6",children:[m.jsx("div",{className:"mb-4",children:"404"}),m.jsx("h1",{className:"text-xl text-white mb-2",children:"Site Not Found"}),m.jsxs("p",{className:"text-sm",children:['The GitHub Pages site for "',i,'" does not exist.']})]});const p=s.theme==="light-elegant";return m.jsxs("div",{className:`min-h-screen font-sans ${p?"bg-white text-neutral-900":"bg-[#050505] text-white"}`,children:[m.jsxs("div",{className:"bg-[#1a1a1a] text-neutral-400 text-[10px] font-mono py-1 px-4 flex items-center gap-4 border-b border-[#333]",children:[m.jsxs("div",{className:"flex gap-1.5",children:[m.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-red-500/50"}),m.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-yellow-500/50"}),m.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-green-500/50"})]}),m.jsxs("div",{className:"flex-1 bg-[#000] rounded px-3 py-0.5 flex items-center gap-2",children:[m.jsx(LA,{className:"w-3 h-3 text-neutral-500"}),m.jsxs("span",{children:["https://ebook-engine.github.io/",s.slug]})]})]}),m.jsxs("div",{className:"max-w-4xl mx-auto px-6 py-20",children:[m.jsxs("header",{className:"text-center mb-20 animate-slide-up",children:[m.jsx("div",{className:`w-32 h-32 mx-auto rounded-full overflow-hidden mb-6 border-4 ${p?"border-neutral-100 shadow-xl":"border-white/10 shadow-[0_0_40px_rgba(255,255,255,0.1)]"}`,children:s.profileImageUrl?m.jsx("img",{src:s.profileImageUrl,alt:t.name,className:"w-full h-full object-cover"}):m.jsx("div",{className:`w-full h-full flex items-center justify-center text-3xl font-bold ${p?"bg-neutral-100":"bg-white/10"}`,children:t.name.charAt(0)})}),m.jsx("h1",{className:"text-4xl md:text-6xl font-black tracking-tight mb-4",children:s.displayName}),m.jsx("p",{className:`text-lg md:text-xl font-light max-w-2xl mx-auto leading-relaxed ${p?"text-neutral-600":"text-neutral-400"}`,children:s.tagline}),m.jsxs("div",{className:"flex justify-center gap-6 mt-8",children:[m.jsxs("button",{className:`flex items-center gap-2 px-6 py-2 rounded-full border transition-all ${p?"border-neutral-200 hover:bg-neutral-100":"border-white/10 hover:bg-white/10"}`,children:[m.jsx(LA,{className:"w-4 h-4"}),m.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Follow"})]}),m.jsxs("button",{className:`flex items-center gap-2 px-6 py-2 rounded-full border transition-all ${p?"border-neutral-200 hover:bg-neutral-100":"border-white/10 hover:bg-white/10"}`,children:[m.jsx(XC,{className:"w-4 h-4"}),m.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Website"})]})]})]}),m.jsxs("main",{children:[m.jsxs("div",{className:`flex items-center gap-4 mb-10 ${p?"border-neutral-200":"border-white/10"} border-b pb-4`,children:[m.jsx(ki,{className:`w-5 h-5 ${p?"text-neutral-400":"text-neutral-500"}`}),m.jsx("h2",{className:"text-sm font-bold uppercase tracking-widest",children:"Published Works"})]}),o.length>0?m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:o.map(y=>m.jsxs("div",{className:`group flex gap-6 p-6 rounded-2xl transition-all hover:-translate-y-1 ${p?"bg-neutral-50 hover:bg-white hover:shadow-xl":"bg-white/5 hover:bg-white/10 hover:shadow-[0_10px_40px_rgba(0,0,0,0.5)]"}`,children:[m.jsx("div",{className:`w-24 h-36 flex-shrink-0 shadow-lg rounded overflow-hidden ${p?"":"border border-white/10"}`,children:m.jsx("img",{src:y.coverImageUrl,alt:y.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"})}),m.jsxs("div",{className:"flex flex-col justify-center",children:[m.jsxs("div",{className:"mb-auto",children:[m.jsx("span",{className:`text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded-full mb-2 inline-block ${p?"bg-neutral-200 text-neutral-600":"bg-white/10 text-neutral-400"}`,children:y.genre}),m.jsx("h3",{className:"text-xl font-bold leading-tight mb-1",children:y.title}),m.jsxs("p",{className:`text-sm ${p?"text-neutral-500":"text-neutral-400"}`,children:[y.description.substring(0,60),"..."]})]}),m.jsxs("div",{className:"flex items-center justify-between mt-4",children:[m.jsx("span",{className:"font-mono text-lg font-medium",children:y.price===0?"Free":`${y.price}`}),m.jsxs(rW,{to:`/store?bookId=${y.id}`,className:`flex items-center gap-2 text-xs font-bold uppercase tracking-widest hover:underline ${p?"text-blue-600":"text-blue-400"}`,children:["Get Book ",m.jsx(IA,{className:"w-3 h-3"})]})]})]})]},y.id))}):m.jsx("div",{className:`text-center py-20 border border-dashed rounded-xl ${p?"border-neutral-300 text-neutral-400":"border-white/10 text-neutral-600"}`,children:m.jsx("p",{className:"font-mono text-xs uppercase tracking-widest",children:"No books deployed yet."})})]}),m.jsx("footer",{className:`mt-32 pt-10 border-t text-center ${p?"border-neutral-200 text-neutral-400":"border-white/10 text-neutral-600"}`,children:m.jsxs("p",{className:"text-xs font-mono",children:[" ",new Date().getFullYear()," ",s.displayName,". Hosted via Ebook-Engine."]})})]})]})},{useNavigate:oW}=gi,SD=()=>{oW();const[i,e]=k.useState("init");k.useEffect(()=>{const n=setTimeout(()=>{e("menu")},2e3);return()=>clearTimeout(n)},[]);const t=()=>{e("launch"),setTimeout(()=>{const n=lC();window.location.href=`${n}/ebook-studio`},1500)};return i==="init"?m.jsxs("div",{className:"fixed inset-0 bg-black flex flex-col items-center justify-center z-50",children:[m.jsxs("div",{className:"relative",children:[m.jsx("div",{className:"absolute inset-0 bg-white/20 blur-2xl rounded-full animate-pulse-slow"}),m.jsx(Ya,{className:"w-24 h-24 border border-white/50 bg-black relative z-10"})]}),m.jsxs("div",{className:"mt-8 flex flex-col items-center gap-3",children:[m.jsx("h1",{className:"text-white text-3xl font-black tracking-tighter uppercase animate-slide-up font-sans",children:"CO-WRITTER"}),m.jsxs("div",{className:"flex items-center gap-3 text-neutral-500 font-mono text-[10px] uppercase tracking-[0.2em] animate-fade-in delay-200",children:[m.jsx("span",{className:"w-1.5 h-1.5 bg-green-500 rounded-full animate-ping"}),"SYSTEM ONLINE"]})]})]}):i==="launch"?m.jsxs("div",{className:"fixed inset-0 bg-black flex flex-col items-center justify-center z-50 overflow-hidden",children:[m.jsx("div",{className:"absolute inset-0 bg-white/5 animate-pulse-square"}),m.jsx(Ya,{className:"w-32 h-32 border border-white bg-black animate-spin-slow scale-125 transition-transform duration-1000"}),m.jsx("h2",{className:"mt-12 text-white text-xl font-bold uppercase tracking-[0.5em] animate-pulse",children:"Establishing Uplink..."})]}):m.jsxs("div",{className:"min-h-screen bg-[#050505] text-white flex flex-col items-center justify-center relative overflow-hidden font-sans selection:bg-white/20",children:[m.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(255,255,255,0.02)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,0.02)_1px,transparent_1px)] bg-[size:6rem_6rem] [mask-image:radial-gradient(ellipse_80%_80%_at_50%_0%,#000_70%,transparent_100%)]"}),m.jsx("div",{className:"absolute top-12 left-1/2 -translate-x-1/2",children:m.jsxs("div",{className:"inline-flex items-center gap-3 px-5 py-2 rounded-full bg-white/5 border border-white/10 backdrop-blur-md shadow-2xl",children:[m.jsx(lw,{className:"w-4 h-4 text-indigo-400"}),m.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.2em] text-neutral-400",children:"Agentic Workflow Engine v3.0"})]})}),m.jsxs("div",{className:"z-10 w-full max-w-[1200px] px-8 grid grid-cols-1 lg:grid-cols-2 gap-20 items-center mt-10",children:[m.jsxs("div",{className:"text-left space-y-8",children:[m.jsxs("h1",{className:"text-6xl md:text-8xl font-black tracking-tighter text-white leading-[0.9]",children:["Studio ",m.jsx("br",{}),m.jsx("span",{className:"text-transparent bg-clip-text bg-gradient-to-b from-neutral-200 to-neutral-600",children:"Environment"})]}),m.jsx("p",{className:"text-neutral-500 max-w-lg text-base md:text-lg leading-relaxed font-light",children:"Welcome to your dedicated creation workspace. Access your projects, configure your AI agents, and write without distractions."})]}),m.jsxs("div",{className:"space-y-6 w-full max-w-md mx-auto lg:ml-auto",children:[m.jsx("button",{onClick:t,className:"group w-full relative overflow-hidden bg-white text-black p-1.5 rounded-[2rem] transition-all hover:scale-[1.02] active:scale-[0.98] shadow-[0_0_40px_rgba(255,255,255,0.1)] hover:shadow-[0_0_60px_rgba(255,255,255,0.2)]",children:m.jsxs("div",{className:"relative z-10 bg-white border border-neutral-200 rounded-[1.5rem] px-8 py-8 flex items-center justify-between",children:[m.jsxs("div",{className:"text-left",children:[m.jsxs("h3",{className:"text-xl font-black uppercase tracking-tight flex items-center gap-3",children:[m.jsx($a,{className:"w-6 h-6"})," Enter Studio"]}),m.jsx("p",{className:"text-[11px] text-neutral-500 font-mono mt-2 font-bold tracking-widest",children:"NEW PROJECT / OPEN RECENT"})]}),m.jsx("div",{className:"w-12 h-12 rounded-full bg-black text-white flex items-center justify-center transition-transform group-hover:rotate-45 group-hover:scale-110",children:m.jsx(Zq,{className:"w-6 h-6"})})]})}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("button",{className:"group relative overflow-hidden bg-[#0A0A0A] border border-white/10 p-6 rounded-[1.5rem] hover:bg-[#111] transition-colors text-left hover:border-white/20",children:[m.jsx(lf,{className:"w-8 h-8 text-neutral-600 mb-4 group-hover:text-white transition-colors"}),m.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-wider",children:"Agent Settings"}),m.jsx("p",{className:"text-[10px] text-neutral-500 mt-1",children:"Configure Models & Personas"})]}),m.jsxs("button",{className:"group relative overflow-hidden bg-[#0A0A0A] border border-white/10 p-6 rounded-[1.5rem] hover:bg-[#111] transition-colors text-left hover:border-white/20",children:[m.jsx(ki,{className:"w-8 h-8 text-neutral-600 mb-4 group-hover:text-white transition-colors"}),m.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-wider",children:"Archives"}),m.jsx("p",{className:"text-[10px] text-neutral-500 mt-1",children:"View past drafts"})]})]})]})]})]})},lW=()=>m.jsx("div",{className:"min-h-screen w-full relative bg-transparent font-sans pt-32 pb-20",children:m.jsxs("div",{className:"container mx-auto px-6 max-w-4xl relative z-10 animate-slide-up",children:[m.jsxs("div",{className:"text-center mb-16",children:[m.jsx("h1",{className:"text-4xl md:text-6xl font-black text-white tracking-tighter mb-4",children:"Contact Support"}),m.jsx("p",{className:"text-neutral-400 text-lg",children:"We are here to help you."})]}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[m.jsxs("div",{className:"md:col-span-2 bg-[#0b0b0b] border border-white/10 rounded-[32px] p-8 md:p-12 shadow-2xl",children:[m.jsx("h3",{className:"text-2xl font-bold text-white mb-8",children:"Get in Touch"}),m.jsxs("div",{className:"space-y-8",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Merchant Name"}),m.jsx("p",{className:"text-white font-medium text-lg",children:Fr}),m.jsx("p",{className:"text-neutral-400 text-sm mt-1",children:"Created by OpenDev Labs"})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Registered Address"}),m.jsxs("p",{className:"text-neutral-300 leading-relaxed",children:["Gala No. 1, 1st Floor, Malwa,",m.jsx("br",{}),"Patanwala Industrial Estate, LBS Marg,",m.jsx("br",{}),"Ghatkopar West, Mumbai - 400086."]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Support Channels"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white/5 rounded-xl border border-white/5",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-white text-black flex items-center justify-center",children:m.jsx(i$,{className:"w-4 h-4"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-xs text-neutral-500 uppercase font-bold",children:"Email Us"}),m.jsx("a",{href:"mailto:opendev-labs.help@gmail.com",className:"text-white hover:text-brand-accent transition-colors",children:"opendev-labs.help@gmail.com"})]})]}),m.jsxs("div",{className:"flex items-center gap-4 p-4 bg-white/5 rounded-xl border border-white/5",children:[m.jsx("div",{className:"w-10 h-10 rounded-full bg-black border border-white/20 text-white flex items-center justify-center",children:m.jsx(XC,{className:"w-4 h-4"})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-xs text-neutral-500 uppercase font-bold",children:"Website"}),m.jsx("a",{href:"https://opendev-labs.github.io",target:"_blank",rel:"noopener noreferrer",className:"text-white hover:text-brand-accent transition-colors",children:"opendev-labs.github.io"})]})]})]})]})]})]}),m.jsxs("div",{className:"flex flex-col gap-6",children:[m.jsxs("div",{className:"bg-[#1e1e1e] border border-white/5 rounded-[32px] p-8 flex flex-col justify-between flex-grow",children:[m.jsxs("div",{children:[m.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Response Time"}),m.jsx("p",{className:"text-neutral-400 text-sm leading-relaxed mb-6",children:"Our support team usually responds within 24 hours. For urgent inquiries regarding payments, please include your Transaction ID."})]}),m.jsxs("div",{className:"bg-white/5 rounded-2xl p-6 border border-white/5",children:[m.jsx("p",{className:"text-xs font-bold text-neutral-500 uppercase tracking-widest mb-2",children:"Operational Hours"}),m.jsx("p",{className:"text-white font-medium",children:"Mon - Fri"}),m.jsx("p",{className:"text-neutral-400 text-sm",children:"9:00 AM - 6:00 PM IST"})]})]}),m.jsxs("div",{className:"bg-[#1e1e1e] border border-white/5 rounded-[32px] p-8",children:[m.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Connect"}),m.jsxs("div",{className:"space-y-4",children:[m.jsxs("a",{href:"https://instagram.com/iamyash.io",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-neutral-300 hover:text-white transition-colors group",children:[m.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center group-hover:bg-pink-600 group-hover:text-white transition-all",children:m.jsx(Uk,{className:"w-4 h-4"})}),m.jsx("span",{className:"text-sm font-medium",children:"@iamyash.io"})]}),m.jsxs("a",{href:"https://instagram.com/opendev-labs",target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 text-neutral-300 hover:text-white transition-colors group",children:[m.jsx("div",{className:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center group-hover:bg-pink-600 group-hover:text-white transition-all",children:m.jsx(Uk,{className:"w-4 h-4"})}),m.jsx("span",{className:"text-sm font-medium",children:"@opendev-labs"})]})]})]})]})]})]})}),cW=()=>m.jsx("div",{className:"min-h-screen w-full relative bg-transparent font-sans pt-32 pb-20",children:m.jsxs("div",{className:"container mx-auto px-6 max-w-4xl relative z-10 animate-slide-up",children:[m.jsxs("div",{className:"text-center mb-16",children:[m.jsx("div",{className:"w-16 h-16 mx-auto bg-[#1e1e1e] rounded-2xl flex items-center justify-center border border-white/10 mb-6 shadow-lg",children:m.jsx($a,{className:"w-8 h-8 text-white"})}),m.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white tracking-tighter mb-4",children:"Shipping Policy"}),m.jsx("p",{className:"text-neutral-400 text-sm font-mono uppercase tracking-widest",children:"Instant Digital Delivery"})]}),m.jsx("div",{className:"bg-[#0b0b0b] border border-white/10 rounded-[32px] p-8 md:p-12 shadow-2xl",children:m.jsxs("div",{className:"space-y-8 text-neutral-300 leading-relaxed",children:[m.jsxs("section",{children:[m.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"1. Digital Delivery"}),m.jsxs("p",{children:[Fr," is a digital marketplace. We do not ship physical products. Upon successful payment, delivery of your eBook is ",m.jsx("strong",{children:"instant"}),"."]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"2. Accessing Your Order"}),m.jsxs("ul",{className:"list-disc list-inside ml-4 space-y-2 text-neutral-400",children:[m.jsxs("li",{children:[m.jsx("strong",{children:"Dashboard:"}),' Access via "Purchase History" immediately.']}),m.jsxs("li",{children:[m.jsx("strong",{children:"Email:"})," A download link is sent to your registered email."]})]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"3. Shipping Costs"}),m.jsxs("p",{children:["There are ",m.jsx("strong",{children:"zero shipping charges"})," applicable to any purchase on ",Fr,"."]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"4. Delays"}),m.jsx("p",{children:"If you do not receive access within 5 minutes of payment, please verify your email spam folder or contact support."})]})]})})]})}),uW=()=>m.jsx("div",{className:"min-h-screen w-full relative bg-transparent font-sans pt-32 pb-20",children:m.jsxs("div",{className:"container mx-auto px-6 max-w-4xl relative z-10 animate-slide-up",children:[m.jsxs("div",{className:"text-center mb-16",children:[m.jsx("div",{className:"w-16 h-16 mx-auto bg-[#1e1e1e] rounded-2xl flex items-center justify-center border border-white/10 mb-6 shadow-lg",children:m.jsx(WC,{className:"w-8 h-8 text-white"})}),m.jsx("h1",{className:"text-4xl md:text-5xl font-black text-white tracking-tighter mb-4",children:"Refund Policy"}),m.jsx("p",{className:"text-neutral-400 text-sm font-mono uppercase tracking-widest",children:"Digital Goods & Services"})]}),m.jsx("div",{className:"bg-[#0b0b0b] border border-white/10 rounded-[32px] p-8 md:p-12 shadow-2xl",children:m.jsxs("div",{className:"space-y-8 text-neutral-300 leading-relaxed",children:[m.jsxs("div",{className:"p-6 bg-red-900/10 border border-red-500/20 rounded-2xl",children:[m.jsx("h3",{className:"text-red-400 font-bold mb-2 uppercase tracking-widest text-xs",children:"Important Notice"}),m.jsxs("p",{className:"text-sm text-neutral-300",children:["Due to the nature of digital goods (eBooks), which can be downloaded instantly, orders are generally ",m.jsx("strong",{children:"non-refundable"})," once processed."]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"1. Cancellations"}),m.jsx("p",{children:"As our products are instant digital downloads, orders cannot be cancelled once the payment is processed and the download link has been generated."})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"2. Eligibility for Refunds"}),m.jsx("p",{children:"We may consider a refund request under these exceptional circumstances:"}),m.jsxs("ul",{className:"list-disc list-inside ml-4 mt-2 space-y-1 text-neutral-400",children:[m.jsx("li",{children:"The eBook file is corrupt or technically defective."}),m.jsx("li",{children:"Duplicate payment for the same item."})]}),m.jsx("p",{className:"mt-2 text-sm text-neutral-500",children:"Requests must be made within 7 days of purchase."})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"3. Processing Timeline"}),m.jsx("p",{children:"Approved refunds are processed within 5-7 working days. The amount will be credited back to your original payment method."})]})]})})]})}),dW=()=>m.jsxs("div",{className:"min-h-screen w-full relative bg-transparent font-sans pt-32 pb-20",children:[m.jsx("div",{className:"fixed inset-0 z-[-1] pointer-events-none",children:m.jsx("div",{className:"absolute bottom-[20%] left-[10%] w-[400px] h-[400px] bg-white/5 rounded-full blur-[100px]"})}),m.jsxs("div",{className:"container mx-auto px-6 max-w-4xl relative z-10 animate-slide-up",children:[m.jsxs("div",{className:"text-center mb-16",children:[m.jsx("div",{className:"w-16 h-16 mx-auto bg-[#1e1e1e] rounded-2xl flex items-center justify-center border border-white/10 mb-6 shadow-lg",children:m.jsx(ki,{className:"w-8 h-8 text-white"})}),m.jsx("h1",{className:"text-4xl md:text-6xl font-black text-white tracking-tighter mb-4",children:"Terms of Service"}),m.jsxs("p",{className:"text-neutral-400 text-sm font-mono uppercase tracking-widest",children:["Effective Date: ",new Date().toLocaleDateString()]})]}),m.jsx("div",{className:"bg-[#0b0b0b] border border-white/10 rounded-[32px] p-8 md:p-12 shadow-2xl",children:m.jsxs("div",{className:"space-y-10 text-neutral-300 leading-relaxed",children:[m.jsxs("section",{children:[m.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"1. Agreement to Terms"}),m.jsxs("p",{children:["By accessing ",m.jsx("span",{className:"text-white font-mono",children:"ebook-engine.github.io"}),", you agree to be bound by these Terms of Service. If you do not agree to abide by the terms of this Agreement, you are not authorized to use or access the Website."]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"2. Intellectual Property"}),m.jsxs("p",{children:["The Platform and its original content, features, and functionality are owned by ",Fr," and are protected by international copyright, trademark, patent, trade secret, and other intellectual property or proprietary rights laws."]}),m.jsxs("p",{className:"mt-2 text-sm text-neutral-500 bg-white/5 p-4 rounded-xl border border-white/5",children:[m.jsx("strong",{children:"Note on AI Content:"})," Content generated via our AI tools belongs to the user (you), subject to the terms of the underlying model providers (Google Gemini)."]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"3. Google API Services"}),m.jsx("p",{children:"Our application integrates with Google API Services. By using these features, you acknowledge and agree to be bound by Google's Terms of Service."}),m.jsxs("ul",{className:"list-disc list-inside ml-4 mt-2 text-neutral-400",children:[m.jsx("li",{children:"We do not transfer user data to third parties for surveillance."}),m.jsx("li",{children:"We do not sell user data sourced from Google APIs."}),m.jsx("li",{children:"We do not use user data for advertising purposes."})]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"4. User Accounts"}),m.jsx("p",{children:"When you create an account with us, you must provide information that is accurate, complete, and current at all times. Failure to do so constitutes a breach of the Terms, which may result in immediate termination of your account on our Service."})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"5. Limitation of Liability"}),m.jsxs("p",{children:["In no event shall ",Fr,", nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses."]})]}),m.jsxs("section",{children:[m.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"6. Governing Law"}),m.jsx("p",{children:"These Terms shall be governed and construed in accordance with the laws of India, without regard to its conflict of law provisions."})]})]})})]})]}),hW=()=>m.jsxs("div",{className:"min-h-screen w-full relative bg-transparent font-sans pt-32 pb-20",children:[m.jsx("div",{className:"fixed inset-0 z-[-1] pointer-events-none",children:m.jsx("div",{className:"absolute top-[20%] right-[10%] w-[500px] h-[500px] bg-white/5 rounded-full blur-[120px]"})}),m.jsxs("div",{className:"container mx-auto px-6 max-w-4xl relative z-10 animate-slide-up",children:[m.jsxs("div",{className:"text-center mb-16",children:[m.jsx("div",{className:"flex justify-center mb-6",children:m.jsx(Ya,{className:"w-20 h-20 border border-white/20 bg-black shadow-[0_0_30px_rgba(255,255,255,0.1)] rounded-full",isActive:!0})}),m.jsx("h1",{className:"text-4xl md:text-6xl font-black text-white tracking-tighter mb-4",children:"Privacy Policy"}),m.jsxs("p",{className:"text-neutral-400 text-sm font-mono uppercase tracking-widest",children:["Last Updated: ",new Date().toLocaleDateString()]})]}),m.jsxs("div",{className:"bg-[#0b0b0b] border border-white/10 rounded-[32px] p-8 md:p-12 shadow-2xl relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 right-0 p-6 opacity-50 hidden md:block",children:m.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-green-900/20 border border-green-500/30 rounded-full",children:[m.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),m.jsx("span",{className:"text-[10px] font-bold text-green-500 uppercase tracking-widest",children:"Google Core Security Active"})]})}),m.jsxs("div",{className:"space-y-12 text-neutral-300 leading-relaxed",children:[m.jsxs("section",{children:[m.jsxs("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-3",children:[m.jsx("span",{className:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center text-sm border border-white/10",children:"01"}),"Introduction"]}),m.jsxs("p",{children:["At ",Fr,", accessible from ",m.jsx("span",{className:"text-white font-mono",children:"ebook-engine.github.io"}),", the privacy of our visitors and creators is our top priority. This Privacy Policy document contains types of information that is collected and recorded by ",Fr," and how we use it."]})]}),m.jsxs("section",{children:[m.jsxs("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-3",children:[m.jsx("span",{className:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center text-sm border border-white/10",children:"02"}),"Google Core Data & Security"]}),m.jsxs("div",{className:"bg-white/5 border border-white/10 rounded-2xl p-6",children:[m.jsx("p",{className:"mb-4 text-sm font-medium text-white",children:"We comply with Google API Services User Data Policy, including the Limited Use requirements."}),m.jsxs("ul",{className:"space-y-3",children:[m.jsxs("li",{className:"flex gap-3 text-sm text-neutral-400",children:[m.jsx(pi,{className:"w-5 h-5 text-google-blue shrink-0"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Authentication:"})," We use Google OAuth 2.0 to securely authenticate users. Your password is never stored on our servers."]})]}),m.jsxs("li",{className:"flex gap-3 text-sm text-neutral-400",children:[m.jsx(pi,{className:"w-5 h-5 text-google-blue shrink-0"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Database Integrity:"})," User data (such as eBook drafts) is processed using ephemeral secure sessions. Long-term storage leverages secure cloud infrastructure."]})]}),m.jsxs("li",{className:"flex gap-3 text-sm text-neutral-400",children:[m.jsx(pi,{className:"w-5 h-5 text-google-blue shrink-0"}),m.jsxs("span",{children:[m.jsx("strong",{children:"Gemini AI:"})," Content generated via Google Gemini is transmitted over encrypted (TLS 1.3) channels."]})]})]})]})]}),m.jsxs("section",{children:[m.jsxs("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-3",children:[m.jsx("span",{className:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center text-sm border border-white/10",children:"03"}),"Information Collection"]}),m.jsx("p",{className:"mb-4",children:"We collect information to provide better services to all our users:"}),m.jsxs("ul",{className:"list-disc list-inside ml-4 space-y-2 text-neutral-400",children:[m.jsx("li",{children:"Personal identification (Name, Email address, Profile Picture)."}),m.jsx("li",{children:"Log Data (IP address, browser version, visit duration)."}),m.jsx("li",{children:"Transactional Data (Purchase history of eBooks)."})]})]}),m.jsxs("section",{children:[m.jsxs("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-3",children:[m.jsx("span",{className:"w-8 h-8 rounded-lg bg-white/5 flex items-center justify-center text-sm border border-white/10",children:"04"}),"Data Usage & Rights"]}),m.jsx("p",{children:"We use the collected data to maintain our service, notify you about changes, provide customer support, and detect technical issues."}),m.jsx("p",{className:"mt-4",children:"You have the right to request copies of your personal data, request corrections, or request deletion of your account at any time via the User Dashboard."})]})]}),m.jsx("div",{className:"mt-12 pt-8 border-t border-white/5 text-center",children:m.jsx("p",{className:"text-xs text-neutral-600 uppercase tracking-widest",children:"Protected by Ebook-Engine Secure Enclave"})})]})]})]}),{BrowserRouter:fW,Routes:s3,Route:Mn,useLocation:r3,Navigate:pW}=gi,lC=()=>{const i=window.location.hostname;return i.includes("vercel.app")?`https://${i}`:i.includes("localhost")||i.includes("web.app")||i.includes("firebaseapp.com")?"":(i.includes("github.io"),"https://co-writter-studio.web.app")},mW=()=>{const i=r3();return wn.useLayoutEffect(()=>{window.scrollTo(0,0)},[i.pathname]),m.jsx("div",{className:"flex-grow flex flex-col animate-page-enter will-change-transform origin-top",children:m.jsxs(s3,{location:i,children:[m.jsx(Mn,{path:"/",element:m.jsx(H$,{})}),m.jsx(Mn,{path:"/login",element:m.jsx(DL,{})}),m.jsx(Mn,{path:"/store",element:m.jsx(q$,{})}),m.jsx(Mn,{path:"/pricing",element:m.jsx(f9,{})}),m.jsx(Mn,{path:"/dashboard",element:m.jsx(kL,{})}),m.jsx(Mn,{path:"/checkout",element:m.jsx(c9,{})}),m.jsx(Mn,{path:"/s/:slug",element:m.jsx(m9,{})}),m.jsx(Mn,{path:"/site/:username",element:m.jsx(aW,{})}),m.jsx(Mn,{path:"/edit-ebook/:bookId",element:m.jsx(v9,{})}),m.jsx(Mn,{path:"/ebook-studio",element:m.jsx(SD,{})}),m.jsx(Mn,{path:"/studio",element:m.jsx(SD,{})}),m.jsx(Mn,{path:"/read/:bookId",element:m.jsx(iW,{})}),m.jsx(Mn,{path:"/contact",element:m.jsx(lW,{})}),m.jsx(Mn,{path:"/shipping-policy",element:m.jsx(cW,{})}),m.jsx(Mn,{path:"/refund-policy",element:m.jsx(uW,{})}),m.jsx(Mn,{path:"/terms-and-conditions",element:m.jsx(dW,{})}),m.jsx(Mn,{path:"/privacy-policy",element:m.jsx(hW,{})})]})},i.pathname)},dx=({children:i})=>{const{currentUser:e,loading:t}=Yi(),n=r3();return t?m.jsx("div",{className:"flex items-center justify-center min-h-screen bg-black",children:m.jsx("div",{className:"w-8 h-8 border-2 border-white/30 border-t-white rounded-full animate-spin"})}):e?i:m.jsx(pW,{to:"/login",state:{from:n},replace:!0})},gW=()=>m.jsxs(s3,{children:[m.jsx(Mn,{path:"/",element:m.jsx(dx,{children:m.jsx(JE,{})})}),m.jsx(Mn,{path:"/ebook-studio",element:m.jsx(dx,{children:m.jsx(JE,{})})}),m.jsx(Mn,{path:"/dashboard",element:m.jsx(dx,{children:m.jsx(kL,{})})}),m.jsx(Mn,{path:"/login",element:m.jsx(DL,{})}),m.jsx(Mn,{path:"*",element:m.jsx(dx,{children:m.jsx(JE,{})})})]}),yW=()=>{const i=window.location.hostname.includes("firebaseapp.com")||window.location.hostname.includes("web.app");return wn.useEffect(()=>{s9()},[]),m.jsx(C$,{children:m.jsx(fW,{children:m.jsxs("div",{className:"flex flex-col min-h-screen bg-black font-sans text-foreground overflow-x-hidden relative",children:[m.jsxs("div",{className:"fixed inset-0 z-0 pointer-events-none overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 left-0 w-full h-full bg-[radial-gradient(circle_at_50%_50%,rgba(20,20,30,1)_0%,rgba(0,0,0,1)_100%)]"}),m.jsx("div",{className:"absolute top-[20%] left-[15%] w-32 h-32 border border-white/5 rounded-full animate-float opacity-30 blur-[1px]"}),m.jsx("div",{className:"absolute bottom-[25%] right-[20%] w-64 h-64 border border-white/5 rotate-45 animate-float-delayed opacity-20"}),m.jsx("div",{className:"absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 pointer-events-none"}),m.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-white/10 to-transparent animate-[grid-flow_8s_linear_infinite]"})]}),m.jsxs("div",{className:"flex-grow relative z-10 flex flex-col w-full",children:[!i&&m.jsx(N$,{}),m.jsx("main",{className:"flex-grow flex flex-col",children:i?m.jsx(gW,{}):m.jsx(mW,{})}),!i&&m.jsx(M$,{})]})]})})})},a3=document.getElementById("root");if(!a3)throw new Error("Could not find root element to mount to");const vW=CU.createRoot(a3);vW.render(m.jsx(wn.StrictMode,{children:m.jsx(yW,{})}));
